{"version":3,"file":"react-handsontable.js","sources":["../src/helpers.tsx","../src/settingsMapper.ts","../src/hotColumn.tsx","../src/portalManager.tsx","../../../node_modules/prop-types/node_modules/react-is/cjs/react-is.production.min.js","../../../node_modules/prop-types/node_modules/react-is/index.js","../../../node_modules/object-assign/index.js","../../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../../node_modules/prop-types/factoryWithTypeCheckers.js","../../../node_modules/prop-types/factoryWithThrowingShims.js","../../../node_modules/prop-types/index.js","../src/hotTable.tsx","../src/baseEditorComponent.tsx"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HotEditorElement } from './types';\n\nlet bulkComponentContainer = null;\n\n/**\n * Warning message for the `autoRowSize`/`autoColumnSize` compatibility check.\n */\nexport const AUTOSIZE_WARNING = 'Your `HotTable` configuration includes `autoRowSize`/`autoColumnSize` options, which are not compatible with ' +\n  ' the component-based renderers`. Disable `autoRowSize` and `autoColumnSize` to prevent row and column misalignment.';\n\n/**\n * Default classname given to the wrapper container.\n */\nconst DEFAULT_CLASSNAME = 'hot-wrapper-editor-container';\n\n/**\n * Logs warn to the console if the `console` object is exposed.\n *\n * @param {...*} args Values which will be logged.\n */\nexport function warn(...args) {\n  if (typeof console !== 'undefined') {\n    console.warn(...args);\n  }\n}\n\n/**\n * Filter out and return elements of the provided `type` from the `HotColumn` component's children.\n *\n * @param {React.ReactNode} children HotTable children array.\n * @param {String} type Either `'hot-renderer'` or `'hot-editor'`.\n * @returns {Object|null} A child (React node) or `null`, if no child of that type was found.\n */\nexport function getChildElementByType(children: React.ReactNode, type: string): React.ReactElement | null {\n  const childrenArray: React.ReactNode[] = React.Children.toArray(children);\n  const childrenCount: number = React.Children.count(children);\n  let wantedChild: React.ReactNode | null = null;\n\n  if (childrenCount !== 0) {\n    if (childrenCount === 1 && (childrenArray[0] as React.ReactElement).props[type]) {\n      wantedChild = childrenArray[0];\n\n    } else {\n      wantedChild = childrenArray.find((child) => {\n        return (child as React.ReactElement).props[type] !== void 0;\n      });\n    }\n  }\n\n  return (wantedChild as React.ReactElement) || null;\n}\n\n/**\n * Get the reference to the original editor class.\n *\n * @param {React.ReactElement} editorElement React element of the editor class.\n * @returns {Function} Original class of the editor component.\n */\nexport function getOriginalEditorClass(editorElement: HotEditorElement) {\n  if (!editorElement) {\n    return null;\n  }\n\n  return editorElement.type.WrappedComponent ? editorElement.type.WrappedComponent : editorElement.type;\n}\n\n/**\n * Remove editor containers from DOM.\n *\n * @param {Document} [doc] Document to be used.\n * @param {Map} editorCache The editor cache reference.\n */\nexport function removeEditorContainers(doc = document): void {\n  doc.querySelectorAll(`[class^=\"${DEFAULT_CLASSNAME}\"]`).forEach((domNode) => {\n    if (domNode.parentNode) {\n      domNode.parentNode.removeChild(domNode);\n    }\n  });\n}\n\n/**\n * Create an editor portal.\n *\n * @param {Document} [doc] Document to be used.\n * @param {React.ReactElement} editorElement Editor's element.\n * @param {Map} editorCache The editor cache reference.\n * @returns {React.ReactPortal} The portal for the editor.\n */\nexport function createEditorPortal(doc = document, editorElement: HotEditorElement, editorCache: Map<Function, React.Component>): React.ReactPortal {\n  if (editorElement === null) {\n    return;\n  }\n\n  const editorContainer = doc.createElement('DIV');\n  const {id, className, style} = getContainerAttributesProps(editorElement.props, false);\n\n  if (id) {\n    editorContainer.id = id;\n  }\n\n  editorContainer.className = [DEFAULT_CLASSNAME, className].join(' ');\n\n  if (style) {\n    Object.assign(editorContainer.style, style);\n  }\n\n  doc.body.appendChild(editorContainer);\n\n  return ReactDOM.createPortal(editorElement, editorContainer);\n}\n\n/**\n * Get an editor element extended with a instance-emitting method.\n *\n * @param {React.ReactNode} children Component children.\n * @param {Map} editorCache Component's editor cache.\n * @returns {React.ReactElement} An editor element containing the additional methods.\n */\nexport function getExtendedEditorElement(children: React.ReactNode, editorCache: Map<Function, object>): React.ReactElement | null {\n  const editorElement = getChildElementByType(children, 'hot-editor');\n  const editorClass = getOriginalEditorClass(editorElement);\n\n  if (!editorElement) {\n    return null;\n  }\n\n  return React.cloneElement(editorElement, {\n    emitEditorInstance: (editorInstance) => {\n      editorCache.set(editorClass, editorInstance);\n    },\n    isEditor: true\n  } as object);\n}\n\n/**\n * Create a react component and render it to an external DOM done.\n *\n * @param {React.ReactElement} rElement React element to be used as a base for the component.\n * @param {Object} props Props to be passed to the cloned element.\n * @param {Function} callback Callback to be called after the component has been mounted.\n * @param {Document} [ownerDocument] The owner document to set the portal up into.\n * @returns {{portal: React.ReactPortal, portalContainer: HTMLElement}} An object containing the portal and its container.\n */\nexport function createPortal(rElement: React.ReactElement, props, callback: Function, ownerDocument: Document = document): {\n  portal: React.ReactPortal,\n  portalContainer: HTMLElement\n} {\n  if (!ownerDocument) {\n    ownerDocument = document;\n  }\n\n  if (!bulkComponentContainer) {\n    bulkComponentContainer = ownerDocument.createDocumentFragment();\n  }\n\n  const portalContainer = ownerDocument.createElement('DIV');\n  bulkComponentContainer.appendChild(portalContainer);\n\n  const extendedRendererElement = React.cloneElement(rElement, {\n    key: `${props.row}-${props.col}`,\n    ...props\n  });\n\n  return {\n    portal: ReactDOM.createPortal(extendedRendererElement, portalContainer, `${props.row}-${props.col}-${Math.random()}`),\n    portalContainer\n  };\n}\n\n/**\n * Get an object containing the `id`, `className` and `style` keys, representing the corresponding props passed to the\n * component.\n *\n * @param {Object} props Object containing the react element props.\n * @param {Boolean} randomizeId If set to `true`, the function will randomize the `id` property when no `id` was present in the `prop` object.\n * @returns An object containing the `id`, `className` and `style` keys, representing the corresponding props passed to the\n * component.\n */\nexport function getContainerAttributesProps(props, randomizeId: boolean = true): {id: string, className: string, style: object} {\n  return {\n    id: props.id || (randomizeId ? 'hot-' + Math.random().toString(36).substring(5) : void 0),\n    className: props.className || '',\n    style: props.style || {},\n  }\n}\n\n/**\n * Add the `UNSAFE_` prefixes to the deprecated lifecycle methods for React >= 16.3.\n *\n * @param {Object} instance Instance to have the methods renamed.\n */\nexport function addUnsafePrefixes(instance: {\n  UNSAFE_componentWillUpdate?: Function,\n  componentWillUpdate: Function,\n  UNSAFE_componentWillMount?: Function,\n  componentWillMount: Function\n}): void {\n  const reactSemverArray = React.version.split('.').map((v) => parseInt(v));\n  const shouldPrefix = reactSemverArray[0] >= 16 && reactSemverArray[1] >= 3;\n\n  if (shouldPrefix) {\n    instance.UNSAFE_componentWillUpdate = instance.componentWillUpdate;\n    instance.componentWillUpdate = void 0;\n\n    instance.UNSAFE_componentWillMount = instance.componentWillMount;\n    instance.componentWillMount = void 0;\n  }\n}\n","import Handsontable from 'handsontable';\nimport { HotTableProps } from './types';\n\nexport class SettingsMapper {\n  /**\n   * Parse component settings into Handosntable-compatible settings.\n   *\n   * @param {Object} properties Object containing properties from the HotTable object.\n   * @returns {Object} Handsontable-compatible settings object.\n   */\n  static getSettings(properties: HotTableProps): Handsontable.GridSettings {\n    let newSettings: Handsontable.GridSettings = {};\n\n    if (properties.settings) {\n      let settings = properties.settings;\n      for (const key in settings) {\n        if (settings.hasOwnProperty(key)) {\n          newSettings[key] = settings[key];\n        }\n      }\n    }\n\n    for (const key in properties) {\n      if (key !== 'settings' && key !== 'children' && properties.hasOwnProperty(key)) {\n        newSettings[key] = properties[key];\n      }\n    }\n\n    return newSettings;\n  }\n}\n","import React, { ReactPortal } from 'react';\nimport { HotTableProps, HotColumnProps } from './types';\nimport {\n  addUnsafePrefixes,\n  createEditorPortal,\n  getExtendedEditorElement\n} from './helpers';\nimport { SettingsMapper } from './settingsMapper';\nimport Handsontable from 'handsontable';\n\nclass HotColumn extends React.Component<HotColumnProps, {}> {\n  internalProps: string[];\n  columnSettings: Handsontable.ColumnSettings;\n\n  /**\n   * Local editor portal cache.\n   *\n   * @private\n   * @type {ReactPortal}\n   */\n  private localEditorPortal: ReactPortal = null;\n\n  /**\n   * HotColumn class constructor.\n   *\n   * @param {HotColumnProps} props Component props.\n   * @param {*} [context] Component context.\n   */\n  constructor(props: HotColumnProps, context?: any) {\n    super(props, context);\n\n    addUnsafePrefixes(this);\n  }\n\n  /**\n   * Get the local editor portal cache property.\n   *\n   * @return {ReactPortal} Local editor portal.\n   */\n  getLocalEditorPortal(): ReactPortal {\n    return this.localEditorPortal;\n  }\n\n  /**\n   * Set the local editor portal cache property.\n   *\n   * @param {ReactPortal} portal Local editor portal.\n   */\n  setLocalEditorPortal(portal): void {\n    this.localEditorPortal = portal;\n  }\n\n  /**\n   * Filter out all the internal properties and return an object with just the Handsontable-related props.\n   *\n   * @returns {Object}\n   */\n  getSettingsProps(): HotTableProps {\n    this.internalProps = ['__componentRendererColumns', '_emitColumnSettings', '_columnIndex', '_getChildElementByType', '_getRendererWrapper',\n      '_getEditorClass', '_getEditorCache', '_getOwnerDocument', 'hot-renderer', 'hot-editor', 'children'];\n\n    return Object.keys(this.props)\n      .filter(key => {\n        return !this.internalProps.includes(key);\n      })\n      .reduce((obj, key) => {\n        obj[key] = this.props[key];\n\n        return obj;\n      }, {});\n  }\n\n  /**\n   * Check whether the HotColumn component contains a provided prop.\n   *\n   * @param {String} propName Property name.\n   * @returns {Boolean}\n   */\n  hasProp(propName: string): boolean {\n    return !!this.props[propName];\n  }\n\n  /**\n   * Get the editor element for the current column.\n   *\n   * @returns {React.ReactElement} React editor component element.\n   */\n  getLocalEditorElement(): React.ReactElement | null {\n    return getExtendedEditorElement(this.props.children, this.props._getEditorCache());\n  }\n\n  /**\n   * Create the column settings based on the data provided to the `HotColumn` component and it's child components.\n   */\n  createColumnSettings(): void {\n    const rendererElement: React.ReactElement = this.props._getChildElementByType(this.props.children, 'hot-renderer');\n    const editorElement: React.ReactElement = this.getLocalEditorElement();\n\n    this.columnSettings = SettingsMapper.getSettings(this.getSettingsProps()) as unknown as Handsontable.ColumnSettings;\n\n    if (rendererElement !== null) {\n      this.columnSettings.renderer = this.props._getRendererWrapper(rendererElement);\n      this.props._componentRendererColumns.set(this.props._columnIndex, true);\n\n    } else if (this.hasProp('renderer')) {\n      this.columnSettings.renderer = this.props.renderer;\n\n    } else {\n      this.columnSettings.renderer = void 0;\n    }\n\n    if (editorElement !== null) {\n      this.columnSettings.editor = this.props._getEditorClass(editorElement);\n\n    } else if (this.hasProp('editor')) {\n      this.columnSettings.editor = this.props.editor;\n\n    } else {\n      this.columnSettings.editor = void 0;\n    }\n  }\n\n  /**\n   * Create the local editor portal and its destination HTML element if needed.\n   *\n   * @param {React.ReactNode} [children] Children of the HotTable instance. Defaults to `this.props.children`.\n   */\n  createLocalEditorPortal(children = this.props.children): void {\n    const editorCache = this.props._getEditorCache();\n    const localEditorElement: React.ReactElement = getExtendedEditorElement(children, editorCache);\n\n    if (localEditorElement) {\n      this.setLocalEditorPortal(createEditorPortal(this.props._getOwnerDocument(), localEditorElement, editorCache));\n    }\n  }\n\n  /**\n   * Emit the column settings to the parent using a prop passed from the parent.\n   */\n  emitColumnSettings(): void {\n    this.props._emitColumnSettings(this.columnSettings, this.props._columnIndex);\n  }\n\n  /*\n  ---------------------------------------\n  ------- React lifecycle methods -------\n  ---------------------------------------\n  */\n\n  /**\n   * Logic performed before the mounting of the HotColumn component.\n   */\n  componentWillMount(): void {\n    this.createLocalEditorPortal();\n  }\n\n  /**\n   * Logic performed after the mounting of the HotColumn component.\n   */\n  componentDidMount(): void {\n    this.createColumnSettings();\n    this.emitColumnSettings();\n  }\n\n  /**\n   * Logic performed before the updating of the HotColumn component.\n   */\n  componentWillUpdate(nextProps: Readonly<HotColumnProps>, nextState: Readonly<{}>, nextContext: any): void {\n    this.createLocalEditorPortal(nextProps.children);\n  }\n\n  /**\n   * Logic performed after the updating of the HotColumn component.\n   */\n  componentDidUpdate(): void {\n    this.createColumnSettings();\n    this.emitColumnSettings();\n  }\n\n  /**\n   * Render the portals of the editors, if there are any.\n   *\n   * @returns {React.ReactElement}\n   */\n  render(): React.ReactElement {\n    return (\n      <React.Fragment>\n        {this.getLocalEditorPortal()}\n      </React.Fragment>\n    )\n  }\n}\n\nexport { HotColumn };\n","import React from 'react';\n\n/**\n * Component class used to manage the renderer component portals.\n */\nexport class PortalManager extends React.Component<{}, {portals?: React.ReactPortal[]}> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      portals: []\n    };\n  }\n\n  render(): React.ReactNode {\n    return (\n      <React.Fragment>\n        {this.state.portals}\n      </React.Fragment>\n    )\n  }\n}\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar has = Function.call.bind(Object.prototype.hasOwnProperty);\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message) {\n    this.message = message;\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName  + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n          return null;\n        }\n      }\n\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from\n      // props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import React from 'react';\nimport Handsontable from 'handsontable';\nimport { SettingsMapper } from './settingsMapper';\nimport { PortalManager } from './portalManager';\nimport { HotColumn } from './hotColumn';\nimport * as packageJson from '../package.json';\nimport {\n  HotTableProps,\n  HotEditorElement\n} from './types';\nimport {\n  AUTOSIZE_WARNING,\n  createEditorPortal,\n  createPortal,\n  getChildElementByType,\n  getContainerAttributesProps,\n  getExtendedEditorElement,\n  getOriginalEditorClass,\n  addUnsafePrefixes,\n  removeEditorContainers,\n  warn\n} from './helpers';\nimport PropTypes from 'prop-types';\n\n/**\n * A Handsontable-ReactJS wrapper.\n *\n * To implement, use the `HotTable` tag with properties corresponding to Handsontable options.\n * For example:\n *\n * ```js\n * <HotTable id=\"hot\" data={dataObject} contextMenu={true} colHeaders={true} width={600} height={300} stretchH=\"all\" />\n *\n * // is analogous to\n * let hot = new Handsontable(document.getElementById('hot'), {\n *    data: dataObject,\n *    contextMenu: true,\n *    colHeaders: true,\n *    width: 600\n *    height: 300\n * });\n *\n * ```\n *\n * @class HotTable\n */\nclass HotTable extends React.Component<HotTableProps, {}> {\n  /**\n   * The `id` of the main Handsontable DOM element.\n   *\n   * @type {String}\n   */\n  id: string = null;\n  /**\n   * Reference to the Handsontable instance.\n   *\n   * @type {Object}\n   */\n  hotInstance: Handsontable = null;\n  /**\n   * Reference to the main Handsontable DOM element.\n   *\n   * @type {HTMLElement}\n   */\n  hotElementRef: HTMLElement = null;\n  /**\n   * Class name added to the component DOM element.\n   *\n   * @type {String}\n   */\n  className: string;\n  /**\n   * Style object passed to the component.\n   *\n   * @type {React.CSSProperties}\n   */\n  style: React.CSSProperties;\n\n  /**\n   * Array of object containing the column settings.\n   *\n   * @type {Array}\n   */\n  columnSettings: Handsontable.ColumnSettings[] = [];\n\n  /**\n   * Component used to manage the renderer portals.\n   *\n   * @type {React.Component}\n   */\n  portalManager: PortalManager = null;\n\n  /**\n   * Array containing the portals cashed to be rendered in bulk after Handsontable's render cycle.\n   */\n  portalCacheArray: React.ReactPortal[] = [];\n\n  /**\n   * Global editor portal cache.\n   *\n   * @private\n   * @type {React.ReactPortal}\n   */\n  private globalEditorPortal: React.ReactPortal = null;\n\n  /**\n   * The rendered cells cache.\n   *\n   * @private\n   * @type {Map}\n   */\n  private renderedCellCache: Map<string, HTMLTableCellElement> = new Map();\n\n  /**\n   * Editor cache.\n   *\n   * @private\n   * @type {Map}\n   */\n  private editorCache: Map<Function, React.Component> = new Map();\n\n  /**\n   * Map with column indexes (or a string = 'global') as keys, and booleans as values. Each key represents a component-based editor\n   * declared for the used column index, or a global one, if the key is the `global` string.\n   *\n   * @private\n   * @type {Map}\n   */\n  private componentRendererColumns: Map<number | string, boolean> = new Map();\n\n  /**\n   * HotTable class constructor.\n   *\n   * @param {HotTableProps} props Component props.\n   * @param {*} [context] Component context.\n   */\n  constructor(props: HotTableProps, context?: any) {\n    super(props, context);\n\n    addUnsafePrefixes(this);\n  }\n\n  /**\n   * Package version getter.\n   *\n   * @returns The version number of the package.\n   */\n  static get version(): string {\n    return (packageJson as any).version;\n  }\n\n  /**\n   * Prop types to be checked at runtime.\n   */\n  static propTypes: object = {\n    style: PropTypes.object,\n    id: PropTypes.string,\n    className: PropTypes.string\n  };\n\n  /**\n   * Get the rendered table cell cache.\n   *\n   * @returns {Map}\n   */\n  getRenderedCellCache(): Map<string, HTMLTableCellElement> {\n    return this.renderedCellCache;\n  }\n\n  /**\n   * Get the editor cache and return it.\n   *\n   * @returns {Map}\n   */\n  getEditorCache(): Map<Function, React.Component> {\n    return this.editorCache;\n  }\n\n  /**\n   * Get the global editor portal property.\n   *\n   * @return {React.ReactPortal} The global editor portal.\n   */\n  getGlobalEditorPortal(): React.ReactPortal {\n    return this.globalEditorPortal;\n  }\n\n  /**\n   * Set the private editor portal cache property.\n   *\n   * @param {React.ReactPortal} portal Global editor portal.\n   */\n  setGlobalEditorPortal(portal: React.ReactPortal): void {\n    this.globalEditorPortal = portal;\n  }\n\n  /**\n   * Clear both the editor and the renderer cache.\n   */\n  clearCache(): void {\n    const renderedCellCache = this.getRenderedCellCache();\n\n    this.setGlobalEditorPortal(null);\n    removeEditorContainers(this.getOwnerDocument());\n    this.getEditorCache().clear();\n\n    renderedCellCache.clear();\n\n    this.componentRendererColumns.clear();\n  }\n\n  /**\n   * Get the `Document` object corresponding to the main component element.\n   *\n   * @returns The `Document` object used by the component.\n   */\n  getOwnerDocument() {\n    return this.hotElementRef ? this.hotElementRef.ownerDocument : document;\n  }\n\n  /**\n   * Set the reference to the main Handsontable DOM element.\n   *\n   * @param {HTMLElement} element The main Handsontable DOM element.\n   */\n  private setHotElementRef(element: HTMLElement): void {\n    this.hotElementRef = element;\n  }\n\n  /**\n   * Return a renderer wrapper function for the provided renderer component.\n   *\n   * @param {React.ReactElement} rendererElement React renderer component.\n   * @returns {Handsontable.renderers.Base} The Handsontable rendering function.\n   */\n  getRendererWrapper(rendererElement: React.ReactElement): Handsontable.renderers.Base | any {\n    const hotTableComponent = this;\n\n    return function (instance, TD, row, col, prop, value, cellProperties) {\n      const renderedCellCache = hotTableComponent.getRenderedCellCache();\n\n      if (renderedCellCache.has(`${row}-${col}`)) {\n        TD.innerHTML = renderedCellCache.get(`${row}-${col}`).innerHTML;\n      }\n\n      if (TD && !TD.getAttribute('ghost-table')) {\n\n        const {portal, portalContainer} = createPortal(rendererElement, {\n          TD,\n          row,\n          col,\n          prop,\n          value,\n          cellProperties,\n          isRenderer: true\n        }, () => {\n        }, TD.ownerDocument);\n\n        while (TD.firstChild) {\n          TD.removeChild(TD.firstChild);\n        }\n\n        TD.appendChild(portalContainer);\n\n        hotTableComponent.portalCacheArray.push(portal);\n      }\n\n      renderedCellCache.set(`${row}-${col}`, TD);\n\n      return TD;\n    };\n  }\n\n  /**\n   * Create a fresh class to be used as an editor, based on the provided editor React element.\n   *\n   * @param {React.ReactElement} editorElement React editor component.\n   * @returns {Function} A class to be passed to the Handsontable editor settings.\n   */\n  getEditorClass(editorElement: HotEditorElement): typeof Handsontable.editors.BaseEditor {\n    const editorClass = getOriginalEditorClass(editorElement);\n    const editorCache = this.getEditorCache();\n    let cachedComponent: React.Component = editorCache.get(editorClass);\n\n    return this.makeEditorClass(cachedComponent);\n  }\n\n  /**\n   * Create a class to be passed to the Handsontable's settings.\n   *\n   * @param {React.ReactElement} editorComponent React editor component.\n   * @returns {Function} A class to be passed to the Handsontable editor settings.\n   */\n  makeEditorClass(editorComponent: React.Component): typeof Handsontable.editors.BaseEditor {\n    const customEditorClass = class CustomEditor extends Handsontable.editors.BaseEditor implements Handsontable._editors.Base {\n      editorComponent: React.Component;\n\n      constructor(hotInstance, row, col, prop, TD, cellProperties) {\n        super(hotInstance, row, col, prop, TD, cellProperties);\n\n        (editorComponent as any).hotCustomEditorInstance = this;\n\n        this.editorComponent = editorComponent;\n      }\n\n      focus() {\n      }\n\n      getValue() {\n      }\n\n      setValue() {\n      }\n\n      open() {\n      }\n\n      close() {\n      }\n    } as any;\n\n    // Fill with the rest of the BaseEditor methods\n    Object.getOwnPropertyNames(Handsontable.editors.BaseEditor.prototype).forEach(propName => {\n      if (propName === 'constructor') {\n        return;\n      }\n\n      customEditorClass.prototype[propName] = function (...args) {\n        return editorComponent[propName].call(editorComponent, ...args);\n      }\n    });\n\n    return customEditorClass;\n  }\n\n  /**\n   * Get the renderer element for the entire HotTable instance.\n   *\n   * @returns {React.ReactElement} React renderer component element.\n   */\n  getGlobalRendererElement(): React.ReactElement {\n    const hotTableSlots: React.ReactNode = this.props.children;\n\n    return getChildElementByType(hotTableSlots, 'hot-renderer');\n  }\n\n  /**\n   * Get the editor element for the entire HotTable instance.\n   *\n   * @param {React.ReactNode} [children] Children of the HotTable instance. Defaults to `this.props.children`.\n   * @returns {React.ReactElement} React editor component element.\n   */\n  getGlobalEditorElement(children: React.ReactNode = this.props.children): HotEditorElement | null {\n    return getExtendedEditorElement(children, this.getEditorCache());\n  }\n\n  /**\n   * Create the global editor portal and its destination HTML element if needed.\n   *\n   * @param {React.ReactNode} [children] Children of the HotTable instance. Defaults to `this.props.children`.\n   */\n  createGlobalEditorPortal(children: React.ReactNode = this.props.children): void {\n    const globalEditorElement: HotEditorElement = this.getGlobalEditorElement(children);\n\n    if (globalEditorElement) {\n      this.setGlobalEditorPortal(createEditorPortal(this.getOwnerDocument() ,globalEditorElement, this.getEditorCache()))\n    }\n  }\n\n  /**\n   * Create a new settings object containing the column settings and global editors and renderers.\n   *\n   * @returns {Handsontable.GridSettings} New global set of settings for Handsontable.\n   */\n  createNewGlobalSettings(): Handsontable.GridSettings {\n    const newSettings = SettingsMapper.getSettings(this.props);\n    const globalRendererNode = this.getGlobalRendererElement();\n    const globalEditorNode = this.getGlobalEditorElement();\n\n    newSettings.columns = this.columnSettings.length ? this.columnSettings : newSettings.columns;\n\n    if (globalEditorNode) {\n      newSettings.editor = this.getEditorClass(globalEditorNode);\n\n    } else {\n      newSettings.editor = this.props.editor || (this.props.settings ? this.props.settings.editor : void 0);\n    }\n\n    if (globalRendererNode) {\n      newSettings.renderer = this.getRendererWrapper(globalRendererNode);\n      this.componentRendererColumns.set('global', true);\n\n    } else {\n      newSettings.renderer = this.props.renderer || (this.props.settings ? this.props.settings.renderer : void 0);\n    }\n\n    return newSettings;\n  }\n\n  /**\n   * Detect if `autoRowSize` or `autoColumnSize` is defined, and if so, throw an incompatibility warning.\n   *\n   * @param {Handsontable.GridSettings} newGlobalSettings New global settings passed as Handsontable config.\n   */\n  displayAutoSizeWarning(newGlobalSettings: Handsontable.GridSettings): void {\n    if (this.hotInstance.getPlugin('autoRowSize').enabled || this.hotInstance.getPlugin('autoColumnSize').enabled) {\n      if (this.componentRendererColumns.size > 0) {\n        warn(AUTOSIZE_WARNING);\n      }\n    }\n  }\n\n  /**\n   * Sets the column settings based on information received from HotColumn.\n   *\n   * @param {HotTableProps} columnSettings Column settings object.\n   * @param {Number} columnIndex Column index.\n   */\n  setHotColumnSettings(columnSettings: Handsontable.ColumnSettings, columnIndex: number): void {\n    this.columnSettings[columnIndex] = columnSettings;\n  }\n\n  /**\n   * Handsontable's `beforeRender` hook callback.\n   */\n  handsontableBeforeRender(): void {\n    this.getRenderedCellCache().clear();\n  }\n\n  /**\n   * Handsontable's `afterRender` hook callback.\n   */\n  handsontableAfterRender(): void {\n    this.portalManager.setState(() => {\n      return Object.assign({}, {\n        portals: this.portalCacheArray\n      });\n\n    }, () => {\n      this.portalCacheArray.length = 0;\n    });\n  }\n\n  /**\n   * Call the `updateSettings` method for the Handsontable instance.\n   *\n   * @param {Object} newSettings The settings object.\n   */\n  private updateHot(newSettings: Handsontable.GridSettings): void {\n    this.hotInstance.updateSettings(newSettings, false);\n  }\n\n  /**\n   * Set the portal manager ref.\n   *\n   * @param {React.ReactComponent} pmComponent The PortalManager component.\n   */\n  private setPortalManagerRef(pmComponent: PortalManager): void {\n    this.portalManager = pmComponent;\n  }\n\n  /*\n  ---------------------------------------\n  ------- React lifecycle methods -------\n  ---------------------------------------\n  */\n\n  /**\n   * Logic performed before the mounting of the component.\n   */\n  componentWillMount(): void {\n    this.clearCache();\n    this.createGlobalEditorPortal();\n  }\n\n  /**\n   * Initialize Handsontable after the component has mounted.\n   */\n  componentDidMount(): void {\n    const hotTableComponent = this;\n    const newGlobalSettings = this.createNewGlobalSettings();\n\n    this.hotInstance = new Handsontable.Core(this.hotElementRef, newGlobalSettings);\n\n    this.hotInstance.addHook('beforeRender', function (isForced) {\n      hotTableComponent.handsontableBeforeRender();\n    });\n\n    this.hotInstance.addHook('afterRender', function () {\n      hotTableComponent.handsontableAfterRender();\n    });\n\n    // `init` missing in Handsontable's type definitions.\n    (this.hotInstance as any).init();\n\n    this.displayAutoSizeWarning(newGlobalSettings);\n  }\n\n  /**\n   * Logic performed before the component update.\n   */\n  componentWillUpdate(nextProps: Readonly<HotTableProps>, nextState: Readonly<{}>, nextContext: any): void {\n    this.clearCache();\n    removeEditorContainers(this.getOwnerDocument());\n    this.createGlobalEditorPortal(nextProps.children);\n  }\n\n  /**\n   * Logic performed after the component update.\n   */\n  componentDidUpdate(): void {\n    const newGlobalSettings = this.createNewGlobalSettings();\n    this.updateHot(newGlobalSettings);\n\n    this.displayAutoSizeWarning(newGlobalSettings);\n  }\n\n  /**\n   * Destroy the Handsontable instance when the parent component unmounts.\n   */\n  componentWillUnmount(): void {\n    this.hotInstance.destroy();\n    removeEditorContainers(this.getOwnerDocument());\n  }\n\n  /**\n   * Render the component.\n   */\n  render(): React.ReactElement {\n    const {id, className, style} = getContainerAttributesProps(this.props);\n    const isHotColumn = (childNode: any) => childNode.type === HotColumn;\n    let children = React.Children.toArray(this.props.children);\n\n    // filter out anything that's not a HotColumn\n    children = children.filter(function (childNode: any) {\n      return isHotColumn(childNode);\n    });\n\n    // clone the HotColumn nodes and extend them with the callbacks\n    let childClones = children.map((childNode: React.ReactElement, columnIndex: number) => {\n      return React.cloneElement(childNode, {\n        _componentRendererColumns: this.componentRendererColumns,\n        _emitColumnSettings: this.setHotColumnSettings.bind(this),\n        _columnIndex: columnIndex,\n        _getChildElementByType: getChildElementByType.bind(this),\n        _getRendererWrapper: this.getRendererWrapper.bind(this),\n        _getEditorClass: this.getEditorClass.bind(this),\n        _getOwnerDocument: this.getOwnerDocument.bind(this),\n        _getEditorCache: this.getEditorCache.bind(this),\n        children: childNode.props.children\n      } as object);\n    });\n\n    // add the global editor to the list of children\n    childClones.push(this.getGlobalEditorPortal());\n\n    return (\n      <React.Fragment>\n        <div ref={this.setHotElementRef.bind(this)} id={id} className={className} style={style}>\n          {childClones}\n        </div>\n        <PortalManager ref={this.setPortalManagerRef.bind(this)}></PortalManager>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default HotTable;\nexport { HotTable };\n","import React from 'react';\nimport Handsontable from 'handsontable';\nimport { HotEditorProps } from './types';\n\nclass BaseEditorComponent<P = {}, S = {}, SS = any> extends React.Component<P | HotEditorProps, S> implements Handsontable._editors.Base {\n  name = 'BaseEditorComponent';\n  instance = null;\n  row = null;\n  col = null;\n  prop = null;\n  TD = null;\n  originalValue = null;\n  cellProperties = null;\n  state = null;\n  hotInstance = null;\n  hotCustomEditorInstance = null;\n  hot = null;\n\n  constructor(props) {\n    super(props);\n\n    if (props.emitEditorInstance) {\n      props.emitEditorInstance(this);\n    }\n  }\n\n  // BaseEditor methods:\n  private _fireCallbacks(...args) {\n    (Handsontable.editors.BaseEditor.prototype as any)._fireCallbacks.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  beginEditing(...args) {\n    return Handsontable.editors.BaseEditor.prototype.beginEditing.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  cancelChanges(...args) {\n    return Handsontable.editors.BaseEditor.prototype.cancelChanges.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  checkEditorSection(...args) {\n    return Handsontable.editors.BaseEditor.prototype.checkEditorSection.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  close(...args) {\n    return Handsontable.editors.BaseEditor.prototype.close.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  discardEditor(...args) {\n    return Handsontable.editors.BaseEditor.prototype.discardEditor.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  enableFullEditMode(...args) {\n    return Handsontable.editors.BaseEditor.prototype.enableFullEditMode.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  extend(...args) {\n    return Handsontable.editors.BaseEditor.prototype.extend.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  finishEditing(...args) {\n    return Handsontable.editors.BaseEditor.prototype.finishEditing.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  focus(...args) {\n    return Handsontable.editors.BaseEditor.prototype.focus.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  getValue(...args) {\n    return Handsontable.editors.BaseEditor.prototype.getValue.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  init(...args) {\n    return Handsontable.editors.BaseEditor.prototype.init.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  isInFullEditMode(...args) {\n    return Handsontable.editors.BaseEditor.prototype.isInFullEditMode.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  isOpened(...args) {\n    return Handsontable.editors.BaseEditor.prototype.isOpened.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  isWaiting(...args) {\n    return Handsontable.editors.BaseEditor.prototype.isWaiting.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  open(...args) {\n    return Handsontable.editors.BaseEditor.prototype.open.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  prepare(row, col, prop, TD, originalValue, cellProperties) {\n    this.hotInstance = cellProperties.instance;\n    this.row = row;\n    this.col = col;\n    this.prop = prop;\n    this.TD = TD;\n    this.originalValue = originalValue;\n    this.cellProperties = cellProperties;\n\n    return Handsontable.editors.BaseEditor.prototype.prepare.call(this.hotCustomEditorInstance, row, col, prop, TD, originalValue, cellProperties);\n  }\n\n  saveValue(...args) {\n    return Handsontable.editors.BaseEditor.prototype.saveValue.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  setValue(...args) {\n    return Handsontable.editors.BaseEditor.prototype.setValue.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  addHook(...args) {\n    return (Handsontable.editors.BaseEditor.prototype as any).addHook.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  removeHooksByKey(...args) {\n    return (Handsontable.editors.BaseEditor.prototype as any).removeHooksByKey.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  clearHooks(...args) {\n    return (Handsontable.editors.BaseEditor.prototype as any).clearHooks.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  getEditedCell(...args) {\n    return (Handsontable.editors.BaseEditor.prototype as any).getEditedCell.call(this.hotCustomEditorInstance, ...args);\n  }\n\n  getEditedCellsZIndex(...args) {\n    return (Handsontable.editors.BaseEditor.prototype as any).getEditedCellsZIndex.call(this.hotCustomEditorInstance, ...args);\n  }\n}\n\nexport default BaseEditorComponent;\nexport { BaseEditorComponent };\n"],"names":["bulkComponentContainer","AUTOSIZE_WARNING","DEFAULT_CLASSNAME","warn","console","getChildElementByType","children","type","childrenArray","React","Children","toArray","childrenCount","count","wantedChild","props","find","child","getOriginalEditorClass","editorElement","WrappedComponent","removeEditorContainers","doc","document","querySelectorAll","forEach","domNode","parentNode","removeChild","createEditorPortal","editorContainer","createElement","getContainerAttributesProps","id","className","style","join","Object","assign","body","appendChild","ReactDOM","createPortal","getExtendedEditorElement","editorCache","editorClass","cloneElement","emitEditorInstance","editorInstance","set","isEditor","rElement","callback","ownerDocument","createDocumentFragment","portalContainer","extendedRendererElement","key","row","col","portal","Math","random","randomizeId","toString","substring","addUnsafePrefixes","instance","reactSemverArray","version","split","map","v","parseInt","shouldPrefix","UNSAFE_componentWillUpdate","componentWillUpdate","UNSAFE_componentWillMount","componentWillMount","SettingsMapper","properties","newSettings","settings","hasOwnProperty","HotColumn","context","localEditorPortal","internalProps","keys","filter","includes","reduce","obj","propName","_getEditorCache","rendererElement","_getChildElementByType","getLocalEditorElement","columnSettings","getSettings","getSettingsProps","renderer","_getRendererWrapper","_componentRendererColumns","_columnIndex","hasProp","editor","_getEditorClass","localEditorElement","setLocalEditorPortal","_getOwnerDocument","_emitColumnSettings","createLocalEditorPortal","createColumnSettings","emitColumnSettings","nextProps","nextState","nextContext","Fragment","getLocalEditorPortal","Component","PortalManager","state","portals","b","Symbol","c","d","e","f","g","h","k","l","m","n","p","q","r","t","w","x","y","z","a","u","$$typeof","A","module","require$$0","getOwnPropertySymbols","prototype","propIsEnumerable","propertyIsEnumerable","toObject","val","undefined","TypeError","shouldUseNative","test1","String","getOwnPropertyNames","test2","i","fromCharCode","order2","test3","letter","err","target","source","from","to","symbols","s","arguments","length","call","ReactPropTypesSecret","Function","bind","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","componentName","location","propFullName","secret","Error","name","isRequired","getShim","ReactPropTypes","array","bool","func","number","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","require$$2","HotTable","Map","renderedCellCache","globalEditorPortal","getRenderedCellCache","setGlobalEditorPortal","getOwnerDocument","getEditorCache","clear","componentRendererColumns","hotElementRef","hotTableComponent","TD","prop","value","cellProperties","has","innerHTML","get","getAttribute","isRenderer","firstChild","portalCacheArray","push","cachedComponent","makeEditorClass","editorComponent","customEditorClass","hotInstance","hotCustomEditorInstance","Handsontable","editors","BaseEditor","args","hotTableSlots","globalEditorElement","getGlobalEditorElement","globalRendererNode","getGlobalRendererElement","globalEditorNode","columns","getEditorClass","getRendererWrapper","newGlobalSettings","getPlugin","enabled","size","columnIndex","portalManager","setState","updateSettings","pmComponent","clearCache","createGlobalEditorPortal","createNewGlobalSettings","Core","addHook","isForced","handsontableBeforeRender","handsontableAfterRender","init","displayAutoSizeWarning","updateHot","destroy","isHotColumn","childNode","childClones","setHotColumnSettings","getGlobalEditorPortal","ref","setHotElementRef","setPortalManagerRef","packageJson","BaseEditorComponent","_fireCallbacks","beginEditing","cancelChanges","checkEditorSection","close","discardEditor","enableFullEditMode","extend","finishEditing","focus","getValue","isInFullEditMode","isOpened","isWaiting","open","originalValue","prepare","saveValue","setValue","removeHooksByKey","clearHooks","getEditedCell","getEditedCellsZIndex"],"mappings":"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"}