{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import NavBar from'../../components/navBar/navBar';import React,{useState,useEffect}from'react';import GreenCircle from\"../../assets/images/green_circle.png\";import BlueCircle from\"../../assets/images/blue_circle.png\";import IdleTimer from'react-idle-timer';import{useHistory}from\"react-router\";import MenuListPIT from'../../components/menuListPit/menuListPit';import AlertF from\"../../components/alert/alert\";//Página de home con el menú para ir a las aplicaciones de isotracker\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PITRequests=function PITRequests(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),content=_useState2[0],setContent=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),navBar=_useState4[0],setNavBar=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),circles=_useState6[0],setCircles=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var history=useHistory();var CryptoJS=require(\"crypto-js\");var SecureStorage=require(\"secure-web-storage\");var SECRET_KEY='sanud2ha8shd72h';var secureStorage=new SecureStorage(localStorage,{hash:function hash(key){key=CryptoJS.SHA256(key,SECRET_KEY);return key.toString();},encrypt:function encrypt(data){data=CryptoJS.AES.encrypt(data,SECRET_KEY);data=data.toString();return data;},decrypt:function decrypt(data){data=CryptoJS.AES.decrypt(data,SECRET_KEY);data=data.toString(CryptoJS.enc.Utf8);return data;}});useEffect(function(){if(!secureStorage.getItem(\"user\")){history.push(\"/\"+process.env.REACT_APP_PROJECT+\"/\");}},[]);useEffect(function(){setNavBar(/*#__PURE__*/_jsx(NavBar,{}));setContent(/*#__PURE__*/_jsx(MenuListPIT,{success:function success(){return setSuccess(true);}}));setCircles(/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:GreenCircle,alt:\"greenCircle\",className:\"greenCircle__image\"}),/*#__PURE__*/_jsx(\"img\",{src:BlueCircle,alt:\"blueCircle\",className:\"blueCircle__image\"})]}));var body={user:secureStorage.getItem(\"user\")};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[]);document.title=process.env.REACT_APP_APP_NAMEPROJ;document.body.style.zoom=0.8;function handleOnIdle(){var body={user:secureStorage.getItem(\"user\")};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(json){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());secureStorage.clear();history.push(\"/\"+process.env.REACT_APP_PROJECT);}return/*#__PURE__*/_jsxs(\"body\",{children:[/*#__PURE__*/_jsx(IdleTimer,{timeout:1000*60*15,onIdle:handleOnIdle,debounce:250}),/*#__PURE__*/_jsx(\"div\",{style:{zIndex:99999},className:\"alert alert-success \".concat(success?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setSuccess(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"qtracker\"})}),circles,/*#__PURE__*/_jsxs(\"div\",{children:[navBar,content]})]});};export default PITRequests;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/pages/pitrequests/pitrequests.js"],"names":["NavBar","React","useState","useEffect","GreenCircle","BlueCircle","IdleTimer","useHistory","MenuListPIT","AlertF","PITRequests","content","setContent","navBar","setNavBar","circles","setCircles","success","setSuccess","history","CryptoJS","require","SecureStorage","SECRET_KEY","secureStorage","localStorage","hash","key","SHA256","toString","encrypt","data","AES","decrypt","enc","Utf8","getItem","push","process","env","REACT_APP_PROJECT","body","user","options","method","headers","JSON","stringify","fetch","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","document","title","REACT_APP_APP_NAMEPROJ","style","zoom","handleOnIdle","clear","zIndex"],"mappings":"mYAAA,MAAOA,CAAAA,MAAP,KAAmB,gCAAnB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,CAA2BC,SAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,WAAP,KAAwB,sCAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,qCAAvB,CAEA,MAAOC,CAAAA,SAAP,KAAsB,kBAAtB,CACA,OAAQC,UAAR,KAAyB,cAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0CAAxB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,8BAAnB,CAEA;wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAK,eAESR,QAAQ,EAFjB,wCAEdS,OAFc,eAELC,UAFK,8BAGOV,QAAQ,CAAC,IAAD,CAHf,yCAGdW,MAHc,eAGNC,SAHM,8BAISZ,QAAQ,CAAC,IAAD,CAJjB,yCAIda,OAJc,eAILC,UAJK,8BAKSd,QAAQ,CAAC,KAAD,CALjB,yCAKde,OALc,eAKLC,UALK,eAOrB,GAAMC,CAAAA,OAAO,CAAGZ,UAAU,EAA1B,CAEA,GAAMa,CAAAA,QAAQ,CAAGC,OAAO,CAAC,WAAD,CAAxB,CACA,GAAMC,CAAAA,aAAa,CAAGD,OAAO,CAAC,oBAAD,CAA7B,CACA,GAAIE,CAAAA,UAAU,CAAG,iBAAjB,CAEA,GAAIC,CAAAA,aAAa,CAAG,GAAIF,CAAAA,aAAJ,CAAkBG,YAAlB,CAAgC,CAChDC,IAAI,CAAE,QAASA,CAAAA,IAAT,CAAcC,GAAd,CAAmB,CACrBA,GAAG,CAAGP,QAAQ,CAACQ,MAAT,CAAgBD,GAAhB,CAAqBJ,UAArB,CAAN,CAEA,MAAOI,CAAAA,GAAG,CAACE,QAAJ,EAAP,CACH,CAL+C,CAMhDC,OAAO,CAAE,QAASA,CAAAA,OAAT,CAAiBC,IAAjB,CAAuB,CAC5BA,IAAI,CAAGX,QAAQ,CAACY,GAAT,CAAaF,OAAb,CAAqBC,IAArB,CAA2BR,UAA3B,CAAP,CAEAQ,IAAI,CAAGA,IAAI,CAACF,QAAL,EAAP,CAEA,MAAOE,CAAAA,IAAP,CACH,CAZ+C,CAahDE,OAAO,CAAE,QAASA,CAAAA,OAAT,CAAiBF,IAAjB,CAAuB,CAC5BA,IAAI,CAAGX,QAAQ,CAACY,GAAT,CAAaC,OAAb,CAAqBF,IAArB,CAA2BR,UAA3B,CAAP,CAEAQ,IAAI,CAAGA,IAAI,CAACF,QAAL,CAAcT,QAAQ,CAACc,GAAT,CAAaC,IAA3B,CAAP,CAEA,MAAOJ,CAAAA,IAAP,CACH,CAnB+C,CAAhC,CAApB,CAsBA5B,SAAS,CAAC,UAAI,CACV,GAAG,CAACqB,aAAa,CAACY,OAAd,CAAsB,MAAtB,CAAJ,CAAkC,CAC9BjB,OAAO,CAACkB,IAAR,CAAa,IAAIC,OAAO,CAACC,GAAR,CAAYC,iBAAhB,CAAkC,GAA/C,EACH,CACJ,CAJQ,CAIN,EAJM,CAAT,CAMArC,SAAS,CAAC,UAAK,CACXW,SAAS,cAAC,KAAC,MAAD,IAAD,CAAT,CACAF,UAAU,cAAC,KAAC,WAAD,EAAa,OAAO,CAAE,yBAAMM,CAAAA,UAAU,CAAC,IAAD,CAAhB,EAAtB,EAAD,CAAV,CACAF,UAAU,cAAC,oCAAK,YAAK,GAAG,CAAEZ,WAAV,CAAuB,GAAG,CAAC,aAA3B,CAAyC,SAAS,CAAC,oBAAnD,EAAL,cACX,YAAK,GAAG,CAAEC,UAAV,CAAsB,GAAG,CAAC,YAA1B,CAAuC,SAAS,CAAC,mBAAjD,EADW,GAAD,CAAV,CAGA,GAAMoC,CAAAA,IAAI,CAAG,CACTC,IAAI,CAAElB,aAAa,CAACY,OAAd,CAAsB,MAAtB,CADG,CAAb,CAGA,GAAMO,CAAAA,OAAO,CAAG,CACZC,MAAM,CAAE,MADI,CAEZC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFG,CAKZJ,IAAI,CAAEK,IAAI,CAACC,SAAL,CAAeN,IAAf,CALM,CAAhB,CAOAO,KAAK,CAAC,UAAUV,OAAO,CAACC,GAAR,CAAYU,gBAAtB,CAAuC,GAAvC,CAA2CX,OAAO,CAACC,GAAR,CAAYW,mBAAvD,CAA2E,cAA5E,CAA4FP,OAA5F,CAAL,CACKQ,IADL,CACU,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EADlB,EAEKF,IAFL,0FAEU,iBAAME,IAAN,iKAFV,gEAOH,CAvBQ,CAuBN,EAvBM,CAAT,CAyBAC,QAAQ,CAACC,KAAT,CAAgBjB,OAAO,CAACC,GAAR,CAAYiB,sBAA5B,CACAF,QAAQ,CAACb,IAAT,CAAcgB,KAAd,CAAoBC,IAApB,CAA2B,GAA3B,CAEA,QAASC,CAAAA,YAAT,EAAuB,CACnB,GAAMlB,CAAAA,IAAI,CAAG,CACTC,IAAI,CAAElB,aAAa,CAACY,OAAd,CAAsB,MAAtB,CADG,CAAb,CAGA,GAAMO,CAAAA,OAAO,CAAG,CACZC,MAAM,CAAE,MADI,CAEZC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFG,CAKZJ,IAAI,CAAEK,IAAI,CAACC,SAAL,CAAeN,IAAf,CALM,CAAhB,CAOAO,KAAK,CAAC,UAAUV,OAAO,CAACC,GAAR,CAAYU,gBAAtB,CAAuC,GAAvC,CAA2CX,OAAO,CAACC,GAAR,CAAYW,mBAAvD,CAA2E,cAA5E,CAA4FP,OAA5F,CAAL,CACKQ,IADL,CACU,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EADlB,EAEKF,IAFL,2FAEU,kBAAME,IAAN,uKAFV,kEAKA7B,aAAa,CAACoC,KAAd,GACAzC,OAAO,CAACkB,IAAR,CAAa,IAAMC,OAAO,CAACC,GAAR,CAAYC,iBAA/B,EACH,CAED,mBACI,qCACI,KAAC,SAAD,EACI,OAAO,CAAE,KAAO,EAAP,CAAY,EADzB,CAEI,MAAM,CAAEmB,YAFZ,CAGI,QAAQ,CAAE,GAHd,EADJ,cAMI,YAAK,KAAK,CAAE,CAACE,MAAM,CAAE,KAAT,CAAZ,CACA,SAAS,+BAAyB5C,OAAO,CAAG,aAAH,CAAmB,cAAnD,CADT,CAEA,eAAe,CAAE,iCAAMC,CAAAA,UAAU,CAAC,KAAD,CAAhB,EAFjB,uBAII,KAAC,MAAD,EAAQ,IAAI,CAAC,UAAb,EAJJ,EANJ,CAYKH,OAZL,cAaI,uBACKF,MADL,CAEKF,OAFL,GAbJ,GADJ,CAoBH,CA7GD,CA+GA,cAAeD,CAAAA,WAAf","sourcesContent":["import NavBar from '../../components/navBar/navBar';\r\nimport React, { useState , useEffect} from 'react'\r\nimport GreenCircle from \"../../assets/images/green_circle.png\"\r\nimport BlueCircle from \"../../assets/images/blue_circle.png\"\r\n\r\nimport IdleTimer from 'react-idle-timer'\r\nimport {useHistory} from \"react-router\";\r\nimport MenuListPIT from '../../components/menuListPit/menuListPit';\r\n\r\nimport AlertF from \"../../components/alert/alert\"\r\n\r\n//Página de home con el menú para ir a las aplicaciones de isotracker\r\n\r\nconst PITRequests = () =>{\r\n\r\n    const [content, setContent] = useState();\r\n    const [navBar, setNavBar] = useState(null);\r\n    const [circles, setCircles] = useState(null);\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    const history = useHistory();\r\n\r\n    const CryptoJS = require(\"crypto-js\");\r\n    const SecureStorage = require(\"secure-web-storage\");\r\n    var SECRET_KEY = 'sanud2ha8shd72h';\r\n\r\n    var secureStorage = new SecureStorage(localStorage, {\r\n        hash: function hash(key) {\r\n            key = CryptoJS.SHA256(key, SECRET_KEY);\r\n    \r\n            return key.toString();\r\n        },\r\n        encrypt: function encrypt(data) {\r\n            data = CryptoJS.AES.encrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString();\r\n    \r\n            return data;\r\n        },\r\n        decrypt: function decrypt(data) {\r\n            data = CryptoJS.AES.decrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString(CryptoJS.enc.Utf8);\r\n    \r\n            return data;\r\n        }\r\n    });\r\n\r\n    useEffect(()=>{\r\n        if(!secureStorage.getItem(\"user\")){\r\n            history.push(\"/\"+process.env.REACT_APP_PROJECT+\"/\");\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() =>{        \r\n        setNavBar(<NavBar/>)\r\n        setContent(<MenuListPIT success={() => setSuccess(true)}/>)    \r\n        setCircles(<div><img src={GreenCircle} alt=\"greenCircle\" className=\"greenCircle__image\"/>\r\n        <img src={BlueCircle} alt=\"blueCircle\" className=\"blueCircle__image\"/></div>)               \r\n\r\n        const body = {\r\n            user: secureStorage.getItem(\"user\"),\r\n        }\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n\r\n            })\r\n\r\n          \r\n    }, [])\r\n\r\n    document.title= process.env.REACT_APP_APP_NAMEPROJ\r\n    document.body.style.zoom = 0.8\r\n\r\n    function handleOnIdle(){\r\n        const body = {\r\n            user: secureStorage.getItem(\"user\"),\r\n        }\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n\r\n            })\r\n        secureStorage.clear()\r\n        history.push(\"/\" + process.env.REACT_APP_PROJECT)\r\n    }\r\n\r\n    return(\r\n        <body>\r\n            <IdleTimer\r\n                timeout={1000 * 60 * 15}\r\n                onIdle={handleOnIdle}\r\n                debounce={250}\r\n            />\r\n            <div style={{zIndex: 99999}}\r\n            className={`alert alert-success ${success ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setSuccess(false)}\r\n            >\r\n                <AlertF type=\"qtracker\"/>\r\n            </div>\r\n            {circles}\r\n            <div>\r\n                {navBar}\r\n                {content}\r\n            </div>\r\n        </body>\r\n    );\r\n};\r\n\r\nexport default PITRequests;"]},"metadata":{},"sourceType":"module"}