{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nimport { getScrollableElement, getScrollbarWidth } from \"./../../../helpers/dom/element.mjs\";\nimport { arrayEach } from \"./../../../helpers/array.mjs\";\nimport { isKey } from \"./../../../helpers/unicode.mjs\";\nimport { isChrome } from \"./../../../helpers/browser.mjs\";\nimport EventManager from \"./../../../eventManager.mjs\";\nimport { CLONE_BOTTOM_LEFT_CORNER, CLONE_BOTTOM, CLONE_LEFT, CLONE_TOP_LEFT_CORNER, CLONE_TOP, LeftOverlay, TopOverlay, TopLeftCornerOverlay, BottomOverlay, BottomLeftCornerOverlay, registerOverlayOnce, createOverlay, hasOverlay } from \"./overlay/index.mjs\";\nregisterOverlayOnce(BottomLeftCornerOverlay);\nregisterOverlayOnce(BottomOverlay);\nregisterOverlayOnce(LeftOverlay);\nregisterOverlayOnce(TopLeftCornerOverlay);\nregisterOverlayOnce(TopOverlay);\n/**\n * @class Overlays\n */\n\nvar Overlays = /*#__PURE__*/function () {\n  /**\n   * @param {Walkontable} wotInstance The Walkontable instance.\n   */\n  function Overlays(wotInstance) {\n    _classCallCheck(this, Overlays);\n    /**\n     * Walkontable instance's reference.\n     *\n     * @private\n     * @type {Walkontable}\n     */\n\n\n    this.wot = wotInstance;\n    var _this$wot = this.wot,\n        rootDocument = _this$wot.rootDocument,\n        rootWindow = _this$wot.rootWindow,\n        wtTable = _this$wot.wtTable;\n    /**\n     * Sometimes `line-height` might be set to 'normal'. In that case, a default `font-size` should be multiplied by roughly 1.2.\n     * Https://developer.mozilla.org/pl/docs/Web/CSS/line-height#Values.\n     */\n\n    var BODY_LINE_HEIGHT = parseInt(rootWindow.getComputedStyle(rootDocument.body).lineHeight, 10);\n    var FALLBACK_BODY_LINE_HEIGHT = parseInt(rootWindow.getComputedStyle(rootDocument.body).fontSize, 10) * 1.2; // legacy support\n\n    this.instance = this.wot;\n    this.eventManager = new EventManager(this.wot);\n    this.scrollbarSize = getScrollbarWidth(rootDocument);\n    this.wot.update('scrollbarWidth', this.scrollbarSize);\n    this.wot.update('scrollbarHeight', this.scrollbarSize);\n    var isOverflowHidden = rootWindow.getComputedStyle(wtTable.wtRootElement.parentNode).getPropertyValue('overflow') === 'hidden';\n    this.scrollableElement = isOverflowHidden ? wtTable.holder : getScrollableElement(wtTable.TABLE);\n    this.topOverlay = void 0;\n    this.bottomOverlay = void 0;\n    this.leftOverlay = void 0;\n    this.topLeftCornerOverlay = void 0;\n    this.bottomLeftCornerOverlay = void 0;\n    this.prepareOverlays();\n    this.hasScrollbarBottom = false;\n    this.hasScrollbarRight = false;\n    this.destroyed = false;\n    this.keyPressed = false;\n    this.spreaderLastSize = {\n      width: null,\n      height: null\n    };\n    this.verticalScrolling = false;\n    this.horizontalScrolling = false;\n    this.browserLineHeight = BODY_LINE_HEIGHT || FALLBACK_BODY_LINE_HEIGHT;\n    this.registerListeners();\n    this.lastScrollX = rootWindow.scrollX;\n    this.lastScrollY = rootWindow.scrollY;\n  }\n  /**\n   * Prepare overlays based on user settings.\n   *\n   * @returns {boolean} Returns `true` if changes applied to overlay needs scroll synchronization.\n   */\n\n\n  _createClass(Overlays, [{\n    key: \"prepareOverlays\",\n    value: function prepareOverlays() {\n      var syncScroll = false;\n\n      if (this.topOverlay) {\n        syncScroll = this.topOverlay.updateStateOfRendering() || syncScroll;\n      } else {\n        this.topOverlay = createOverlay(CLONE_TOP, this.wot);\n      }\n\n      if (!hasOverlay(CLONE_BOTTOM)) {\n        this.bottomOverlay = {\n          needFullRender: false,\n          updateStateOfRendering: function updateStateOfRendering() {\n            return false;\n          }\n        };\n      }\n\n      if (!hasOverlay(CLONE_BOTTOM_LEFT_CORNER)) {\n        this.bottomLeftCornerOverlay = {\n          needFullRender: false,\n          updateStateOfRendering: function updateStateOfRendering() {\n            return false;\n          }\n        };\n      }\n\n      if (this.bottomOverlay) {\n        syncScroll = this.bottomOverlay.updateStateOfRendering() || syncScroll;\n      } else {\n        this.bottomOverlay = createOverlay(CLONE_BOTTOM, this.wot);\n      }\n\n      if (this.leftOverlay) {\n        syncScroll = this.leftOverlay.updateStateOfRendering() || syncScroll;\n      } else {\n        this.leftOverlay = createOverlay(CLONE_LEFT, this.wot);\n      }\n\n      if (this.topOverlay.needFullRender && this.leftOverlay.needFullRender) {\n        if (this.topLeftCornerOverlay) {\n          syncScroll = this.topLeftCornerOverlay.updateStateOfRendering() || syncScroll;\n        } else {\n          this.topLeftCornerOverlay = createOverlay(CLONE_TOP_LEFT_CORNER, this.wot);\n        }\n      }\n\n      if (this.bottomOverlay.needFullRender && this.leftOverlay.needFullRender) {\n        if (this.bottomLeftCornerOverlay) {\n          syncScroll = this.bottomLeftCornerOverlay.updateStateOfRendering() || syncScroll;\n        } else {\n          this.bottomLeftCornerOverlay = createOverlay(CLONE_BOTTOM_LEFT_CORNER, this.wot);\n        }\n      }\n\n      return syncScroll;\n    }\n    /**\n     * Refresh and redraw table.\n     */\n\n  }, {\n    key: \"refreshAll\",\n    value: function refreshAll() {\n      if (!this.wot.drawn) {\n        return;\n      }\n\n      if (!this.wot.wtTable.holder.parentNode) {\n        // Walkontable was detached from DOM, but this handler was not removed\n        this.destroy();\n        return;\n      }\n\n      this.wot.draw(true);\n\n      if (this.verticalScrolling) {\n        this.leftOverlay.onScroll();\n      }\n\n      if (this.horizontalScrolling) {\n        this.topOverlay.onScroll();\n      }\n\n      this.verticalScrolling = false;\n      this.horizontalScrolling = false;\n    }\n    /**\n     * Register all necessary event listeners.\n     */\n\n  }, {\n    key: \"registerListeners\",\n    value: function registerListeners() {\n      var _this = this;\n\n      var _this$wot2 = this.wot,\n          rootDocument = _this$wot2.rootDocument,\n          rootWindow = _this$wot2.rootWindow;\n      var topOverlayScrollableElement = this.topOverlay.mainTableScrollableElement;\n      var leftOverlayScrollableElement = this.leftOverlay.mainTableScrollableElement;\n      this.eventManager.addEventListener(rootDocument.documentElement, 'keydown', function (event) {\n        return _this.onKeyDown(event);\n      });\n      this.eventManager.addEventListener(rootDocument.documentElement, 'keyup', function () {\n        return _this.onKeyUp();\n      });\n      this.eventManager.addEventListener(rootDocument, 'visibilitychange', function () {\n        return _this.onKeyUp();\n      });\n      this.eventManager.addEventListener(topOverlayScrollableElement, 'scroll', function (event) {\n        return _this.onTableScroll(event);\n      }, {\n        passive: true\n      });\n\n      if (topOverlayScrollableElement !== leftOverlayScrollableElement) {\n        this.eventManager.addEventListener(leftOverlayScrollableElement, 'scroll', function (event) {\n          return _this.onTableScroll(event);\n        }, {\n          passive: true\n        });\n      }\n\n      var isHighPixelRatio = rootWindow.devicePixelRatio && rootWindow.devicePixelRatio > 1;\n      var isScrollOnWindow = this.scrollableElement === rootWindow;\n      var preventWheel = this.wot.wtSettings.getSetting('preventWheel');\n      var wheelEventOptions = {\n        passive: isScrollOnWindow\n      };\n\n      if (preventWheel || isHighPixelRatio || !isChrome()) {\n        this.eventManager.addEventListener(this.wot.wtTable.wtRootElement, 'wheel', function (event) {\n          return _this.onCloneWheel(event, preventWheel);\n        }, wheelEventOptions);\n      }\n\n      var overlays = [this.topOverlay, this.bottomOverlay, this.leftOverlay, this.topLeftCornerOverlay, this.bottomLeftCornerOverlay];\n      overlays.forEach(function (overlay) {\n        if (overlay && overlay.needFullRender) {\n          var holder = overlay.clone.wtTable.holder;\n\n          _this.eventManager.addEventListener(holder, 'wheel', function (event) {\n            return _this.onCloneWheel(event, preventWheel);\n          }, wheelEventOptions);\n        }\n      });\n      var resizeTimeout;\n      this.eventManager.addEventListener(rootWindow, 'resize', function () {\n        clearTimeout(resizeTimeout);\n        resizeTimeout = setTimeout(function () {\n          _this.wot.getSetting('onWindowResize');\n        }, 200);\n      });\n    }\n    /**\n     * Deregister all previously registered listeners.\n     */\n\n  }, {\n    key: \"deregisterListeners\",\n    value: function deregisterListeners() {\n      this.eventManager.clearEvents(true);\n    }\n    /**\n     * Scroll listener.\n     *\n     * @param {Event} event The mouse event object.\n     */\n\n  }, {\n    key: \"onTableScroll\",\n    value: function onTableScroll(event) {\n      // There was if statement which controlled flow of this function. It avoided the execution of the next lines\n      // on mobile devices. It was changed. Broader description of this case is included within issue #4856.\n      var rootWindow = this.wot.rootWindow;\n      var masterHorizontal = this.leftOverlay.mainTableScrollableElement;\n      var masterVertical = this.topOverlay.mainTableScrollableElement;\n      var target = event.target; // For key press, sync only master -> overlay position because while pressing Walkontable.render is triggered\n      // by hot.refreshBorder\n\n      if (this.keyPressed) {\n        if (masterVertical !== rootWindow && target !== rootWindow && !event.target.contains(masterVertical) || masterHorizontal !== rootWindow && target !== rootWindow && !event.target.contains(masterHorizontal)) {\n          return;\n        }\n      }\n\n      this.syncScrollPositions(event);\n    }\n    /**\n     * Wheel listener for cloned overlays.\n     *\n     * @param {Event} event The mouse event object.\n     * @param {boolean} preventDefault If `true`, the `preventDefault` will be called on event object.\n     */\n\n  }, {\n    key: \"onCloneWheel\",\n    value: function onCloneWheel(event, preventDefault) {\n      var rootWindow = this.wot.rootWindow; // There was if statement which controlled flow of this function. It avoided the execution of the next lines\n      // on mobile devices. It was changed. Broader description of this case is included within issue #4856.\n\n      var masterHorizontal = this.leftOverlay.mainTableScrollableElement;\n      var masterVertical = this.topOverlay.mainTableScrollableElement;\n      var target = event.target; // For key press, sync only master -> overlay position because while pressing Walkontable.render is triggered\n      // by hot.refreshBorder\n\n      var shouldNotWheelVertically = masterVertical !== rootWindow && target !== rootWindow && !target.contains(masterVertical);\n      var shouldNotWheelHorizontally = masterHorizontal !== rootWindow && target !== rootWindow && !target.contains(masterHorizontal);\n\n      if (this.keyPressed && (shouldNotWheelVertically || shouldNotWheelHorizontally)) {\n        return;\n      }\n\n      var isScrollPossible = this.translateMouseWheelToScroll(event);\n\n      if (preventDefault || this.scrollableElement !== rootWindow && isScrollPossible) {\n        event.preventDefault();\n      }\n    }\n    /**\n     * Key down listener.\n     *\n     * @param {Event} event The keyboard event object.\n     */\n\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(event) {\n      this.keyPressed = isKey(event.keyCode, 'ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT');\n    }\n    /**\n     * Key up listener.\n     */\n\n  }, {\n    key: \"onKeyUp\",\n    value: function onKeyUp() {\n      this.keyPressed = false;\n    }\n    /**\n     * Translate wheel event into scroll event and sync scroll overlays position.\n     *\n     * @private\n     * @param {Event} event The mouse event object.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"translateMouseWheelToScroll\",\n    value: function translateMouseWheelToScroll(event) {\n      var browserLineHeight = this.browserLineHeight;\n      var deltaY = isNaN(event.deltaY) ? -1 * event.wheelDeltaY : event.deltaY;\n      var deltaX = isNaN(event.deltaX) ? -1 * event.wheelDeltaX : event.deltaX;\n\n      if (event.deltaMode === 1) {\n        deltaX += deltaX * browserLineHeight;\n        deltaY += deltaY * browserLineHeight;\n      }\n\n      var isScrollVerticallyPossible = this.scrollVertically(deltaY);\n      var isScrollHorizontallyPossible = this.scrollHorizontally(deltaX);\n      return isScrollVerticallyPossible || isScrollHorizontallyPossible;\n    }\n    /**\n     * Scrolls main scrollable element horizontally.\n     *\n     * @param {number} delta Relative value to scroll.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"scrollVertically\",\n    value: function scrollVertically(delta) {\n      var previousScroll = this.scrollableElement.scrollTop;\n      this.scrollableElement.scrollTop += delta;\n      return previousScroll !== this.scrollableElement.scrollTop;\n    }\n    /**\n     * Scrolls main scrollable element horizontally.\n     *\n     * @param {number} delta Relative value to scroll.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"scrollHorizontally\",\n    value: function scrollHorizontally(delta) {\n      var previousScroll = this.scrollableElement.scrollLeft;\n      this.scrollableElement.scrollLeft += delta;\n      return previousScroll !== this.scrollableElement.scrollLeft;\n    }\n    /**\n     * Synchronize scroll position between master table and overlay table.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"syncScrollPositions\",\n    value: function syncScrollPositions() {\n      if (this.destroyed) {\n        return;\n      }\n\n      var rootWindow = this.wot.rootWindow;\n      var topHolder = this.topOverlay.clone.wtTable.holder;\n      var leftHolder = this.leftOverlay.clone.wtTable.holder;\n      var _ref = [this.scrollableElement.scrollLeft, this.scrollableElement.scrollTop],\n          scrollLeft = _ref[0],\n          scrollTop = _ref[1];\n      this.horizontalScrolling = topHolder.scrollLeft !== scrollLeft || this.lastScrollX !== rootWindow.scrollX;\n      this.verticalScrolling = leftHolder.scrollTop !== scrollTop || this.lastScrollY !== rootWindow.scrollY;\n      this.lastScrollX = rootWindow.scrollX;\n      this.lastScrollY = rootWindow.scrollY;\n\n      if (this.horizontalScrolling) {\n        topHolder.scrollLeft = scrollLeft;\n        var bottomHolder = this.bottomOverlay.needFullRender ? this.bottomOverlay.clone.wtTable.holder : null;\n\n        if (bottomHolder) {\n          bottomHolder.scrollLeft = scrollLeft;\n        }\n      }\n\n      if (this.verticalScrolling) {\n        leftHolder.scrollTop = scrollTop;\n      }\n\n      this.refreshAll();\n    }\n    /**\n     * Synchronize overlay scrollbars with the master scrollbar.\n     */\n\n  }, {\n    key: \"syncScrollWithMaster\",\n    value: function syncScrollWithMaster() {\n      var master = this.topOverlay.mainTableScrollableElement;\n      var scrollLeft = master.scrollLeft,\n          scrollTop = master.scrollTop;\n\n      if (this.topOverlay.needFullRender) {\n        this.topOverlay.clone.wtTable.holder.scrollLeft = scrollLeft;\n      }\n\n      if (this.bottomOverlay.needFullRender) {\n        this.bottomOverlay.clone.wtTable.holder.scrollLeft = scrollLeft;\n      }\n\n      if (this.leftOverlay.needFullRender) {\n        this.leftOverlay.clone.wtTable.holder.scrollTop = scrollTop;\n      }\n    }\n    /**\n     * Update the main scrollable elements for all the overlays.\n     */\n\n  }, {\n    key: \"updateMainScrollableElements\",\n    value: function updateMainScrollableElements() {\n      this.deregisterListeners();\n      this.leftOverlay.updateMainScrollableElement();\n      this.topOverlay.updateMainScrollableElement();\n\n      if (this.bottomOverlay.needFullRender) {\n        this.bottomOverlay.updateMainScrollableElement();\n      }\n\n      var _this$wot3 = this.wot,\n          rootWindow = _this$wot3.rootWindow,\n          wtTable = _this$wot3.wtTable;\n\n      if (rootWindow.getComputedStyle(wtTable.wtRootElement.parentNode).getPropertyValue('overflow') === 'hidden') {\n        this.scrollableElement = wtTable.holder;\n      } else {\n        this.scrollableElement = getScrollableElement(wtTable.TABLE);\n      }\n\n      this.registerListeners();\n    }\n    /**\n     *\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.eventManager.destroy();\n      this.topOverlay.destroy();\n\n      if (this.bottomOverlay.clone) {\n        this.bottomOverlay.destroy();\n      }\n\n      this.leftOverlay.destroy();\n\n      if (this.topLeftCornerOverlay) {\n        this.topLeftCornerOverlay.destroy();\n      }\n\n      if (this.bottomLeftCornerOverlay && this.bottomLeftCornerOverlay.clone) {\n        this.bottomLeftCornerOverlay.destroy();\n      }\n\n      this.destroyed = true;\n    }\n    /**\n     * @param {boolean} [fastDraw=false] When `true`, try to refresh only the positions of borders without rerendering\n     *                                   the data. It will only work if Table.draw() does not force\n     *                                   rendering anyway.\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      var fastDraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var spreader = this.wot.wtTable.spreader;\n      var width = spreader.clientWidth;\n      var height = spreader.clientHeight;\n\n      if (width !== this.spreaderLastSize.width || height !== this.spreaderLastSize.height) {\n        this.spreaderLastSize.width = width;\n        this.spreaderLastSize.height = height;\n        this.adjustElementsSize();\n      }\n\n      if (this.bottomOverlay.clone) {\n        this.bottomOverlay.refresh(fastDraw);\n      }\n\n      this.leftOverlay.refresh(fastDraw);\n      this.topOverlay.refresh(fastDraw);\n\n      if (this.topLeftCornerOverlay) {\n        this.topLeftCornerOverlay.refresh(fastDraw);\n      }\n\n      if (this.bottomLeftCornerOverlay && this.bottomLeftCornerOverlay.clone) {\n        this.bottomLeftCornerOverlay.refresh(fastDraw);\n      }\n    }\n    /**\n     * Adjust overlays elements size and master table size.\n     *\n     * @param {boolean} [force=false] When `true`, it adjust the DOM nodes sizes for all overlays.\n     */\n\n  }, {\n    key: \"adjustElementsSize\",\n    value: function adjustElementsSize() {\n      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var _this$wot4 = this.wot,\n          wtViewport = _this$wot4.wtViewport,\n          wtTable = _this$wot4.wtTable;\n      var totalColumns = this.wot.getSetting('totalColumns');\n      var totalRows = this.wot.getSetting('totalRows');\n      var headerRowSize = wtViewport.getRowHeaderWidth();\n      var headerColumnSize = wtViewport.getColumnHeaderHeight();\n      var hiderStyle = wtTable.hider.style;\n      hiderStyle.width = \"\".concat(headerRowSize + this.leftOverlay.sumCellSizes(0, totalColumns), \"px\");\n      hiderStyle.height = \"\".concat(headerColumnSize + this.topOverlay.sumCellSizes(0, totalRows) + 1, \"px\");\n\n      if (this.scrollbarSize > 0) {\n        var _wtTable$wtRootElemen = wtTable.wtRootElement,\n            rootElemScrollHeight = _wtTable$wtRootElemen.scrollHeight,\n            rootElemScrollWidth = _wtTable$wtRootElemen.scrollWidth;\n        var _wtTable$holder = wtTable.holder,\n            holderScrollHeight = _wtTable$holder.scrollHeight,\n            holderScrollWidth = _wtTable$holder.scrollWidth;\n        this.hasScrollbarRight = rootElemScrollHeight < holderScrollHeight;\n        this.hasScrollbarBottom = rootElemScrollWidth < holderScrollWidth;\n\n        if (this.hasScrollbarRight && wtTable.hider.scrollWidth + this.scrollbarSize > rootElemScrollWidth) {\n          this.hasScrollbarBottom = true;\n        } else if (this.hasScrollbarBottom && wtTable.hider.scrollHeight + this.scrollbarSize > rootElemScrollHeight) {\n          this.hasScrollbarRight = true;\n        }\n      }\n\n      this.topOverlay.adjustElementsSize(force);\n      this.leftOverlay.adjustElementsSize(force);\n      this.bottomOverlay.adjustElementsSize(force);\n    }\n    /**\n     *\n     */\n\n  }, {\n    key: \"applyToDOM\",\n    value: function applyToDOM() {\n      var wtTable = this.wot.wtTable;\n\n      if (!wtTable.isVisible()) {\n        return;\n      }\n\n      this.topOverlay.applyToDOM();\n\n      if (this.bottomOverlay.clone) {\n        this.bottomOverlay.applyToDOM();\n      }\n\n      this.leftOverlay.applyToDOM();\n    }\n    /**\n     * Get the parent overlay of the provided element.\n     *\n     * @param {HTMLElement} element An element to process.\n     * @returns {object|null}\n     */\n\n  }, {\n    key: \"getParentOverlay\",\n    value: function getParentOverlay(element) {\n      if (!element) {\n        return null;\n      }\n\n      var overlays = [this.topOverlay, this.leftOverlay, this.bottomOverlay, this.topLeftCornerOverlay, this.bottomLeftCornerOverlay];\n      var result = null;\n      arrayEach(overlays, function (elem) {\n        if (!elem) {\n          return;\n        }\n\n        if (elem.clone && elem.clone.wtTable.TABLE.contains(element)) {\n          result = elem.clone;\n        }\n      });\n      return result;\n    }\n    /**\n     * Synchronize the class names between the main overlay table and the tables on the other overlays.\n     *\n     */\n\n  }, {\n    key: \"syncOverlayTableClassNames\",\n    value: function syncOverlayTableClassNames() {\n      var masterTable = this.instance.wtTable.TABLE;\n      var overlays = [this.topOverlay, this.leftOverlay, this.bottomOverlay, this.topLeftCornerOverlay, this.bottomLeftCornerOverlay];\n      arrayEach(overlays, function (elem) {\n        if (!elem) {\n          return;\n        }\n\n        elem.clone.wtTable.TABLE.className = masterTable.className;\n      });\n    }\n  }]);\n\n  return Overlays;\n}();\n\nexport default Overlays;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/handsontable/3rdparty/walkontable/src/overlays.mjs"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","getScrollableElement","getScrollbarWidth","arrayEach","isKey","isChrome","EventManager","CLONE_BOTTOM_LEFT_CORNER","CLONE_BOTTOM","CLONE_LEFT","CLONE_TOP_LEFT_CORNER","CLONE_TOP","LeftOverlay","TopOverlay","TopLeftCornerOverlay","BottomOverlay","BottomLeftCornerOverlay","registerOverlayOnce","createOverlay","hasOverlay","Overlays","wotInstance","wot","_this$wot","rootDocument","rootWindow","wtTable","BODY_LINE_HEIGHT","parseInt","getComputedStyle","body","lineHeight","FALLBACK_BODY_LINE_HEIGHT","fontSize","eventManager","scrollbarSize","update","isOverflowHidden","wtRootElement","parentNode","getPropertyValue","scrollableElement","holder","TABLE","topOverlay","bottomOverlay","leftOverlay","topLeftCornerOverlay","bottomLeftCornerOverlay","prepareOverlays","hasScrollbarBottom","hasScrollbarRight","destroyed","keyPressed","spreaderLastSize","width","height","verticalScrolling","horizontalScrolling","browserLineHeight","registerListeners","lastScrollX","scrollX","lastScrollY","scrollY","value","syncScroll","updateStateOfRendering","needFullRender","refreshAll","drawn","destroy","draw","onScroll","_this","_this$wot2","topOverlayScrollableElement","mainTableScrollableElement","leftOverlayScrollableElement","addEventListener","documentElement","event","onKeyDown","onKeyUp","onTableScroll","passive","isHighPixelRatio","devicePixelRatio","isScrollOnWindow","preventWheel","wtSettings","getSetting","wheelEventOptions","onCloneWheel","overlays","forEach","overlay","clone","resizeTimeout","clearTimeout","setTimeout","deregisterListeners","clearEvents","masterHorizontal","masterVertical","contains","syncScrollPositions","preventDefault","shouldNotWheelVertically","shouldNotWheelHorizontally","isScrollPossible","translateMouseWheelToScroll","keyCode","deltaY","isNaN","wheelDeltaY","deltaX","wheelDeltaX","deltaMode","isScrollVerticallyPossible","scrollVertically","isScrollHorizontallyPossible","scrollHorizontally","delta","previousScroll","scrollTop","scrollLeft","topHolder","leftHolder","_ref","bottomHolder","syncScrollWithMaster","master","updateMainScrollableElements","updateMainScrollableElement","_this$wot3","refresh","fastDraw","arguments","undefined","spreader","clientWidth","clientHeight","adjustElementsSize","force","_this$wot4","wtViewport","totalColumns","totalRows","headerRowSize","getRowHeaderWidth","headerColumnSize","getColumnHeaderHeight","hiderStyle","hider","style","concat","sumCellSizes","_wtTable$wtRootElemen","rootElemScrollHeight","scrollHeight","rootElemScrollWidth","scrollWidth","_wtTable$holder","holderScrollHeight","holderScrollWidth","applyToDOM","isVisible","getParentOverlay","element","result","elem","syncOverlayTableClassNames","masterTable","className"],"mappings":"AAGA,SAASA,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AAAE,QAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;AAA2BE,IAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AAAwDD,IAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AAAgC,QAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAA4BC,IAAAA,MAAM,CAACC,cAAP,CAAsBT,MAAtB,EAA8BI,UAAU,CAACM,GAAzC,EAA8CN,UAA9C;AAA4D;AAAE;;AAE7T,SAASO,YAAT,CAAsBd,WAAtB,EAAmCe,UAAnC,EAA+CC,WAA/C,EAA4D;AAAE,MAAID,UAAJ,EAAgBb,iBAAiB,CAACF,WAAW,CAACiB,SAAb,EAAwBF,UAAxB,CAAjB;AAAsD,MAAIC,WAAJ,EAAiBd,iBAAiB,CAACF,WAAD,EAAcgB,WAAd,CAAjB;AAA6C,SAAOhB,WAAP;AAAqB;;AAEvN,SAASkB,oBAAT,EAA+BC,iBAA/B,QAAwD,oCAAxD;AACA,SAASC,SAAT,QAA0B,8BAA1B;AACA,SAASC,KAAT,QAAsB,gCAAtB;AACA,SAASC,QAAT,QAAyB,gCAAzB;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AACA,SAASC,wBAAT,EAAmCC,YAAnC,EAAiDC,UAAjD,EAA6DC,qBAA7D,EAAoFC,SAApF,EAA+FC,WAA/F,EAA4GC,UAA5G,EAAwHC,oBAAxH,EAA8IC,aAA9I,EAA6JC,uBAA7J,EAAsLC,mBAAtL,EAA2MC,aAA3M,EAA0NC,UAA1N,QAA4O,qBAA5O;AACAF,mBAAmB,CAACD,uBAAD,CAAnB;AACAC,mBAAmB,CAACF,aAAD,CAAnB;AACAE,mBAAmB,CAACL,WAAD,CAAnB;AACAK,mBAAmB,CAACH,oBAAD,CAAnB;AACAG,mBAAmB,CAACJ,UAAD,CAAnB;AACA;AACA;AACA;;AAEA,IAAIO,QAAQ,GAAG,aAAa,YAAY;AACtC;AACF;AACA;AACE,WAASA,QAAT,CAAkBC,WAAlB,EAA+B;AAC7BxC,IAAAA,eAAe,CAAC,IAAD,EAAOuC,QAAP,CAAf;AAEA;AACJ;AACA;AACA;AACA;AACA;;;AACI,SAAKE,GAAL,GAAWD,WAAX;AACA,QAAIE,SAAS,GAAG,KAAKD,GAArB;AAAA,QACIE,YAAY,GAAGD,SAAS,CAACC,YAD7B;AAAA,QAEIC,UAAU,GAAGF,SAAS,CAACE,UAF3B;AAAA,QAGIC,OAAO,GAAGH,SAAS,CAACG,OAHxB;AAIA;AACJ;AACA;AACA;;AAEI,QAAIC,gBAAgB,GAAGC,QAAQ,CAACH,UAAU,CAACI,gBAAX,CAA4BL,YAAY,CAACM,IAAzC,EAA+CC,UAAhD,EAA4D,EAA5D,CAA/B;AACA,QAAIC,yBAAyB,GAAGJ,QAAQ,CAACH,UAAU,CAACI,gBAAX,CAA4BL,YAAY,CAACM,IAAzC,EAA+CG,QAAhD,EAA0D,EAA1D,CAAR,GAAwE,GAAxG,CApB6B,CAoBgF;;AAE7G,SAAKnD,QAAL,GAAgB,KAAKwC,GAArB;AACA,SAAKY,YAAL,GAAoB,IAAI5B,YAAJ,CAAiB,KAAKgB,GAAtB,CAApB;AACA,SAAKa,aAAL,GAAqBjC,iBAAiB,CAACsB,YAAD,CAAtC;AACA,SAAKF,GAAL,CAASc,MAAT,CAAgB,gBAAhB,EAAkC,KAAKD,aAAvC;AACA,SAAKb,GAAL,CAASc,MAAT,CAAgB,iBAAhB,EAAmC,KAAKD,aAAxC;AACA,QAAIE,gBAAgB,GAAGZ,UAAU,CAACI,gBAAX,CAA4BH,OAAO,CAACY,aAAR,CAAsBC,UAAlD,EAA8DC,gBAA9D,CAA+E,UAA/E,MAA+F,QAAtH;AACA,SAAKC,iBAAL,GAAyBJ,gBAAgB,GAAGX,OAAO,CAACgB,MAAX,GAAoBzC,oBAAoB,CAACyB,OAAO,CAACiB,KAAT,CAAjF;AACA,SAAKC,UAAL,GAAkB,KAAK,CAAvB;AACA,SAAKC,aAAL,GAAqB,KAAK,CAA1B;AACA,SAAKC,WAAL,GAAmB,KAAK,CAAxB;AACA,SAAKC,oBAAL,GAA4B,KAAK,CAAjC;AACA,SAAKC,uBAAL,GAA+B,KAAK,CAApC;AACA,SAAKC,eAAL;AACA,SAAKC,kBAAL,GAA0B,KAA1B;AACA,SAAKC,iBAAL,GAAyB,KAAzB;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKC,UAAL,GAAkB,KAAlB;AACA,SAAKC,gBAAL,GAAwB;AACtBC,MAAAA,KAAK,EAAE,IADe;AAEtBC,MAAAA,MAAM,EAAE;AAFc,KAAxB;AAIA,SAAKC,iBAAL,GAAyB,KAAzB;AACA,SAAKC,mBAAL,GAA2B,KAA3B;AACA,SAAKC,iBAAL,GAAyBhC,gBAAgB,IAAIK,yBAA7C;AACA,SAAK4B,iBAAL;AACA,SAAKC,WAAL,GAAmBpC,UAAU,CAACqC,OAA9B;AACA,SAAKC,WAAL,GAAmBtC,UAAU,CAACuC,OAA9B;AACD;AACD;AACF;AACA;AACA;AACA;;;AAGEnE,EAAAA,YAAY,CAACuB,QAAD,EAAW,CAAC;AACtBxB,IAAAA,GAAG,EAAE,iBADiB;AAEtBqE,IAAAA,KAAK,EAAE,SAAShB,eAAT,GAA2B;AAChC,UAAIiB,UAAU,GAAG,KAAjB;;AAEA,UAAI,KAAKtB,UAAT,EAAqB;AACnBsB,QAAAA,UAAU,GAAG,KAAKtB,UAAL,CAAgBuB,sBAAhB,MAA4CD,UAAzD;AACD,OAFD,MAEO;AACL,aAAKtB,UAAL,GAAkB1B,aAAa,CAACP,SAAD,EAAY,KAAKW,GAAjB,CAA/B;AACD;;AAED,UAAI,CAACH,UAAU,CAACX,YAAD,CAAf,EAA+B;AAC7B,aAAKqC,aAAL,GAAqB;AACnBuB,UAAAA,cAAc,EAAE,KADG;AAEnBD,UAAAA,sBAAsB,EAAE,SAASA,sBAAT,GAAkC;AACxD,mBAAO,KAAP;AACD;AAJkB,SAArB;AAMD;;AAED,UAAI,CAAChD,UAAU,CAACZ,wBAAD,CAAf,EAA2C;AACzC,aAAKyC,uBAAL,GAA+B;AAC7BoB,UAAAA,cAAc,EAAE,KADa;AAE7BD,UAAAA,sBAAsB,EAAE,SAASA,sBAAT,GAAkC;AACxD,mBAAO,KAAP;AACD;AAJ4B,SAA/B;AAMD;;AAED,UAAI,KAAKtB,aAAT,EAAwB;AACtBqB,QAAAA,UAAU,GAAG,KAAKrB,aAAL,CAAmBsB,sBAAnB,MAA+CD,UAA5D;AACD,OAFD,MAEO;AACL,aAAKrB,aAAL,GAAqB3B,aAAa,CAACV,YAAD,EAAe,KAAKc,GAApB,CAAlC;AACD;;AAED,UAAI,KAAKwB,WAAT,EAAsB;AACpBoB,QAAAA,UAAU,GAAG,KAAKpB,WAAL,CAAiBqB,sBAAjB,MAA6CD,UAA1D;AACD,OAFD,MAEO;AACL,aAAKpB,WAAL,GAAmB5B,aAAa,CAACT,UAAD,EAAa,KAAKa,GAAlB,CAAhC;AACD;;AAED,UAAI,KAAKsB,UAAL,CAAgBwB,cAAhB,IAAkC,KAAKtB,WAAL,CAAiBsB,cAAvD,EAAuE;AACrE,YAAI,KAAKrB,oBAAT,EAA+B;AAC7BmB,UAAAA,UAAU,GAAG,KAAKnB,oBAAL,CAA0BoB,sBAA1B,MAAsDD,UAAnE;AACD,SAFD,MAEO;AACL,eAAKnB,oBAAL,GAA4B7B,aAAa,CAACR,qBAAD,EAAwB,KAAKY,GAA7B,CAAzC;AACD;AACF;;AAED,UAAI,KAAKuB,aAAL,CAAmBuB,cAAnB,IAAqC,KAAKtB,WAAL,CAAiBsB,cAA1D,EAA0E;AACxE,YAAI,KAAKpB,uBAAT,EAAkC;AAChCkB,UAAAA,UAAU,GAAG,KAAKlB,uBAAL,CAA6BmB,sBAA7B,MAAyDD,UAAtE;AACD,SAFD,MAEO;AACL,eAAKlB,uBAAL,GAA+B9B,aAAa,CAACX,wBAAD,EAA2B,KAAKe,GAAhC,CAA5C;AACD;AACF;;AAED,aAAO4C,UAAP;AACD;AACD;AACJ;AACA;;AA7D0B,GAAD,EA+DpB;AACDtE,IAAAA,GAAG,EAAE,YADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASI,UAAT,GAAsB;AAC3B,UAAI,CAAC,KAAK/C,GAAL,CAASgD,KAAd,EAAqB;AACnB;AACD;;AAED,UAAI,CAAC,KAAKhD,GAAL,CAASI,OAAT,CAAiBgB,MAAjB,CAAwBH,UAA7B,EAAyC;AACvC;AACA,aAAKgC,OAAL;AACA;AACD;;AAED,WAAKjD,GAAL,CAASkD,IAAT,CAAc,IAAd;;AAEA,UAAI,KAAKf,iBAAT,EAA4B;AAC1B,aAAKX,WAAL,CAAiB2B,QAAjB;AACD;;AAED,UAAI,KAAKf,mBAAT,EAA8B;AAC5B,aAAKd,UAAL,CAAgB6B,QAAhB;AACD;;AAED,WAAKhB,iBAAL,GAAyB,KAAzB;AACA,WAAKC,mBAAL,GAA2B,KAA3B;AACD;AACD;AACJ;AACA;;AA5BK,GA/DoB,EA6FpB;AACD9D,IAAAA,GAAG,EAAE,mBADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASL,iBAAT,GAA6B;AAClC,UAAIc,KAAK,GAAG,IAAZ;;AAEA,UAAIC,UAAU,GAAG,KAAKrD,GAAtB;AAAA,UACIE,YAAY,GAAGmD,UAAU,CAACnD,YAD9B;AAAA,UAEIC,UAAU,GAAGkD,UAAU,CAAClD,UAF5B;AAGA,UAAImD,2BAA2B,GAAG,KAAKhC,UAAL,CAAgBiC,0BAAlD;AACA,UAAIC,4BAA4B,GAAG,KAAKhC,WAAL,CAAiB+B,0BAApD;AACA,WAAK3C,YAAL,CAAkB6C,gBAAlB,CAAmCvD,YAAY,CAACwD,eAAhD,EAAiE,SAAjE,EAA4E,UAAUC,KAAV,EAAiB;AAC3F,eAAOP,KAAK,CAACQ,SAAN,CAAgBD,KAAhB,CAAP;AACD,OAFD;AAGA,WAAK/C,YAAL,CAAkB6C,gBAAlB,CAAmCvD,YAAY,CAACwD,eAAhD,EAAiE,OAAjE,EAA0E,YAAY;AACpF,eAAON,KAAK,CAACS,OAAN,EAAP;AACD,OAFD;AAGA,WAAKjD,YAAL,CAAkB6C,gBAAlB,CAAmCvD,YAAnC,EAAiD,kBAAjD,EAAqE,YAAY;AAC/E,eAAOkD,KAAK,CAACS,OAAN,EAAP;AACD,OAFD;AAGA,WAAKjD,YAAL,CAAkB6C,gBAAlB,CAAmCH,2BAAnC,EAAgE,QAAhE,EAA0E,UAAUK,KAAV,EAAiB;AACzF,eAAOP,KAAK,CAACU,aAAN,CAAoBH,KAApB,CAAP;AACD,OAFD,EAEG;AACDI,QAAAA,OAAO,EAAE;AADR,OAFH;;AAMA,UAAIT,2BAA2B,KAAKE,4BAApC,EAAkE;AAChE,aAAK5C,YAAL,CAAkB6C,gBAAlB,CAAmCD,4BAAnC,EAAiE,QAAjE,EAA2E,UAAUG,KAAV,EAAiB;AAC1F,iBAAOP,KAAK,CAACU,aAAN,CAAoBH,KAApB,CAAP;AACD,SAFD,EAEG;AACDI,UAAAA,OAAO,EAAE;AADR,SAFH;AAKD;;AAED,UAAIC,gBAAgB,GAAG7D,UAAU,CAAC8D,gBAAX,IAA+B9D,UAAU,CAAC8D,gBAAX,GAA8B,CAApF;AACA,UAAIC,gBAAgB,GAAG,KAAK/C,iBAAL,KAA2BhB,UAAlD;AACA,UAAIgE,YAAY,GAAG,KAAKnE,GAAL,CAASoE,UAAT,CAAoBC,UAApB,CAA+B,cAA/B,CAAnB;AACA,UAAIC,iBAAiB,GAAG;AACtBP,QAAAA,OAAO,EAAEG;AADa,OAAxB;;AAIA,UAAIC,YAAY,IAAIH,gBAAhB,IAAoC,CAACjF,QAAQ,EAAjD,EAAqD;AACnD,aAAK6B,YAAL,CAAkB6C,gBAAlB,CAAmC,KAAKzD,GAAL,CAASI,OAAT,CAAiBY,aAApD,EAAmE,OAAnE,EAA4E,UAAU2C,KAAV,EAAiB;AAC3F,iBAAOP,KAAK,CAACmB,YAAN,CAAmBZ,KAAnB,EAA0BQ,YAA1B,CAAP;AACD,SAFD,EAEGG,iBAFH;AAGD;;AAED,UAAIE,QAAQ,GAAG,CAAC,KAAKlD,UAAN,EAAkB,KAAKC,aAAvB,EAAsC,KAAKC,WAA3C,EAAwD,KAAKC,oBAA7D,EAAmF,KAAKC,uBAAxF,CAAf;AACA8C,MAAAA,QAAQ,CAACC,OAAT,CAAiB,UAAUC,OAAV,EAAmB;AAClC,YAAIA,OAAO,IAAIA,OAAO,CAAC5B,cAAvB,EAAuC;AACrC,cAAI1B,MAAM,GAAGsD,OAAO,CAACC,KAAR,CAAcvE,OAAd,CAAsBgB,MAAnC;;AAEAgC,UAAAA,KAAK,CAACxC,YAAN,CAAmB6C,gBAAnB,CAAoCrC,MAApC,EAA4C,OAA5C,EAAqD,UAAUuC,KAAV,EAAiB;AACpE,mBAAOP,KAAK,CAACmB,YAAN,CAAmBZ,KAAnB,EAA0BQ,YAA1B,CAAP;AACD,WAFD,EAEGG,iBAFH;AAGD;AACF,OARD;AASA,UAAIM,aAAJ;AACA,WAAKhE,YAAL,CAAkB6C,gBAAlB,CAAmCtD,UAAnC,EAA+C,QAA/C,EAAyD,YAAY;AACnE0E,QAAAA,YAAY,CAACD,aAAD,CAAZ;AACAA,QAAAA,aAAa,GAAGE,UAAU,CAAC,YAAY;AACrC1B,UAAAA,KAAK,CAACpD,GAAN,CAAUqE,UAAV,CAAqB,gBAArB;AACD,SAFyB,EAEvB,GAFuB,CAA1B;AAGD,OALD;AAMD;AACD;AACJ;AACA;;AAlEK,GA7FoB,EAiKpB;AACD/F,IAAAA,GAAG,EAAE,qBADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASoC,mBAAT,GAA+B;AACpC,WAAKnE,YAAL,CAAkBoE,WAAlB,CAA8B,IAA9B;AACD;AACD;AACJ;AACA;AACA;AACA;;AATK,GAjKoB,EA4KpB;AACD1G,IAAAA,GAAG,EAAE,eADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASmB,aAAT,CAAuBH,KAAvB,EAA8B;AACnC;AACA;AACA,UAAIxD,UAAU,GAAG,KAAKH,GAAL,CAASG,UAA1B;AACA,UAAI8E,gBAAgB,GAAG,KAAKzD,WAAL,CAAiB+B,0BAAxC;AACA,UAAI2B,cAAc,GAAG,KAAK5D,UAAL,CAAgBiC,0BAArC;AACA,UAAI3F,MAAM,GAAG+F,KAAK,CAAC/F,MAAnB,CANmC,CAMR;AAC3B;;AAEA,UAAI,KAAKmE,UAAT,EAAqB;AACnB,YAAImD,cAAc,KAAK/E,UAAnB,IAAiCvC,MAAM,KAAKuC,UAA5C,IAA0D,CAACwD,KAAK,CAAC/F,MAAN,CAAauH,QAAb,CAAsBD,cAAtB,CAA3D,IAAoGD,gBAAgB,KAAK9E,UAArB,IAAmCvC,MAAM,KAAKuC,UAA9C,IAA4D,CAACwD,KAAK,CAAC/F,MAAN,CAAauH,QAAb,CAAsBF,gBAAtB,CAArK,EAA8M;AAC5M;AACD;AACF;;AAED,WAAKG,mBAAL,CAAyBzB,KAAzB;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;;AAxBK,GA5KoB,EAsMpB;AACDrF,IAAAA,GAAG,EAAE,cADJ;AAEDqE,IAAAA,KAAK,EAAE,SAAS4B,YAAT,CAAsBZ,KAAtB,EAA6B0B,cAA7B,EAA6C;AAClD,UAAIlF,UAAU,GAAG,KAAKH,GAAL,CAASG,UAA1B,CADkD,CACZ;AACtC;;AAEA,UAAI8E,gBAAgB,GAAG,KAAKzD,WAAL,CAAiB+B,0BAAxC;AACA,UAAI2B,cAAc,GAAG,KAAK5D,UAAL,CAAgBiC,0BAArC;AACA,UAAI3F,MAAM,GAAG+F,KAAK,CAAC/F,MAAnB,CANkD,CAMvB;AAC3B;;AAEA,UAAI0H,wBAAwB,GAAGJ,cAAc,KAAK/E,UAAnB,IAAiCvC,MAAM,KAAKuC,UAA5C,IAA0D,CAACvC,MAAM,CAACuH,QAAP,CAAgBD,cAAhB,CAA1F;AACA,UAAIK,0BAA0B,GAAGN,gBAAgB,KAAK9E,UAArB,IAAmCvC,MAAM,KAAKuC,UAA9C,IAA4D,CAACvC,MAAM,CAACuH,QAAP,CAAgBF,gBAAhB,CAA9F;;AAEA,UAAI,KAAKlD,UAAL,KAAoBuD,wBAAwB,IAAIC,0BAAhD,CAAJ,EAAiF;AAC/E;AACD;;AAED,UAAIC,gBAAgB,GAAG,KAAKC,2BAAL,CAAiC9B,KAAjC,CAAvB;;AAEA,UAAI0B,cAAc,IAAI,KAAKlE,iBAAL,KAA2BhB,UAA3B,IAAyCqF,gBAA/D,EAAiF;AAC/E7B,QAAAA,KAAK,CAAC0B,cAAN;AACD;AACF;AACD;AACJ;AACA;AACA;AACA;;AA5BK,GAtMoB,EAoOpB;AACD/G,IAAAA,GAAG,EAAE,WADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASiB,SAAT,CAAmBD,KAAnB,EAA0B;AAC/B,WAAK5B,UAAL,GAAkBjD,KAAK,CAAC6E,KAAK,CAAC+B,OAAP,EAAgB,4CAAhB,CAAvB;AACD;AACD;AACJ;AACA;;AAPK,GApOoB,EA6OpB;AACDpH,IAAAA,GAAG,EAAE,SADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASkB,OAAT,GAAmB;AACxB,WAAK9B,UAAL,GAAkB,KAAlB;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;AAXK,GA7OoB,EA0PpB;AACDzD,IAAAA,GAAG,EAAE,6BADJ;AAEDqE,IAAAA,KAAK,EAAE,SAAS8C,2BAAT,CAAqC9B,KAArC,EAA4C;AACjD,UAAItB,iBAAiB,GAAG,KAAKA,iBAA7B;AACA,UAAIsD,MAAM,GAAGC,KAAK,CAACjC,KAAK,CAACgC,MAAP,CAAL,GAAsB,CAAC,CAAD,GAAKhC,KAAK,CAACkC,WAAjC,GAA+ClC,KAAK,CAACgC,MAAlE;AACA,UAAIG,MAAM,GAAGF,KAAK,CAACjC,KAAK,CAACmC,MAAP,CAAL,GAAsB,CAAC,CAAD,GAAKnC,KAAK,CAACoC,WAAjC,GAA+CpC,KAAK,CAACmC,MAAlE;;AAEA,UAAInC,KAAK,CAACqC,SAAN,KAAoB,CAAxB,EAA2B;AACzBF,QAAAA,MAAM,IAAIA,MAAM,GAAGzD,iBAAnB;AACAsD,QAAAA,MAAM,IAAIA,MAAM,GAAGtD,iBAAnB;AACD;;AAED,UAAI4D,0BAA0B,GAAG,KAAKC,gBAAL,CAAsBP,MAAtB,CAAjC;AACA,UAAIQ,4BAA4B,GAAG,KAAKC,kBAAL,CAAwBN,MAAxB,CAAnC;AACA,aAAOG,0BAA0B,IAAIE,4BAArC;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;;AArBK,GA1PoB,EAiRpB;AACD7H,IAAAA,GAAG,EAAE,kBADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASuD,gBAAT,CAA0BG,KAA1B,EAAiC;AACtC,UAAIC,cAAc,GAAG,KAAKnF,iBAAL,CAAuBoF,SAA5C;AACA,WAAKpF,iBAAL,CAAuBoF,SAAvB,IAAoCF,KAApC;AACA,aAAOC,cAAc,KAAK,KAAKnF,iBAAL,CAAuBoF,SAAjD;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;;AAZK,GAjRoB,EA+RpB;AACDjI,IAAAA,GAAG,EAAE,oBADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASyD,kBAAT,CAA4BC,KAA5B,EAAmC;AACxC,UAAIC,cAAc,GAAG,KAAKnF,iBAAL,CAAuBqF,UAA5C;AACA,WAAKrF,iBAAL,CAAuBqF,UAAvB,IAAqCH,KAArC;AACA,aAAOC,cAAc,KAAK,KAAKnF,iBAAL,CAAuBqF,UAAjD;AACD;AACD;AACJ;AACA;AACA;AACA;;AAXK,GA/RoB,EA4SpB;AACDlI,IAAAA,GAAG,EAAE,qBADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASyC,mBAAT,GAA+B;AACpC,UAAI,KAAKtD,SAAT,EAAoB;AAClB;AACD;;AAED,UAAI3B,UAAU,GAAG,KAAKH,GAAL,CAASG,UAA1B;AACA,UAAIsG,SAAS,GAAG,KAAKnF,UAAL,CAAgBqD,KAAhB,CAAsBvE,OAAtB,CAA8BgB,MAA9C;AACA,UAAIsF,UAAU,GAAG,KAAKlF,WAAL,CAAiBmD,KAAjB,CAAuBvE,OAAvB,CAA+BgB,MAAhD;AACA,UAAIuF,IAAI,GAAG,CAAC,KAAKxF,iBAAL,CAAuBqF,UAAxB,EAAoC,KAAKrF,iBAAL,CAAuBoF,SAA3D,CAAX;AAAA,UACIC,UAAU,GAAGG,IAAI,CAAC,CAAD,CADrB;AAAA,UAEIJ,SAAS,GAAGI,IAAI,CAAC,CAAD,CAFpB;AAGA,WAAKvE,mBAAL,GAA2BqE,SAAS,CAACD,UAAV,KAAyBA,UAAzB,IAAuC,KAAKjE,WAAL,KAAqBpC,UAAU,CAACqC,OAAlG;AACA,WAAKL,iBAAL,GAAyBuE,UAAU,CAACH,SAAX,KAAyBA,SAAzB,IAAsC,KAAK9D,WAAL,KAAqBtC,UAAU,CAACuC,OAA/F;AACA,WAAKH,WAAL,GAAmBpC,UAAU,CAACqC,OAA9B;AACA,WAAKC,WAAL,GAAmBtC,UAAU,CAACuC,OAA9B;;AAEA,UAAI,KAAKN,mBAAT,EAA8B;AAC5BqE,QAAAA,SAAS,CAACD,UAAV,GAAuBA,UAAvB;AACA,YAAII,YAAY,GAAG,KAAKrF,aAAL,CAAmBuB,cAAnB,GAAoC,KAAKvB,aAAL,CAAmBoD,KAAnB,CAAyBvE,OAAzB,CAAiCgB,MAArE,GAA8E,IAAjG;;AAEA,YAAIwF,YAAJ,EAAkB;AAChBA,UAAAA,YAAY,CAACJ,UAAb,GAA0BA,UAA1B;AACD;AACF;;AAED,UAAI,KAAKrE,iBAAT,EAA4B;AAC1BuE,QAAAA,UAAU,CAACH,SAAX,GAAuBA,SAAvB;AACD;;AAED,WAAKxD,UAAL;AACD;AACD;AACJ;AACA;;AAnCK,GA5SoB,EAiVpB;AACDzE,IAAAA,GAAG,EAAE,sBADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASkE,oBAAT,GAAgC;AACrC,UAAIC,MAAM,GAAG,KAAKxF,UAAL,CAAgBiC,0BAA7B;AACA,UAAIiD,UAAU,GAAGM,MAAM,CAACN,UAAxB;AAAA,UACID,SAAS,GAAGO,MAAM,CAACP,SADvB;;AAGA,UAAI,KAAKjF,UAAL,CAAgBwB,cAApB,EAAoC;AAClC,aAAKxB,UAAL,CAAgBqD,KAAhB,CAAsBvE,OAAtB,CAA8BgB,MAA9B,CAAqCoF,UAArC,GAAkDA,UAAlD;AACD;;AAED,UAAI,KAAKjF,aAAL,CAAmBuB,cAAvB,EAAuC;AACrC,aAAKvB,aAAL,CAAmBoD,KAAnB,CAAyBvE,OAAzB,CAAiCgB,MAAjC,CAAwCoF,UAAxC,GAAqDA,UAArD;AACD;;AAED,UAAI,KAAKhF,WAAL,CAAiBsB,cAArB,EAAqC;AACnC,aAAKtB,WAAL,CAAiBmD,KAAjB,CAAuBvE,OAAvB,CAA+BgB,MAA/B,CAAsCmF,SAAtC,GAAkDA,SAAlD;AACD;AACF;AACD;AACJ;AACA;;AArBK,GAjVoB,EAwWpB;AACDjI,IAAAA,GAAG,EAAE,8BADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASoE,4BAAT,GAAwC;AAC7C,WAAKhC,mBAAL;AACA,WAAKvD,WAAL,CAAiBwF,2BAAjB;AACA,WAAK1F,UAAL,CAAgB0F,2BAAhB;;AAEA,UAAI,KAAKzF,aAAL,CAAmBuB,cAAvB,EAAuC;AACrC,aAAKvB,aAAL,CAAmByF,2BAAnB;AACD;;AAED,UAAIC,UAAU,GAAG,KAAKjH,GAAtB;AAAA,UACIG,UAAU,GAAG8G,UAAU,CAAC9G,UAD5B;AAAA,UAEIC,OAAO,GAAG6G,UAAU,CAAC7G,OAFzB;;AAIA,UAAID,UAAU,CAACI,gBAAX,CAA4BH,OAAO,CAACY,aAAR,CAAsBC,UAAlD,EAA8DC,gBAA9D,CAA+E,UAA/E,MAA+F,QAAnG,EAA6G;AAC3G,aAAKC,iBAAL,GAAyBf,OAAO,CAACgB,MAAjC;AACD,OAFD,MAEO;AACL,aAAKD,iBAAL,GAAyBxC,oBAAoB,CAACyB,OAAO,CAACiB,KAAT,CAA7C;AACD;;AAED,WAAKiB,iBAAL;AACD;AACD;AACJ;AACA;;AAzBK,GAxWoB,EAmYpB;AACDhE,IAAAA,GAAG,EAAE,SADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASM,OAAT,GAAmB;AACxB,WAAKrC,YAAL,CAAkBqC,OAAlB;AACA,WAAK3B,UAAL,CAAgB2B,OAAhB;;AAEA,UAAI,KAAK1B,aAAL,CAAmBoD,KAAvB,EAA8B;AAC5B,aAAKpD,aAAL,CAAmB0B,OAAnB;AACD;;AAED,WAAKzB,WAAL,CAAiByB,OAAjB;;AAEA,UAAI,KAAKxB,oBAAT,EAA+B;AAC7B,aAAKA,oBAAL,CAA0BwB,OAA1B;AACD;;AAED,UAAI,KAAKvB,uBAAL,IAAgC,KAAKA,uBAAL,CAA6BiD,KAAjE,EAAwE;AACtE,aAAKjD,uBAAL,CAA6BuB,OAA7B;AACD;;AAED,WAAKnB,SAAL,GAAiB,IAAjB;AACD;AACD;AACJ;AACA;AACA;AACA;;AA1BK,GAnYoB,EA+ZpB;AACDxD,IAAAA,GAAG,EAAE,SADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASuE,OAAT,GAAmB;AACxB,UAAIC,QAAQ,GAAGC,SAAS,CAACrJ,MAAV,GAAmB,CAAnB,IAAwBqJ,SAAS,CAAC,CAAD,CAAT,KAAiBC,SAAzC,GAAqDD,SAAS,CAAC,CAAD,CAA9D,GAAoE,KAAnF;AACA,UAAIE,QAAQ,GAAG,KAAKtH,GAAL,CAASI,OAAT,CAAiBkH,QAAhC;AACA,UAAIrF,KAAK,GAAGqF,QAAQ,CAACC,WAArB;AACA,UAAIrF,MAAM,GAAGoF,QAAQ,CAACE,YAAtB;;AAEA,UAAIvF,KAAK,KAAK,KAAKD,gBAAL,CAAsBC,KAAhC,IAAyCC,MAAM,KAAK,KAAKF,gBAAL,CAAsBE,MAA9E,EAAsF;AACpF,aAAKF,gBAAL,CAAsBC,KAAtB,GAA8BA,KAA9B;AACA,aAAKD,gBAAL,CAAsBE,MAAtB,GAA+BA,MAA/B;AACA,aAAKuF,kBAAL;AACD;;AAED,UAAI,KAAKlG,aAAL,CAAmBoD,KAAvB,EAA8B;AAC5B,aAAKpD,aAAL,CAAmB2F,OAAnB,CAA2BC,QAA3B;AACD;;AAED,WAAK3F,WAAL,CAAiB0F,OAAjB,CAAyBC,QAAzB;AACA,WAAK7F,UAAL,CAAgB4F,OAAhB,CAAwBC,QAAxB;;AAEA,UAAI,KAAK1F,oBAAT,EAA+B;AAC7B,aAAKA,oBAAL,CAA0ByF,OAA1B,CAAkCC,QAAlC;AACD;;AAED,UAAI,KAAKzF,uBAAL,IAAgC,KAAKA,uBAAL,CAA6BiD,KAAjE,EAAwE;AACtE,aAAKjD,uBAAL,CAA6BwF,OAA7B,CAAqCC,QAArC;AACD;AACF;AACD;AACJ;AACA;AACA;AACA;;AAjCK,GA/ZoB,EAkcpB;AACD7I,IAAAA,GAAG,EAAE,oBADJ;AAEDqE,IAAAA,KAAK,EAAE,SAAS8E,kBAAT,GAA8B;AACnC,UAAIC,KAAK,GAAGN,SAAS,CAACrJ,MAAV,GAAmB,CAAnB,IAAwBqJ,SAAS,CAAC,CAAD,CAAT,KAAiBC,SAAzC,GAAqDD,SAAS,CAAC,CAAD,CAA9D,GAAoE,KAAhF;AACA,UAAIO,UAAU,GAAG,KAAK3H,GAAtB;AAAA,UACI4H,UAAU,GAAGD,UAAU,CAACC,UAD5B;AAAA,UAEIxH,OAAO,GAAGuH,UAAU,CAACvH,OAFzB;AAGA,UAAIyH,YAAY,GAAG,KAAK7H,GAAL,CAASqE,UAAT,CAAoB,cAApB,CAAnB;AACA,UAAIyD,SAAS,GAAG,KAAK9H,GAAL,CAASqE,UAAT,CAAoB,WAApB,CAAhB;AACA,UAAI0D,aAAa,GAAGH,UAAU,CAACI,iBAAX,EAApB;AACA,UAAIC,gBAAgB,GAAGL,UAAU,CAACM,qBAAX,EAAvB;AACA,UAAIC,UAAU,GAAG/H,OAAO,CAACgI,KAAR,CAAcC,KAA/B;AACAF,MAAAA,UAAU,CAAClG,KAAX,GAAmB,GAAGqG,MAAH,CAAUP,aAAa,GAAG,KAAKvG,WAAL,CAAiB+G,YAAjB,CAA8B,CAA9B,EAAiCV,YAAjC,CAA1B,EAA0E,IAA1E,CAAnB;AACAM,MAAAA,UAAU,CAACjG,MAAX,GAAoB,GAAGoG,MAAH,CAAUL,gBAAgB,GAAG,KAAK3G,UAAL,CAAgBiH,YAAhB,CAA6B,CAA7B,EAAgCT,SAAhC,CAAnB,GAAgE,CAA1E,EAA6E,IAA7E,CAApB;;AAEA,UAAI,KAAKjH,aAAL,GAAqB,CAAzB,EAA4B;AAC1B,YAAI2H,qBAAqB,GAAGpI,OAAO,CAACY,aAApC;AAAA,YACIyH,oBAAoB,GAAGD,qBAAqB,CAACE,YADjD;AAAA,YAEIC,mBAAmB,GAAGH,qBAAqB,CAACI,WAFhD;AAGA,YAAIC,eAAe,GAAGzI,OAAO,CAACgB,MAA9B;AAAA,YACI0H,kBAAkB,GAAGD,eAAe,CAACH,YADzC;AAAA,YAEIK,iBAAiB,GAAGF,eAAe,CAACD,WAFxC;AAGA,aAAK/G,iBAAL,GAAyB4G,oBAAoB,GAAGK,kBAAhD;AACA,aAAKlH,kBAAL,GAA0B+G,mBAAmB,GAAGI,iBAAhD;;AAEA,YAAI,KAAKlH,iBAAL,IAA0BzB,OAAO,CAACgI,KAAR,CAAcQ,WAAd,GAA4B,KAAK/H,aAAjC,GAAiD8H,mBAA/E,EAAoG;AAClG,eAAK/G,kBAAL,GAA0B,IAA1B;AACD,SAFD,MAEO,IAAI,KAAKA,kBAAL,IAA2BxB,OAAO,CAACgI,KAAR,CAAcM,YAAd,GAA6B,KAAK7H,aAAlC,GAAkD4H,oBAAjF,EAAuG;AAC5G,eAAK5G,iBAAL,GAAyB,IAAzB;AACD;AACF;;AAED,WAAKP,UAAL,CAAgBmG,kBAAhB,CAAmCC,KAAnC;AACA,WAAKlG,WAAL,CAAiBiG,kBAAjB,CAAoCC,KAApC;AACA,WAAKnG,aAAL,CAAmBkG,kBAAnB,CAAsCC,KAAtC;AACD;AACD;AACJ;AACA;;AAtCK,GAlcoB,EA0epB;AACDpJ,IAAAA,GAAG,EAAE,YADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASqG,UAAT,GAAsB;AAC3B,UAAI5I,OAAO,GAAG,KAAKJ,GAAL,CAASI,OAAvB;;AAEA,UAAI,CAACA,OAAO,CAAC6I,SAAR,EAAL,EAA0B;AACxB;AACD;;AAED,WAAK3H,UAAL,CAAgB0H,UAAhB;;AAEA,UAAI,KAAKzH,aAAL,CAAmBoD,KAAvB,EAA8B;AAC5B,aAAKpD,aAAL,CAAmByH,UAAnB;AACD;;AAED,WAAKxH,WAAL,CAAiBwH,UAAjB;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;;AAtBK,GA1eoB,EAkgBpB;AACD1K,IAAAA,GAAG,EAAE,kBADJ;AAEDqE,IAAAA,KAAK,EAAE,SAASuG,gBAAT,CAA0BC,OAA1B,EAAmC;AACxC,UAAI,CAACA,OAAL,EAAc;AACZ,eAAO,IAAP;AACD;;AAED,UAAI3E,QAAQ,GAAG,CAAC,KAAKlD,UAAN,EAAkB,KAAKE,WAAvB,EAAoC,KAAKD,aAAzC,EAAwD,KAAKE,oBAA7D,EAAmF,KAAKC,uBAAxF,CAAf;AACA,UAAI0H,MAAM,GAAG,IAAb;AACAvK,MAAAA,SAAS,CAAC2F,QAAD,EAAW,UAAU6E,IAAV,EAAgB;AAClC,YAAI,CAACA,IAAL,EAAW;AACT;AACD;;AAED,YAAIA,IAAI,CAAC1E,KAAL,IAAc0E,IAAI,CAAC1E,KAAL,CAAWvE,OAAX,CAAmBiB,KAAnB,CAAyB8D,QAAzB,CAAkCgE,OAAlC,CAAlB,EAA8D;AAC5DC,UAAAA,MAAM,GAAGC,IAAI,CAAC1E,KAAd;AACD;AACF,OARQ,CAAT;AASA,aAAOyE,MAAP;AACD;AACD;AACJ;AACA;AACA;;AAvBK,GAlgBoB,EA2hBpB;AACD9K,IAAAA,GAAG,EAAE,4BADJ;AAEDqE,IAAAA,KAAK,EAAE,SAAS2G,0BAAT,GAAsC;AAC3C,UAAIC,WAAW,GAAG,KAAK/L,QAAL,CAAc4C,OAAd,CAAsBiB,KAAxC;AACA,UAAImD,QAAQ,GAAG,CAAC,KAAKlD,UAAN,EAAkB,KAAKE,WAAvB,EAAoC,KAAKD,aAAzC,EAAwD,KAAKE,oBAA7D,EAAmF,KAAKC,uBAAxF,CAAf;AACA7C,MAAAA,SAAS,CAAC2F,QAAD,EAAW,UAAU6E,IAAV,EAAgB;AAClC,YAAI,CAACA,IAAL,EAAW;AACT;AACD;;AAEDA,QAAAA,IAAI,CAAC1E,KAAL,CAAWvE,OAAX,CAAmBiB,KAAnB,CAAyBmI,SAAzB,GAAqCD,WAAW,CAACC,SAAjD;AACD,OANQ,CAAT;AAOD;AAZA,GA3hBoB,CAAX,CAAZ;;AA0iBA,SAAO1J,QAAP;AACD,CAxmB2B,EAA5B;;AA0mBA,eAAeA,QAAf","sourcesContent":["import \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.timers.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { getScrollableElement, getScrollbarWidth } from \"./../../../helpers/dom/element.mjs\";\nimport { arrayEach } from \"./../../../helpers/array.mjs\";\nimport { isKey } from \"./../../../helpers/unicode.mjs\";\nimport { isChrome } from \"./../../../helpers/browser.mjs\";\nimport EventManager from \"./../../../eventManager.mjs\";\nimport { CLONE_BOTTOM_LEFT_CORNER, CLONE_BOTTOM, CLONE_LEFT, CLONE_TOP_LEFT_CORNER, CLONE_TOP, LeftOverlay, TopOverlay, TopLeftCornerOverlay, BottomOverlay, BottomLeftCornerOverlay, registerOverlayOnce, createOverlay, hasOverlay } from \"./overlay/index.mjs\";\nregisterOverlayOnce(BottomLeftCornerOverlay);\nregisterOverlayOnce(BottomOverlay);\nregisterOverlayOnce(LeftOverlay);\nregisterOverlayOnce(TopLeftCornerOverlay);\nregisterOverlayOnce(TopOverlay);\n/**\n * @class Overlays\n */\n\nvar Overlays = /*#__PURE__*/function () {\n  /**\n   * @param {Walkontable} wotInstance The Walkontable instance.\n   */\n  function Overlays(wotInstance) {\n    _classCallCheck(this, Overlays);\n\n    /**\n     * Walkontable instance's reference.\n     *\n     * @private\n     * @type {Walkontable}\n     */\n    this.wot = wotInstance;\n    var _this$wot = this.wot,\n        rootDocument = _this$wot.rootDocument,\n        rootWindow = _this$wot.rootWindow,\n        wtTable = _this$wot.wtTable;\n    /**\n     * Sometimes `line-height` might be set to 'normal'. In that case, a default `font-size` should be multiplied by roughly 1.2.\n     * Https://developer.mozilla.org/pl/docs/Web/CSS/line-height#Values.\n     */\n\n    var BODY_LINE_HEIGHT = parseInt(rootWindow.getComputedStyle(rootDocument.body).lineHeight, 10);\n    var FALLBACK_BODY_LINE_HEIGHT = parseInt(rootWindow.getComputedStyle(rootDocument.body).fontSize, 10) * 1.2; // legacy support\n\n    this.instance = this.wot;\n    this.eventManager = new EventManager(this.wot);\n    this.scrollbarSize = getScrollbarWidth(rootDocument);\n    this.wot.update('scrollbarWidth', this.scrollbarSize);\n    this.wot.update('scrollbarHeight', this.scrollbarSize);\n    var isOverflowHidden = rootWindow.getComputedStyle(wtTable.wtRootElement.parentNode).getPropertyValue('overflow') === 'hidden';\n    this.scrollableElement = isOverflowHidden ? wtTable.holder : getScrollableElement(wtTable.TABLE);\n    this.topOverlay = void 0;\n    this.bottomOverlay = void 0;\n    this.leftOverlay = void 0;\n    this.topLeftCornerOverlay = void 0;\n    this.bottomLeftCornerOverlay = void 0;\n    this.prepareOverlays();\n    this.hasScrollbarBottom = false;\n    this.hasScrollbarRight = false;\n    this.destroyed = false;\n    this.keyPressed = false;\n    this.spreaderLastSize = {\n      width: null,\n      height: null\n    };\n    this.verticalScrolling = false;\n    this.horizontalScrolling = false;\n    this.browserLineHeight = BODY_LINE_HEIGHT || FALLBACK_BODY_LINE_HEIGHT;\n    this.registerListeners();\n    this.lastScrollX = rootWindow.scrollX;\n    this.lastScrollY = rootWindow.scrollY;\n  }\n  /**\n   * Prepare overlays based on user settings.\n   *\n   * @returns {boolean} Returns `true` if changes applied to overlay needs scroll synchronization.\n   */\n\n\n  _createClass(Overlays, [{\n    key: \"prepareOverlays\",\n    value: function prepareOverlays() {\n      var syncScroll = false;\n\n      if (this.topOverlay) {\n        syncScroll = this.topOverlay.updateStateOfRendering() || syncScroll;\n      } else {\n        this.topOverlay = createOverlay(CLONE_TOP, this.wot);\n      }\n\n      if (!hasOverlay(CLONE_BOTTOM)) {\n        this.bottomOverlay = {\n          needFullRender: false,\n          updateStateOfRendering: function updateStateOfRendering() {\n            return false;\n          }\n        };\n      }\n\n      if (!hasOverlay(CLONE_BOTTOM_LEFT_CORNER)) {\n        this.bottomLeftCornerOverlay = {\n          needFullRender: false,\n          updateStateOfRendering: function updateStateOfRendering() {\n            return false;\n          }\n        };\n      }\n\n      if (this.bottomOverlay) {\n        syncScroll = this.bottomOverlay.updateStateOfRendering() || syncScroll;\n      } else {\n        this.bottomOverlay = createOverlay(CLONE_BOTTOM, this.wot);\n      }\n\n      if (this.leftOverlay) {\n        syncScroll = this.leftOverlay.updateStateOfRendering() || syncScroll;\n      } else {\n        this.leftOverlay = createOverlay(CLONE_LEFT, this.wot);\n      }\n\n      if (this.topOverlay.needFullRender && this.leftOverlay.needFullRender) {\n        if (this.topLeftCornerOverlay) {\n          syncScroll = this.topLeftCornerOverlay.updateStateOfRendering() || syncScroll;\n        } else {\n          this.topLeftCornerOverlay = createOverlay(CLONE_TOP_LEFT_CORNER, this.wot);\n        }\n      }\n\n      if (this.bottomOverlay.needFullRender && this.leftOverlay.needFullRender) {\n        if (this.bottomLeftCornerOverlay) {\n          syncScroll = this.bottomLeftCornerOverlay.updateStateOfRendering() || syncScroll;\n        } else {\n          this.bottomLeftCornerOverlay = createOverlay(CLONE_BOTTOM_LEFT_CORNER, this.wot);\n        }\n      }\n\n      return syncScroll;\n    }\n    /**\n     * Refresh and redraw table.\n     */\n\n  }, {\n    key: \"refreshAll\",\n    value: function refreshAll() {\n      if (!this.wot.drawn) {\n        return;\n      }\n\n      if (!this.wot.wtTable.holder.parentNode) {\n        // Walkontable was detached from DOM, but this handler was not removed\n        this.destroy();\n        return;\n      }\n\n      this.wot.draw(true);\n\n      if (this.verticalScrolling) {\n        this.leftOverlay.onScroll();\n      }\n\n      if (this.horizontalScrolling) {\n        this.topOverlay.onScroll();\n      }\n\n      this.verticalScrolling = false;\n      this.horizontalScrolling = false;\n    }\n    /**\n     * Register all necessary event listeners.\n     */\n\n  }, {\n    key: \"registerListeners\",\n    value: function registerListeners() {\n      var _this = this;\n\n      var _this$wot2 = this.wot,\n          rootDocument = _this$wot2.rootDocument,\n          rootWindow = _this$wot2.rootWindow;\n      var topOverlayScrollableElement = this.topOverlay.mainTableScrollableElement;\n      var leftOverlayScrollableElement = this.leftOverlay.mainTableScrollableElement;\n      this.eventManager.addEventListener(rootDocument.documentElement, 'keydown', function (event) {\n        return _this.onKeyDown(event);\n      });\n      this.eventManager.addEventListener(rootDocument.documentElement, 'keyup', function () {\n        return _this.onKeyUp();\n      });\n      this.eventManager.addEventListener(rootDocument, 'visibilitychange', function () {\n        return _this.onKeyUp();\n      });\n      this.eventManager.addEventListener(topOverlayScrollableElement, 'scroll', function (event) {\n        return _this.onTableScroll(event);\n      }, {\n        passive: true\n      });\n\n      if (topOverlayScrollableElement !== leftOverlayScrollableElement) {\n        this.eventManager.addEventListener(leftOverlayScrollableElement, 'scroll', function (event) {\n          return _this.onTableScroll(event);\n        }, {\n          passive: true\n        });\n      }\n\n      var isHighPixelRatio = rootWindow.devicePixelRatio && rootWindow.devicePixelRatio > 1;\n      var isScrollOnWindow = this.scrollableElement === rootWindow;\n      var preventWheel = this.wot.wtSettings.getSetting('preventWheel');\n      var wheelEventOptions = {\n        passive: isScrollOnWindow\n      };\n\n      if (preventWheel || isHighPixelRatio || !isChrome()) {\n        this.eventManager.addEventListener(this.wot.wtTable.wtRootElement, 'wheel', function (event) {\n          return _this.onCloneWheel(event, preventWheel);\n        }, wheelEventOptions);\n      }\n\n      var overlays = [this.topOverlay, this.bottomOverlay, this.leftOverlay, this.topLeftCornerOverlay, this.bottomLeftCornerOverlay];\n      overlays.forEach(function (overlay) {\n        if (overlay && overlay.needFullRender) {\n          var holder = overlay.clone.wtTable.holder;\n\n          _this.eventManager.addEventListener(holder, 'wheel', function (event) {\n            return _this.onCloneWheel(event, preventWheel);\n          }, wheelEventOptions);\n        }\n      });\n      var resizeTimeout;\n      this.eventManager.addEventListener(rootWindow, 'resize', function () {\n        clearTimeout(resizeTimeout);\n        resizeTimeout = setTimeout(function () {\n          _this.wot.getSetting('onWindowResize');\n        }, 200);\n      });\n    }\n    /**\n     * Deregister all previously registered listeners.\n     */\n\n  }, {\n    key: \"deregisterListeners\",\n    value: function deregisterListeners() {\n      this.eventManager.clearEvents(true);\n    }\n    /**\n     * Scroll listener.\n     *\n     * @param {Event} event The mouse event object.\n     */\n\n  }, {\n    key: \"onTableScroll\",\n    value: function onTableScroll(event) {\n      // There was if statement which controlled flow of this function. It avoided the execution of the next lines\n      // on mobile devices. It was changed. Broader description of this case is included within issue #4856.\n      var rootWindow = this.wot.rootWindow;\n      var masterHorizontal = this.leftOverlay.mainTableScrollableElement;\n      var masterVertical = this.topOverlay.mainTableScrollableElement;\n      var target = event.target; // For key press, sync only master -> overlay position because while pressing Walkontable.render is triggered\n      // by hot.refreshBorder\n\n      if (this.keyPressed) {\n        if (masterVertical !== rootWindow && target !== rootWindow && !event.target.contains(masterVertical) || masterHorizontal !== rootWindow && target !== rootWindow && !event.target.contains(masterHorizontal)) {\n          return;\n        }\n      }\n\n      this.syncScrollPositions(event);\n    }\n    /**\n     * Wheel listener for cloned overlays.\n     *\n     * @param {Event} event The mouse event object.\n     * @param {boolean} preventDefault If `true`, the `preventDefault` will be called on event object.\n     */\n\n  }, {\n    key: \"onCloneWheel\",\n    value: function onCloneWheel(event, preventDefault) {\n      var rootWindow = this.wot.rootWindow; // There was if statement which controlled flow of this function. It avoided the execution of the next lines\n      // on mobile devices. It was changed. Broader description of this case is included within issue #4856.\n\n      var masterHorizontal = this.leftOverlay.mainTableScrollableElement;\n      var masterVertical = this.topOverlay.mainTableScrollableElement;\n      var target = event.target; // For key press, sync only master -> overlay position because while pressing Walkontable.render is triggered\n      // by hot.refreshBorder\n\n      var shouldNotWheelVertically = masterVertical !== rootWindow && target !== rootWindow && !target.contains(masterVertical);\n      var shouldNotWheelHorizontally = masterHorizontal !== rootWindow && target !== rootWindow && !target.contains(masterHorizontal);\n\n      if (this.keyPressed && (shouldNotWheelVertically || shouldNotWheelHorizontally)) {\n        return;\n      }\n\n      var isScrollPossible = this.translateMouseWheelToScroll(event);\n\n      if (preventDefault || this.scrollableElement !== rootWindow && isScrollPossible) {\n        event.preventDefault();\n      }\n    }\n    /**\n     * Key down listener.\n     *\n     * @param {Event} event The keyboard event object.\n     */\n\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(event) {\n      this.keyPressed = isKey(event.keyCode, 'ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT');\n    }\n    /**\n     * Key up listener.\n     */\n\n  }, {\n    key: \"onKeyUp\",\n    value: function onKeyUp() {\n      this.keyPressed = false;\n    }\n    /**\n     * Translate wheel event into scroll event and sync scroll overlays position.\n     *\n     * @private\n     * @param {Event} event The mouse event object.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"translateMouseWheelToScroll\",\n    value: function translateMouseWheelToScroll(event) {\n      var browserLineHeight = this.browserLineHeight;\n      var deltaY = isNaN(event.deltaY) ? -1 * event.wheelDeltaY : event.deltaY;\n      var deltaX = isNaN(event.deltaX) ? -1 * event.wheelDeltaX : event.deltaX;\n\n      if (event.deltaMode === 1) {\n        deltaX += deltaX * browserLineHeight;\n        deltaY += deltaY * browserLineHeight;\n      }\n\n      var isScrollVerticallyPossible = this.scrollVertically(deltaY);\n      var isScrollHorizontallyPossible = this.scrollHorizontally(deltaX);\n      return isScrollVerticallyPossible || isScrollHorizontallyPossible;\n    }\n    /**\n     * Scrolls main scrollable element horizontally.\n     *\n     * @param {number} delta Relative value to scroll.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"scrollVertically\",\n    value: function scrollVertically(delta) {\n      var previousScroll = this.scrollableElement.scrollTop;\n      this.scrollableElement.scrollTop += delta;\n      return previousScroll !== this.scrollableElement.scrollTop;\n    }\n    /**\n     * Scrolls main scrollable element horizontally.\n     *\n     * @param {number} delta Relative value to scroll.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"scrollHorizontally\",\n    value: function scrollHorizontally(delta) {\n      var previousScroll = this.scrollableElement.scrollLeft;\n      this.scrollableElement.scrollLeft += delta;\n      return previousScroll !== this.scrollableElement.scrollLeft;\n    }\n    /**\n     * Synchronize scroll position between master table and overlay table.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"syncScrollPositions\",\n    value: function syncScrollPositions() {\n      if (this.destroyed) {\n        return;\n      }\n\n      var rootWindow = this.wot.rootWindow;\n      var topHolder = this.topOverlay.clone.wtTable.holder;\n      var leftHolder = this.leftOverlay.clone.wtTable.holder;\n      var _ref = [this.scrollableElement.scrollLeft, this.scrollableElement.scrollTop],\n          scrollLeft = _ref[0],\n          scrollTop = _ref[1];\n      this.horizontalScrolling = topHolder.scrollLeft !== scrollLeft || this.lastScrollX !== rootWindow.scrollX;\n      this.verticalScrolling = leftHolder.scrollTop !== scrollTop || this.lastScrollY !== rootWindow.scrollY;\n      this.lastScrollX = rootWindow.scrollX;\n      this.lastScrollY = rootWindow.scrollY;\n\n      if (this.horizontalScrolling) {\n        topHolder.scrollLeft = scrollLeft;\n        var bottomHolder = this.bottomOverlay.needFullRender ? this.bottomOverlay.clone.wtTable.holder : null;\n\n        if (bottomHolder) {\n          bottomHolder.scrollLeft = scrollLeft;\n        }\n      }\n\n      if (this.verticalScrolling) {\n        leftHolder.scrollTop = scrollTop;\n      }\n\n      this.refreshAll();\n    }\n    /**\n     * Synchronize overlay scrollbars with the master scrollbar.\n     */\n\n  }, {\n    key: \"syncScrollWithMaster\",\n    value: function syncScrollWithMaster() {\n      var master = this.topOverlay.mainTableScrollableElement;\n      var scrollLeft = master.scrollLeft,\n          scrollTop = master.scrollTop;\n\n      if (this.topOverlay.needFullRender) {\n        this.topOverlay.clone.wtTable.holder.scrollLeft = scrollLeft;\n      }\n\n      if (this.bottomOverlay.needFullRender) {\n        this.bottomOverlay.clone.wtTable.holder.scrollLeft = scrollLeft;\n      }\n\n      if (this.leftOverlay.needFullRender) {\n        this.leftOverlay.clone.wtTable.holder.scrollTop = scrollTop;\n      }\n    }\n    /**\n     * Update the main scrollable elements for all the overlays.\n     */\n\n  }, {\n    key: \"updateMainScrollableElements\",\n    value: function updateMainScrollableElements() {\n      this.deregisterListeners();\n      this.leftOverlay.updateMainScrollableElement();\n      this.topOverlay.updateMainScrollableElement();\n\n      if (this.bottomOverlay.needFullRender) {\n        this.bottomOverlay.updateMainScrollableElement();\n      }\n\n      var _this$wot3 = this.wot,\n          rootWindow = _this$wot3.rootWindow,\n          wtTable = _this$wot3.wtTable;\n\n      if (rootWindow.getComputedStyle(wtTable.wtRootElement.parentNode).getPropertyValue('overflow') === 'hidden') {\n        this.scrollableElement = wtTable.holder;\n      } else {\n        this.scrollableElement = getScrollableElement(wtTable.TABLE);\n      }\n\n      this.registerListeners();\n    }\n    /**\n     *\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.eventManager.destroy();\n      this.topOverlay.destroy();\n\n      if (this.bottomOverlay.clone) {\n        this.bottomOverlay.destroy();\n      }\n\n      this.leftOverlay.destroy();\n\n      if (this.topLeftCornerOverlay) {\n        this.topLeftCornerOverlay.destroy();\n      }\n\n      if (this.bottomLeftCornerOverlay && this.bottomLeftCornerOverlay.clone) {\n        this.bottomLeftCornerOverlay.destroy();\n      }\n\n      this.destroyed = true;\n    }\n    /**\n     * @param {boolean} [fastDraw=false] When `true`, try to refresh only the positions of borders without rerendering\n     *                                   the data. It will only work if Table.draw() does not force\n     *                                   rendering anyway.\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      var fastDraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var spreader = this.wot.wtTable.spreader;\n      var width = spreader.clientWidth;\n      var height = spreader.clientHeight;\n\n      if (width !== this.spreaderLastSize.width || height !== this.spreaderLastSize.height) {\n        this.spreaderLastSize.width = width;\n        this.spreaderLastSize.height = height;\n        this.adjustElementsSize();\n      }\n\n      if (this.bottomOverlay.clone) {\n        this.bottomOverlay.refresh(fastDraw);\n      }\n\n      this.leftOverlay.refresh(fastDraw);\n      this.topOverlay.refresh(fastDraw);\n\n      if (this.topLeftCornerOverlay) {\n        this.topLeftCornerOverlay.refresh(fastDraw);\n      }\n\n      if (this.bottomLeftCornerOverlay && this.bottomLeftCornerOverlay.clone) {\n        this.bottomLeftCornerOverlay.refresh(fastDraw);\n      }\n    }\n    /**\n     * Adjust overlays elements size and master table size.\n     *\n     * @param {boolean} [force=false] When `true`, it adjust the DOM nodes sizes for all overlays.\n     */\n\n  }, {\n    key: \"adjustElementsSize\",\n    value: function adjustElementsSize() {\n      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var _this$wot4 = this.wot,\n          wtViewport = _this$wot4.wtViewport,\n          wtTable = _this$wot4.wtTable;\n      var totalColumns = this.wot.getSetting('totalColumns');\n      var totalRows = this.wot.getSetting('totalRows');\n      var headerRowSize = wtViewport.getRowHeaderWidth();\n      var headerColumnSize = wtViewport.getColumnHeaderHeight();\n      var hiderStyle = wtTable.hider.style;\n      hiderStyle.width = \"\".concat(headerRowSize + this.leftOverlay.sumCellSizes(0, totalColumns), \"px\");\n      hiderStyle.height = \"\".concat(headerColumnSize + this.topOverlay.sumCellSizes(0, totalRows) + 1, \"px\");\n\n      if (this.scrollbarSize > 0) {\n        var _wtTable$wtRootElemen = wtTable.wtRootElement,\n            rootElemScrollHeight = _wtTable$wtRootElemen.scrollHeight,\n            rootElemScrollWidth = _wtTable$wtRootElemen.scrollWidth;\n        var _wtTable$holder = wtTable.holder,\n            holderScrollHeight = _wtTable$holder.scrollHeight,\n            holderScrollWidth = _wtTable$holder.scrollWidth;\n        this.hasScrollbarRight = rootElemScrollHeight < holderScrollHeight;\n        this.hasScrollbarBottom = rootElemScrollWidth < holderScrollWidth;\n\n        if (this.hasScrollbarRight && wtTable.hider.scrollWidth + this.scrollbarSize > rootElemScrollWidth) {\n          this.hasScrollbarBottom = true;\n        } else if (this.hasScrollbarBottom && wtTable.hider.scrollHeight + this.scrollbarSize > rootElemScrollHeight) {\n          this.hasScrollbarRight = true;\n        }\n      }\n\n      this.topOverlay.adjustElementsSize(force);\n      this.leftOverlay.adjustElementsSize(force);\n      this.bottomOverlay.adjustElementsSize(force);\n    }\n    /**\n     *\n     */\n\n  }, {\n    key: \"applyToDOM\",\n    value: function applyToDOM() {\n      var wtTable = this.wot.wtTable;\n\n      if (!wtTable.isVisible()) {\n        return;\n      }\n\n      this.topOverlay.applyToDOM();\n\n      if (this.bottomOverlay.clone) {\n        this.bottomOverlay.applyToDOM();\n      }\n\n      this.leftOverlay.applyToDOM();\n    }\n    /**\n     * Get the parent overlay of the provided element.\n     *\n     * @param {HTMLElement} element An element to process.\n     * @returns {object|null}\n     */\n\n  }, {\n    key: \"getParentOverlay\",\n    value: function getParentOverlay(element) {\n      if (!element) {\n        return null;\n      }\n\n      var overlays = [this.topOverlay, this.leftOverlay, this.bottomOverlay, this.topLeftCornerOverlay, this.bottomLeftCornerOverlay];\n      var result = null;\n      arrayEach(overlays, function (elem) {\n        if (!elem) {\n          return;\n        }\n\n        if (elem.clone && elem.clone.wtTable.TABLE.contains(element)) {\n          result = elem.clone;\n        }\n      });\n      return result;\n    }\n    /**\n     * Synchronize the class names between the main overlay table and the tables on the other overlays.\n     *\n     */\n\n  }, {\n    key: \"syncOverlayTableClassNames\",\n    value: function syncOverlayTableClassNames() {\n      var masterTable = this.instance.wtTable.TABLE;\n      var overlays = [this.topOverlay, this.leftOverlay, this.bottomOverlay, this.topLeftCornerOverlay, this.bottomLeftCornerOverlay];\n      arrayEach(overlays, function (elem) {\n        if (!elem) {\n          return;\n        }\n\n        elem.clone.wtTable.TABLE.className = masterTable.className;\n      });\n    }\n  }]);\n\n  return Overlays;\n}();\n\nexport default Overlays;"]},"metadata":{},"sourceType":"module"}