{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import\"./instrumentation.css\";import React,{useState,useEffect}from'react';import NavBar from'../../components/navBar/navBar';import RoleDropDown from'../../components/roleDropDown/roleDropDown';import InstrumentationEstimatedDataTable from\"../../components/instrumentationEstimatedDataTable/instrumentationEstimatedDataTable\";import InstrumentationModelledDataTable from\"../../components/instrumentationModelledDataTable/instrumentationModelledDataTable\";import EquipmentsNavBtns from\"../../components/EquipmentsNavBtns/equipmentsNavBtns\";import ProgressPlotInstrumentation from\"../../components/progressPlotInstrumentation/progressPlotInstrumentation\";import InstrumentationTypesDataTable from\"../../components/instrumentationTypesDataTable/instrumentationTypesDataTable\";import*as FileSaver from\"file-saver\";import*as XLSX from\"xlsx\";import InstExcel from\"../../components/instExcel/instExcel\";import InstExcelEdit from\"../../components/instExcelEdit/instExcelEdit\";import IsoTrackerLogo from\"../../assets/images/3DTracker.svg\";import ExportIcon from\"../../assets/images/downloadicon.png\";import EditIcon from\"../../assets/images/edit.png\";import AlertF from\"../../components/alert/alert\";import IdleTimer from'react-idle-timer';import{useHistory}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Instrumentation=function Instrumentation(){var CryptoJS=require(\"crypto-js\");var SecureStorage=require(\"secure-web-storage\");var SECRET_KEY='sanud2ha8shd72h';var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentRole=_useState2[0],setCurrentRole=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),roles=_useState4[0],setRoles=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),weight=_useState6[0],setWeight=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),progress=_useState8[0],setProgress=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),successAlert=_useState10[0],setSuccessAlert=_useState10[1];var history=useHistory();useEffect(function(){var body={user:currentUser};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/roles/user\",options).then(function(response){return response.json();}).then(function(json){setRoles(json.roles);if(secureStorage.getItem('role')!==null){setCurrentRole(secureStorage.getItem('role'));}else{secureStorage.setItem('role',json.roles[0]);setCurrentRole(secureStorage.getItem('role'));}}).catch(function(error){console.log(error);});},[currentRole]);useEffect(function(){var options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/instrumentation/weight\",options).then(function(response){return response.json();}).then(function(json){setWeight(json.weight);setProgress(json.progress);}).catch(function(error){console.log(error);});var body={user:currentUser};options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[]);useEffect(function(){if(!secureStorage.getItem(\"user\")){history.push(\"/\"+process.env.REACT_APP_PROJECT+\"/\");}},[]);function success(){setSuccessAlert(true);setTimeout(function(){setSuccessAlert(false);},1000);}function handleOnIdle(){var body={user:currentUser};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(json){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());secureStorage.clear();history.push(\"/\"+process.env.REACT_APP_PROJECT);}var secureStorage=new SecureStorage(localStorage,{hash:function hash(key){key=CryptoJS.SHA256(key,SECRET_KEY);return key.toString();},encrypt:function encrypt(data){data=CryptoJS.AES.encrypt(data,SECRET_KEY);data=data.toString();return data;},decrypt:function decrypt(data){data=CryptoJS.AES.decrypt(data,SECRET_KEY);data=data.toString(CryptoJS.enc.Utf8);return data;}});var dataTableHeight=\"600px\";document.body.style.zoom=0.8;document.title=process.env.REACT_APP_APP_NAMEPROJ;var _useState11=useState(secureStorage.getItem(\"inst_tab\")),_useState12=_slicedToArray(_useState11,2),currentTab=_useState12[0],setCurrentTab=_useState12[1];if(currentTab===\"\"||currentTab===null){setCurrentTab(\"Estimated\");}var currentUser=secureStorage.getItem('user');var table=null;var downloadBtn=null;var adminBtn=null;if(currentTab===\"Estimated\"){table=/*#__PURE__*/_jsx(InstrumentationEstimatedDataTable,{});}else if(currentTab===\"Modelled\"){downloadBtn=/*#__PURE__*/_jsxs(\"button\",{className:\"navBar__button\",onClick:function onClick(){return downloadInstrumentationModelled();},style:{marginLeft:\"230px\",width:\"115px\",position:\"relative\"},children:[/*#__PURE__*/_jsx(\"img\",{src:ExportIcon,alt:\"trash\",className:\"navBar__icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"navBar__button__text\",style:{paddingLeft:\"25px\"},children:\"Export\"})]});table=/*#__PURE__*/_jsx(InstrumentationModelledDataTable,{});}else if(currentTab===\"Progress\"){table=/*#__PURE__*/_jsx(ProgressPlotInstrumentation,{});}else if(currentTab===\"Types\"){table=/*#__PURE__*/_jsx(InstrumentationTypesDataTable,{});}else if(currentTab===\"Key parameters\"){table=/*#__PURE__*/_jsx(InstExcel,{success:success.bind(_this)});}else if(currentTab===\"Edit\"){table=/*#__PURE__*/_jsx(InstExcelEdit,{success:success.bind(_this)});}if(currentTab===\"Edit\"||currentTab===\"Key parameters\"){dataTableHeight=\"600px\";}if(currentRole===\"Project\"){if(currentTab===\"Estimated\"||currentTab===\"Edit\"){if(currentTab===\"Edit\"){adminBtn=/*#__PURE__*/_jsxs(\"button\",{className:\"navBar__button\",onClick:function onClick(){return setCurrentTab(\"Edit\");},style:{backgroundColor:\"#99C6F8\",marginLeft:\"230px\",position:\"relative\"},children:[/*#__PURE__*/_jsx(\"img\",{src:EditIcon,alt:\"trash\",className:\"navBar__icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"navBar__button__text\",children:\"Edit\"})]});}else{adminBtn=/*#__PURE__*/_jsxs(\"button\",{className:\"navBar__button\",onClick:function onClick(){return setCurrentTab(\"Edit\");},style:{marginLeft:\"230px\",position:\"relative\"},children:[/*#__PURE__*/_jsx(\"img\",{src:EditIcon,alt:\"trash\",className:\"navBar__icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"navBar__button__text\",children:\"Edit\"})]});}}else{adminBtn=null;}}function downloadInstrumentationModelled(){return _downloadInstrumentationModelled.apply(this,arguments);}function _downloadInstrumentationModelled(){_downloadInstrumentationModelled=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/downloadInstrumentationModelled/\").then(function(response){return response.json();}).then(function(json){var headers=[\"AREA\",\"TAG\",\"TYPE\",\"WEIGHT\",\"STATUS\",\"PROGRESS\"];exportToExcel(JSON.parse(json),\"Instrumentation modelled\",headers);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _downloadInstrumentationModelled.apply(this,arguments);}var exportToExcel=function exportToExcel(apiData,fileName,headers){var fileType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\";var header_cells=['A1','B1','C1','D1','E1','F1','G1','H1','I1','J1','K1','L1','M1','O1'];var fileExtension=\".xlsx\";var wscols=[];for(var i=0;i<headers.length;i++){wscols.push({width:35});}var ws=XLSX.utils.json_to_sheet(apiData);ws[\"!cols\"]=wscols;for(var _i=0;_i<headers.length;_i++){ws[header_cells[_i]].v=headers[_i];}var wb={Sheets:{data:ws},SheetNames:[\"data\"]};var excelBuffer=XLSX.write(wb,{bookType:\"xlsx\",type:\"array\"});var data=new Blob([excelBuffer],{type:fileType});FileSaver.saveAs(data,fileName+fileExtension);};return/*#__PURE__*/_jsxs(\"body\",{children:[/*#__PURE__*/_jsx(IdleTimer,{timeout:1000*60*15,onIdle:handleOnIdle,debounce:250}),/*#__PURE__*/_jsx(NavBar,{onChange:function onChange(value){return setCurrentTab(currentTab);}}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(successAlert?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setSuccessAlert(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"success\",text:\"Changes saved!\",margin:\"0px\"})}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",marginTop:\"180px\",marginLeft:\"46%\"},children:/*#__PURE__*/_jsx(\"i\",{className:\"discipline__title\",style:{fontStyle:\"normal\"},children:\"Instrumentation\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"isotracker__row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"isotracker__column\",children:[/*#__PURE__*/_jsx(\"img\",{src:IsoTrackerLogo,alt:\"isoTrackerLogo\",className:\"isoTrackerLogo__image2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"roleSelector__containerF\",children:/*#__PURE__*/_jsx(RoleDropDown,{style:{paddingLeft:\"2px\"},onChange:function onChange(value){return setCurrentRole(value);},roles:roles})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"isotracker__column\",children:/*#__PURE__*/_jsx(\"table\",{className:\"equipTable__table\",style:{marginTop:\"270px\",width:\"35%\",marginLeft:\"59%\"},children:/*#__PURE__*/_jsxs(\"tbody\",{className:\"equipable__body\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"equipTable__header\",style:{backgroundColor:\"#338DF1\",borderRadius:\"1em 0 0 0\"},children:\"Estimated weight\"}),/*#__PURE__*/_jsx(\"td\",{className:\"equipTable__header\",style:{backgroundColor:\"#338DF1\",borderRadius:\"0 1em 0 0\"},children:\"Total progress\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"equipTable__state\",style:{borderRadius:\"0 0 0 1em\"},children:weight}),/*#__PURE__*/_jsxs(\"td\",{className:\"equipTable__state\",style:{borderRadius:\"0 0 1em 0\"},children:[progress,\"%\"]})]})]})})})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"isotracker__table__container\",children:[/*#__PURE__*/_jsx(\"tr\",{className:\"isotracker__table__navBar__container\",children:/*#__PURE__*/_jsxs(\"th\",{colspan:\"2\",className:\"isotracker__table__navBar\",children:[adminBtn,downloadBtn]})}),/*#__PURE__*/_jsxs(\"tr\",{className:\"isotracker__table__tray__and__table__container\",style:{height:dataTableHeight},children:[/*#__PURE__*/_jsx(\"td\",{className:\"disciplines__table__trays\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"trays__container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"isotracker__table__trays__group\",children:\"Options\"}),/*#__PURE__*/_jsx(\"center\",{className:\"equimentsNavBtns__center\",children:/*#__PURE__*/_jsx(EquipmentsNavBtns,{onChange:function onChange(value){return setCurrentTab(value);},currentTab:currentTab,currentRole:currentRole,discipline:\"Equipment\"})})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"discplines__table__table\",style:{height:dataTableHeight},children:/*#__PURE__*/_jsx(\"div\",{style:{height:dataTableHeight},className:\"isotracker__table__table__container\",children:table})})]})]})]});};export default Instrumentation;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/pages/instrumentation/instrumentation.js"],"names":["React","useState","useEffect","NavBar","RoleDropDown","InstrumentationEstimatedDataTable","InstrumentationModelledDataTable","EquipmentsNavBtns","ProgressPlotInstrumentation","InstrumentationTypesDataTable","FileSaver","XLSX","InstExcel","InstExcelEdit","ExportIcon","EditIcon","AlertF","IdleTimer","useHistory","Instrumentation","CryptoJS","require","SecureStorage","SECRET_KEY","currentRole","setCurrentRole","roles","setRoles","weight","setWeight","progress","setProgress","successAlert","setSuccessAlert","history","body","user","currentUser","options","method","headers","JSON","stringify","fetch","process","env","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","secureStorage","getItem","setItem","catch","error","console","log","push","REACT_APP_PROJECT","success","setTimeout","handleOnIdle","clear","localStorage","hash","key","SHA256","toString","encrypt","data","AES","decrypt","enc","Utf8","dataTableHeight","document","style","zoom","title","REACT_APP_APP_NAMEPROJ","currentTab","setCurrentTab","table","downloadBtn","adminBtn","downloadInstrumentationModelled","marginLeft","width","position","paddingLeft","bind","backgroundColor","exportToExcel","parse","apiData","fileName","fileType","header_cells","fileExtension","wscols","i","length","ws","utils","json_to_sheet","v","wb","Sheets","SheetNames","excelBuffer","write","bookType","type","Blob","saveAs","value","marginTop","fontStyle","IsoTrackerLogo","borderRadius","height"],"mappings":"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","sourcesContent":["import \"./instrumentation.css\"\r\nimport React, { useState , useEffect} from 'react'\r\nimport NavBar from '../../components/navBar/navBar'\r\nimport RoleDropDown from '../../components/roleDropDown/roleDropDown'\r\nimport InstrumentationEstimatedDataTable from \"../../components/instrumentationEstimatedDataTable/instrumentationEstimatedDataTable\"\r\nimport InstrumentationModelledDataTable from \"../../components/instrumentationModelledDataTable/instrumentationModelledDataTable\"\r\nimport EquipmentsNavBtns from \"../../components/EquipmentsNavBtns/equipmentsNavBtns\"\r\nimport ProgressPlotInstrumentation from \"../../components/progressPlotInstrumentation/progressPlotInstrumentation\"\r\nimport InstrumentationTypesDataTable from \"../../components/instrumentationTypesDataTable/instrumentationTypesDataTable\"\r\nimport * as FileSaver from \"file-saver\";\r\nimport * as XLSX from \"xlsx\";\r\nimport InstExcel from \"../../components/instExcel/instExcel\"\r\nimport InstExcelEdit from \"../../components/instExcelEdit/instExcelEdit\"\r\nimport IsoTrackerLogo from \"../../assets/images/3DTracker.svg\"\r\nimport ExportIcon from \"../../assets/images/downloadicon.png\"\r\nimport EditIcon from \"../../assets/images/edit.png\"\r\nimport AlertF from \"../../components/alert/alert\"\r\n\r\nimport IdleTimer from 'react-idle-timer'\r\nimport {useHistory} from \"react-router\";\r\n\r\nconst Instrumentation = () => {\r\n\r\n    const CryptoJS = require(\"crypto-js\");\r\n    const SecureStorage = require(\"secure-web-storage\");\r\n    var SECRET_KEY = 'sanud2ha8shd72h';\r\n    const [currentRole, setCurrentRole] = useState();\r\n    const [roles, setRoles] = useState();\r\n    const[weight, setWeight] = useState();\r\n    const[progress, setProgress] = useState();\r\n    const[successAlert, setSuccessAlert] = useState(false);\r\n\r\n    const history = useHistory()\r\n\r\n    useEffect(()=>{\r\n        const body = {\r\n            user: currentUser,\r\n        }\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n       \r\n\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/roles/user\", options)\r\n            .then(response => response.json())\r\n            .then(json => {\r\n                setRoles(json.roles);\r\n                if(secureStorage.getItem('role') !== null){\r\n                    setCurrentRole(secureStorage.getItem('role'))\r\n                }else{\r\n                    secureStorage.setItem('role', json.roles[0])\r\n                    setCurrentRole(secureStorage.getItem('role'))\r\n                }\r\n                }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            })       \r\n            \r\n    },[currentRole]);\r\n\r\n    useEffect(()=>{\r\n\r\n        let options = {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n        }\r\n       \r\n\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/instrumentation/weight\", options)\r\n            .then(response => response.json())\r\n            .then(json => {\r\n                setWeight(json.weight)\r\n                setProgress(json.progress)\r\n            }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            })       \r\n\r\n            const body = {\r\n                user: currentUser,\r\n            }\r\n            options = {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify(body)\r\n            }\r\n            fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\", options)\r\n                .then(response => response.json())\r\n                .then(async json => {\r\n    \r\n                })\r\n            \r\n    },[]);\r\n\r\n    useEffect(()=>{\r\n        if(!secureStorage.getItem(\"user\")){\r\n            history.push(\"/\"+process.env.REACT_APP_PROJECT+\"/\");\r\n        }\r\n    }, [])\r\n\r\n    function success(){\r\n        setSuccessAlert(true)\r\n        setTimeout(function () {\r\n            setSuccessAlert(false)\r\n        }, 1000);\r\n    }\r\n    \r\n    function handleOnIdle(){\r\n        const body = {\r\n            user: currentUser,\r\n        }\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n\r\n            })\r\n        secureStorage.clear()\r\n        history.push(\"/\" + process.env.REACT_APP_PROJECT)\r\n    }\r\n    \r\n    var secureStorage = new SecureStorage(localStorage, {\r\n        hash: function hash(key) {\r\n            key = CryptoJS.SHA256(key, SECRET_KEY);\r\n    \r\n            return key.toString();\r\n        },\r\n        encrypt: function encrypt(data) {\r\n            data = CryptoJS.AES.encrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString();\r\n    \r\n            return data;\r\n        },\r\n        decrypt: function decrypt(data) {\r\n            data = CryptoJS.AES.decrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString(CryptoJS.enc.Utf8);\r\n    \r\n            return data;\r\n        }\r\n    });\r\n\r\n    var dataTableHeight = \"600px\"\r\n\r\n    document.body.style.zoom = 0.8\r\n    document.title= process.env.REACT_APP_APP_NAMEPROJ\r\n    const [currentTab, setCurrentTab] = useState(secureStorage.getItem(\"inst_tab\"))\r\n    if(currentTab === \"\" || currentTab === null){\r\n        setCurrentTab(\"Estimated\")\r\n    }\r\n\r\n    var currentUser = secureStorage.getItem('user')\r\n    var table = null\r\n\r\n    let downloadBtn = null\r\n    let adminBtn = null\r\n\r\n    if(currentTab === \"Estimated\"){\r\n        table = <InstrumentationEstimatedDataTable/>\r\n    }else if(currentTab === \"Modelled\"){\r\n        downloadBtn = <button className=\"navBar__button\" onClick={()=>downloadInstrumentationModelled()} style={{marginLeft:\"230px\", width:\"115px\", position:\"relative\"}}><img src={ExportIcon} alt=\"trash\" className=\"navBar__icon\"></img><p className=\"navBar__button__text\" style={{paddingLeft:\"25px\"}}>Export</p></button>\r\n    \r\n        table = <InstrumentationModelledDataTable/>\r\n    }else if(currentTab === \"Progress\"){\r\n        table = <ProgressPlotInstrumentation/>\r\n    }else if(currentTab === \"Types\"){\r\n        table = <InstrumentationTypesDataTable/>\r\n    }else if(currentTab === \"Key parameters\"){\r\n        table = <InstExcel success={success.bind(this)}/>\r\n    }else if(currentTab === \"Edit\"){\r\n        table = <InstExcelEdit success={success.bind(this)}/>\r\n    }\r\n\r\n    \r\n    if(currentTab === \"Edit\" || currentTab === \"Key parameters\"){\r\n        dataTableHeight = \"600px\"\r\n    }\r\n    \r\n    if(currentRole === \"Project\"){\r\n        if(currentTab === \"Estimated\" || currentTab === \"Edit\"){\r\n            if(currentTab === \"Edit\"){\r\n                adminBtn = <button className=\"navBar__button\" onClick={()=>setCurrentTab(\"Edit\")} style={{backgroundColor:\"#99C6F8\", marginLeft:\"230px\", position:\"relative\"}}><img src={EditIcon} alt=\"trash\" className=\"navBar__icon\"></img><p className=\"navBar__button__text\">Edit</p></button>\r\n            }else{\r\n                adminBtn = <button className=\"navBar__button\" onClick={()=>setCurrentTab(\"Edit\")} style={{marginLeft:\"230px\", position:\"relative\"}}><img src={EditIcon} alt=\"trash\" className=\"navBar__icon\"></img><p className=\"navBar__button__text\">Edit</p></button>\r\n            }        }else{\r\n            adminBtn = null\r\n        }\r\n    }\r\n\r\n\r\n    async function downloadInstrumentationModelled(){\r\n\r\n        await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/downloadInstrumentationModelled/\")\r\n        .then(response => response.json())\r\n        .then(json => {\r\n            const headers = [\"AREA\", \"TAG\", \"TYPE\", \"WEIGHT\", \"STATUS\", \"PROGRESS\"]\r\n            exportToExcel(JSON.parse(json), \"Instrumentation modelled\", headers)\r\n        })\r\n    }\r\n\r\n    const exportToExcel = (apiData, fileName, headers) => {\r\n        const fileType =\r\n          \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\";\r\n        const header_cells = ['A1', 'B1', 'C1', 'D1', 'E1', 'F1', 'G1', 'H1', 'I1', 'J1', 'K1', 'L1', 'M1', 'O1']\r\n        const fileExtension = \".xlsx\";\r\n\r\n        let wscols = []\r\n        for(let i = 0; i < headers.length; i++){\r\n            wscols.push({width:35})\r\n        }\r\n\r\n        const ws = XLSX.utils.json_to_sheet(apiData);   \r\n        ws[\"!cols\"] = wscols\r\n        for(let i = 0; i < headers.length; i++){\r\n            ws[header_cells[i]].v = headers[i]\r\n        }\r\n        const wb = { Sheets: { data: ws }, SheetNames: [\"data\"] };\r\n        const excelBuffer = XLSX.write(wb, { bookType: \"xlsx\", type: \"array\" });\r\n        const data = new Blob([excelBuffer], { type: fileType });\r\n        FileSaver.saveAs(data, fileName + fileExtension);\r\n\r\n    }\r\n\r\n    return(\r\n        \r\n        <body>\r\n            <IdleTimer\r\n                timeout={1000 * 60 * 15}\r\n                onIdle={handleOnIdle}\r\n                debounce={250}\r\n            />\r\n            <NavBar onChange={value => setCurrentTab(currentTab)}/>\r\n            <div\r\n            className={`alert alert-success ${successAlert ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setSuccessAlert(false)}\r\n            >\r\n                <AlertF type=\"success\" text=\"Changes saved!\" margin=\"0px\"/>\r\n            </div>\r\n            <div style={{position:\"absolute\", marginTop:\"180px\", marginLeft:\"46%\"}}>\r\n                <i className=\"discipline__title\" style={{fontStyle:\"normal\"}}>Instrumentation</i>\r\n            </div>\r\n                <div className=\"isotracker__row\">\r\n                  <div className=\"isotracker__column\">\r\n                      <img src={IsoTrackerLogo} alt=\"isoTrackerLogo\" className=\"isoTrackerLogo__image2\"/>\r\n                      \r\n                      <div className=\"roleSelector__containerF\">\r\n                              <RoleDropDown style={{paddingLeft: \"2px\"}} onChange={value => setCurrentRole(value)} roles = {roles}/>\r\n                      </div>\r\n                      \r\n                  </div>\r\n                  \r\n\r\n                  <div className=\"isotracker__column\">\r\n                  \r\n                  <table className=\"equipTable__table\" style={{marginTop:\"270px\", width:\"35%\", marginLeft:\"59%\"}}>\r\n                        <tbody className=\"equipable__body\">\r\n                            <tr>    \r\n                                <td  className=\"equipTable__header\" style={{backgroundColor:\"#338DF1\", borderRadius:\"1em 0 0 0\"}}>Estimated weight</td>\r\n                                <td className=\"equipTable__header\" style={{backgroundColor:\"#338DF1\", borderRadius:\"0 1em 0 0\"}}>Total progress</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td className=\"equipTable__state\" style={{borderRadius:\"0 0 0 1em\"}}>{weight}</td>\r\n                                <td className=\"equipTable__state\" style={{borderRadius:\"0 0 1em 0\"}}>{progress}%</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    \r\n                  </div>               \r\n                  \r\n                  \r\n              </div>\r\n              <table className=\"isotracker__table__container\">\r\n                      <tr className=\"isotracker__table__navBar__container\">\r\n                          <th  colspan=\"2\" className=\"isotracker__table__navBar\">\r\n                            {adminBtn}\r\n                            {downloadBtn}\r\n                          </th>\r\n                      </tr>\r\n                      <tr className=\"isotracker__table__tray__and__table__container\" style={{height: dataTableHeight}}>\r\n                          <td className=\"disciplines__table__trays\">\r\n                              <div className=\"trays__container\">\r\n                                  <p className=\"isotracker__table__trays__group\">Options</p>\r\n                                  <center className=\"equimentsNavBtns__center\">              \r\n                                    <EquipmentsNavBtns onChange={value => setCurrentTab(value)} currentTab = {currentTab} currentRole = {currentRole} discipline = \"Equipment\"/>               \r\n                                    </center>\r\n                              </div>\r\n                          </td>\r\n                          <td className=\"discplines__table__table\" style={{height: dataTableHeight}} >\r\n                              <div  style={{height: dataTableHeight}} className=\"isotracker__table__table__container\">\r\n                                  {table}\r\n                              </div>\r\n                          </td>\r\n                          \r\n                      </tr>\r\n                  </table>\r\n         </body>\r\n    )\r\n}\r\n\r\nexport default Instrumentation;"]},"metadata":{},"sourceType":"module"}