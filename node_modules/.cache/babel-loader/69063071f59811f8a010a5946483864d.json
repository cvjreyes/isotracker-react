{"ast":null,"code":"import _objectSpread from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'antd/dist/antd.css';import{Table,Input,Button,Space}from'antd';import Highlighter from'react-highlight-words';import{SearchOutlined}from'@ant-design/icons';import'./statusDataTable.css';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var rowSelection={onChange:function onChange(selectedRowKeys,selectedRows){console.log(\"selectedRowKeys: \".concat(selectedRowKeys),'selectedRows: ',selectedRows);},getCheckboxProps:function getCheckboxProps(record){return{disabled:record.name==='Disabled User',// Column configuration not to be checked\nname:record.name};}};var StatusDataTable=/*#__PURE__*/function(_React$Component){_inherits(StatusDataTable,_React$Component);var _super=_createSuper(StatusDataTable);function StatusDataTable(){var _this;_classCallCheck(this,StatusDataTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={searchText:'',searchedColumn:'',data:[],weights:[],role:_this.props.role};_this.getColumnSearchProps=function(dataIndex){return{filterDropdown:function filterDropdown(_ref){var setSelectedKeys=_ref.setSelectedKeys,selectedKeys=_ref.selectedKeys,confirm=_ref.confirm,clearFilters=_ref.clearFilters;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:8},children:[/*#__PURE__*/_jsx(Input,{ref:function ref(node){_this.searchInput=node;},placeholder:\"Search \".concat(dataIndex),value:selectedKeys[0],onChange:function onChange(e){return setSelectedKeys(e.target.value?[e.target.value]:[]);},onPressEnter:function onPressEnter(){return _this.handleSearch(selectedKeys,confirm,dataIndex);},style:{width:188,marginBottom:8,display:'block'}}),/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){return _this.handleSearch(selectedKeys,confirm,dataIndex);},icon:/*#__PURE__*/_jsx(SearchOutlined,{}),size:\"small\",style:{width:90},children:\"Search\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return _this.handleReset(clearFilters);},size:\"small\",style:{width:90},children:\"Reset\"}),/*#__PURE__*/_jsx(Button,{type:\"link\",size:\"small\",onClick:function onClick(){confirm({closeDropdown:false});_this.setState({searchText:selectedKeys[0],searchedColumn:dataIndex});},children:\"Filter\"})]})]});},filterIcon:function filterIcon(filtered){return/*#__PURE__*/_jsx(SearchOutlined,{style:{color:filtered?'#1890ff':undefined}});},onFilter:function onFilter(value,record){return _this.state.searchedColumn===\"id\"?record.id.props.children?record.id.props.children.toString().toLowerCase().includes(value.toLowerCase()):'':record[dataIndex]?record[dataIndex].toString().toLowerCase().includes(value.toLowerCase()):'';},onFilterDropdownVisibleChange:function onFilterDropdownVisibleChange(visible){if(visible){setTimeout(function(){return _this.searchInput.select();},100);}},render:function render(text){return text!=null?text.props&&text.type!==\"div\"?/*#__PURE__*/_jsx(Link,{onClick:function onClick(){return _this.getMaster(text.props.children);},children:text.props.children}):_this.state.searchedColumn===dataIndex?/*#__PURE__*/_jsx(Highlighter,{highlightStyle:{backgroundColor:'#ffc069',padding:0},searchWords:[_this.state.searchText],autoEscape:true,textToHighlight:text?text:''}):text:text;}};};_this.handleSearch=function(selectedKeys,confirm,dataIndex){confirm();_this.setState({searchText:selectedKeys[0],searchedColumn:dataIndex});};_this.handleReset=function(clearFilters){clearFilters();_this.setState({searchText:''});};return _this;}_createClass(StatusDataTable,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var options,_options;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(process.env.REACT_APP_PROGRESS===\"1\")){_context.next=7;break;}options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};_context.next=4;return fetch(\"http://localhost:5000/getMaxProgress\",options).then(function(response){return response.json();}).then(function(json){_this2.setState({weights:[json.weights[0].weight,json.weights[1].weight,json.weights[2].weight]});});case 4:fetch(\"http://localhost:5000/api/statusFiles\",options).then(function(response){return response.json();}).then(function(json){console.log(_this2.state.weights);var rows=[];var row=null;var _loop=function _loop(i){condition=\"\";if(json.rows[i].issued===null){condition=\"ON GOING R\"+String(json.rows[i].revision)+\"*\";}else{condition=\"ISSUED R\"+String(json.rows[i].revision-1);}if(json.rows[i].deleted===1){condition=\"DELETED\";}if(json.rows[i].onhold===1){condition=\"ON HOLD\";}if(json.rows[i].tpipes_id){row={key:i,status:json.rows[i].to,id:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){return _this2.getMaster(json.rows[i].filename);},children:json.rows[i].filename}),condition:condition,MAXWeight:_this2.state.weights[json.rows[i].tpipes_id-1],realProgress:(json.rows[i].realprogress/_this2.state.weights[json.rows[i].tpipes_id-1]*100).toFixed(2)+\"% (\"+json.rows[i].realprogress+\")\",progress:(json.rows[i].progress/_this2.state.weights[json.rows[i].tpipes_id-1]*100).toFixed(2)+\"% (\"+json.rows[i].progress+\")\"};}else{row={key:i,status:json.rows[i].to,id:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){return _this2.getMaster(json.rows[i].filename);},children:json.rows[i].filename})};}rows.push(row);};for(var i=0;i<json.rows.length;i++){var condition;_loop(i);}_this2.setState({data:rows,role:_this2.props.role});}).catch(function(error){console.log(error);});_context.next=9;break;case 7:_options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};fetch(\"http://localhost:5000/api/statusFiles\",_options).then(function(response){return response.json();}).then(function(json){console.log(_this2.state.weights);var rows=[];var row=null;var _loop2=function _loop2(i){condition=\"\";if(json.rows[i].issued===null){condition=\"ON GOING R\"+String(json.rows[i].revision)+\"*\";}else{condition=\"ISSUED R\"+String(json.rows[i].revision-1);}if(json.rows[i].deleted===1){condition=\"DELETED\";}if(json.rows[i].onhold===1){condition=\"ON HOLD\";}row={key:i,status:json.rows[i].to,id:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){return _this2.getMaster(json.rows[i].filename);},children:json.rows[i].filename}),condition:condition};rows.push(row);};for(var i=0;i<json.rows.length;i++){var condition;_loop2(i);}_this2.setState({data:rows,role:_this2.props.role});}).catch(function(error){console.log(error);});case 9:case\"end\":return _context.stop();}}},_callee);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(prevProps,prevState){var _this3=this;var options,_options2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(prevProps!==this.props)){_context2.next=10;break;}if(!(process.env.REACT_APP_PROGRESS===\"1\")){_context2.next=8;break;}options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};_context2.next=5;return fetch(\"http://localhost:5000/getMaxProgress\",options).then(function(response){return response.json();}).then(function(json){_this3.setState({weights:[json.weights[0].weight,json.weights[1].weight,json.weights[2].weight]});});case 5:fetch(\"http://localhost:5000/api/statusFiles\",options).then(function(response){return response.json();}).then(function(json){console.log(_this3.state.weights);var rows=[];var row=null;var _loop3=function _loop3(i){condition=\"\";if(json.rows[i].issued===null){condition=\"ON GOING R\"+json.rows[i].revision+\"*\";}else{condition=\"ISSUED R\"+json.rows[i].revision-1;}if(json.rows[i].deleted===1){condition=\"DELETED\";}if(json.rows[i].onhold===1){condition=\"ON HOLD\";}if(json.rows[i].tpipes_id){row={key:i,status:json.rows[i].to,id:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){return _this3.getMaster(json.rows[i].filename);},children:json.rows[i].filename}),condition:condition,MAXWeight:_this3.state.weights[json.rows[i].tpipes_id-1],realProgress:(json.rows[i].realprogress/_this3.state.weights[json.rows[i].tpipes_id-1]*100).toFixed(2)+\"% (\"+json.rows[i].realprogress+\")\",progress:(json.rows[i].progress/_this3.state.weights[json.rows[i].tpipes_id-1]*100).toFixed(2)+\"% (\"+json.rows[i].progress+\")\"};}else{row={key:i,status:json.rows[i].to,id:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){return _this3.getMaster(json.rows[i].filename);},children:json.rows[i].filename})};}rows.push(row);};for(var i=0;i<json.rows.length;i++){var condition;_loop3(i);}_this3.setState({data:rows,role:_this3.props.role});}).catch(function(error){console.log(error);});_context2.next=10;break;case 8:_options2={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};fetch(\"http://localhost:5000/api/statusFiles\",_options2).then(function(response){return response.json();}).then(function(json){console.log(_this3.state.weights);var rows=[];var row=null;var _loop4=function _loop4(i){condition=\"\";if(json.rows[i].issued===null){condition=\"ON GOING R\"+json.rows[i].revision+\"*\";}else{condition=\"ISSUED R\"+json.rows[i].revision-1;}if(json.rows[i].deleted===1){condition=\"DELETED\";}if(json.rows[i].onhold===1){condition=\"ON HOLD\";}row={key:i,status:json.rows[i].to,id:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){return _this3.getMaster(json.rows[i].filename);},children:json.rows[i].filename}),condition:condition};rows.push(row);};for(var i=0;i<json.rows.length;i++){var condition;_loop4(i);}_this3.setState({data:rows,role:_this3.props.role});}).catch(function(error){console.log(error);});case 10:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidUpdate(_x,_x2){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()},{key:\"getMaster\",value:function getMaster(fileName){console.log(fileName);var options={method:\"GET\",headers:{\"Content-Type\":\"application/pdf\"}};fetch(\"http://localhost:5000/getMaster/\"+fileName,options).then(function(res){return res.blob();}).then(function(response){console.log(response);var file=new Blob([response],{type:\"application/pdf\"});//Build a URL from the file\nvar fileURL=URL.createObjectURL(file);//Open the URL on new Window\nwindow.open(fileURL);}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var columns=[_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"div\",{className:\"dataTable__header__text\",children:\"Status\"}),dataIndex:'status',key:'status',width:'20%'},this.getColumnSearchProps('status')),{},{sorter:{compare:function compare(a,b){return a.status.localeCompare(b.status);}}}),_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"center\",{className:\"dataTable__header__text\",children:\"ISO ID\"}),dataIndex:'id',key:'id',width:'20%'},this.getColumnSearchProps('id')),{},{sorter:{compare:function compare(a,b){return a.id.localeCompare(b.id);}}}),_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"div\",{className:\"dataTable__header__text\",children:\"Condition\"}),dataIndex:'condition',key:'condition'},this.getColumnSearchProps('condition')),{},{sorter:{compare:function compare(a,b){return a.condition.localeCompare(b.condition);}}})];if(process.env.REACT_APP_PROGRESS===\"1\"){columns.push(_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"div\",{className:\"dataTable__header__text\",children:\"MAX Weight\"}),dataIndex:'MAXWeight',key:'MAXWeight'},this.getColumnSearchProps('MAXWeight')),{},{sorter:{compare:function compare(a,b){return a.MAXWeight-b.MAXWeight;}}}));columns.push(_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"div\",{className:\"dataTable__header__text\",children:\"Progress\"}),dataIndex:'progress',key:'progress'},this.getColumnSearchProps('progress')),{},{sorter:{compare:function compare(a,b){return a.progress-b.progress;}}}));if(this.state.role===\"SpecialityLead\"){columns.push(_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"div\",{className:\"dataTable__header__text\",children:\"Real Progress\"}),dataIndex:'realProgress',key:'realProgress'},this.getColumnSearchProps('realProgress')),{},{sorter:{compare:function compare(a,b){return a.realProgress-b.realProgress;}}}));}}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"dataTable__container\",children:[/*#__PURE__*/_jsx(Table,{className:\"customTable\",bordered:true,rowSelection:_objectSpread({type:'checkbox'},rowSelection),columns:columns,dataSource:this.state.data,pagination:{pageSize:this.props.pagination},size:\"small\"}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",bottom:25,left:0},children:/*#__PURE__*/_jsxs(\"b\",{children:[\"Total elements: \",this.state.data.length]})})]})});}}]);return StatusDataTable;}(React.Component);export default StatusDataTable;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/components/statusDataTable/statusDataTable.js"],"names":["React","Table","Input","Button","Space","Highlighter","SearchOutlined","Link","rowSelection","onChange","selectedRowKeys","selectedRows","console","log","getCheckboxProps","record","disabled","name","StatusDataTable","state","searchText","searchedColumn","data","weights","role","props","getColumnSearchProps","dataIndex","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","node","searchInput","e","target","value","handleSearch","width","marginBottom","display","handleReset","closeDropdown","setState","filterIcon","filtered","color","undefined","onFilter","id","children","toString","toLowerCase","includes","onFilterDropdownVisibleChange","visible","setTimeout","select","render","text","type","getMaster","backgroundColor","process","env","REACT_APP_PROGRESS","options","method","headers","fetch","then","response","json","weight","rows","row","i","condition","issued","String","revision","deleted","onhold","tpipes_id","key","status","to","filename","MAXWeight","realProgress","realprogress","toFixed","progress","push","length","catch","error","prevProps","prevState","fileName","res","blob","file","Blob","fileURL","URL","createObjectURL","window","open","columns","title","sorter","compare","a","b","localeCompare","pageSize","pagination","position","bottom","left","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'antd/dist/antd.css';\r\nimport { Table, Input, Button, Space } from 'antd';\r\nimport Highlighter from 'react-highlight-words';\r\nimport { SearchOutlined } from '@ant-design/icons';\r\nimport './statusDataTable.css'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst rowSelection = {\r\n    onChange: (selectedRowKeys, selectedRows) => {\r\n      console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\r\n    },\r\n    getCheckboxProps: (record) => ({\r\n      disabled: record.name === 'Disabled User',\r\n      // Column configuration not to be checked\r\n      name: record.name,\r\n    }),\r\n  };\r\n\r\nclass StatusDataTable extends React.Component{\r\n  state = {\r\n    searchText: '',\r\n    searchedColumn: '',\r\n    data: [],\r\n    weights: [],\r\n    role: this.props.role\r\n  };\r\n  \r\n\r\n  async componentDidMount(){\r\n\r\n    if(process.env.REACT_APP_PROGRESS === \"1\"){\r\n      const options = {\r\n        method: \"GET\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n      }\r\n      await fetch(\"http://localhost:5000/getMaxProgress\", options)\r\n      .then(response => response.json())\r\n      .then(json =>{\r\n        this.setState({\r\n          weights: [json.weights[0].weight,json.weights[1].weight,json.weights[2].weight]\r\n        })\r\n      })\r\n\r\n      fetch(\"http://localhost:5000/api/statusFiles\", options)\r\n          .then(response => response.json())\r\n          .then(json => {\r\n            console.log(this.state.weights)\r\n              var rows = []\r\n              var row = null;\r\n              \r\n              for(let i = 0; i < json.rows.length; i++){\r\n                var condition = \"\"\r\n                if(json.rows[i].issued === null){\r\n                  condition = \"ON GOING R\" + String(json.rows[i].revision) + \"*\"\r\n                }else{\r\n                  condition = \"ISSUED R\" + String(json.rows[i].revision - 1)\r\n                }\r\n                if(json.rows[i].deleted === 1){\r\n                  condition = \"DELETED\"\r\n                }\r\n                if(json.rows[i].onhold === 1){\r\n                  condition = \"ON HOLD\"\r\n                }\r\n                if(json.rows[i].tpipes_id){\r\n                  row = {key:i, status: json.rows[i].to, id: <Link onClick={() => this.getMaster(json.rows[i].filename)}>{json.rows[i].filename}</Link>, condition: condition, MAXWeight: this.state.weights[json.rows[i].tpipes_id - 1],realProgress: (json.rows[i].realprogress / this.state.weights[json.rows[i].tpipes_id - 1] * 100).toFixed(2) + \"% (\" + json.rows[i].realprogress + \")\" , progress: (json.rows[i].progress / this.state.weights[json.rows[i].tpipes_id - 1] * 100).toFixed(2) + \"% (\" + json.rows[i].progress + \")\"}\r\n                }else{\r\n                  row = {key:i, status: json.rows[i].to, id: <Link onClick={() => this.getMaster(json.rows[i].filename)}>{json.rows[i].filename}</Link>}\r\n                }\r\n                        \r\n                rows.push(row)\r\n              }\r\n                          \r\n              this.setState({data : rows, role: this.props.role});\r\n\r\n              }\r\n          )\r\n          .catch(error => {\r\n              console.log(error);\r\n          })\r\n    }else{\r\n      const options = {\r\n        method: \"GET\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n\r\n      }\r\n      fetch(\"http://localhost:5000/api/statusFiles\", options)\r\n          .then(response => response.json())\r\n          .then(json => {\r\n            console.log(this.state.weights)\r\n              var rows = []\r\n              var row = null;\r\n              for(let i = 0; i < json.rows.length; i++){\r\n                var condition = \"\"\r\n                if(json.rows[i].issued === null){\r\n                  condition = \"ON GOING R\" + String(json.rows[i].revision) + \"*\"\r\n                }else{\r\n                  condition = \"ISSUED R\" + String(json.rows[i].revision - 1)\r\n                }\r\n                if(json.rows[i].deleted === 1){\r\n                  condition = \"DELETED\"\r\n                }\r\n                if(json.rows[i].onhold === 1){\r\n                  condition = \"ON HOLD\"\r\n                }\r\n                row = {key:i, status: json.rows[i].to, id: <Link onClick={() => this.getMaster(json.rows[i].filename)}>{json.rows[i].filename}</Link>, condition: condition}                    \r\n                rows.push(row)\r\n              }\r\n                          \r\n              this.setState({data : rows, role: this.props.role});\r\n\r\n              }\r\n          )\r\n          .catch(error => {\r\n              console.log(error);\r\n          })\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState){\r\n\r\n    if(prevProps !== this.props){\r\n\r\n      if(process.env.REACT_APP_PROGRESS === \"1\"){\r\n        const options = {\r\n          method: \"GET\",\r\n          headers: {\r\n              \"Content-Type\": \"application/json\"\r\n          },\r\n        }\r\n        await fetch(\"http://localhost:5000/getMaxProgress\", options)\r\n        .then(response => response.json())\r\n        .then(json =>{\r\n          this.setState({\r\n            weights: [json.weights[0].weight,json.weights[1].weight,json.weights[2].weight]\r\n          })\r\n        })\r\n  \r\n        fetch(\"http://localhost:5000/api/statusFiles\", options)\r\n            .then(response => response.json())\r\n            .then(json => {\r\n              console.log(this.state.weights)\r\n                var rows = []\r\n                var row = null;\r\n                \r\n                for(let i = 0; i < json.rows.length; i++){\r\n                  var condition = \"\"\r\n                  if(json.rows[i].issued === null){\r\n                    condition = \"ON GOING R\" + json.rows[i].revision + \"*\"\r\n                  }else{\r\n                    condition = \"ISSUED R\" + json.rows[i].revision - 1\r\n                  }\r\n                  if(json.rows[i].deleted === 1){\r\n                    condition = \"DELETED\"\r\n                  }\r\n                  if(json.rows[i].onhold === 1){\r\n                    condition = \"ON HOLD\"\r\n                  }\r\n                  if(json.rows[i].tpipes_id){\r\n                    row = {key:i, status: json.rows[i].to, id: <Link onClick={() => this.getMaster(json.rows[i].filename)}>{json.rows[i].filename}</Link>, condition: condition, MAXWeight: this.state.weights[json.rows[i].tpipes_id - 1],realProgress: (json.rows[i].realprogress / this.state.weights[json.rows[i].tpipes_id - 1] * 100).toFixed(2) + \"% (\" + json.rows[i].realprogress + \")\" , progress: (json.rows[i].progress / this.state.weights[json.rows[i].tpipes_id - 1] * 100).toFixed(2) + \"% (\" + json.rows[i].progress + \")\"}\r\n                  }else{\r\n                    row = {key:i, status: json.rows[i].to, id: <Link onClick={() => this.getMaster(json.rows[i].filename)}>{json.rows[i].filename}</Link>}\r\n                  }\r\n                          \r\n                  rows.push(row)\r\n                }\r\n                            \r\n                this.setState({data : rows, role: this.props.role});\r\n  \r\n                }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            })\r\n      }else{\r\n        const options = {\r\n          method: \"GET\",\r\n          headers: {\r\n              \"Content-Type\": \"application/json\"\r\n          },\r\n  \r\n        }\r\n        fetch(\"http://localhost:5000/api/statusFiles\", options)\r\n            .then(response => response.json())\r\n            .then(json => {\r\n              console.log(this.state.weights)\r\n                var rows = []\r\n                var row = null;\r\n                for(let i = 0; i < json.rows.length; i++){\r\n                  var condition = \"\"\r\n                  if(json.rows[i].issued === null){\r\n                    condition = \"ON GOING R\" + json.rows[i].revision + \"*\"\r\n                  }else{\r\n                    condition = \"ISSUED R\" + json.rows[i].revision - 1\r\n                  }\r\n                  if(json.rows[i].deleted === 1){\r\n                    condition = \"DELETED\"\r\n                  }\r\n                  if(json.rows[i].onhold === 1){\r\n                    condition = \"ON HOLD\"\r\n                  }\r\n                  row = {key:i, status: json.rows[i].to, id: <Link onClick={() => this.getMaster(json.rows[i].filename)}>{json.rows[i].filename}</Link>, condition: condition}                    \r\n                  rows.push(row)\r\n                }\r\n                            \r\n                this.setState({data : rows, role: this.props.role});\r\n  \r\n                }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            })\r\n      }\r\n    }\r\n  }\r\n\r\n  getMaster(fileName){\r\n\r\n    console.log(fileName)\r\n\r\n    const options = {\r\n      method: \"GET\",\r\n      headers: {\r\n          \"Content-Type\": \"application/pdf\"\r\n      }\r\n    }\r\n    fetch(\"http://localhost:5000/getMaster/\"+fileName, options)\r\n    .then(res => res.blob())\r\n    .then(response => {\r\n      console.log(response)\r\n      const file = new Blob([response], {\r\n        type: \"application/pdf\"\r\n      });\r\n      //Build a URL from the file\r\n      const fileURL = URL.createObjectURL(file);\r\n      //Open the URL on new Window\r\n      window.open(fileURL);\r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  \r\n  getColumnSearchProps = dataIndex => ({\r\n    filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\r\n      <div style={{ padding: 8 }}>\r\n        <Input\r\n          ref={node => {\r\n            this.searchInput = node;\r\n          }}\r\n          placeholder={`Search ${dataIndex}`}\r\n          value={selectedKeys[0]}\r\n          onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\r\n          onPressEnter={() => this.handleSearch(selectedKeys, confirm, dataIndex)}\r\n          style={{ width: 188, marginBottom: 8, display: 'block' }}\r\n        />\r\n        <Space>\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={() => this.handleSearch(selectedKeys, confirm, dataIndex)}\r\n            icon={<SearchOutlined />}\r\n            size=\"small\"\r\n            style={{ width: 90 }}\r\n          >\r\n            Search\r\n          </Button>\r\n          <Button onClick={() => this.handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\r\n            Reset\r\n          </Button>\r\n          <Button\r\n            type=\"link\"\r\n            size=\"small\"\r\n            onClick={() => {\r\n              confirm({ closeDropdown: false });\r\n              this.setState({\r\n                searchText: selectedKeys[0],\r\n                searchedColumn: dataIndex,\r\n              });\r\n            }}\r\n          >\r\n            Filter\r\n          </Button>\r\n        </Space>\r\n      </div>\r\n    ),\r\n    filterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\r\n    onFilter: (value, record) =>\r\n      this.state.searchedColumn === \"id\" ? (\r\n        record.id.props.children\r\n          ? record.id.props.children.toString().toLowerCase().includes(value.toLowerCase())\r\n          : ''\r\n        ) : (\r\n          record[dataIndex]\r\n            ? record[dataIndex].toString().toLowerCase().includes(value.toLowerCase())\r\n            : ''\r\n        ),\r\n    onFilterDropdownVisibleChange: visible => {\r\n      if (visible) {\r\n        setTimeout(() => this.searchInput.select(), 100);\r\n      }\r\n    },\r\n    render: text =>\r\n    text != null ? (\r\n    text.props && text.type !== \"div\" ? (\r\n      <Link onClick={() => this.getMaster(text.props.children)}>{text.props.children}</Link>\r\n    ) : this.state.searchedColumn === dataIndex ? (\r\n      <Highlighter\r\n        highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\r\n        searchWords={[this.state.searchText]}\r\n        autoEscape\r\n        textToHighlight={text ? text : ''}\r\n      />\r\n    ) : (\r\n      text\r\n    )\r\n    ) : (\r\n      text\r\n    )\r\n  });\r\n\r\n  handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n    confirm();\r\n    this.setState({\r\n      searchText: selectedKeys[0],\r\n      searchedColumn: dataIndex,\r\n    });\r\n  };\r\n\r\n  handleReset = clearFilters => {\r\n    clearFilters();\r\n    this.setState({ searchText: '' });\r\n  };\r\n\r\n\r\n  render() {\r\n    const columns = [\r\n        {\r\n            title: <div className=\"dataTable__header__text\">Status</div>,\r\n            dataIndex: 'status',\r\n            key: 'status',\r\n            width: '20%',\r\n            ...this.getColumnSearchProps('status'),\r\n            sorter: {\r\n                compare: (a, b) => { return a.status.localeCompare(b.status)},\r\n            },\r\n        },\r\n          \r\n      {\r\n        title: <center className=\"dataTable__header__text\">ISO ID</center>,\r\n        dataIndex: 'id',\r\n        key: 'id',\r\n        width: '20%',\r\n        ...this.getColumnSearchProps('id'),\r\n        sorter:{\r\n            compare: (a, b) => { return a.id.localeCompare(b.id)},\r\n        },\r\n      },\r\n      {\r\n        title: <div className=\"dataTable__header__text\">Condition</div>,\r\n        dataIndex: 'condition',\r\n        key: 'condition',\r\n        ...this.getColumnSearchProps('condition'),\r\n        sorter: {\r\n          compare: (a, b) => { return a.condition.localeCompare(b.condition)},\r\n        },\r\n      }\r\n    ];\r\n    if(process.env.REACT_APP_PROGRESS === \"1\"){\r\n      columns.push({\r\n        title: <div className=\"dataTable__header__text\">MAX Weight</div>,\r\n        dataIndex: 'MAXWeight',\r\n        key: 'MAXWeight',\r\n        ...this.getColumnSearchProps('MAXWeight'),\r\n        sorter: {\r\n            compare: (a, b) => a.MAXWeight - b.MAXWeight,\r\n        },\r\n      })\r\n      columns.push({\r\n        title: <div className=\"dataTable__header__text\">Progress</div>,\r\n        dataIndex: 'progress',\r\n        key: 'progress',\r\n        ...this.getColumnSearchProps('progress'),\r\n        sorter: {\r\n          compare: (a, b) => a.progress - b.progress,\r\n        },\r\n      })\r\n      if(this.state.role === \"SpecialityLead\"){\r\n        columns.push({\r\n          title: <div className=\"dataTable__header__text\">Real Progress</div>,\r\n          dataIndex: 'realProgress',\r\n          key: 'realProgress',\r\n          ...this.getColumnSearchProps('realProgress'),\r\n          sorter: {\r\n              compare: (a, b) => a.realProgress - b.realProgress,\r\n          },\r\n        })\r\n      }\r\n    } \r\n\r\n    return (\r\n      <div>\r\n        <div className=\"dataTable__container\">\r\n        <Table className=\"customTable\" bordered = {true} rowSelection={{type: 'checkbox', ...rowSelection}} columns={columns} dataSource={this.state.data} pagination={{ pageSize: this.props.pagination  }} size=\"small\"/>\r\n          <div style={{position: \"absolute\", bottom:25, left:0}}>\r\n            <b>Total elements: {this.state.data.length}</b>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StatusDataTable;"]},"metadata":{},"sourceType":"module"}