{"ast":null,"code":"/*!\r\n * Pikaday\r\n *\r\n * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/Pikaday/Pikaday\r\n */\n(function (root, factory) {\n  'use strict';\n\n  var moment;\n\n  if (typeof exports === 'object') {\n    // CommonJS module\n    // Load moment.js as an optional dependency\n    try {\n      moment = require('moment');\n    } catch (e) {}\n\n    module.exports = factory(moment);\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(function (req) {\n      // Load moment.js as an optional dependency\n      var id = 'moment';\n\n      try {\n        moment = req(id);\n      } catch (e) {}\n\n      return factory(moment);\n    });\n  } else {\n    root.Pikaday = factory(root.moment);\n  }\n})(this, function (moment) {\n  'use strict';\n  /**\r\n   * feature detection and helper functions\r\n   */\n\n  var hasMoment = typeof moment === 'function',\n      hasEventListeners = !!window.addEventListener,\n      document = window.document,\n      sto = window.setTimeout,\n      addEvent = function (el, e, callback, capture) {\n    if (hasEventListeners) {\n      el.addEventListener(e, callback, !!capture);\n    } else {\n      el.attachEvent('on' + e, callback);\n    }\n  },\n      removeEvent = function (el, e, callback, capture) {\n    if (hasEventListeners) {\n      el.removeEventListener(e, callback, !!capture);\n    } else {\n      el.detachEvent('on' + e, callback);\n    }\n  },\n      trim = function (str) {\n    return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n  },\n      hasClass = function (el, cn) {\n    return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n  },\n      addClass = function (el, cn) {\n    if (!hasClass(el, cn)) {\n      el.className = el.className === '' ? cn : el.className + ' ' + cn;\n    }\n  },\n      removeClass = function (el, cn) {\n    el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n  },\n      isArray = function (obj) {\n    return /Array/.test(Object.prototype.toString.call(obj));\n  },\n      isDate = function (obj) {\n    return /Date/.test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n  },\n      isWeekend = function (date) {\n    var day = date.getDay();\n    return day === 0 || day === 6;\n  },\n      isLeapYear = function (year) {\n    // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n    return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n  },\n      getDaysInMonth = function (year, month) {\n    return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n  },\n      setToStartOfDay = function (date) {\n    if (isDate(date)) date.setHours(0, 0, 0, 0);\n  },\n      compareDates = function (a, b) {\n    // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n    return a.getTime() === b.getTime();\n  },\n      extend = function (to, from, overwrite) {\n    var prop, hasProp;\n\n    for (prop in from) {\n      hasProp = to[prop] !== undefined;\n\n      if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n        if (isDate(from[prop])) {\n          if (overwrite) {\n            to[prop] = new Date(from[prop].getTime());\n          }\n        } else if (isArray(from[prop])) {\n          if (overwrite) {\n            to[prop] = from[prop].slice(0);\n          }\n        } else {\n          to[prop] = extend({}, from[prop], overwrite);\n        }\n      } else if (overwrite || !hasProp) {\n        to[prop] = from[prop];\n      }\n    }\n\n    return to;\n  },\n      fireEvent = function (el, eventName, data) {\n    var ev;\n\n    if (document.createEvent) {\n      ev = document.createEvent('HTMLEvents');\n      ev.initEvent(eventName, true, false);\n      ev = extend(ev, data);\n      el.dispatchEvent(ev);\n    } else if (document.createEventObject) {\n      ev = document.createEventObject();\n      ev = extend(ev, data);\n      el.fireEvent('on' + eventName, ev);\n    }\n  },\n      adjustCalendar = function (calendar) {\n    if (calendar.month < 0) {\n      calendar.year -= Math.ceil(Math.abs(calendar.month) / 12);\n      calendar.month += 12;\n    }\n\n    if (calendar.month > 11) {\n      calendar.year += Math.floor(Math.abs(calendar.month) / 12);\n      calendar.month -= 12;\n    }\n\n    return calendar;\n  },\n\n  /**\r\n   * defaults and localisation\r\n   */\n  defaults = {\n    // bind the picker to a form field\n    field: null,\n    // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n    bound: undefined,\n    // data-attribute on the input field with an aria assistance tekst (only applied when `bound` is set)\n    ariaLabel: 'Use the arrow keys to pick a date',\n    // position of the datepicker, relative to the field (default to bottom & left)\n    // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n    position: 'bottom left',\n    // automatically fit in the viewport even if it means repositioning from the position option\n    reposition: true,\n    // the default output format for `.toString()` and `field` value\n    format: 'YYYY-MM-DD',\n    // the toString function which gets passed a current date object and format\n    // and returns a string\n    toString: null,\n    // used to create date object from current input string\n    parse: null,\n    // the initial date to view when first opened\n    defaultDate: null,\n    // make the `defaultDate` the initial selected value\n    setDefaultDate: false,\n    // first day of week (0: Sunday, 1: Monday etc)\n    firstDay: 0,\n    // the default flag for moment's strict date parsing\n    formatStrict: false,\n    // the minimum/earliest date that can be selected\n    minDate: null,\n    // the maximum/latest date that can be selected\n    maxDate: null,\n    // number of years either side, or array of upper/lower range\n    yearRange: 10,\n    // show week numbers at head of row\n    showWeekNumber: false,\n    // Week picker mode\n    pickWholeWeek: false,\n    // used internally (don't config outside)\n    minYear: 0,\n    maxYear: 9999,\n    minMonth: undefined,\n    maxMonth: undefined,\n    startRange: null,\n    endRange: null,\n    isRTL: false,\n    // Additional text to append to the year in the calendar title\n    yearSuffix: '',\n    // Render the month after year in the calendar title\n    showMonthAfterYear: false,\n    // Render days of the calendar grid that fall in the next or previous month\n    showDaysInNextAndPreviousMonths: false,\n    // Allows user to select days that fall in the next or previous month\n    enableSelectionDaysInNextAndPreviousMonths: false,\n    // how many months are visible\n    numberOfMonths: 1,\n    // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n    // only used for the first display or when a selected date is not visible\n    mainCalendar: 'left',\n    // Specify a DOM element to render the calendar in\n    container: undefined,\n    // Blur field when date is selected\n    blurFieldOnSelect: true,\n    // internationalization\n    i18n: {\n      previousMonth: 'Previous Month',\n      nextMonth: 'Next Month',\n      months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n      weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n      weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n    },\n    // Theme Classname\n    theme: null,\n    // events array\n    events: [],\n    // callback function\n    onSelect: null,\n    onOpen: null,\n    onClose: null,\n    onDraw: null,\n    // Enable keyboard input\n    keyboardInput: true\n  },\n\n  /**\r\n   * templating functions to abstract HTML rendering\r\n   */\n  renderDayName = function (opts, day, abbr) {\n    day += opts.firstDay;\n\n    while (day >= 7) {\n      day -= 7;\n    }\n\n    return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n  },\n      renderDay = function (opts) {\n    var arr = [];\n    var ariaSelected = 'false';\n\n    if (opts.isEmpty) {\n      if (opts.showDaysInNextAndPreviousMonths) {\n        arr.push('is-outside-current-month');\n\n        if (!opts.enableSelectionDaysInNextAndPreviousMonths) {\n          arr.push('is-selection-disabled');\n        }\n      } else {\n        return '<td class=\"is-empty\"></td>';\n      }\n    }\n\n    if (opts.isDisabled) {\n      arr.push('is-disabled');\n    }\n\n    if (opts.isToday) {\n      arr.push('is-today');\n    }\n\n    if (opts.isSelected) {\n      arr.push('is-selected');\n      ariaSelected = 'true';\n    }\n\n    if (opts.hasEvent) {\n      arr.push('has-event');\n    }\n\n    if (opts.isInRange) {\n      arr.push('is-inrange');\n    }\n\n    if (opts.isStartRange) {\n      arr.push('is-startrange');\n    }\n\n    if (opts.isEndRange) {\n      arr.push('is-endrange');\n    }\n\n    return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' + '<button class=\"pika-button pika-day\" type=\"button\" ' + 'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' + opts.day + '</button>' + '</td>';\n  },\n      renderWeek = function (d, m, y) {\n    // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n    var onejan = new Date(y, 0, 1),\n        weekNum = Math.ceil(((new Date(y, m, d) - onejan) / 86400000 + onejan.getDay() + 1) / 7);\n    return '<td class=\"pika-week\">' + weekNum + '</td>';\n  },\n      renderRow = function (days, isRTL, pickWholeWeek, isRowSelected) {\n    return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n  },\n      renderBody = function (rows) {\n    return '<tbody>' + rows.join('') + '</tbody>';\n  },\n      renderHead = function (opts) {\n    var i,\n        arr = [];\n\n    if (opts.showWeekNumber) {\n      arr.push('<th></th>');\n    }\n\n    for (i = 0; i < 7; i++) {\n      arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n    }\n\n    return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\n  },\n      renderTitle = function (instance, c, year, month, refYear, randId) {\n    var i,\n        j,\n        arr,\n        opts = instance._o,\n        isMinYear = year === opts.minYear,\n        isMaxYear = year === opts.maxYear,\n        html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\n        monthHtml,\n        yearHtml,\n        prev = true,\n        next = true;\n\n    for (arr = [], i = 0; i < 12; i++) {\n      arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' + (i === month ? ' selected=\"selected\"' : '') + (isMinYear && i < opts.minMonth || isMaxYear && i > opts.maxMonth ? 'disabled=\"disabled\"' : '') + '>' + opts.i18n.months[i] + '</option>');\n    }\n\n    monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n    if (isArray(opts.yearRange)) {\n      i = opts.yearRange[0];\n      j = opts.yearRange[1] + 1;\n    } else {\n      i = year - opts.yearRange;\n      j = 1 + year + opts.yearRange;\n    }\n\n    for (arr = []; i < j && i <= opts.maxYear; i++) {\n      if (i >= opts.minYear) {\n        arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"' : '') + '>' + i + '</option>');\n      }\n    }\n\n    yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n    if (opts.showMonthAfterYear) {\n      html += yearHtml + monthHtml;\n    } else {\n      html += monthHtml + yearHtml;\n    }\n\n    if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n      prev = false;\n    }\n\n    if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n      next = false;\n    }\n\n    if (c === 0) {\n      html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n    }\n\n    if (c === instance._o.numberOfMonths - 1) {\n      html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n    }\n\n    return html += '</div>';\n  },\n      renderTable = function (opts, data, randId) {\n    return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\n  },\n\n  /**\r\n   * Pikaday constructor\r\n   */\n  Pikaday = function (options) {\n    var self = this,\n        opts = self.config(options);\n\n    self._onMouseDown = function (e) {\n      if (!self._v) {\n        return;\n      }\n\n      e = e || window.event;\n      var target = e.target || e.srcElement;\n\n      if (!target) {\n        return;\n      }\n\n      if (!hasClass(target, 'is-disabled')) {\n        if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\n          self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n\n          if (opts.bound) {\n            sto(function () {\n              self.hide();\n\n              if (opts.blurFieldOnSelect && opts.field) {\n                opts.field.blur();\n              }\n            }, 100);\n          }\n        } else if (hasClass(target, 'pika-prev')) {\n          self.prevMonth();\n        } else if (hasClass(target, 'pika-next')) {\n          self.nextMonth();\n        }\n      }\n\n      if (!hasClass(target, 'pika-select')) {\n        // if this is touch event prevent mouse events emulation\n        if (e.preventDefault) {\n          e.preventDefault();\n        } else {\n          e.returnValue = false;\n          return false;\n        }\n      } else {\n        self._c = true;\n      }\n    };\n\n    self._onChange = function (e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement;\n\n      if (!target) {\n        return;\n      }\n\n      if (hasClass(target, 'pika-select-month')) {\n        self.gotoMonth(target.value);\n      } else if (hasClass(target, 'pika-select-year')) {\n        self.gotoYear(target.value);\n      }\n    };\n\n    self._onKeyChange = function (e) {\n      e = e || window.event;\n\n      if (self.isVisible()) {\n        switch (e.keyCode) {\n          case 13:\n          case 27:\n            if (opts.field) {\n              opts.field.blur();\n            }\n\n            break;\n\n          case 37:\n            e.preventDefault();\n            self.adjustDate('subtract', 1);\n            break;\n\n          case 38:\n            self.adjustDate('subtract', 7);\n            break;\n\n          case 39:\n            self.adjustDate('add', 1);\n            break;\n\n          case 40:\n            self.adjustDate('add', 7);\n            break;\n        }\n      }\n    };\n\n    self._onInputChange = function (e) {\n      var date;\n\n      if (e.firedBy === self) {\n        return;\n      }\n\n      if (opts.parse) {\n        date = opts.parse(opts.field.value, opts.format);\n      } else if (hasMoment) {\n        date = moment(opts.field.value, opts.format, opts.formatStrict);\n        date = date && date.isValid() ? date.toDate() : null;\n      } else {\n        date = new Date(Date.parse(opts.field.value));\n      }\n\n      if (isDate(date)) {\n        self.setDate(date);\n      }\n\n      if (!self._v) {\n        self.show();\n      }\n    };\n\n    self._onInputFocus = function () {\n      self.show();\n    };\n\n    self._onInputClick = function () {\n      self.show();\n    };\n\n    self._onInputBlur = function () {\n      // IE allows pika div to gain focus; catch blur the input field\n      var pEl = document.activeElement;\n\n      do {\n        if (hasClass(pEl, 'pika-single')) {\n          return;\n        }\n      } while (pEl = pEl.parentNode);\n\n      if (!self._c) {\n        self._b = sto(function () {\n          self.hide();\n        }, 50);\n      }\n\n      self._c = false;\n    };\n\n    self._onClick = function (e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement,\n          pEl = target;\n\n      if (!target) {\n        return;\n      }\n\n      if (!hasEventListeners && hasClass(target, 'pika-select')) {\n        if (!target.onchange) {\n          target.setAttribute('onchange', 'return;');\n          addEvent(target, 'change', self._onChange);\n        }\n      }\n\n      do {\n        if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n          return;\n        }\n      } while (pEl = pEl.parentNode);\n\n      if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n        self.hide();\n      }\n    };\n\n    self.el = document.createElement('div');\n    self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n    addEvent(self.el, 'mousedown', self._onMouseDown, true);\n    addEvent(self.el, 'touchend', self._onMouseDown, true);\n    addEvent(self.el, 'change', self._onChange);\n\n    if (opts.keyboardInput) {\n      addEvent(document, 'keydown', self._onKeyChange);\n    }\n\n    if (opts.field) {\n      if (opts.container) {\n        opts.container.appendChild(self.el);\n      } else if (opts.bound) {\n        document.body.appendChild(self.el);\n      } else {\n        opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n      }\n\n      addEvent(opts.field, 'change', self._onInputChange);\n\n      if (!opts.defaultDate) {\n        if (hasMoment && opts.field.value) {\n          opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n        } else {\n          opts.defaultDate = new Date(Date.parse(opts.field.value));\n        }\n\n        opts.setDefaultDate = true;\n      }\n    }\n\n    var defDate = opts.defaultDate;\n\n    if (isDate(defDate)) {\n      if (opts.setDefaultDate) {\n        self.setDate(defDate, true);\n      } else {\n        self.gotoDate(defDate);\n      }\n    } else {\n      self.gotoDate(new Date());\n    }\n\n    if (opts.bound) {\n      this.hide();\n      self.el.className += ' is-bound';\n      addEvent(opts.trigger, 'click', self._onInputClick);\n      addEvent(opts.trigger, 'focus', self._onInputFocus);\n      addEvent(opts.trigger, 'blur', self._onInputBlur);\n    } else {\n      this.show();\n    }\n  };\n  /**\r\n   * public Pikaday API\r\n   */\n\n\n  Pikaday.prototype = {\n    /**\r\n     * configure functionality\r\n     */\n    config: function (options) {\n      if (!this._o) {\n        this._o = extend({}, defaults, true);\n      }\n\n      var opts = extend(this._o, options, true);\n      opts.isRTL = !!opts.isRTL;\n      opts.field = opts.field && opts.field.nodeName ? opts.field : null;\n      opts.theme = typeof opts.theme === 'string' && opts.theme ? opts.theme : null;\n      opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n      opts.trigger = opts.trigger && opts.trigger.nodeName ? opts.trigger : opts.field;\n      opts.disableWeekends = !!opts.disableWeekends;\n      opts.disableDayFn = typeof opts.disableDayFn === 'function' ? opts.disableDayFn : null;\n      var nom = parseInt(opts.numberOfMonths, 10) || 1;\n      opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n      if (!isDate(opts.minDate)) {\n        opts.minDate = false;\n      }\n\n      if (!isDate(opts.maxDate)) {\n        opts.maxDate = false;\n      }\n\n      if (opts.minDate && opts.maxDate && opts.maxDate < opts.minDate) {\n        opts.maxDate = opts.minDate = false;\n      }\n\n      if (opts.minDate) {\n        this.setMinDate(opts.minDate);\n      }\n\n      if (opts.maxDate) {\n        this.setMaxDate(opts.maxDate);\n      }\n\n      if (isArray(opts.yearRange)) {\n        var fallback = new Date().getFullYear() - 10;\n        opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n        opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n      } else {\n        opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n\n        if (opts.yearRange > 100) {\n          opts.yearRange = 100;\n        }\n      }\n\n      return opts;\n    },\n\n    /**\r\n     * return a formatted string of the current selection (using Moment.js if available)\r\n     */\n    toString: function (format) {\n      format = format || this._o.format;\n\n      if (!isDate(this._d)) {\n        return '';\n      }\n\n      if (this._o.toString) {\n        return this._o.toString(this._d, format);\n      }\n\n      if (hasMoment) {\n        return moment(this._d).format(format);\n      }\n\n      return this._d.toDateString();\n    },\n\n    /**\r\n     * return a Moment.js object of the current selection (if available)\r\n     */\n    getMoment: function () {\n      return hasMoment ? moment(this._d) : null;\n    },\n\n    /**\r\n     * set the current selection from a Moment.js object (if available)\r\n     */\n    setMoment: function (date, preventOnSelect) {\n      if (hasMoment && moment.isMoment(date)) {\n        this.setDate(date.toDate(), preventOnSelect);\n      }\n    },\n\n    /**\r\n     * return a Date object of the current selection\r\n     */\n    getDate: function () {\n      return isDate(this._d) ? new Date(this._d.getTime()) : null;\n    },\n\n    /**\r\n     * set the current selection\r\n     */\n    setDate: function (date, preventOnSelect) {\n      if (!date) {\n        this._d = null;\n\n        if (this._o.field) {\n          this._o.field.value = '';\n          fireEvent(this._o.field, 'change', {\n            firedBy: this\n          });\n        }\n\n        return this.draw();\n      }\n\n      if (typeof date === 'string') {\n        date = new Date(Date.parse(date));\n      }\n\n      if (!isDate(date)) {\n        return;\n      }\n\n      var min = this._o.minDate,\n          max = this._o.maxDate;\n\n      if (isDate(min) && date < min) {\n        date = min;\n      } else if (isDate(max) && date > max) {\n        date = max;\n      }\n\n      this._d = new Date(date.getTime());\n      setToStartOfDay(this._d);\n      this.gotoDate(this._d);\n\n      if (this._o.field) {\n        this._o.field.value = this.toString();\n        fireEvent(this._o.field, 'change', {\n          firedBy: this\n        });\n      }\n\n      if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n        this._o.onSelect.call(this, this.getDate());\n      }\n    },\n\n    /**\r\n     * change view to a specific date\r\n     */\n    gotoDate: function (date) {\n      var newCalendar = true;\n\n      if (!isDate(date)) {\n        return;\n      }\n\n      if (this.calendars) {\n        var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n            lastVisibleDate = new Date(this.calendars[this.calendars.length - 1].year, this.calendars[this.calendars.length - 1].month, 1),\n            visibleDate = date.getTime(); // get the end of the month\n\n        lastVisibleDate.setMonth(lastVisibleDate.getMonth() + 1);\n        lastVisibleDate.setDate(lastVisibleDate.getDate() - 1);\n        newCalendar = visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate;\n      }\n\n      if (newCalendar) {\n        this.calendars = [{\n          month: date.getMonth(),\n          year: date.getFullYear()\n        }];\n\n        if (this._o.mainCalendar === 'right') {\n          this.calendars[0].month += 1 - this._o.numberOfMonths;\n        }\n      }\n\n      this.adjustCalendars();\n    },\n    adjustDate: function (sign, days) {\n      var day = this.getDate() || new Date();\n      var difference = parseInt(days) * 24 * 60 * 60 * 1000;\n      var newDay;\n\n      if (sign === 'add') {\n        newDay = new Date(day.valueOf() + difference);\n      } else if (sign === 'subtract') {\n        newDay = new Date(day.valueOf() - difference);\n      }\n\n      this.setDate(newDay);\n    },\n    adjustCalendars: function () {\n      this.calendars[0] = adjustCalendar(this.calendars[0]);\n\n      for (var c = 1; c < this._o.numberOfMonths; c++) {\n        this.calendars[c] = adjustCalendar({\n          month: this.calendars[0].month + c,\n          year: this.calendars[0].year\n        });\n      }\n\n      this.draw();\n    },\n    gotoToday: function () {\n      this.gotoDate(new Date());\n    },\n\n    /**\r\n     * change view to a specific month (zero-index, e.g. 0: January)\r\n     */\n    gotoMonth: function (month) {\n      if (!isNaN(month)) {\n        this.calendars[0].month = parseInt(month, 10);\n        this.adjustCalendars();\n      }\n    },\n    nextMonth: function () {\n      this.calendars[0].month++;\n      this.adjustCalendars();\n    },\n    prevMonth: function () {\n      this.calendars[0].month--;\n      this.adjustCalendars();\n    },\n\n    /**\r\n     * change view to a specific full year (e.g. \"2012\")\r\n     */\n    gotoYear: function (year) {\n      if (!isNaN(year)) {\n        this.calendars[0].year = parseInt(year, 10);\n        this.adjustCalendars();\n      }\n    },\n\n    /**\r\n     * change the minDate\r\n     */\n    setMinDate: function (value) {\n      if (value instanceof Date) {\n        setToStartOfDay(value);\n        this._o.minDate = value;\n        this._o.minYear = value.getFullYear();\n        this._o.minMonth = value.getMonth();\n      } else {\n        this._o.minDate = defaults.minDate;\n        this._o.minYear = defaults.minYear;\n        this._o.minMonth = defaults.minMonth;\n        this._o.startRange = defaults.startRange;\n      }\n\n      this.draw();\n    },\n\n    /**\r\n     * change the maxDate\r\n     */\n    setMaxDate: function (value) {\n      if (value instanceof Date) {\n        setToStartOfDay(value);\n        this._o.maxDate = value;\n        this._o.maxYear = value.getFullYear();\n        this._o.maxMonth = value.getMonth();\n      } else {\n        this._o.maxDate = defaults.maxDate;\n        this._o.maxYear = defaults.maxYear;\n        this._o.maxMonth = defaults.maxMonth;\n        this._o.endRange = defaults.endRange;\n      }\n\n      this.draw();\n    },\n    setStartRange: function (value) {\n      this._o.startRange = value;\n    },\n    setEndRange: function (value) {\n      this._o.endRange = value;\n    },\n\n    /**\r\n     * refresh the HTML\r\n     */\n    draw: function (force) {\n      if (!this._v && !force) {\n        return;\n      }\n\n      var opts = this._o,\n          minYear = opts.minYear,\n          maxYear = opts.maxYear,\n          minMonth = opts.minMonth,\n          maxMonth = opts.maxMonth,\n          html = '',\n          randId;\n\n      if (this._y <= minYear) {\n        this._y = minYear;\n\n        if (!isNaN(minMonth) && this._m < minMonth) {\n          this._m = minMonth;\n        }\n      }\n\n      if (this._y >= maxYear) {\n        this._y = maxYear;\n\n        if (!isNaN(maxMonth) && this._m > maxMonth) {\n          this._m = maxMonth;\n        }\n      }\n\n      randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\n\n      for (var c = 0; c < opts.numberOfMonths; c++) {\n        html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\n      }\n\n      this.el.innerHTML = html;\n\n      if (opts.bound) {\n        if (opts.field.type !== 'hidden') {\n          sto(function () {\n            opts.trigger.focus();\n          }, 1);\n        }\n      }\n\n      if (typeof this._o.onDraw === 'function') {\n        this._o.onDraw(this);\n      }\n\n      if (opts.bound) {\n        // let the screen reader user know to use arrow keys\n        opts.field.setAttribute('aria-label', opts.ariaLabel);\n      }\n    },\n    adjustPosition: function () {\n      var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect, leftAligned, bottomAligned;\n      if (this._o.container) return;\n      this.el.style.position = 'absolute';\n      field = this._o.trigger;\n      pEl = field;\n      width = this.el.offsetWidth;\n      height = this.el.offsetHeight;\n      viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n      viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n      scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n      leftAligned = true;\n      bottomAligned = true;\n\n      if (typeof field.getBoundingClientRect === 'function') {\n        clientRect = field.getBoundingClientRect();\n        left = clientRect.left + window.pageXOffset;\n        top = clientRect.bottom + window.pageYOffset;\n      } else {\n        left = pEl.offsetLeft;\n        top = pEl.offsetTop + pEl.offsetHeight;\n\n        while (pEl = pEl.offsetParent) {\n          left += pEl.offsetLeft;\n          top += pEl.offsetTop;\n        }\n      } // default position is bottom & left\n\n\n      if (this._o.reposition && left + width > viewportWidth || this._o.position.indexOf('right') > -1 && left - width + field.offsetWidth > 0) {\n        left = left - width + field.offsetWidth;\n        leftAligned = false;\n      }\n\n      if (this._o.reposition && top + height > viewportHeight + scrollTop || this._o.position.indexOf('top') > -1 && top - height - field.offsetHeight > 0) {\n        top = top - height - field.offsetHeight;\n        bottomAligned = false;\n      }\n\n      this.el.style.left = left + 'px';\n      this.el.style.top = top + 'px';\n      addClass(this.el, leftAligned ? 'left-aligned' : 'right-aligned');\n      addClass(this.el, bottomAligned ? 'bottom-aligned' : 'top-aligned');\n      removeClass(this.el, !leftAligned ? 'left-aligned' : 'right-aligned');\n      removeClass(this.el, !bottomAligned ? 'bottom-aligned' : 'top-aligned');\n    },\n\n    /**\r\n     * render HTML for a particular month\r\n     */\n    render: function (year, month, randId) {\n      var opts = this._o,\n          now = new Date(),\n          days = getDaysInMonth(year, month),\n          before = new Date(year, month, 1).getDay(),\n          data = [],\n          row = [];\n      setToStartOfDay(now);\n\n      if (opts.firstDay > 0) {\n        before -= opts.firstDay;\n\n        if (before < 0) {\n          before += 7;\n        }\n      }\n\n      var previousMonth = month === 0 ? 11 : month - 1,\n          nextMonth = month === 11 ? 0 : month + 1,\n          yearOfPreviousMonth = month === 0 ? year - 1 : year,\n          yearOfNextMonth = month === 11 ? year + 1 : year,\n          daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\n      var cells = days + before,\n          after = cells;\n\n      while (after > 7) {\n        after -= 7;\n      }\n\n      cells += 7 - after;\n      var isWeekSelected = false;\n\n      for (var i = 0, r = 0; i < cells; i++) {\n        var day = new Date(year, month, 1 + (i - before)),\n            isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n            isToday = compareDates(day, now),\n            hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\n            isEmpty = i < before || i >= days + before,\n            dayNumber = 1 + (i - before),\n            monthNumber = month,\n            yearNumber = year,\n            isStartRange = opts.startRange && compareDates(opts.startRange, day),\n            isEndRange = opts.endRange && compareDates(opts.endRange, day),\n            isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n            isDisabled = opts.minDate && day < opts.minDate || opts.maxDate && day > opts.maxDate || opts.disableWeekends && isWeekend(day) || opts.disableDayFn && opts.disableDayFn(day);\n\n        if (isEmpty) {\n          if (i < before) {\n            dayNumber = daysInPreviousMonth + dayNumber;\n            monthNumber = previousMonth;\n            yearNumber = yearOfPreviousMonth;\n          } else {\n            dayNumber = dayNumber - days;\n            monthNumber = nextMonth;\n            yearNumber = yearOfNextMonth;\n          }\n        }\n\n        var dayConfig = {\n          day: dayNumber,\n          month: monthNumber,\n          year: yearNumber,\n          hasEvent: hasEvent,\n          isSelected: isSelected,\n          isToday: isToday,\n          isDisabled: isDisabled,\n          isEmpty: isEmpty,\n          isStartRange: isStartRange,\n          isEndRange: isEndRange,\n          isInRange: isInRange,\n          showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\n          enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\n        };\n\n        if (opts.pickWholeWeek && isSelected) {\n          isWeekSelected = true;\n        }\n\n        row.push(renderDay(dayConfig));\n\n        if (++r === 7) {\n          if (opts.showWeekNumber) {\n            row.unshift(renderWeek(i - before, month, year));\n          }\n\n          data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\n          row = [];\n          r = 0;\n          isWeekSelected = false;\n        }\n      }\n\n      return renderTable(opts, data, randId);\n    },\n    isVisible: function () {\n      return this._v;\n    },\n    show: function () {\n      if (!this.isVisible()) {\n        this._v = true;\n        this.draw();\n        removeClass(this.el, 'is-hidden');\n\n        if (this._o.bound) {\n          addEvent(document, 'click', this._onClick);\n          this.adjustPosition();\n        }\n\n        if (typeof this._o.onOpen === 'function') {\n          this._o.onOpen.call(this);\n        }\n      }\n    },\n    hide: function () {\n      var v = this._v;\n\n      if (v !== false) {\n        if (this._o.bound) {\n          removeEvent(document, 'click', this._onClick);\n        }\n\n        this.el.style.position = 'static'; // reset\n\n        this.el.style.left = 'auto';\n        this.el.style.top = 'auto';\n        addClass(this.el, 'is-hidden');\n        this._v = false;\n\n        if (v !== undefined && typeof this._o.onClose === 'function') {\n          this._o.onClose.call(this);\n        }\n      }\n    },\n\n    /**\r\n     * GAME OVER\r\n     */\n    destroy: function () {\n      var opts = this._o;\n      this.hide();\n      removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n      removeEvent(this.el, 'touchend', this._onMouseDown, true);\n      removeEvent(this.el, 'change', this._onChange);\n\n      if (opts.keyboardInput) {\n        removeEvent(document, 'keydown', this._onKeyChange);\n      }\n\n      if (opts.field) {\n        removeEvent(opts.field, 'change', this._onInputChange);\n\n        if (opts.bound) {\n          removeEvent(opts.trigger, 'click', this._onInputClick);\n          removeEvent(opts.trigger, 'focus', this._onInputFocus);\n          removeEvent(opts.trigger, 'blur', this._onInputBlur);\n        }\n      }\n\n      if (this.el.parentNode) {\n        this.el.parentNode.removeChild(this.el);\n      }\n    }\n  };\n  return Pikaday;\n});","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/pikaday/pikaday.js"],"names":["root","factory","moment","exports","require","e","module","define","amd","req","id","Pikaday","hasMoment","hasEventListeners","window","addEventListener","document","sto","setTimeout","addEvent","el","callback","capture","attachEvent","removeEvent","removeEventListener","detachEvent","trim","str","replace","hasClass","cn","className","indexOf","addClass","removeClass","isArray","obj","test","Object","prototype","toString","call","isDate","isNaN","getTime","isWeekend","date","day","getDay","isLeapYear","year","getDaysInMonth","month","setToStartOfDay","setHours","compareDates","a","b","extend","to","from","overwrite","prop","hasProp","undefined","nodeName","Date","slice","fireEvent","eventName","data","ev","createEvent","initEvent","dispatchEvent","createEventObject","adjustCalendar","calendar","Math","ceil","abs","floor","defaults","field","bound","ariaLabel","position","reposition","format","parse","defaultDate","setDefaultDate","firstDay","formatStrict","minDate","maxDate","yearRange","showWeekNumber","pickWholeWeek","minYear","maxYear","minMonth","maxMonth","startRange","endRange","isRTL","yearSuffix","showMonthAfterYear","showDaysInNextAndPreviousMonths","enableSelectionDaysInNextAndPreviousMonths","numberOfMonths","mainCalendar","container","blurFieldOnSelect","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","theme","events","onSelect","onOpen","onClose","onDraw","keyboardInput","renderDayName","opts","abbr","renderDay","arr","ariaSelected","isEmpty","push","isDisabled","isToday","isSelected","hasEvent","isInRange","isStartRange","isEndRange","join","renderWeek","d","m","y","onejan","weekNum","renderRow","days","isRowSelected","reverse","renderBody","rows","renderHead","i","renderTitle","instance","c","refYear","randId","j","_o","isMinYear","isMaxYear","html","monthHtml","yearHtml","prev","next","renderTable","options","self","config","_onMouseDown","_v","event","target","srcElement","parentNode","setDate","getAttribute","hide","blur","prevMonth","preventDefault","returnValue","_c","_onChange","gotoMonth","value","gotoYear","_onKeyChange","isVisible","keyCode","adjustDate","_onInputChange","firedBy","isValid","toDate","show","_onInputFocus","_onInputClick","_onInputBlur","pEl","activeElement","_b","_onClick","onchange","setAttribute","trigger","createElement","appendChild","body","insertBefore","nextSibling","defDate","gotoDate","disableWeekends","disableDayFn","nom","parseInt","setMinDate","setMaxDate","fallback","getFullYear","_d","toDateString","getMoment","setMoment","preventOnSelect","isMoment","getDate","draw","min","max","newCalendar","calendars","firstVisibleDate","lastVisibleDate","length","visibleDate","setMonth","getMonth","adjustCalendars","sign","difference","newDay","valueOf","gotoToday","setStartRange","setEndRange","force","_y","_m","random","substr","render","innerHTML","type","focus","adjustPosition","width","height","viewportWidth","viewportHeight","scrollTop","left","top","clientRect","leftAligned","bottomAligned","style","offsetWidth","offsetHeight","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","pageYOffset","getBoundingClientRect","pageXOffset","bottom","offsetLeft","offsetTop","offsetParent","now","before","row","yearOfPreviousMonth","yearOfNextMonth","daysInPreviousMonth","cells","after","isWeekSelected","r","dayNumber","monthNumber","yearNumber","dayConfig","unshift","v","destroy","removeChild"],"mappings":"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","sourcesContent":["/*!\r\n * Pikaday\r\n *\r\n * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/Pikaday/Pikaday\r\n */\r\n\r\n(function (root, factory)\r\n{\r\n    'use strict';\r\n\r\n    var moment;\r\n    if (typeof exports === 'object') {\r\n        // CommonJS module\r\n        // Load moment.js as an optional dependency\r\n        try { moment = require('moment'); } catch (e) {}\r\n        module.exports = factory(moment);\r\n    } else if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(function (req)\r\n        {\r\n            // Load moment.js as an optional dependency\r\n            var id = 'moment';\r\n            try { moment = req(id); } catch (e) {}\r\n            return factory(moment);\r\n        });\r\n    } else {\r\n        root.Pikaday = factory(root.moment);\r\n    }\r\n}(this, function (moment)\r\n{\r\n    'use strict';\r\n\r\n    /**\r\n     * feature detection and helper functions\r\n     */\r\n    var hasMoment = typeof moment === 'function',\r\n\r\n    hasEventListeners = !!window.addEventListener,\r\n\r\n    document = window.document,\r\n\r\n    sto = window.setTimeout,\r\n\r\n    addEvent = function(el, e, callback, capture)\r\n    {\r\n        if (hasEventListeners) {\r\n            el.addEventListener(e, callback, !!capture);\r\n        } else {\r\n            el.attachEvent('on' + e, callback);\r\n        }\r\n    },\r\n\r\n    removeEvent = function(el, e, callback, capture)\r\n    {\r\n        if (hasEventListeners) {\r\n            el.removeEventListener(e, callback, !!capture);\r\n        } else {\r\n            el.detachEvent('on' + e, callback);\r\n        }\r\n    },\r\n\r\n    trim = function(str)\r\n    {\r\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\r\n    },\r\n\r\n    hasClass = function(el, cn)\r\n    {\r\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\r\n    },\r\n\r\n    addClass = function(el, cn)\r\n    {\r\n        if (!hasClass(el, cn)) {\r\n            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\r\n        }\r\n    },\r\n\r\n    removeClass = function(el, cn)\r\n    {\r\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\r\n    },\r\n\r\n    isArray = function(obj)\r\n    {\r\n        return (/Array/).test(Object.prototype.toString.call(obj));\r\n    },\r\n\r\n    isDate = function(obj)\r\n    {\r\n        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\r\n    },\r\n\r\n    isWeekend = function(date)\r\n    {\r\n        var day = date.getDay();\r\n        return day === 0 || day === 6;\r\n    },\r\n\r\n    isLeapYear = function(year)\r\n    {\r\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\r\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\r\n    },\r\n\r\n    getDaysInMonth = function(year, month)\r\n    {\r\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\r\n    },\r\n\r\n    setToStartOfDay = function(date)\r\n    {\r\n        if (isDate(date)) date.setHours(0,0,0,0);\r\n    },\r\n\r\n    compareDates = function(a,b)\r\n    {\r\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\r\n        return a.getTime() === b.getTime();\r\n    },\r\n\r\n    extend = function(to, from, overwrite)\r\n    {\r\n        var prop, hasProp;\r\n        for (prop in from) {\r\n            hasProp = to[prop] !== undefined;\r\n            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\r\n                if (isDate(from[prop])) {\r\n                    if (overwrite) {\r\n                        to[prop] = new Date(from[prop].getTime());\r\n                    }\r\n                }\r\n                else if (isArray(from[prop])) {\r\n                    if (overwrite) {\r\n                        to[prop] = from[prop].slice(0);\r\n                    }\r\n                } else {\r\n                    to[prop] = extend({}, from[prop], overwrite);\r\n                }\r\n            } else if (overwrite || !hasProp) {\r\n                to[prop] = from[prop];\r\n            }\r\n        }\r\n        return to;\r\n    },\r\n\r\n    fireEvent = function(el, eventName, data)\r\n    {\r\n        var ev;\r\n\r\n        if (document.createEvent) {\r\n            ev = document.createEvent('HTMLEvents');\r\n            ev.initEvent(eventName, true, false);\r\n            ev = extend(ev, data);\r\n            el.dispatchEvent(ev);\r\n        } else if (document.createEventObject) {\r\n            ev = document.createEventObject();\r\n            ev = extend(ev, data);\r\n            el.fireEvent('on' + eventName, ev);\r\n        }\r\n    },\r\n\r\n    adjustCalendar = function(calendar) {\r\n        if (calendar.month < 0) {\r\n            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\r\n            calendar.month += 12;\r\n        }\r\n        if (calendar.month > 11) {\r\n            calendar.year += Math.floor(Math.abs(calendar.month)/12);\r\n            calendar.month -= 12;\r\n        }\r\n        return calendar;\r\n    },\r\n\r\n    /**\r\n     * defaults and localisation\r\n     */\r\n    defaults = {\r\n\r\n        // bind the picker to a form field\r\n        field: null,\r\n\r\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\r\n        bound: undefined,\r\n\r\n        // data-attribute on the input field with an aria assistance tekst (only applied when `bound` is set)\r\n        ariaLabel: 'Use the arrow keys to pick a date',\r\n\r\n        // position of the datepicker, relative to the field (default to bottom & left)\r\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\r\n        position: 'bottom left',\r\n\r\n        // automatically fit in the viewport even if it means repositioning from the position option\r\n        reposition: true,\r\n\r\n        // the default output format for `.toString()` and `field` value\r\n        format: 'YYYY-MM-DD',\r\n\r\n        // the toString function which gets passed a current date object and format\r\n        // and returns a string\r\n        toString: null,\r\n\r\n        // used to create date object from current input string\r\n        parse: null,\r\n\r\n        // the initial date to view when first opened\r\n        defaultDate: null,\r\n\r\n        // make the `defaultDate` the initial selected value\r\n        setDefaultDate: false,\r\n\r\n        // first day of week (0: Sunday, 1: Monday etc)\r\n        firstDay: 0,\r\n\r\n        // the default flag for moment's strict date parsing\r\n        formatStrict: false,\r\n\r\n        // the minimum/earliest date that can be selected\r\n        minDate: null,\r\n        // the maximum/latest date that can be selected\r\n        maxDate: null,\r\n\r\n        // number of years either side, or array of upper/lower range\r\n        yearRange: 10,\r\n\r\n        // show week numbers at head of row\r\n        showWeekNumber: false,\r\n\r\n        // Week picker mode\r\n        pickWholeWeek: false,\r\n\r\n        // used internally (don't config outside)\r\n        minYear: 0,\r\n        maxYear: 9999,\r\n        minMonth: undefined,\r\n        maxMonth: undefined,\r\n\r\n        startRange: null,\r\n        endRange: null,\r\n\r\n        isRTL: false,\r\n\r\n        // Additional text to append to the year in the calendar title\r\n        yearSuffix: '',\r\n\r\n        // Render the month after year in the calendar title\r\n        showMonthAfterYear: false,\r\n\r\n        // Render days of the calendar grid that fall in the next or previous month\r\n        showDaysInNextAndPreviousMonths: false,\r\n\r\n        // Allows user to select days that fall in the next or previous month\r\n        enableSelectionDaysInNextAndPreviousMonths: false,\r\n\r\n        // how many months are visible\r\n        numberOfMonths: 1,\r\n\r\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\r\n        // only used for the first display or when a selected date is not visible\r\n        mainCalendar: 'left',\r\n\r\n        // Specify a DOM element to render the calendar in\r\n        container: undefined,\r\n\r\n        // Blur field when date is selected\r\n        blurFieldOnSelect : true,\r\n\r\n        // internationalization\r\n        i18n: {\r\n            previousMonth : 'Previous Month',\r\n            nextMonth     : 'Next Month',\r\n            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\r\n            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\r\n            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\r\n        },\r\n\r\n        // Theme Classname\r\n        theme: null,\r\n\r\n        // events array\r\n        events: [],\r\n\r\n        // callback function\r\n        onSelect: null,\r\n        onOpen: null,\r\n        onClose: null,\r\n        onDraw: null,\r\n\r\n        // Enable keyboard input\r\n        keyboardInput: true\r\n    },\r\n\r\n\r\n    /**\r\n     * templating functions to abstract HTML rendering\r\n     */\r\n    renderDayName = function(opts, day, abbr)\r\n    {\r\n        day += opts.firstDay;\r\n        while (day >= 7) {\r\n            day -= 7;\r\n        }\r\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\r\n    },\r\n\r\n    renderDay = function(opts)\r\n    {\r\n        var arr = [];\r\n        var ariaSelected = 'false';\r\n        if (opts.isEmpty) {\r\n            if (opts.showDaysInNextAndPreviousMonths) {\r\n                arr.push('is-outside-current-month');\r\n\r\n                if(!opts.enableSelectionDaysInNextAndPreviousMonths) {\r\n                    arr.push('is-selection-disabled');\r\n                }\r\n\r\n            } else {\r\n                return '<td class=\"is-empty\"></td>';\r\n            }\r\n        }\r\n        if (opts.isDisabled) {\r\n            arr.push('is-disabled');\r\n        }\r\n        if (opts.isToday) {\r\n            arr.push('is-today');\r\n        }\r\n        if (opts.isSelected) {\r\n            arr.push('is-selected');\r\n            ariaSelected = 'true';\r\n        }\r\n        if (opts.hasEvent) {\r\n            arr.push('has-event');\r\n        }\r\n        if (opts.isInRange) {\r\n            arr.push('is-inrange');\r\n        }\r\n        if (opts.isStartRange) {\r\n            arr.push('is-startrange');\r\n        }\r\n        if (opts.isEndRange) {\r\n            arr.push('is-endrange');\r\n        }\r\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' +\r\n                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\r\n                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\r\n                        opts.day +\r\n                 '</button>' +\r\n               '</td>';\r\n    },\r\n\r\n    renderWeek = function (d, m, y) {\r\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\r\n        var onejan = new Date(y, 0, 1),\r\n            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\r\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\r\n    },\r\n\r\n    renderRow = function(days, isRTL, pickWholeWeek, isRowSelected)\r\n    {\r\n        return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\r\n    },\r\n\r\n    renderBody = function(rows)\r\n    {\r\n        return '<tbody>' + rows.join('') + '</tbody>';\r\n    },\r\n\r\n    renderHead = function(opts)\r\n    {\r\n        var i, arr = [];\r\n        if (opts.showWeekNumber) {\r\n            arr.push('<th></th>');\r\n        }\r\n        for (i = 0; i < 7; i++) {\r\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\r\n        }\r\n        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\r\n    },\r\n\r\n    renderTitle = function(instance, c, year, month, refYear, randId)\r\n    {\r\n        var i, j, arr,\r\n            opts = instance._o,\r\n            isMinYear = year === opts.minYear,\r\n            isMaxYear = year === opts.maxYear,\r\n            html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\r\n            monthHtml,\r\n            yearHtml,\r\n            prev = true,\r\n            next = true;\r\n\r\n        for (arr = [], i = 0; i < 12; i++) {\r\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\r\n                (i === month ? ' selected=\"selected\"': '') +\r\n                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled=\"disabled\"' : '') + '>' +\r\n                opts.i18n.months[i] + '</option>');\r\n        }\r\n\r\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\r\n\r\n        if (isArray(opts.yearRange)) {\r\n            i = opts.yearRange[0];\r\n            j = opts.yearRange[1] + 1;\r\n        } else {\r\n            i = year - opts.yearRange;\r\n            j = 1 + year + opts.yearRange;\r\n        }\r\n\r\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\r\n            if (i >= opts.minYear) {\r\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"': '') + '>' + (i) + '</option>');\r\n            }\r\n        }\r\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\r\n\r\n        if (opts.showMonthAfterYear) {\r\n            html += yearHtml + monthHtml;\r\n        } else {\r\n            html += monthHtml + yearHtml;\r\n        }\r\n\r\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\r\n            prev = false;\r\n        }\r\n\r\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\r\n            next = false;\r\n        }\r\n\r\n        if (c === 0) {\r\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\r\n        }\r\n        if (c === (instance._o.numberOfMonths - 1) ) {\r\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\r\n        }\r\n\r\n        return html += '</div>';\r\n    },\r\n\r\n    renderTable = function(opts, data, randId)\r\n    {\r\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\r\n    },\r\n\r\n\r\n    /**\r\n     * Pikaday constructor\r\n     */\r\n    Pikaday = function(options)\r\n    {\r\n        var self = this,\r\n            opts = self.config(options);\r\n\r\n        self._onMouseDown = function(e)\r\n        {\r\n            if (!self._v) {\r\n                return;\r\n            }\r\n            e = e || window.event;\r\n            var target = e.target || e.srcElement;\r\n            if (!target) {\r\n                return;\r\n            }\r\n\r\n            if (!hasClass(target, 'is-disabled')) {\r\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\r\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\r\n                    if (opts.bound) {\r\n                        sto(function() {\r\n                            self.hide();\r\n                            if (opts.blurFieldOnSelect && opts.field) {\r\n                                opts.field.blur();\r\n                            }\r\n                        }, 100);\r\n                    }\r\n                }\r\n                else if (hasClass(target, 'pika-prev')) {\r\n                    self.prevMonth();\r\n                }\r\n                else if (hasClass(target, 'pika-next')) {\r\n                    self.nextMonth();\r\n                }\r\n            }\r\n            if (!hasClass(target, 'pika-select')) {\r\n                // if this is touch event prevent mouse events emulation\r\n                if (e.preventDefault) {\r\n                    e.preventDefault();\r\n                } else {\r\n                    e.returnValue = false;\r\n                    return false;\r\n                }\r\n            } else {\r\n                self._c = true;\r\n            }\r\n        };\r\n\r\n        self._onChange = function(e)\r\n        {\r\n            e = e || window.event;\r\n            var target = e.target || e.srcElement;\r\n            if (!target) {\r\n                return;\r\n            }\r\n            if (hasClass(target, 'pika-select-month')) {\r\n                self.gotoMonth(target.value);\r\n            }\r\n            else if (hasClass(target, 'pika-select-year')) {\r\n                self.gotoYear(target.value);\r\n            }\r\n        };\r\n\r\n        self._onKeyChange = function(e)\r\n        {\r\n            e = e || window.event;\r\n\r\n            if (self.isVisible()) {\r\n\r\n                switch(e.keyCode){\r\n                    case 13:\r\n                    case 27:\r\n                        if (opts.field) {\r\n                            opts.field.blur();\r\n                        }\r\n                        break;\r\n                    case 37:\r\n                        e.preventDefault();\r\n                        self.adjustDate('subtract', 1);\r\n                        break;\r\n                    case 38:\r\n                        self.adjustDate('subtract', 7);\r\n                        break;\r\n                    case 39:\r\n                        self.adjustDate('add', 1);\r\n                        break;\r\n                    case 40:\r\n                        self.adjustDate('add', 7);\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n\r\n        self._onInputChange = function(e)\r\n        {\r\n            var date;\r\n\r\n            if (e.firedBy === self) {\r\n                return;\r\n            }\r\n            if (opts.parse) {\r\n                date = opts.parse(opts.field.value, opts.format);\r\n            } else if (hasMoment) {\r\n                date = moment(opts.field.value, opts.format, opts.formatStrict);\r\n                date = (date && date.isValid()) ? date.toDate() : null;\r\n            }\r\n            else {\r\n                date = new Date(Date.parse(opts.field.value));\r\n            }\r\n            if (isDate(date)) {\r\n              self.setDate(date);\r\n            }\r\n            if (!self._v) {\r\n                self.show();\r\n            }\r\n        };\r\n\r\n        self._onInputFocus = function()\r\n        {\r\n            self.show();\r\n        };\r\n\r\n        self._onInputClick = function()\r\n        {\r\n            self.show();\r\n        };\r\n\r\n        self._onInputBlur = function()\r\n        {\r\n            // IE allows pika div to gain focus; catch blur the input field\r\n            var pEl = document.activeElement;\r\n            do {\r\n                if (hasClass(pEl, 'pika-single')) {\r\n                    return;\r\n                }\r\n            }\r\n            while ((pEl = pEl.parentNode));\r\n\r\n            if (!self._c) {\r\n                self._b = sto(function() {\r\n                    self.hide();\r\n                }, 50);\r\n            }\r\n            self._c = false;\r\n        };\r\n\r\n        self._onClick = function(e)\r\n        {\r\n            e = e || window.event;\r\n            var target = e.target || e.srcElement,\r\n                pEl = target;\r\n            if (!target) {\r\n                return;\r\n            }\r\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\r\n                if (!target.onchange) {\r\n                    target.setAttribute('onchange', 'return;');\r\n                    addEvent(target, 'change', self._onChange);\r\n                }\r\n            }\r\n            do {\r\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\r\n                    return;\r\n                }\r\n            }\r\n            while ((pEl = pEl.parentNode));\r\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\r\n                self.hide();\r\n            }\r\n        };\r\n\r\n        self.el = document.createElement('div');\r\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\r\n\r\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\r\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\r\n        addEvent(self.el, 'change', self._onChange);\r\n\r\n        if (opts.keyboardInput) {\r\n            addEvent(document, 'keydown', self._onKeyChange);\r\n        }\r\n\r\n        if (opts.field) {\r\n            if (opts.container) {\r\n                opts.container.appendChild(self.el);\r\n            } else if (opts.bound) {\r\n                document.body.appendChild(self.el);\r\n            } else {\r\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\r\n            }\r\n            addEvent(opts.field, 'change', self._onInputChange);\r\n\r\n            if (!opts.defaultDate) {\r\n                if (hasMoment && opts.field.value) {\r\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\r\n                } else {\r\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\r\n                }\r\n                opts.setDefaultDate = true;\r\n            }\r\n        }\r\n\r\n        var defDate = opts.defaultDate;\r\n\r\n        if (isDate(defDate)) {\r\n            if (opts.setDefaultDate) {\r\n                self.setDate(defDate, true);\r\n            } else {\r\n                self.gotoDate(defDate);\r\n            }\r\n        } else {\r\n            self.gotoDate(new Date());\r\n        }\r\n\r\n        if (opts.bound) {\r\n            this.hide();\r\n            self.el.className += ' is-bound';\r\n            addEvent(opts.trigger, 'click', self._onInputClick);\r\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\r\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\r\n        } else {\r\n            this.show();\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * public Pikaday API\r\n     */\r\n    Pikaday.prototype = {\r\n\r\n\r\n        /**\r\n         * configure functionality\r\n         */\r\n        config: function(options)\r\n        {\r\n            if (!this._o) {\r\n                this._o = extend({}, defaults, true);\r\n            }\r\n\r\n            var opts = extend(this._o, options, true);\r\n\r\n            opts.isRTL = !!opts.isRTL;\r\n\r\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\r\n\r\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\r\n\r\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\r\n\r\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\r\n\r\n            opts.disableWeekends = !!opts.disableWeekends;\r\n\r\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\r\n\r\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\r\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\r\n\r\n            if (!isDate(opts.minDate)) {\r\n                opts.minDate = false;\r\n            }\r\n            if (!isDate(opts.maxDate)) {\r\n                opts.maxDate = false;\r\n            }\r\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\r\n                opts.maxDate = opts.minDate = false;\r\n            }\r\n            if (opts.minDate) {\r\n                this.setMinDate(opts.minDate);\r\n            }\r\n            if (opts.maxDate) {\r\n                this.setMaxDate(opts.maxDate);\r\n            }\r\n\r\n            if (isArray(opts.yearRange)) {\r\n                var fallback = new Date().getFullYear() - 10;\r\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\r\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\r\n            } else {\r\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\r\n                if (opts.yearRange > 100) {\r\n                    opts.yearRange = 100;\r\n                }\r\n            }\r\n\r\n            return opts;\r\n        },\r\n\r\n        /**\r\n         * return a formatted string of the current selection (using Moment.js if available)\r\n         */\r\n        toString: function(format)\r\n        {\r\n            format = format || this._o.format;\r\n            if (!isDate(this._d)) {\r\n                return '';\r\n            }\r\n            if (this._o.toString) {\r\n              return this._o.toString(this._d, format);\r\n            }\r\n            if (hasMoment) {\r\n              return moment(this._d).format(format);\r\n            }\r\n            return this._d.toDateString();\r\n        },\r\n\r\n        /**\r\n         * return a Moment.js object of the current selection (if available)\r\n         */\r\n        getMoment: function()\r\n        {\r\n            return hasMoment ? moment(this._d) : null;\r\n        },\r\n\r\n        /**\r\n         * set the current selection from a Moment.js object (if available)\r\n         */\r\n        setMoment: function(date, preventOnSelect)\r\n        {\r\n            if (hasMoment && moment.isMoment(date)) {\r\n                this.setDate(date.toDate(), preventOnSelect);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * return a Date object of the current selection\r\n         */\r\n        getDate: function()\r\n        {\r\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\r\n        },\r\n\r\n        /**\r\n         * set the current selection\r\n         */\r\n        setDate: function(date, preventOnSelect)\r\n        {\r\n            if (!date) {\r\n                this._d = null;\r\n\r\n                if (this._o.field) {\r\n                    this._o.field.value = '';\r\n                    fireEvent(this._o.field, 'change', { firedBy: this });\r\n                }\r\n\r\n                return this.draw();\r\n            }\r\n            if (typeof date === 'string') {\r\n                date = new Date(Date.parse(date));\r\n            }\r\n            if (!isDate(date)) {\r\n                return;\r\n            }\r\n\r\n            var min = this._o.minDate,\r\n                max = this._o.maxDate;\r\n\r\n            if (isDate(min) && date < min) {\r\n                date = min;\r\n            } else if (isDate(max) && date > max) {\r\n                date = max;\r\n            }\r\n\r\n            this._d = new Date(date.getTime());\r\n            setToStartOfDay(this._d);\r\n            this.gotoDate(this._d);\r\n\r\n            if (this._o.field) {\r\n                this._o.field.value = this.toString();\r\n                fireEvent(this._o.field, 'change', { firedBy: this });\r\n            }\r\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\r\n                this._o.onSelect.call(this, this.getDate());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * change view to a specific date\r\n         */\r\n        gotoDate: function(date)\r\n        {\r\n            var newCalendar = true;\r\n\r\n            if (!isDate(date)) {\r\n                return;\r\n            }\r\n\r\n            if (this.calendars) {\r\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\r\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\r\n                    visibleDate = date.getTime();\r\n                // get the end of the month\r\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\r\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\r\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\r\n            }\r\n\r\n            if (newCalendar) {\r\n                this.calendars = [{\r\n                    month: date.getMonth(),\r\n                    year: date.getFullYear()\r\n                }];\r\n                if (this._o.mainCalendar === 'right') {\r\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\r\n                }\r\n            }\r\n\r\n            this.adjustCalendars();\r\n        },\r\n\r\n        adjustDate: function(sign, days) {\r\n\r\n            var day = this.getDate() || new Date();\r\n            var difference = parseInt(days)*24*60*60*1000;\r\n\r\n            var newDay;\r\n\r\n            if (sign === 'add') {\r\n                newDay = new Date(day.valueOf() + difference);\r\n            } else if (sign === 'subtract') {\r\n                newDay = new Date(day.valueOf() - difference);\r\n            }\r\n\r\n            this.setDate(newDay);\r\n        },\r\n\r\n        adjustCalendars: function() {\r\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\r\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\r\n                this.calendars[c] = adjustCalendar({\r\n                    month: this.calendars[0].month + c,\r\n                    year: this.calendars[0].year\r\n                });\r\n            }\r\n            this.draw();\r\n        },\r\n\r\n        gotoToday: function()\r\n        {\r\n            this.gotoDate(new Date());\r\n        },\r\n\r\n        /**\r\n         * change view to a specific month (zero-index, e.g. 0: January)\r\n         */\r\n        gotoMonth: function(month)\r\n        {\r\n            if (!isNaN(month)) {\r\n                this.calendars[0].month = parseInt(month, 10);\r\n                this.adjustCalendars();\r\n            }\r\n        },\r\n\r\n        nextMonth: function()\r\n        {\r\n            this.calendars[0].month++;\r\n            this.adjustCalendars();\r\n        },\r\n\r\n        prevMonth: function()\r\n        {\r\n            this.calendars[0].month--;\r\n            this.adjustCalendars();\r\n        },\r\n\r\n        /**\r\n         * change view to a specific full year (e.g. \"2012\")\r\n         */\r\n        gotoYear: function(year)\r\n        {\r\n            if (!isNaN(year)) {\r\n                this.calendars[0].year = parseInt(year, 10);\r\n                this.adjustCalendars();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * change the minDate\r\n         */\r\n        setMinDate: function(value)\r\n        {\r\n            if(value instanceof Date) {\r\n                setToStartOfDay(value);\r\n                this._o.minDate = value;\r\n                this._o.minYear  = value.getFullYear();\r\n                this._o.minMonth = value.getMonth();\r\n            } else {\r\n                this._o.minDate = defaults.minDate;\r\n                this._o.minYear  = defaults.minYear;\r\n                this._o.minMonth = defaults.minMonth;\r\n                this._o.startRange = defaults.startRange;\r\n            }\r\n\r\n            this.draw();\r\n        },\r\n\r\n        /**\r\n         * change the maxDate\r\n         */\r\n        setMaxDate: function(value)\r\n        {\r\n            if(value instanceof Date) {\r\n                setToStartOfDay(value);\r\n                this._o.maxDate = value;\r\n                this._o.maxYear = value.getFullYear();\r\n                this._o.maxMonth = value.getMonth();\r\n            } else {\r\n                this._o.maxDate = defaults.maxDate;\r\n                this._o.maxYear = defaults.maxYear;\r\n                this._o.maxMonth = defaults.maxMonth;\r\n                this._o.endRange = defaults.endRange;\r\n            }\r\n\r\n            this.draw();\r\n        },\r\n\r\n        setStartRange: function(value)\r\n        {\r\n            this._o.startRange = value;\r\n        },\r\n\r\n        setEndRange: function(value)\r\n        {\r\n            this._o.endRange = value;\r\n        },\r\n\r\n        /**\r\n         * refresh the HTML\r\n         */\r\n        draw: function(force)\r\n        {\r\n            if (!this._v && !force) {\r\n                return;\r\n            }\r\n            var opts = this._o,\r\n                minYear = opts.minYear,\r\n                maxYear = opts.maxYear,\r\n                minMonth = opts.minMonth,\r\n                maxMonth = opts.maxMonth,\r\n                html = '',\r\n                randId;\r\n\r\n            if (this._y <= minYear) {\r\n                this._y = minYear;\r\n                if (!isNaN(minMonth) && this._m < minMonth) {\r\n                    this._m = minMonth;\r\n                }\r\n            }\r\n            if (this._y >= maxYear) {\r\n                this._y = maxYear;\r\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\r\n                    this._m = maxMonth;\r\n                }\r\n            }\r\n\r\n            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\r\n\r\n            for (var c = 0; c < opts.numberOfMonths; c++) {\r\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\r\n            }\r\n\r\n            this.el.innerHTML = html;\r\n\r\n            if (opts.bound) {\r\n                if(opts.field.type !== 'hidden') {\r\n                    sto(function() {\r\n                        opts.trigger.focus();\r\n                    }, 1);\r\n                }\r\n            }\r\n\r\n            if (typeof this._o.onDraw === 'function') {\r\n                this._o.onDraw(this);\r\n            }\r\n\r\n            if (opts.bound) {\r\n                // let the screen reader user know to use arrow keys\r\n                opts.field.setAttribute('aria-label', opts.ariaLabel);\r\n            }\r\n        },\r\n\r\n        adjustPosition: function()\r\n        {\r\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect, leftAligned, bottomAligned;\r\n\r\n            if (this._o.container) return;\r\n\r\n            this.el.style.position = 'absolute';\r\n\r\n            field = this._o.trigger;\r\n            pEl = field;\r\n            width = this.el.offsetWidth;\r\n            height = this.el.offsetHeight;\r\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\r\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\r\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n            leftAligned = true;\r\n            bottomAligned = true;\r\n\r\n            if (typeof field.getBoundingClientRect === 'function') {\r\n                clientRect = field.getBoundingClientRect();\r\n                left = clientRect.left + window.pageXOffset;\r\n                top = clientRect.bottom + window.pageYOffset;\r\n            } else {\r\n                left = pEl.offsetLeft;\r\n                top  = pEl.offsetTop + pEl.offsetHeight;\r\n                while((pEl = pEl.offsetParent)) {\r\n                    left += pEl.offsetLeft;\r\n                    top  += pEl.offsetTop;\r\n                }\r\n            }\r\n\r\n            // default position is bottom & left\r\n            if ((this._o.reposition && left + width > viewportWidth) ||\r\n                (\r\n                    this._o.position.indexOf('right') > -1 &&\r\n                    left - width + field.offsetWidth > 0\r\n                )\r\n            ) {\r\n                left = left - width + field.offsetWidth;\r\n                leftAligned = false;\r\n            }\r\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\r\n                (\r\n                    this._o.position.indexOf('top') > -1 &&\r\n                    top - height - field.offsetHeight > 0\r\n                )\r\n            ) {\r\n                top = top - height - field.offsetHeight;\r\n                bottomAligned = false;\r\n            }\r\n\r\n            this.el.style.left = left + 'px';\r\n            this.el.style.top = top + 'px';\r\n\r\n            addClass(this.el, leftAligned ? 'left-aligned' : 'right-aligned');\r\n            addClass(this.el, bottomAligned ? 'bottom-aligned' : 'top-aligned');\r\n            removeClass(this.el, !leftAligned ? 'left-aligned' : 'right-aligned');\r\n            removeClass(this.el, !bottomAligned ? 'bottom-aligned' : 'top-aligned');\r\n        },\r\n\r\n        /**\r\n         * render HTML for a particular month\r\n         */\r\n        render: function(year, month, randId)\r\n        {\r\n            var opts   = this._o,\r\n                now    = new Date(),\r\n                days   = getDaysInMonth(year, month),\r\n                before = new Date(year, month, 1).getDay(),\r\n                data   = [],\r\n                row    = [];\r\n            setToStartOfDay(now);\r\n            if (opts.firstDay > 0) {\r\n                before -= opts.firstDay;\r\n                if (before < 0) {\r\n                    before += 7;\r\n                }\r\n            }\r\n            var previousMonth = month === 0 ? 11 : month - 1,\r\n                nextMonth = month === 11 ? 0 : month + 1,\r\n                yearOfPreviousMonth = month === 0 ? year - 1 : year,\r\n                yearOfNextMonth = month === 11 ? year + 1 : year,\r\n                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\r\n            var cells = days + before,\r\n                after = cells;\r\n            while(after > 7) {\r\n                after -= 7;\r\n            }\r\n            cells += 7 - after;\r\n            var isWeekSelected = false;\r\n            for (var i = 0, r = 0; i < cells; i++)\r\n            {\r\n                var day = new Date(year, month, 1 + (i - before)),\r\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\r\n                    isToday = compareDates(day, now),\r\n                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\r\n                    isEmpty = i < before || i >= (days + before),\r\n                    dayNumber = 1 + (i - before),\r\n                    monthNumber = month,\r\n                    yearNumber = year,\r\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\r\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\r\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\r\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\r\n                                 (opts.maxDate && day > opts.maxDate) ||\r\n                                 (opts.disableWeekends && isWeekend(day)) ||\r\n                                 (opts.disableDayFn && opts.disableDayFn(day));\r\n\r\n                if (isEmpty) {\r\n                    if (i < before) {\r\n                        dayNumber = daysInPreviousMonth + dayNumber;\r\n                        monthNumber = previousMonth;\r\n                        yearNumber = yearOfPreviousMonth;\r\n                    } else {\r\n                        dayNumber = dayNumber - days;\r\n                        monthNumber = nextMonth;\r\n                        yearNumber = yearOfNextMonth;\r\n                    }\r\n                }\r\n\r\n                var dayConfig = {\r\n                        day: dayNumber,\r\n                        month: monthNumber,\r\n                        year: yearNumber,\r\n                        hasEvent: hasEvent,\r\n                        isSelected: isSelected,\r\n                        isToday: isToday,\r\n                        isDisabled: isDisabled,\r\n                        isEmpty: isEmpty,\r\n                        isStartRange: isStartRange,\r\n                        isEndRange: isEndRange,\r\n                        isInRange: isInRange,\r\n                        showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\r\n                        enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\r\n                    };\r\n\r\n                if (opts.pickWholeWeek && isSelected) {\r\n                    isWeekSelected = true;\r\n                }\r\n\r\n                row.push(renderDay(dayConfig));\r\n\r\n                if (++r === 7) {\r\n                    if (opts.showWeekNumber) {\r\n                        row.unshift(renderWeek(i - before, month, year));\r\n                    }\r\n                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\r\n                    row = [];\r\n                    r = 0;\r\n                    isWeekSelected = false;\r\n                }\r\n            }\r\n            return renderTable(opts, data, randId);\r\n        },\r\n\r\n        isVisible: function()\r\n        {\r\n            return this._v;\r\n        },\r\n\r\n        show: function()\r\n        {\r\n            if (!this.isVisible()) {\r\n                this._v = true;\r\n                this.draw();\r\n                removeClass(this.el, 'is-hidden');\r\n                if (this._o.bound) {\r\n                    addEvent(document, 'click', this._onClick);\r\n                    this.adjustPosition();\r\n                }\r\n                if (typeof this._o.onOpen === 'function') {\r\n                    this._o.onOpen.call(this);\r\n                }\r\n            }\r\n        },\r\n\r\n        hide: function()\r\n        {\r\n            var v = this._v;\r\n            if (v !== false) {\r\n                if (this._o.bound) {\r\n                    removeEvent(document, 'click', this._onClick);\r\n                }\r\n                this.el.style.position = 'static'; // reset\r\n                this.el.style.left = 'auto';\r\n                this.el.style.top = 'auto';\r\n                addClass(this.el, 'is-hidden');\r\n                this._v = false;\r\n                if (v !== undefined && typeof this._o.onClose === 'function') {\r\n                    this._o.onClose.call(this);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * GAME OVER\r\n         */\r\n        destroy: function()\r\n        {\r\n            var opts = this._o;\r\n\r\n            this.hide();\r\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\r\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\r\n            removeEvent(this.el, 'change', this._onChange);\r\n            if (opts.keyboardInput) {\r\n                removeEvent(document, 'keydown', this._onKeyChange);\r\n            }\r\n            if (opts.field) {\r\n                removeEvent(opts.field, 'change', this._onInputChange);\r\n                if (opts.bound) {\r\n                    removeEvent(opts.trigger, 'click', this._onInputClick);\r\n                    removeEvent(opts.trigger, 'focus', this._onInputFocus);\r\n                    removeEvent(opts.trigger, 'blur', this._onInputBlur);\r\n                }\r\n            }\r\n            if (this.el.parentNode) {\r\n                this.el.parentNode.removeChild(this.el);\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    return Pikaday;\r\n}));\r\n"]},"metadata":{},"sourceType":"script"}