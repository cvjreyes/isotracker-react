{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./progressCurve.css\";import React,{useState,useEffect}from'react';import NavBar from'../../components/navBar/navBar';import ProgressPlotCurve from\"../../components/progressPlotCurve/progressPlotCurve\";import IdleTimer from'react-idle-timer';import{useHistory}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Civil=function Civil(){var CryptoJS=require(\"crypto-js\");var SecureStorage=require(\"secure-web-storage\");var SECRET_KEY='sanud2ha8shd72h';var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentRole=_useState2[0],setCurrentRole=_useState2[1];var history=useHistory();useEffect(function(){var body={user:currentUser};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/roles/user\",options).then(function(response){return response.json();}).then(function(json){if(secureStorage.getItem('role')!==null){setCurrentRole(secureStorage.getItem('role'));}else{secureStorage.setItem('role',json.roles[0]);setCurrentRole(secureStorage.getItem('role'));}}).catch(function(error){console.log(error);});},[currentRole]);useEffect(function(){var body={user:currentUser};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[]);function handleOnIdle(){var body={user:currentUser};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(json){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());secureStorage.clear();history.push(\"/\"+process.env.REACT_APP_APP_PROJECT);}var secureStorage=new SecureStorage(localStorage,{hash:function hash(key){key=CryptoJS.SHA256(key,SECRET_KEY);return key.toString();},encrypt:function encrypt(data){data=CryptoJS.AES.encrypt(data,SECRET_KEY);data=data.toString();return data;},decrypt:function decrypt(data){data=CryptoJS.AES.decrypt(data,SECRET_KEY);data=data.toString(CryptoJS.enc.Utf8);return data;}});useEffect(function(){if(!secureStorage.getItem(\"user\")){history.push(\"/\"+process.env.REACT_APP_PROJECT+\"/\");}},[]);var dataTableHeight=\"550px\";document.body.style.zoom=0.8;document.title=process.env.REACT_APP_PROJECT;var _useState3=useState(secureStorage.getItem(\"civ_tab\")),_useState4=_slicedToArray(_useState3,2),currentTab=_useState4[0],setCurrentTab=_useState4[1];if(currentTab===\"\"||currentTab===null){setCurrentTab(\"Estimated\");}var currentUser=secureStorage.getItem('user');var table=null;table=/*#__PURE__*/_jsx(ProgressPlotCurve,{});return/*#__PURE__*/_jsxs(\"body\",{children:[/*#__PURE__*/_jsx(IdleTimer,{timeout:1000*60*15,onIdle:handleOnIdle,debounce:250}),/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"equipments__container\",children:[/*#__PURE__*/_jsxs(\"center\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title__container\",children:/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsx(\"i\",{className:\"iso__title\",children:\"Progress curve\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"iso__subtitle\",children:\"3D Progress\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{height:dataTableHeight},children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),table]})]})]});};export default Civil;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/pages/progressCurve/progressCurve.js"],"names":["React","useState","useEffect","NavBar","ProgressPlotCurve","IdleTimer","useHistory","Civil","CryptoJS","require","SecureStorage","SECRET_KEY","currentRole","setCurrentRole","history","body","user","currentUser","options","method","headers","JSON","stringify","fetch","process","env","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","secureStorage","getItem","setItem","roles","catch","error","console","log","handleOnIdle","clear","push","REACT_APP_APP_PROJECT","localStorage","hash","key","SHA256","toString","encrypt","data","AES","decrypt","enc","Utf8","REACT_APP_PROJECT","dataTableHeight","document","style","zoom","title","currentTab","setCurrentTab","table","height"],"mappings":"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","sourcesContent":["import \"./progressCurve.css\"\r\nimport React, { useState , useEffect} from 'react'\r\nimport NavBar from '../../components/navBar/navBar'\r\nimport ProgressPlotCurve from \"../../components/progressPlotCurve/progressPlotCurve\"\r\n\r\nimport IdleTimer from 'react-idle-timer'\r\nimport {useHistory} from \"react-router\";\r\n\r\nconst Civil = () => {\r\n\r\n    const CryptoJS = require(\"crypto-js\");\r\n    const SecureStorage = require(\"secure-web-storage\");\r\n    var SECRET_KEY = 'sanud2ha8shd72h';\r\n    const [currentRole, setCurrentRole] = useState();\r\n\r\n    const history = useHistory()\r\n\r\n    useEffect(()=>{\r\n        const body = {\r\n            user: currentUser,\r\n        }\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n       \r\n\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/roles/user\", options)\r\n            .then(response => response.json())\r\n            .then(json => {\r\n                if(secureStorage.getItem('role') !== null){\r\n                    setCurrentRole(secureStorage.getItem('role'))\r\n                }else{\r\n                    secureStorage.setItem('role', json.roles[0])\r\n                    setCurrentRole(secureStorage.getItem('role'))\r\n                }\r\n                }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            })       \r\n            \r\n    },[currentRole]);\r\n\r\n    useEffect(()=>{\r\n        const body = {\r\n            user: currentUser,\r\n        }\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n\r\n            })\r\n    },[])\r\n\r\n    function handleOnIdle(){\r\n        const body = {\r\n            user: currentUser,\r\n        }\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n\r\n            })\r\n        secureStorage.clear()\r\n        history.push(\"/\" + process.env.REACT_APP_APP_PROJECT)\r\n    }\r\n\r\n    var secureStorage = new SecureStorage(localStorage, {\r\n        hash: function hash(key) {\r\n            key = CryptoJS.SHA256(key, SECRET_KEY);\r\n    \r\n            return key.toString();\r\n        },\r\n        encrypt: function encrypt(data) {\r\n            data = CryptoJS.AES.encrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString();\r\n    \r\n            return data;\r\n        },\r\n        decrypt: function decrypt(data) {\r\n            data = CryptoJS.AES.decrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString(CryptoJS.enc.Utf8);\r\n    \r\n            return data;\r\n        }\r\n    });\r\n\r\n    useEffect(()=>{\r\n        if(!secureStorage.getItem(\"user\")){\r\n            history.push(\"/\"+process.env.REACT_APP_PROJECT+\"/\");\r\n        }\r\n    }, [])\r\n\r\n    var dataTableHeight = \"550px\"\r\n\r\n\r\n    document.body.style.zoom = 0.8\r\n    document.title= process.env.REACT_APP_PROJECT\r\n    const [currentTab, setCurrentTab] = useState(secureStorage.getItem(\"civ_tab\"))\r\n    if(currentTab === \"\" || currentTab === null){\r\n        setCurrentTab(\"Estimated\")\r\n    }\r\n\r\n    var currentUser = secureStorage.getItem('user')\r\n    var table = null\r\n\r\n    table = <ProgressPlotCurve/>\r\n\r\n\r\n\r\n    return(\r\n        \r\n        <body>\r\n            <IdleTimer\r\n                timeout={1000 * 60 * 15}\r\n                onIdle={handleOnIdle}\r\n                debounce={250}\r\n            />\r\n            <NavBar/>\r\n            <div className=\"equipments__container\">  \r\n                <center>\r\n                    <h2 className=\"title__container\">\r\n\r\n                        <b >      \r\n                            <i className=\"iso__title\">Progress curve</i>\r\n                        </b>\r\n                    </h2>\r\n                    <h3 className=\"iso__subtitle\">3D Progress</h3>\r\n                </center>\r\n\r\n\r\n                <div style={{height: dataTableHeight}}>\r\n                    <br></br>\r\n                    <br></br> \r\n                    <br></br> \r\n                    {table}\r\n                </div>         \r\n            </div>\r\n         </body>\r\n    )\r\n}\r\n\r\nexport default Civil;"]},"metadata":{},"sourceType":"module"}