{"ast":null,"code":"import _objectSpread from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'antd/dist/antd.css';import{Table}from'antd';import'./equipEstimatedDataTable.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EquipEstimatedDataTable=/*#__PURE__*/function(_React$Component){_inherits(EquipEstimatedDataTable,_React$Component);var _super=_createSuper(EquipEstimatedDataTable);function EquipEstimatedDataTable(){var _this;_classCallCheck(this,EquipEstimatedDataTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={searchText:'',searchedColumn:'',data:[],displayData:[],filterData:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],tab:_this.props.currentTab,selectedRows:[],selectedRowsKeys:[],updateData:_this.props.updateData,username:\"\",acronyms:null,steps:[],filters:[]};_this.getColumnSearchProps=function(dataIndex){return{render:function render(text){return text;}};};_this.handleReset=function(clearFilters){clearFilters();_this.setState({searchText:''});};_this.onSelectChange=function(selectedRowKeys,selectedRows){var ids=[];for(var i=0;i<selectedRows.length;i++){ids.push(selectedRows[i].id.props.children);}_this.setState({selectedRowsKeys:selectedRowKeys,selectedRows:selectedRows});//this.setState({ selectedRows: selectedRows });\n_this.props.onChange(ids);};return _this;}_createClass(EquipEstimatedDataTable,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this2=this;var options;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};_context3.next=3;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/equipments/steps\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){var percentages,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:percentages=[];for(i=0;i<json.rows.length;i++){percentages.push(json.rows[i].percentage);}_context.next=4;return _this2.setState({steps:percentages});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());case 3:fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/equipments/estimated\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(json){var rows,row,i,mod,j,currentStep,filterRow,_loop,_j;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:rows=[];row=null;for(i=0;i<json.rows.length;i++){mod=0;if(json.rows[i].modelled){mod=json.rows[i].modelled;}if(i%2===0){row={area:json.rows[i].area,type:json.rows[i].type,quantity:json.rows[i].quantity,modelled:mod,color:\"#fff\"};}else{row={area:json.rows[i].area,type:json.rows[i].type,quantity:json.rows[i].quantity,modelled:mod,color:\"#eee\"};}for(j=0;j<_this2.state.steps.length;j++){currentStep=_this2.state.steps[j].toString();row[currentStep]=json.rows[i][currentStep];}rows.push(row);}filterRow=[{area:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"Area\",onChange:function onChange(e){return _this2.filter(0,e.target.value);}})}),type:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"Type\",onChange:function onChange(e){return _this2.filter(1,e.target.value);}})}),quantity:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"Qty\",onChange:function onChange(e){return _this2.filter(2,e.target.value);}})}),modelled:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"Modelled\",onChange:function onChange(e){return _this2.filter(3,e.target.value);}})})}];_loop=function _loop(_j){var currentStep=_this2.state.steps[_j].toString();filterRow[0][currentStep]=/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:currentStep+\"%\",onChange:function onChange(e){return _this2.filter(_j+4,e.target.value);}})});};for(_j=0;_j<_this2.state.steps.length;_j++){_loop(_j);}_this2.setState({data:rows,displayData:rows});_context2.next=9;return _this2.setState({filters:filterRow});case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());case 4:case\"end\":return _context3.stop();}}},_callee3);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"filter\",value:function(){var _filter=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(column,value){var fd,auxDisplayData,resultData,fil,exists,i,_column,keys;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fd=this.state.filterData;fd[column]=value;_context4.next=4;return this.setState({filterData:fd});case 4:auxDisplayData=this.state.data;resultData=[];exists=null;for(i=0;i<auxDisplayData.length;i++){exists=true;for(_column=0;_column<Object.keys(auxDisplayData[i]).length-1;_column++){keys=Object.keys(auxDisplayData[i]);keys.pop();fil=keys[(_column+this.state.steps.length)%keys.length];if(this.state.filterData[_column]!==\"\"&&this.state.filterData[_column]&&!auxDisplayData[i][fil].toString().includes(this.state.filterData[_column])){exists=false;}}if(exists){resultData.push(auxDisplayData[i]);}}_context4.next=10;return this.setState({displayData:resultData});case 10:case\"end\":return _context4.stop();}}},_callee4,this);}));function filter(_x3,_x4){return _filter.apply(this,arguments);}return filter;}()},{key:\"render\",value:function render(){var _this3=this;var columns=[_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"center\",{className:\"dataTable__header__text\",children:\"Area\"}),dataIndex:'area',key:'area'},this.getColumnSearchProps('area')),{},{sorter:{compare:function compare(a,b){return a.area.localeCompare(b.area);}}}),_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"center\",{className:\"dataTable__header__text\",children:\"Type\"}),dataIndex:'type',key:'type'},this.getColumnSearchProps('type')),{},{sorter:{compare:function compare(a,b){return a.type.localeCompare(b.type);}}}),_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"div\",{className:\"dataTable__header__text\",children:\"Qty\"}),dataIndex:'quantity',key:'quantity'},this.getColumnSearchProps('quantity')),{},{sorter:{compare:function compare(a,b){return a.quantity-b.quantity;}}}),_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"div\",{className:\"dataTable__header__text\",children:\"Modelled\"}),dataIndex:'modelled',key:'modelled'},this.getColumnSearchProps('modelled')),{},{sorter:{compare:function compare(a,b){return a.modelled-b.modelled;}}})];var _loop2=function _loop2(i){var index=_this3.state.steps[i];columns.push(_objectSpread(_objectSpread({title:/*#__PURE__*/_jsxs(\"div\",{className:\"dataTable__header__text\",children:[_this3.state.steps[i],\"%\"]}),dataIndex:index,key:index},_this3.getColumnSearchProps(index)),{},{sorter:{compare:function compare(a,b){return a[index]-b[index];}}}));};for(var i=0;i<this.state.steps.length;i++){_loop2(i);}var totalElements=null;if(this.state.data.length===0){totalElements=null;}else{totalElements=/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",bottom:25,left:0},children:/*#__PURE__*/_jsxs(\"b\",{children:[\"Total elements: \",this.state.data.length]})});}return/*#__PURE__*/_jsxs(\"div\",{children:[this.state.updateData,/*#__PURE__*/_jsxs(\"div\",{className:\"estimatedDataTable__container\",children:[/*#__PURE__*/_jsx(Table,{className:\"customTable\",bordered:true,columns:columns,style:{height:'540px'},dataSource:this.state.displayData,scroll:{y:437},pagination:{disabled:true,defaultPageSize:5000},size:\"small\",rowClassName:function rowClassName(record){return record.color.replace('#','');}}),/*#__PURE__*/_jsx(Table,{className:\"filter__table\",pagination:{disabled:true},scroll:{y:437},showHeader:false,bordered:true,columns:columns,dataSource:this.state.filters,size:\"small\"}),totalElements]})]});}}]);return EquipEstimatedDataTable;}(React.Component);export default EquipEstimatedDataTable;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/components/equipEstimatedDataTable/equipEstimatedDataTable.js"],"names":["React","Table","EquipEstimatedDataTable","state","searchText","searchedColumn","data","displayData","filterData","tab","props","currentTab","selectedRows","selectedRowsKeys","updateData","username","acronyms","steps","filters","getColumnSearchProps","dataIndex","render","text","handleReset","clearFilters","setState","onSelectChange","selectedRowKeys","ids","i","length","push","id","children","onChange","options","method","headers","fetch","process","env","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","percentages","rows","percentage","row","mod","modelled","area","type","quantity","color","j","currentStep","toString","filterRow","e","filter","target","value","column","fd","auxDisplayData","resultData","exists","Object","keys","pop","fil","includes","columns","title","key","sorter","compare","a","b","localeCompare","index","totalElements","position","bottom","left","height","y","disabled","defaultPageSize","record","replace","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'antd/dist/antd.css';\r\nimport { Table } from 'antd';\r\nimport './equipEstimatedDataTable.css'\r\n\r\nclass EquipEstimatedDataTable extends React.Component{\r\n  state = {\r\n    searchText: '',\r\n    searchedColumn: '',\r\n    data: [],    \r\n    displayData: [],\r\n    filterData: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    tab: this.props.currentTab,\r\n    selectedRows: [],\r\n    selectedRowsKeys: [],\r\n    updateData: this.props.updateData,\r\n    username: \"\",\r\n    acronyms : null,\r\n    steps: [],\r\n    filters: []\r\n  };\r\n\r\n  async componentDidMount(){\r\n\r\n    const options = {\r\n        method: \"GET\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n    }\r\n\r\n\r\n    await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/equipments/steps\", options)\r\n    .then(response => response.json())\r\n    .then(async json => {\r\n      let percentages = []\r\n      for(let i = 0; i < json.rows.length; i++){\r\n        percentages.push(json.rows[i].percentage)\r\n      }\r\n      await this.setState({steps : percentages});\r\n    }) \r\n\r\n\r\n    fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/equipments/estimated\", options)\r\n      .then(response => response.json())\r\n      .then(async json => {\r\n        var rows = []\r\n        var row = null\r\n        \r\n        for(let i = 0; i < json.rows.length; i++){\r\n            let mod = 0\r\n            if(json.rows[i].modelled){\r\n              mod = json.rows[i].modelled\r\n            }\r\n            if(i % 2 === 0){\r\n              row = {area: json.rows[i].area, type: json.rows[i].type, quantity: json.rows[i].quantity, modelled: mod, color: \"#fff\"}\r\n            }else{\r\n              row = {area: json.rows[i].area, type: json.rows[i].type, quantity: json.rows[i].quantity, modelled: mod, color: \"#eee\"}\r\n            }\r\n            \r\n            for(let j = 0; j < this.state.steps.length; j++){\r\n              let currentStep = this.state.steps[j].toString()\r\n              row[currentStep] = json.rows[i][currentStep]\r\n            }\r\n            rows.push(row)\r\n        }\r\n        let filterRow = [{area: <div><input type=\"text\" className=\"filter__input\" placeholder=\"Area\" onChange={(e) => this.filter(0, e.target.value)}/></div>, type: <div><input type=\"text\" className=\"filter__input\" placeholder=\"Type\" onChange={(e) => this.filter(1, e.target.value)}/></div>, quantity: <div><input type=\"text\" className=\"filter__input\" placeholder=\"Qty\" onChange={(e) => this.filter(2,e.target.value)}/></div>, modelled: <div><input type=\"text\" className=\"filter__input\" placeholder=\"Modelled\" onChange={(e) => this.filter(3,e.target.value)}/></div>}]\r\n        for(let j = 0; j < this.state.steps.length; j++){\r\n          let currentStep = this.state.steps[j].toString()\r\n          filterRow[0][currentStep] =  <div><input type=\"text\" className=\"filter__input\" placeholder={currentStep+\"%\"} onChange={(e) => this.filter(j+4,e.target.value)}/></div>\r\n        }\r\n        this.setState({data : rows, displayData: rows});\r\n        await this.setState({filters : filterRow})\r\n\r\n    }) \r\n  }\r\n\r\n  async filter(column, value){\r\n    let fd = this.state.filterData\r\n    fd[column] = value\r\n    await this.setState({filterData: fd})\r\n\r\n    let auxDisplayData = this.state.data\r\n    let resultData = []\r\n    let fil, exists = null\r\n    for(let i = 0; i < auxDisplayData.length; i++){\r\n      exists = true\r\n      for(let column = 0; column < Object.keys(auxDisplayData[i]).length-1; column ++){\r\n        let keys = Object.keys(auxDisplayData[i])\r\n        keys.pop()\r\n        fil = keys[(column+this.state.steps.length) % keys.length]\r\n       \r\n        if(this.state.filterData[column] !== \"\" && this.state.filterData[column] && !auxDisplayData[i][fil].toString().includes(this.state.filterData[column])){\r\n          exists = false    \r\n          \r\n        }\r\n        \r\n      }\r\n      if(exists){\r\n        resultData.push(auxDisplayData[i])\r\n      }\r\n    }\r\n    await this.setState({displayData: resultData})\r\n  }\r\n  \r\n  getColumnSearchProps = dataIndex => ({\r\n    \r\n    render: text => \r\n      \r\n      text\r\n    \r\n      \r\n  });\r\n\r\n  handleReset = clearFilters => {\r\n    clearFilters();\r\n    this.setState({ searchText: '' });\r\n  };\r\n\r\n  onSelectChange = (selectedRowKeys, selectedRows) => {\r\n    let ids = []\r\n    for(let i = 0; i < selectedRows.length; i++){\r\n      ids.push(selectedRows[i].id.props.children)\r\n    }\r\n    this.setState({\r\n      selectedRowsKeys: selectedRowKeys,\r\n      selectedRows: selectedRows\r\n    })\r\n    //this.setState({ selectedRows: selectedRows });\r\n    this.props.onChange(ids);\r\n    \r\n  };\r\n  \r\n\r\n  render() {\r\n\r\n    const columns = [\r\n      {\r\n        title: <center className=\"dataTable__header__text\">Area</center>,\r\n        dataIndex: 'area',\r\n        key: 'area',\r\n        ...this.getColumnSearchProps('area'),\r\n        sorter:{\r\n          compare: (a, b) => a.area.localeCompare(b.area),\r\n        },\r\n      },\r\n      {\r\n        title: <center className=\"dataTable__header__text\">Type</center>,\r\n        dataIndex: 'type',\r\n        key: 'type',\r\n        ...this.getColumnSearchProps('type'),\r\n        sorter:{\r\n          compare: (a, b) => a.type.localeCompare(b.type),\r\n        },\r\n      },\r\n      {\r\n        title: <div className=\"dataTable__header__text\">Qty</div>,\r\n        dataIndex: 'quantity',\r\n        key: 'quantity',\r\n        ...this.getColumnSearchProps('quantity'),\r\n        sorter: {\r\n          compare: (a, b) => a.quantity-b.quantity,\r\n        },\r\n      },\r\n      {\r\n        title: <div className=\"dataTable__header__text\">Modelled</div>,\r\n        dataIndex: 'modelled',\r\n        key: 'modelled',\r\n        ...this.getColumnSearchProps('modelled'),\r\n        sorter: {\r\n          compare: (a, b) => a.modelled-b.modelled,\r\n        },\r\n      },\r\n    ];\r\n    \r\n    for(let i = 0; i < this.state.steps.length; i++){\r\n      let index = this.state.steps[i]\r\n      columns.push({\r\n        title: <div className=\"dataTable__header__text\">{this.state.steps[i]}%</div>,\r\n        dataIndex: index,\r\n        key: index,\r\n        ...this.getColumnSearchProps(index),\r\n        sorter: {\r\n          compare: (a, b) => a[index] - b[index],\r\n        },\r\n      })\r\n    }\r\n \r\n    var totalElements = null;\r\n    if (this.state.data.length === 0){\r\n      totalElements = null;\r\n    }else{\r\n      totalElements = (<div style={{position: \"absolute\", bottom: 25, left:0}}>\r\n      <b>Total elements: {this.state.data.length}</b>\r\n     </div>);\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        {this.state.updateData}\r\n        <div className=\"estimatedDataTable__container\">\r\n        <Table className=\"customTable\" bordered = {true} columns={columns} style={{ height: '540px' }} dataSource={this.state.displayData} scroll={{y:437}} pagination={{disabled:true, defaultPageSize:5000}} size=\"small\"\r\n         rowClassName= {(record) => record.color.replace('#', '')}/>\r\n         <Table className=\"filter__table\" pagination={{disabled:true}} scroll={{y:437}} showHeader = {false} bordered = {true} columns={columns} dataSource={this.state.filters} size=\"small\"/>\r\n          {totalElements}\r\n        </div>\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EquipEstimatedDataTable;"]},"metadata":{},"sourceType":"module"}