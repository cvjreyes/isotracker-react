{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import React,{useState,useEffect}from'react';import NavBar from'../../components/navBar/navBar';import CSPTrackerLogo from\"../../assets/images/3dquery.svg\";import RoleDropDown from'../../components/roleDropDown/roleDropDown';import IdleTimer from'react-idle-timer';import{useHistory}from\"react-router\";import QTrackerViewDataTable from'../../components/qtrackerViewDataTable/qtrackerViewDataTable';import SaveIcon from\"../../assets/images/save.svg\";import*as FileSaver from\"file-saver\";import*as XLSX from\"xlsx\";import{PieChart,Pie,Tooltip,Cell}from'recharts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var COLORS=['#D2D2D2','#FFCA42','#7BD36D','#FF3358'];var RADIAN=Math.PI/180;var renderCustomizedLabel=function renderCustomizedLabel(_ref){var cx=_ref.cx,cy=_ref.cy,midAngle=_ref.midAngle,innerRadius=_ref.innerRadius,outerRadius=_ref.outerRadius,percent=_ref.percent,index=_ref.index;var radius=innerRadius+(outerRadius-innerRadius)*0.5;var x=cx+radius*Math.cos(-midAngle*RADIAN);var y=cy+radius*Math.sin(-midAngle*RADIAN);if(index===0){index=\"Pen\";}else if(index===1){index=\"Pro\";}else if(index===2){index=\"A\";}else if(index===3){index=\"R\";}return/*#__PURE__*/_jsx(\"text\",{x:x,y:y,fill:\"white\",textAnchor:x>cx?'start':'end',dominantBaseline:\"central\",children:index});};var PitRequestView=function PitRequestView(){var CryptoJS=require(\"crypto-js\");var SecureStorage=require(\"secure-web-storage\");var SECRET_KEY='sanud2ha8shd72h';var secureStorage=new SecureStorage(localStorage,{hash:function hash(key){key=CryptoJS.SHA256(key,SECRET_KEY);return key.toString();},encrypt:function encrypt(data){data=CryptoJS.AES.encrypt(data,SECRET_KEY);data=data.toString();return data;},decrypt:function decrypt(data){data=CryptoJS.AES.decrypt(data,SECRET_KEY);data=data.toString(CryptoJS.enc.Utf8);return data;}});var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentRole=_useState2[0],setCurrentRole=_useState2[1];var _useState3=useState(\"View\"),_useState4=_slicedToArray(_useState3,2),currentTab=_useState4[0],setCurrentTab=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),roles=_useState6[0],setRoles=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),saveBtn=_useState8[0],setSaveBtn=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),updatedRows=_useState10[0],setUpdatedRows=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),observations=_useState12[0],setObservations=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),counter=_useState14[0],setCounter=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),updateData=_useState16[0],setUpdateData=_useState16[1];var history=useHistory();useEffect(function(){if(!secureStorage.getItem(\"user\")){history.push(\"/\"+process.env.REACT_APP_PROJECT+\"/\");}},[]);var currentUser=secureStorage.getItem('user');useEffect(function(){var body={user:currentUser};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/roles/user\",options).then(function(response){return response.json();}).then(function(json){setRoles(json.roles);if(secureStorage.getItem('role')!==null){setCurrentRole(secureStorage.getItem('role'));}else{secureStorage.setItem('role',json.roles[0]);setCurrentRole(secureStorage.getItem('role'));}}).catch(function(error){console.log(error);});if(secureStorage.getItem(\"role\")===\"3D Admin\"){setSaveBtn(/*#__PURE__*/_jsxs(\"button\",{className:\"navBar__button\",onClick:function onClick(){return saveChanges();},children:[/*#__PURE__*/_jsx(\"img\",{src:SaveIcon,alt:\"save\",className:\"navBar__icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"navBar__button__text\",children:\"Save\"})]}));}else{setSaveBtn(null);}},[currentRole]);useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var body,options;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:body={user:currentUser};options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}());options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};_context3.next=6;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/statusData\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(json){var counter;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:counter=[{name:\"Pending\",value:json.pending},{name:\"In progress\",value:json.progress},{name:\"Accepted\",value:json.accepted},{name:\"Rejected\",value:json.rejected}];_context2.next=3;return setCounter(counter);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref4.apply(this,arguments);};}());case 6:case\"end\":return _context3.stop();}}},_callee3);})),[updateData]);function handleOnIdle(){var body={user:currentUser};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(json){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref5.apply(this,arguments);};}());secureStorage.clear();history.push(\"/\"+process.env.REACT_APP_PROJECT);}function updateDataMethod(){return _updateDataMethod.apply(this,arguments);}function _updateDataMethod(){_updateDataMethod=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setUpdateData(!updateData);case 1:case\"end\":return _context5.stop();}}},_callee5);}));return _updateDataMethod.apply(this,arguments);}function downloadReport(){return _downloadReport.apply(this,arguments);}function _downloadReport(){_downloadReport=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var options;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};_context12.next=3;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getNWC\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(json){var rows,row,i;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:rows=[];row=null;for(i=0;i<json.rows.length;i++){row={incidence_number:json.rows[i].incidence_number,user:json.rows[i].user,created_at:json.rows[i].created_at.toString().substring(0,10)+\" \"+json.rows[i].created_at.toString().substring(11,19),observations:json.rows[i].observations,spref:json.rows[i].spref,name:null,pipe:null,items:null,scope:null,description:json.rows[i].description};if(json.rows[i].status===0){row.status=\"Pending\";}else if(json.rows[i].status===1){row.status=\"In progress\";}else if(json.rows[i].status===2){row.status=\"Ready\";}else{row.status=\"Rejected\";}if(json.rows[i].accept_reject_date){row.ar_date=json.rows[i].accept_reject_date.toString().substring(0,10)+\" \"+json.rows[i].accept_reject_date.toString().substring(11,19);}rows.push(row);}_context11.next=5;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getNVN\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(json){var row,_i;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:row=null;for(_i=0;_i<json.rows.length;_i++){row={incidence_number:json.rows[_i].incidence_number,user:json.rows[_i].user,created_at:json.rows[_i].created_at.toString().substring(0,10)+\" \"+json.rows[_i].created_at.toString().substring(11,19),observations:json.rows[_i].observations,spref:null,name:json.rows[_i].name,pipe:null,items:null,scope:null,description:json.rows[_i].description};if(json.rows[_i].status===0){row.status=\"Pending\";}else if(json.rows[_i].status===1){row.status=\"In progress\";}else if(json.rows[_i].status===2){row.status=\"Ready\";}else{row.status=\"Rejected\";}if(json.rows[_i].accept_reject_date){row.ar_date=json.rows[_i].accept_reject_date.toString().substring(0,10)+\" \"+json.rows[_i].accept_reject_date.toString().substring(11,19);}rows.push(row);}_context10.next=4;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getNRI\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(json){var row,_i2;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:row=null;for(_i2=0;_i2<json.rows.length;_i2++){row={incidence_number:json.rows[_i2].incidence_number,user:json.rows[_i2].user,created_at:json.rows[_i2].created_at.toString().substring(0,10)+\" \"+json.rows[_i2].created_at.toString().substring(11,19),observations:json.rows[_i2].observations,spref:null,name:null,pipe:json.rows[_i2].pipe,items:null,scope:null,description:json.rows[_i2].description};if(json.rows[_i2].status===0){row.status=\"Pending\";}else if(json.rows[_i2].status===1){row.status=\"In progress\";}else if(json.rows[_i2].status===2){row.status=\"Ready\";}else{row.status=\"Rejected\";}if(json.rows[_i2].accept_reject_date){row.ar_date=json.rows[_i2].accept_reject_date.toString().substring(0,10)+\" \"+json.rows[_i2].accept_reject_date.toString().substring(11,19);}rows.push(row);}_context9.next=4;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getNRB\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(json){var row,_i3;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:row=null;for(_i3=0;_i3<json.rows.length;_i3++){row={incidence_number:json.rows[_i3].incidence_number,user:json.rows[_i3].user,created_at:json.rows[_i3].created_at.toString().substring(0,10)+\" \"+json.rows[_i3].created_at.toString().substring(11,19),observations:json.rows[_i3].observations,spref:null,name:null,pipe:json.rows[_i3].pipe,items:null,scope:null,description:json.rows[_i3].description};if(json.rows[_i3].status===0){row.status=\"Pending\";}else if(json.rows[_i3].status===1){row.status=\"In progress\";}else if(json.rows[_i3].status===2){row.status=\"Ready\";}else{row.status=\"Rejected\";}if(json.rows[_i3].accept_reject_date){row.ar_date=json.rows[_i3].accept_reject_date.toString().substring(0,10)+\" \"+json.rows[_i3].accept_reject_date.toString().substring(11,19);}rows.push(row);}_context8.next=4;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getNRIDS\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(json){var row,_i4;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:row=null;for(_i4=0;_i4<json.rows.length;_i4++){row={incidence_number:json.rows[_i4].incidence_number,user:json.rows[_i4].user,created_at:json.rows[_i4].created_at.toString().substring(0,10)+\" \"+json.rows[_i4].created_at.toString().substring(11,19),observations:json.rows[_i4].observations,spref:null,name:json.rows[_i4].name,pipe:null,items:null,scope:null,description:null};if(json.rows[_i4].status===0){row.status=\"Pending\";}else if(json.rows[_i4].status===1){row.status=\"In progress\";}else if(json.rows[_i4].status===2){row.status=\"Ready\";}else{row.status=\"Rejected\";}if(json.rows[_i4].accept_reject_date){row.ar_date=json.rows[_i4].accept_reject_date.toString().substring(0,10)+\" \"+json.rows[_i4].accept_reject_date.toString().substring(11,19);}rows.push(row);}_context7.next=4;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getRP\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(json){var row,_i5,headers,apiData,fileName,fileType,header_cells,fileExtension,wscols,_i6,ws,_i7,wb,excelBuffer,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:row=null;for(_i5=0;_i5<json.rows.length;_i5++){row={incidence_number:json.rows[_i5].incidence_number,user:json.rows[_i5].user,created_at:json.rows[_i5].created_at.toString().substring(0,10)+\" \"+json.rows[_i5].created_at.toString().substring(11,19),observations:json.rows[_i5].observations,spref:null,name:null,pipe:null,items:json.rows[_i5].items_to_report,scope:json.rows[_i5].scope,description:json.rows[_i5].description};if(json.rows[_i5].status===0){row.status=\"Pending\";}else if(json.rows[_i5].status===1){row.status=\"In progress\";}else if(json.rows[_i5].status===2){row.status=\"Ready\";}else{row.status=\"Rejected\";}if(json.rows[_i5].accept_reject_date){row.ar_date=json.rows[_i5].accept_reject_date.toString().substring(0,10)+\" \"+json.rows[_i5].accept_reject_date.toString().substring(11,19);}rows.push(row);}// Sort the array based on the second element\nrows.sort(function(first,second){return second.created_at.localeCompare(first.created_at);});headers=[\"Reference\",\"User\",\"Date\",\"Observations\",\"SPREF\",\"Name\",\"Pipe\",\"Items\",\"Scope\",\"Description\",\"Status\",\"Accepted/Rejected date\"];apiData=rows;fileName=\"QueryTracker report\";fileType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\";header_cells=['A1','B1','C1','D1','E1','F1','G1','H1','I1','J1','K1','L1'];fileExtension=\".xlsx\";wscols=[];for(_i6=0;_i6<headers.length;_i6++){wscols.push({width:35});}ws=XLSX.utils.json_to_sheet(apiData);ws[\"!cols\"]=wscols;for(_i7=0;_i7<headers.length;_i7++){if(ws[header_cells[_i7]]){ws[header_cells[_i7]].v=headers[_i7];}}wb={Sheets:{data:ws},SheetNames:[\"data\"]};excelBuffer=XLSX.write(wb,{bookType:\"xlsx\",type:\"array\"});data=new Blob([excelBuffer],{type:fileType});FileSaver.saveAs(data,fileName+fileExtension);case 18:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x11){return _ref11.apply(this,arguments);};}());case 4:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x10){return _ref10.apply(this,arguments);};}());case 4:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x9){return _ref9.apply(this,arguments);};}());case 4:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x8){return _ref8.apply(this,arguments);};}());case 4:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x7){return _ref7.apply(this,arguments);};}());case 5:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x6){return _ref6.apply(this,arguments);};}());case 3:case\"end\":return _context12.stop();}}},_callee12);}));return _downloadReport.apply(this,arguments);}function updateStatus(_x4){return _updateStatus.apply(this,arguments);}function _updateStatus(){_updateStatus=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(updatedRow){var currentRows;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:currentRows=updatedRows;currentRows.push(updatedRow);_context13.next=4;return setUpdatedRows(currentRows);case 4:case\"end\":return _context13.stop();}}},_callee13);}));return _updateStatus.apply(this,arguments);}function updateObservations(_x5){return _updateObservations.apply(this,arguments);}function _updateObservations(){_updateObservations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(observations){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return setObservations(observations);case 2:case\"end\":return _context14.stop();}}},_callee14);}));return _updateObservations.apply(this,arguments);}function saveChanges(){return _saveChanges.apply(this,arguments);}function _saveChanges(){_saveChanges=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){var i,body,options,observationsArray,_i8,_body,_options;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:for(i=0;i<updatedRows.length;i++){body={incidence_number:updatedRows[i][0],status_id:updatedRows[i][1],type:updatedRows[i][2],email:secureStorage.getItem(\"user\")};options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/updateStatus\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(json){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:case\"end\":return _context15.stop();}}},_callee15);}));return function(_x12){return _ref12.apply(this,arguments);};}());}observationsArray=[];if(observations){Object.entries(observations).map(/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(_ref13){var _ref15,incidence_number,observation;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_ref15=_slicedToArray(_ref13,2),incidence_number=_ref15[0],observation=_ref15[1];_context16.next=3;return observationsArray.push([incidence_number,observation]);case 3:return _context16.abrupt(\"return\",_context16.sent);case 4:case\"end\":return _context16.stop();}}},_callee16);}));return function(_x13){return _ref14.apply(this,arguments);};}());}for(_i8=0;_i8<observationsArray.length;_i8++){_body={incidence_number:observationsArray[_i8][0],observation:observationsArray[_i8][1]};_options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(_body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/updateObservations\",_options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(json){return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:case\"end\":return _context17.stop();}}},_callee17);}));return function(_x14){return _ref16.apply(this,arguments);};}());}_context18.next=6;return setUpdatedRows([]);case 6:_context18.next=8;return setUpdateData(!updateData);case 8:case\"end\":return _context18.stop();}}},_callee18);}));return _saveChanges.apply(this,arguments);}document.body.style.zoom=0.8;var dataTableHeight=\"600px\";return/*#__PURE__*/_jsxs(\"body\",{children:[updateData,/*#__PURE__*/_jsx(IdleTimer,{timeout:1000*60*15,onIdle:handleOnIdle,debounce:250}),/*#__PURE__*/_jsx(NavBar,{onChange:function onChange(value){return setCurrentTab(currentTab);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"isotracker__row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"isotracker__column\",children:[/*#__PURE__*/_jsx(\"img\",{src:CSPTrackerLogo,alt:\"CSPTrackerLogo\",className:\"isoTrackerLogo__image2\",style:{height:\"110px\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"roleSelector__containerF\",children:/*#__PURE__*/_jsx(RoleDropDown,{style:{paddingLeft:\"2px\"},onChange:function onChange(value){return setCurrentRole(value);},roles:roles})})]}),/*#__PURE__*/_jsxs(PieChart,{width:600,height:400,children:[/*#__PURE__*/_jsx(Pie,{data:counter,dataKey:\"value\",cx:\"50%\",cy:\"60%\",outerRadius:120,fill:\"#8884d8\",label:renderCustomizedLabel,children:counter.map(function(entry,index){return/*#__PURE__*/_jsx(Cell,{fill:COLORS[index]},\"cell-\".concat(index));})}),/*#__PURE__*/_jsx(Tooltip,{})]})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"isotracker__table__container\",children:[/*#__PURE__*/_jsx(\"tr\",{className:\"isotracker__table__navBar__container\",style:{height:\"65px \"},children:/*#__PURE__*/_jsx(\"th\",{className:\"isotracker__table__navBar\",children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\"},children:secureStorage.getItem(\"role\")===\"3D Admin\"&&/*#__PURE__*/_jsxs(\"button\",{className:\"navBar__button\",onClick:function onClick(){return saveChanges();},children:[/*#__PURE__*/_jsx(\"img\",{src:SaveIcon,alt:\"save\",className:\"navBar__icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"navBar__button__text\",children:\"Save\"})]})})})}),/*#__PURE__*/_jsx(\"tr\",{className:\"isotracker__table__tray__and__table__container\",style:{height:dataTableHeight},children:/*#__PURE__*/_jsx(\"td\",{className:\"discplines__table__table\",style:{height:dataTableHeight},children:/*#__PURE__*/_jsx(\"div\",{style:{height:dataTableHeight,width:\"2200px\"},className:\"isotracker__table__table__container\",children:/*#__PURE__*/_jsx(QTrackerViewDataTable,{updateObservations:updateObservations.bind(_this),updateData:updateDataMethod.bind(_this),updateStatus:updateStatus.bind(_this)})})})})]}),/*#__PURE__*/_jsx(\"center\",{className:\"actionBtns__container\",children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",marginTop:\"10px\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"action__btn\",name:\"export\",value:\"export\",onClick:function onClick(){return downloadReport();},children:\"Export\"})})}),/*#__PURE__*/_jsx(\"br\",{})]});};export default PitRequestView;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/pages/pitRequestView/pitRequestView.js"],"names":["React","useState","useEffect","NavBar","RoleDropDown","IdleTimer","useHistory","QTrackerViewDataTable","FileSaver","XLSX","PieChart","Pie","Tooltip","Cell","COLORS","RADIAN","Math","PI","renderCustomizedLabel","cx","cy","midAngle","innerRadius","outerRadius","percent","index","radius","x","cos","y","sin","PitRequestView","CryptoJS","require","SecureStorage","SECRET_KEY","secureStorage","localStorage","hash","key","SHA256","toString","encrypt","data","AES","decrypt","enc","Utf8","currentRole","setCurrentRole","currentTab","setCurrentTab","roles","setRoles","saveBtn","setSaveBtn","updatedRows","setUpdatedRows","observations","setObservations","counter","setCounter","updateData","setUpdateData","history","getItem","push","process","env","REACT_APP_PROJECT","currentUser","body","user","options","method","headers","JSON","stringify","fetch","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","setItem","catch","error","console","log","saveChanges","SaveIcon","name","value","pending","progress","accepted","rejected","handleOnIdle","clear","updateDataMethod","downloadReport","rows","row","i","length","incidence_number","created_at","substring","spref","pipe","items","scope","description","status","accept_reject_date","ar_date","items_to_report","sort","first","second","localeCompare","apiData","fileName","fileType","header_cells","fileExtension","wscols","width","ws","utils","json_to_sheet","v","wb","Sheets","SheetNames","excelBuffer","write","bookType","type","Blob","saveAs","updateStatus","updatedRow","currentRows","updateObservations","status_id","email","observationsArray","Object","entries","map","observation","document","style","zoom","dataTableHeight","CSPTrackerLogo","height","paddingLeft","entry","display","bind","marginTop"],"mappings":"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","sourcesContent":["import React, { useState , useEffect} from 'react'\r\nimport NavBar from '../../components/navBar/navBar'\r\nimport CSPTrackerLogo from \"../../assets/images/3dquery.svg\"\r\nimport RoleDropDown from '../../components/roleDropDown/roleDropDown'\r\n\r\nimport IdleTimer from 'react-idle-timer'\r\nimport {useHistory} from \"react-router\";\r\nimport QTrackerViewDataTable from '../../components/qtrackerViewDataTable/qtrackerViewDataTable'\r\n\r\nimport SaveIcon from \"../../assets/images/save.svg\"\r\nimport * as FileSaver from \"file-saver\";\r\nimport * as XLSX from \"xlsx\";\r\n\r\nimport { PieChart, Pie, Tooltip, Cell } from 'recharts';\r\n\r\nconst COLORS = ['#D2D2D2', '#FFCA42', '#7BD36D', '#FF3358'];\r\n\r\nconst RADIAN = Math.PI / 180;\r\nconst renderCustomizedLabel = ({ cx, cy, midAngle, innerRadius, outerRadius, percent, index }) => {\r\n    const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\r\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\r\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\r\n\r\n    if(index === 0){\r\n        index = \"Pen\"\r\n    }else if(index === 1){\r\n        index = \"Pro\"\r\n    }else if(index === 2){\r\n        index = \"A\"\r\n    }else if(index === 3){\r\n        index = \"R\"\r\n    }\r\n  \r\n    return (\r\n      <text x={x} y={y} fill=\"white\" textAnchor={x > cx ? 'start' : 'end'} dominantBaseline=\"central\">\r\n          {index}\r\n      </text>\r\n    );\r\n  };\r\n  \r\n\r\nconst PitRequestView = () => {\r\n\r\n    const CryptoJS = require(\"crypto-js\");\r\n    const SecureStorage = require(\"secure-web-storage\");\r\n    var SECRET_KEY = 'sanud2ha8shd72h';\r\n\r\n    var secureStorage = new SecureStorage(localStorage, {\r\n        hash: function hash(key) {\r\n            key = CryptoJS.SHA256(key, SECRET_KEY);\r\n    \r\n            return key.toString();\r\n        },\r\n        encrypt: function encrypt(data) {\r\n            data = CryptoJS.AES.encrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString();\r\n    \r\n            return data;\r\n        },\r\n        decrypt: function decrypt(data) {\r\n            data = CryptoJS.AES.decrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString(CryptoJS.enc.Utf8);\r\n    \r\n            return data;\r\n        }\r\n    });\r\n\r\n\r\n    const [currentRole, setCurrentRole] = useState();\r\n    const [currentTab, setCurrentTab] = useState(\"View\")\r\n    const [roles, setRoles] = useState();\r\n    const [saveBtn, setSaveBtn] = useState()\r\n    const [updatedRows, setUpdatedRows] = useState([])\r\n    const [observations, setObservations] = useState()\r\n    const [counter, setCounter] = useState([])\r\n\r\n    const [updateData, setUpdateData] = useState(false)    \r\n\r\n    const history = useHistory()\r\n\r\n    useEffect(()=>{\r\n        if(!secureStorage.getItem(\"user\")){\r\n            history.push(\"/\"+process.env.REACT_APP_PROJECT+\"/\");\r\n        }\r\n        \r\n    }, [])\r\n\r\n    var currentUser = secureStorage.getItem('user')\r\n\r\n    useEffect(()=>{\r\n        const body = {\r\n            user: currentUser,\r\n        }\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n       \r\n\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/roles/user\", options)\r\n            .then(response => response.json())\r\n            .then(json => {\r\n                setRoles(json.roles);\r\n                if(secureStorage.getItem('role') !== null){\r\n                    setCurrentRole(secureStorage.getItem('role'))\r\n                }else{\r\n                    secureStorage.setItem('role', json.roles[0])\r\n                    setCurrentRole(secureStorage.getItem('role'))\r\n                }\r\n                }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            })     \r\n            \r\n            \r\n        if(secureStorage.getItem(\"role\") === \"3D Admin\"){\r\n            setSaveBtn(<button className=\"navBar__button\" onClick={()=> saveChanges()}><img src={SaveIcon} alt=\"save\" className=\"navBar__icon\"></img><p className=\"navBar__button__text\">Save</p></button>)\r\n\r\n        }else{\r\n            setSaveBtn(null)\r\n        }\r\n            \r\n    },[currentRole]);\r\n\r\n    useEffect(async ()=>{\r\n        const body = {\r\n            user: currentUser,\r\n        }\r\n        let options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n\r\n            })\r\n\r\n        options = {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n        } \r\n        await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/statusData\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n                let counter = [{name: \"Pending\", value: json.pending}, {name: \"In progress\", value: json.progress}, {name: \"Accepted\", value: json.accepted}, {name: \"Rejected\", value: json.rejected}]\r\n                \r\n                await setCounter(counter)\r\n            })\r\n            \r\n\r\n    },[updateData])\r\n\r\n    function handleOnIdle(){\r\n        const body = {\r\n            user: currentUser,\r\n        }\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n\r\n            })\r\n        secureStorage.clear()\r\n        history.push(\"/\" + process.env.REACT_APP_PROJECT)\r\n    }\r\n\r\n    async function updateDataMethod(){\r\n        setUpdateData(!updateData)\r\n    }\r\n\r\n    async function downloadReport(){\r\n\r\n        const options = {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n        }\r\n\r\n        await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getNWC\", options)\r\n        .then(response => response.json())\r\n        .then(async json => {\r\n          var rows = []\r\n          var row = null\r\n            for(let i = 0; i < json.rows.length; i++){\r\n                row = {incidence_number: json.rows[i].incidence_number, user: json.rows[i].user, created_at: json.rows[i].created_at.toString().substring(0,10) + \" \"+ json.rows[i].created_at.toString().substring(11,19), observations: json.rows[i].observations, spref: json.rows[i].spref, name: null, pipe: null, items: null, scope: null, description: json.rows[i].description}\r\n                  \r\n                  if(json.rows[i].status === 0){\r\n                    row.status = \"Pending\"\r\n                  }else if(json.rows[i].status === 1){\r\n                      row.status = \"In progress\"\r\n                  }else if(json.rows[i].status === 2){\r\n                      row.status = \"Ready\"\r\n                  }else{\r\n                      row.status = \"Rejected\"\r\n                  }\r\n\r\n                  if(json.rows[i].accept_reject_date){\r\n                   \r\n                    row.ar_date = json.rows[i].accept_reject_date.toString().substring(0,10) + \" \"+ json.rows[i].accept_reject_date.toString().substring(11,19)\r\n                  \r\n                  }\r\n                \r\n                \r\n                rows.push(row)\r\n            }\r\n            await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getNVN\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n            var row = null\r\n                for(let i = 0; i < json.rows.length; i++){\r\n                    row = {incidence_number: json.rows[i].incidence_number, user: json.rows[i].user, created_at: json.rows[i].created_at.toString().substring(0,10) + \" \"+ json.rows[i].created_at.toString().substring(11,19), observations: json.rows[i].observations, spref: null, name: json.rows[i].name, pipe: null, items: null, scope: null, description: json.rows[i].description}\r\n                    \r\n                      if(json.rows[i].status === 0){\r\n                        row.status = \"Pending\"\r\n                      }else if(json.rows[i].status === 1){\r\n                          row.status = \"In progress\"\r\n                      }else if(json.rows[i].status === 2){\r\n                          row.status = \"Ready\"\r\n                      }else{\r\n                          row.status = \"Rejected\"\r\n                      }\r\n                      if(json.rows[i].accept_reject_date){\r\n                        row.ar_date = json.rows[i].accept_reject_date.toString().substring(0,10) + \" \"+ json.rows[i].accept_reject_date.toString().substring(11,19)\r\n                    }\r\n                      rows.push(row)\r\n                }\r\n                \r\n                await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getNRI\", options)\r\n                .then(response => response.json())\r\n                .then(async json => {\r\n                var row = null\r\n                    for(let i = 0; i < json.rows.length; i++){\r\n                        row = {incidence_number: json.rows[i].incidence_number, user: json.rows[i].user, created_at: json.rows[i].created_at.toString().substring(0,10) + \" \"+ json.rows[i].created_at.toString().substring(11,19), observations: json.rows[i].observations, spref: null, name: null, pipe: json.rows[i].pipe, items: null, scope: null, description: json.rows[i].description}\r\n                                             \r\n                        if(json.rows[i].status === 0){\r\n                        row.status = \"Pending\"\r\n                        }else if(json.rows[i].status === 1){\r\n                            row.status = \"In progress\"\r\n                        }else if(json.rows[i].status === 2){\r\n                            row.status = \"Ready\"\r\n                        }else{\r\n                            row.status = \"Rejected\"\r\n                        }\r\n                        if(json.rows[i].accept_reject_date){\r\n                    row.ar_date = json.rows[i].accept_reject_date.toString().substring(0,10) + \" \"+ json.rows[i].accept_reject_date.toString().substring(11,19)\r\n                  }\r\n                        \r\n                        rows.push(row)\r\n                    }\r\n                    \r\n                    await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getNRB\", options)\r\n                    .then(response => response.json())\r\n                    .then(async json => {\r\n                    var row = null\r\n                        for(let i = 0; i < json.rows.length; i++){\r\n                            row = {incidence_number: json.rows[i].incidence_number, user: json.rows[i].user, created_at: json.rows[i].created_at.toString().substring(0,10) + \" \"+ json.rows[i].created_at.toString().substring(11,19), observations: json.rows[i].observations, spref: null, name: null, pipe: json.rows[i].pipe, items: null, scope: null, description: json.rows[i].description}\r\n                            \r\n                              if(json.rows[i].status === 0){\r\n                                row.status = \"Pending\"\r\n                              }else if(json.rows[i].status === 1){\r\n                                  row.status = \"In progress\"\r\n                              }else if(json.rows[i].status === 2){\r\n                                  row.status = \"Ready\"\r\n                              }else{\r\n                                  row.status = \"Rejected\"\r\n                              }\r\n                            \r\n                              if(json.rows[i].accept_reject_date){\r\n                                row.ar_date = json.rows[i].accept_reject_date.toString().substring(0,10) + \" \"+ json.rows[i].accept_reject_date.toString().substring(11,19)\r\n                  }\r\n                              rows.push(row)\r\n                        }\r\n                        \r\n                        await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getNRIDS\", options)\r\n                        .then(response => response.json())\r\n                        .then(async json => {\r\n                        var row = null\r\n                            for(let i = 0; i < json.rows.length; i++){\r\n                                row = {incidence_number: json.rows[i].incidence_number, user: json.rows[i].user, created_at: json.rows[i].created_at.toString().substring(0,10) + \" \"+ json.rows[i].created_at.toString().substring(11,19), observations: json.rows[i].observations, spref: null, name: json.rows[i].name, pipe: null, items: null, scope: null, description: null}\r\n                               \r\n                                  if(json.rows[i].status === 0){\r\n                                    row.status = \"Pending\"\r\n                                  }else if(json.rows[i].status === 1){\r\n                                      row.status = \"In progress\"\r\n                                  }else if(json.rows[i].status === 2){\r\n                                      row.status = \"Ready\"\r\n                                  }else{\r\n                                      row.status = \"Rejected\"\r\n                                  }\r\n                                \r\n                                  if(json.rows[i].accept_reject_date){\r\n                    row.ar_date = json.rows[i].accept_reject_date.toString().substring(0,10) + \" \"+ json.rows[i].accept_reject_date.toString().substring(11,19)\r\n                  }\r\n                                  rows.push(row)\r\n                            }\r\n                            \r\n                            await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/getRP\", options)\r\n                            .then(response => response.json())\r\n                            .then(async json => {\r\n                            var row = null\r\n                                for(let i = 0; i < json.rows.length; i++){\r\n                                    row = {incidence_number: json.rows[i].incidence_number, user: json.rows[i].user, created_at: json.rows[i].created_at.toString().substring(0,10) + \" \"+ json.rows[i].created_at.toString().substring(11,19), observations: json.rows[i].observations, spref: null, name: null, pipe: null, items: json.rows[i].items_to_report, scope: json.rows[i].scope, description: json.rows[i].description}\r\n                                    \r\n                                      if(json.rows[i].status === 0){\r\n                                        row.status = \"Pending\"\r\n                                      }else if(json.rows[i].status === 1){\r\n                                          row.status = \"In progress\"\r\n                                      }else if(json.rows[i].status === 2){\r\n                                          row.status = \"Ready\"\r\n                                      }else{\r\n                                          row.status = \"Rejected\"\r\n                                      }\r\n                                    \r\n                                      if(json.rows[i].accept_reject_date){\r\n                    row.ar_date = json.rows[i].accept_reject_date.toString().substring(0,10) + \" \"+ json.rows[i].accept_reject_date.toString().substring(11,19)\r\n                  }\r\n                                    rows.push(row)\r\n                                }\r\n\r\n                                // Sort the array based on the second element\r\n                                rows.sort(function(first, second) {\r\n                                  return second.created_at.localeCompare(first.created_at);\r\n                                });\r\n                                \r\n                                const headers = [\"Reference\", \"User\", \"Date\", \"Observations\", \"SPREF\", \"Name\", \"Pipe\", \"Items\", \"Scope\", \"Description\", \"Status\", \"Accepted/Rejected date\"]\r\n                                const apiData = rows\r\n                                const fileName = \"QueryTracker report\"\r\n\r\n                                const fileType =\r\n                                \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8\";\r\n                                const header_cells = ['A1', 'B1', 'C1', 'D1', 'E1', 'F1', 'G1', 'H1', 'I1', 'J1', 'K1', 'L1']\r\n                                const fileExtension = \".xlsx\";\r\n\r\n                                let wscols = []\r\n                                for(let i = 0; i < headers.length; i++){\r\n                                    wscols.push({width:35})\r\n                                }\r\n\r\n                                const ws = XLSX.utils.json_to_sheet(apiData);   \r\n                                ws[\"!cols\"] = wscols\r\n                                for(let i = 0; i < headers.length; i++){\r\n                                    if(ws[header_cells[i]]){\r\n                                        ws[header_cells[i]].v = headers[i]\r\n                                    }\r\n                                }\r\n                                const wb = { Sheets: { data: ws }, SheetNames: [\"data\"] };\r\n                                const excelBuffer = XLSX.write(wb, { bookType: \"xlsx\", type: \"array\" });\r\n                                const data = new Blob([excelBuffer], { type: fileType });\r\n                                FileSaver.saveAs(data, fileName + fileExtension);\r\n\r\n                            })\r\n\r\n                        })\r\n\r\n                    })\r\n\r\n                })\r\n\r\n            })\r\n            \r\n        })\r\n    }\r\n\r\n    async function updateStatus(updatedRow){\r\n        let currentRows = updatedRows\r\n        currentRows.push(updatedRow)\r\n        await setUpdatedRows(currentRows)\r\n    }\r\n\r\n    async function updateObservations(observations){\r\n        await setObservations(observations)\r\n    }\r\n\r\n    async function saveChanges(){\r\n        for(let i = 0; i < updatedRows.length; i++){\r\n\r\n            let body = {\r\n                incidence_number: updatedRows[i][0],\r\n                status_id: updatedRows[i][1],\r\n                type: updatedRows[i][2],\r\n                email: secureStorage.getItem(\"user\")\r\n              }\r\n              let options = {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify(body)\r\n              }\r\n              \r\n              fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/updateStatus\", options)\r\n              .then(response => response.json())\r\n              .then(async json => {\r\n                \r\n              })\r\n        }\r\n        \r\n        let observationsArray = []\r\n\r\n        if(observations){\r\n\r\n            Object.entries(observations)\r\n            .map(async ([incidence_number, observation]) => \r\n                \r\n                await observationsArray.push([incidence_number, observation])\r\n            )\r\n\r\n        }\r\n\r\n        for(let i = 0; i < observationsArray.length; i++){\r\n            let body = {\r\n                incidence_number: observationsArray[i][0],\r\n                observation: observationsArray[i][1],\r\n              }\r\n              let options = {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify(body)\r\n              }\r\n              \r\n              fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/updateObservations\", options)\r\n              .then(response => response.json())\r\n              .then(async json => {\r\n                \r\n              })\r\n        }\r\n        \r\n        await setUpdatedRows([])\r\n        await setUpdateData(!updateData)\r\n        \r\n    }\r\n\r\n    document.body.style.zoom = 0.8\r\n\r\n    var dataTableHeight = \"600px\"\r\n\r\n    \r\n\r\n    return(\r\n        \r\n        <body>\r\n            {updateData}\r\n            <IdleTimer\r\n                timeout={1000 * 60 * 15}\r\n                onIdle={handleOnIdle}\r\n                debounce={250}\r\n            />\r\n            <NavBar onChange={value => setCurrentTab(currentTab)}/>\r\n            \r\n            <div className=\"isotracker__row\">\r\n                  <div className=\"isotracker__column\">\r\n                      <img src={CSPTrackerLogo} alt=\"CSPTrackerLogo\" className=\"isoTrackerLogo__image2\" style={{height:\"110px\"}}/>\r\n                      \r\n                      <div className=\"roleSelector__containerF\">\r\n                              <RoleDropDown style={{paddingLeft: \"2px\"}} onChange={value => setCurrentRole(value)} roles = {roles}/>\r\n                      </div>\r\n                      \r\n                  </div>\r\n                  <PieChart width={600} height={400}>\r\n                    <Pie data={counter} dataKey=\"value\" cx=\"50%\" cy=\"60%\"  outerRadius={120} fill=\"#8884d8\" label={renderCustomizedLabel}>\r\n                    {counter.map((entry, index) => (\r\n                        <Cell key={`cell-${index}`} fill={COLORS[index]} />\r\n                        ))}\r\n                    </Pie>\r\n                    <Tooltip/>\r\n                </PieChart>\r\n            </div>\r\n            <table className=\"isotracker__table__container\">\r\n                      <tr className=\"isotracker__table__navBar__container\" style={{height:\"65px \"}}>\r\n                          <th  className=\"isotracker__table__navBar\">\r\n                              <div style={{display:\"flex\"}}>\r\n                                  {secureStorage.getItem(\"role\") === \"3D Admin\" &&\r\n                                  <button className=\"navBar__button\" onClick={()=> saveChanges()}><img src={SaveIcon} alt=\"save\" className=\"navBar__icon\"></img><p className=\"navBar__button__text\">Save</p></button>\r\n                                  }\r\n                              </div>                           \r\n                               \r\n                          </th>\r\n                      </tr>\r\n                      <tr className=\"isotracker__table__tray__and__table__container\" style={{height: dataTableHeight}}>\r\n                          <td className=\"discplines__table__table\" style={{height: dataTableHeight}} >\r\n                              <div  style={{height: dataTableHeight, width:\"2200px\"}} className=\"isotracker__table__table__container\">\r\n                                <QTrackerViewDataTable updateObservations={updateObservations.bind(this)} updateData={updateDataMethod.bind(this)} updateStatus={updateStatus.bind(this)}/>\r\n                              </div>\r\n                          </td>\r\n                          \r\n                      </tr>\r\n                  </table>\r\n                  <center className=\"actionBtns__container\">   \r\n                    <div style={{display:\"flex\", marginTop:\"10px\"}}>\r\n                        <button className=\"action__btn\" name=\"export\" value=\"export\" onClick={() => downloadReport()}>Export</button>\r\n                    </div>\r\n                    \r\n                  </center>\r\n                  <br></br>\r\n         </body>\r\n    )\r\n}\r\n\r\nexport default PitRequestView;"]},"metadata":{},"sourceType":"module"}