{"ast":null,"code":"import _objectSpread from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'antd/dist/antd.css';import{Table}from'antd';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModelledDataTable=/*#__PURE__*/function(_React$Component){_inherits(ModelledDataTable,_React$Component);var _super=_createSuper(ModelledDataTable);function ModelledDataTable(){var _this;_classCallCheck(this,ModelledDataTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={searchText:'',searchedColumn:'',data:[],displayData:[],filterData:[\"\",\"\",\"\",\"\",\"\"],tab:_this.props.currentTab,selectedRows:[],selectedRowsKeys:[],updateData:_this.props.updateData,username:\"\",acronyms:null,filters:[]};_this.getColumnSearchProps=function(dataIndex){return{render:function render(text){return text;}};};_this.handleReset=function(clearFilters){clearFilters();_this.setState({searchText:''});};_this.onSelectChange=function(selectedRowKeys,selectedRows){var ids=[];for(var i=0;i<selectedRows.length;i++){ids.push(selectedRows[i].id.props.children);}_this.setState({selectedRowsKeys:selectedRowKeys,selectedRows:selectedRows});//this.setState({ selectedRows: selectedRows });\n_this.props.onChange(ids);};return _this;}_createClass(ModelledDataTable,[{key:\"unlock\",value:function unlock(isoid){this.props.unlock(isoid);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/modelled\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){var rows,row,_loop,i,filterRow;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rows=[];row=null;_loop=function _loop(i){row={id:json.rows[i].isoid,tag:json.rows[i].tag,type:json.rows[i].code.toString()};if(json.rows[i].blocked===1&&_this2.props.role===\"SpecialityLead\"){row.id=/*#__PURE__*/_jsxs(\"div\",{children:[json.rows[i].isoid,\" \",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:function onClick(){return _this2.unlock(json.rows[i].isoid);},style:{fontSize:\"12px\",borderColor:\"black\",padding:\"2px 5px 2px 5px\",marginLeft:\"10px\"},children:\"UNLOCK\"})]});}if(row){if(i%2===0){row[\"color\"]=\"#fff\";}else{row[\"color\"]=\"#eee\";}}if(row.id&&row.tag){rows.push(row);}};for(i=0;i<json.rows.length;i++){_loop(i);}filterRow=[{tag:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"TAG\",onChange:function onChange(e){return _this2.filter(0,e.target.value);}})}),id:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"ISO ID\",onChange:function onChange(e){return _this2.filter(1,e.target.value);}})}),type:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"Type\",onChange:function onChange(e){return _this2.filter(2,e.target.value);}})})}];_this2.setState({data:rows,role:_this2.props.role,displayData:rows});_context.next=8;return _this2.setState({filters:filterRow});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this3=this;if(prevProps!==this.props){var options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/modelled\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(json){var rows,row,_loop2,i,filterRow;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:rows=[];row=null;_loop2=function _loop2(i){row={id:json.rows[i].isoid,tag:json.rows[i].tag,type:json.rows[i].code.toString()};if(json.rows[i].blocked===1&&_this3.props.role===\"SpecialityLead\"){row.id=/*#__PURE__*/_jsxs(\"div\",{children:[json.rows[i].isoid,\" \",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:function onClick(){return _this3.unlock(json.rows[i].isoid);},style:{fontSize:\"12px\",borderColor:\"black\",padding:\"2px 5px 2px 5px\",marginLeft:\"10px\"},children:\"UNLOCK\"})]});}if(row){if(i%2===0){row[\"color\"]=\"#fff\";}else{row[\"color\"]=\"#eee\";}}if(row.id&&row.tag){rows.push(row);}};for(i=0;i<json.rows.length;i++){_loop2(i);}filterRow=[{tag:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"TAG\",onChange:function onChange(e){return _this3.filter(0,e.target.value);}})}),id:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"ISO ID\",onChange:function onChange(e){return _this3.filter(1,e.target.value);}})}),type:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"Type\",onChange:function onChange(e){return _this3.filter(2,e.target.value);}})})}];_this3.setState({data:rows,role:_this3.props.role,displayData:rows});_context2.next=8;return _this3.setState({filters:filterRow});case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());}}},{key:\"filter\",value:function(){var _filter=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(column,value){var fd,auxDisplayData,resultData,fil,exists,i,_column;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fd=this.state.filterData;fd[column]=value;_context3.next=4;return this.setState({filterData:fd});case 4:auxDisplayData=this.state.data;resultData=[];exists=null;for(i=0;i<auxDisplayData.length;i++){exists=true;for(_column=0;_column<Object.keys(auxDisplayData[i]).length-1;_column++){fil=Object.keys(auxDisplayData[i])[_column];if(fil===\"tag\"){fil=\"id\";}else if(fil===\"id\"){fil=\"tag\";}if(auxDisplayData[i][fil].props){if(this.state.filterData[_column]!==\"\"&&this.state.filterData[_column]&&!auxDisplayData[i][fil].props.children[0].includes(this.state.filterData[_column])){exists=false;}}else if(auxDisplayData[i][fil]){if(this.state.filterData[_column]!==\"\"&&this.state.filterData[_column]&&!auxDisplayData[i][fil].includes(this.state.filterData[_column])){exists=false;}}else{exists=false;}}if(exists){resultData.push(auxDisplayData[i]);}}_context3.next=10;return this.setState({displayData:resultData});case 10:case\"end\":return _context3.stop();}}},_callee3,this);}));function filter(_x3,_x4){return _filter.apply(this,arguments);}return filter;}()},{key:\"render\",value:function render(){var columns=[_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"center\",{className:\"dataTable__header__text\",children:\"TAG\"}),dataIndex:'tag',key:'tag'},this.getColumnSearchProps('tag')),{},{sorter:{compare:function compare(a,b){return a.tag.localeCompare(b.tag);}}}),_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"center\",{className:\"dataTable__header__text\",children:\"ISO ID\"}),dataIndex:'id',key:'id'},this.getColumnSearchProps('id')),{},{sorter:{compare:function compare(a,b){return a.id.localeCompare(b.id);}}}),_objectSpread(_objectSpread({title:/*#__PURE__*/_jsx(\"div\",{className:\"dataTable__header__text\",children:\"Type\"}),dataIndex:'type',key:'type'},this.getColumnSearchProps('type')),{},{sorter:{compare:function compare(a,b){return a.type.localeCompare(b.type);}}})];var totalElements=null;if(this.state.data.length===0){totalElements=null;}else{totalElements=/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",bottom:25,left:0},children:/*#__PURE__*/_jsxs(\"b\",{children:[\"Total elements: \",this.state.data.length]})});}return/*#__PURE__*/_jsxs(\"div\",{children:[this.state.updateData,/*#__PURE__*/_jsxs(\"div\",{className:\"dataTable__container\",style:{float:\"top\",position:\"relative\"},children:[/*#__PURE__*/_jsx(Table,{className:\"customTable\",style:{height:'540px'},bordered:true,columns:columns,dataSource:this.state.displayData,scroll:{y:437},pagination:{disabled:true,defaultPageSize:5000},size:\"small\",rowClassName:function rowClassName(record){return record.color.replace('#','');}}),/*#__PURE__*/_jsx(Table,{className:\"filter__table\",pagination:{disabled:true},scroll:{y:437},showHeader:false,bordered:true,columns:columns,dataSource:this.state.filters,size:\"small\"}),totalElements]})]});}}]);return ModelledDataTable;}(React.Component);export default ModelledDataTable;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/components/modelledDataTable/modelledDataTable.js"],"names":["React","Table","ModelledDataTable","state","searchText","searchedColumn","data","displayData","filterData","tab","props","currentTab","selectedRows","selectedRowsKeys","updateData","username","acronyms","filters","getColumnSearchProps","dataIndex","render","text","handleReset","clearFilters","setState","onSelectChange","selectedRowKeys","ids","i","length","push","id","children","onChange","isoid","unlock","options","method","headers","fetch","process","env","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","rows","row","tag","type","code","toString","blocked","role","fontSize","borderColor","padding","marginLeft","filterRow","e","filter","target","value","prevProps","prevState","column","fd","auxDisplayData","resultData","exists","Object","keys","fil","includes","columns","title","key","sorter","compare","a","b","localeCompare","totalElements","position","bottom","left","float","height","y","disabled","defaultPageSize","record","color","replace","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'antd/dist/antd.css';\r\nimport { Table } from 'antd';\r\n\r\n\r\nclass ModelledDataTable extends React.Component{\r\n  state = {\r\n    searchText: '',\r\n    searchedColumn: '',\r\n    data: [],\r\n    displayData: [],\r\n    filterData: [\"\", \"\", \"\", \"\", \"\"],\r\n    tab: this.props.currentTab,\r\n    selectedRows: [],\r\n    selectedRowsKeys: [],\r\n    updateData: this.props.updateData,\r\n    username: \"\",\r\n    acronyms : null,\r\n    filters: []\r\n  };\r\n\r\n  unlock(isoid){\r\n    this.props.unlock(isoid)\r\n  }\r\n\r\n  componentDidMount(){\r\n\r\n    const options = {\r\n        method: \"GET\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n    }\r\n\r\n    fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/modelled\", options)\r\n      .then(response => response.json())\r\n      .then(async json => {\r\n        var rows = []\r\n        var row = null\r\n        for(let i = 0; i < json.rows.length; i++){\r\n            row = {id: json.rows[i].isoid, tag: json.rows[i].tag, type: json.rows[i].code.toString()}\r\n            if(json.rows[i].blocked === 1 && this.props.role === \"SpecialityLead\"){\r\n              row.id = <div>{json.rows[i].isoid} <button className=\"btn btn-success\" onClick={()=>this.unlock(json.rows[i].isoid)} style={{fontSize:\"12px\", borderColor:\"black\", padding:\"2px 5px 2px 5px\",  marginLeft:\"10px\"}}>UNLOCK</button></div>\r\n            }\r\n            if(row){\r\n              if(i % 2 === 0){\r\n                row[\"color\"] = \"#fff\"\r\n              }else{\r\n                row[\"color\"] = \"#eee\"\r\n              }\r\n            }\r\n            if(row.id && row.tag){\r\n              rows.push(row)\r\n            }\r\n            \r\n            }\r\n        \r\n            let filterRow = [{tag: <div><input type=\"text\" className=\"filter__input\" placeholder=\"TAG\" onChange={(e) => this.filter(0, e.target.value)}/></div>, id: <div><input type=\"text\" className=\"filter__input\" placeholder=\"ISO ID\" onChange={(e) => this.filter(1, e.target.value)}/></div>, type: <div><input type=\"text\" className=\"filter__input\" placeholder=\"Type\" onChange={(e) => this.filter(2,e.target.value)}/></div>}]\r\n             \r\n            this.setState({data : rows, role: this.props.role, displayData: rows});\r\n            await this.setState({filters : filterRow})\r\n\r\n    }) \r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState){\r\n\r\n    if(prevProps !== this.props){\r\n      const options = {\r\n        method: \"GET\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n    }\r\n\r\n    fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/modelled\", options)\r\n      .then(response => response.json())\r\n      .then(async json => {\r\n        var rows = []\r\n        var row = null\r\n        for(let i = 0; i < json.rows.length; i++){\r\n            row = {id: json.rows[i].isoid, tag: json.rows[i].tag, type: json.rows[i].code.toString()}\r\n            if(json.rows[i].blocked === 1 && this.props.role === \"SpecialityLead\"){\r\n              row.id = <div>{json.rows[i].isoid} <button className=\"btn btn-success\" onClick={()=>this.unlock(json.rows[i].isoid)} style={{fontSize:\"12px\", borderColor:\"black\", padding:\"2px 5px 2px 5px\",  marginLeft:\"10px\"}}>UNLOCK</button></div>\r\n            }\r\n            if(row){\r\n              if(i % 2 === 0){\r\n                row[\"color\"] = \"#fff\"\r\n              }else{\r\n                row[\"color\"] = \"#eee\"\r\n              }\r\n            }\r\n            if(row.id && row.tag){\r\n              rows.push(row)\r\n            }\r\n            \r\n            }\r\n        \r\n            let filterRow = [{tag: <div><input type=\"text\" className=\"filter__input\" placeholder=\"TAG\" onChange={(e) => this.filter(0, e.target.value)}/></div>, id: <div><input type=\"text\" className=\"filter__input\" placeholder=\"ISO ID\" onChange={(e) => this.filter(1, e.target.value)}/></div>, type: <div><input type=\"text\" className=\"filter__input\" placeholder=\"Type\" onChange={(e) => this.filter(2,e.target.value)}/></div>}]\r\n             \r\n            this.setState({data : rows, role: this.props.role, displayData: rows});\r\n            await this.setState({filters : filterRow})\r\n\r\n    }) \r\n    }\r\n\r\n  }\r\n\r\n  async filter(column, value){\r\n    let fd = this.state.filterData\r\n    fd[column] = value\r\n    await this.setState({filterData: fd})\r\n\r\n    let auxDisplayData = this.state.data\r\n    let resultData = []\r\n    let fil, exists = null\r\n    for(let i = 0; i < auxDisplayData.length; i++){\r\n      exists = true\r\n      for(let column = 0; column < Object.keys(auxDisplayData[i]).length-1; column ++){\r\n        fil = Object.keys(auxDisplayData[i])[column]\r\n        if(fil === \"tag\"){\r\n          fil = \"id\"\r\n        }else if(fil === \"id\"){\r\n          fil = \"tag\"\r\n        }\r\n        if(auxDisplayData[i][fil].props){\r\n          if(this.state.filterData[column] !== \"\" && this.state.filterData[column] && !auxDisplayData[i][fil].props.children[0].includes(this.state.filterData[column])){\r\n            exists = false\r\n          }        \r\n        }else if(auxDisplayData[i][fil]){\r\n          if(this.state.filterData[column] !== \"\" && this.state.filterData[column] && !auxDisplayData[i][fil].includes(this.state.filterData[column])){\r\n            exists = false\r\n          }\r\n        }else{\r\n          exists = false\r\n        }\r\n          \r\n        \r\n      }\r\n      if(exists){\r\n        resultData.push(auxDisplayData[i])\r\n      }\r\n    }\r\n    await this.setState({displayData: resultData})\r\n  }\r\n  \r\n  getColumnSearchProps = dataIndex => ({\r\n    \r\n    render: text => \r\n      \r\n      text\r\n    \r\n      \r\n  });\r\n\r\n  handleReset = clearFilters => {\r\n    clearFilters();\r\n    this.setState({ searchText: '' });\r\n  };\r\n\r\n  onSelectChange = (selectedRowKeys, selectedRows) => {\r\n    let ids = []\r\n    for(let i = 0; i < selectedRows.length; i++){\r\n      ids.push(selectedRows[i].id.props.children)\r\n    }\r\n    this.setState({\r\n      selectedRowsKeys: selectedRowKeys,\r\n      selectedRows: selectedRows\r\n    })\r\n    //this.setState({ selectedRows: selectedRows });\r\n    this.props.onChange(ids);\r\n    \r\n  };\r\n  \r\n\r\n  render() {\r\n\r\n    const columns = [\r\n      {\r\n        title: <center className=\"dataTable__header__text\">TAG</center>,\r\n        dataIndex: 'tag',\r\n        key: 'tag',\r\n        ...this.getColumnSearchProps('tag'),\r\n        sorter:{\r\n          compare: (a, b) => a.tag.localeCompare(b.tag),\r\n        },\r\n      },\r\n      {\r\n        title: <center className=\"dataTable__header__text\">ISO ID</center>,\r\n        dataIndex: 'id',\r\n        key: 'id',\r\n        ...this.getColumnSearchProps('id'),\r\n        sorter:{\r\n          compare: (a, b) => a.id.localeCompare(b.id),\r\n        },\r\n      },\r\n      {\r\n        title: <div className=\"dataTable__header__text\">Type</div>,\r\n        dataIndex: 'type',\r\n        key: 'type',\r\n        ...this.getColumnSearchProps('type'),\r\n        sorter: {\r\n          compare: (a, b) => a.type.localeCompare(b.type),\r\n        },\r\n      },\r\n    ];\r\n\r\n    var totalElements = null;\r\n    if (this.state.data.length === 0){\r\n      totalElements = null;\r\n    }else{\r\n      totalElements = (<div style={{position: \"absolute\", bottom: 25, left:0}}>\r\n      <b>Total elements: {this.state.data.length}</b>\r\n     </div>);\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        {this.state.updateData}\r\n        <div className=\"dataTable__container\" style={{float:\"top\", position:\"relative\"}}>\r\n        <Table className=\"customTable\" style={{ height: '540px' }} bordered = {true}  columns={columns} dataSource={this.state.displayData} scroll={{y:437}} pagination={{disabled:true, defaultPageSize:5000}} size=\"small\" rowClassName= {(record) => record.color.replace('#', '')}/>\r\n        <Table className=\"filter__table\" pagination={{disabled:true}} scroll={{y:437}} showHeader = {false} bordered = {true} columns={columns} dataSource={this.state.filters} size=\"small\"/>\r\n          {totalElements}\r\n        </div>\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModelledDataTable;"]},"metadata":{},"sourceType":"module"}