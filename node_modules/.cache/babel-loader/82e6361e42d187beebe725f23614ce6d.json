{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar _templateObject, _templateObject2;\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\");\n\n  _classApplyDescriptorSet(receiver, descriptor, value);\n\n  return value;\n}\n\nfunction _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n\n    descriptor.value = value;\n  }\n}\n\nfunction _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"get\");\n\n  return _classApplyDescriptorGet(receiver, descriptor);\n}\n\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n\n  return privateMap.get(receiver);\n}\n\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n\n  return descriptor.value;\n}\n\nimport { addClass, removeClass, fastInnerHTML, empty } from \"../../helpers/dom/element.mjs\";\nimport { isLeftClick, isRightClick } from \"../../helpers/dom/event.mjs\";\nimport { toSingleLine } from \"../../helpers/templateLiteralTag.mjs\";\nimport { warn } from \"../../helpers/console.mjs\";\nimport { ACTIVE_HEADER_TYPE, HEADER_TYPE } from \"../../selection/index.mjs\";\nimport { BasePlugin } from \"../base/index.mjs\";\nimport StateManager from \"./stateManager/index.mjs\";\nimport GhostTable from \"./utils/ghostTable.mjs\";\nexport var PLUGIN_KEY = 'nestedHeaders';\nexport var PLUGIN_PRIORITY = 280;\n/**\r\n * @plugin NestedHeaders\r\n * @description\r\n * The plugin allows to create a nested header structure, using the HTML's colspan attribute.\r\n *\r\n * To make any header wider (covering multiple table columns), it's corresponding configuration array element should be\r\n * provided as an object with `label` and `colspan` properties. The `label` property defines the header's label,\r\n * while the `colspan` property defines a number of columns that the header should cover.\r\n *\r\n * __Note__ that the plugin supports a *nested* structure, which means, any header cannot be wider than it's \"parent\". In\r\n * other words, headers cannot overlap each other.\r\n * @example\r\n *\r\n * ```js\r\n * const container = document.getElementById('example');\r\n * const hot = new Handsontable(container, {\r\n *   data: getData(),\r\n *   nestedHeaders: [\r\n *     ['A', {label: 'B', colspan: 8}, 'C'],\r\n *     ['D', {label: 'E', colspan: 4}, {label: 'F', colspan: 4}, 'G'],\r\n *     ['H', {label: 'I', colspan: 2}, {label: 'J', colspan: 2}, {label: 'K', colspan: 2}, {label: 'L', colspan: 2}, 'M'],\r\n *     ['N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W']\r\n *  ],\r\n * ```\r\n */\n\nvar _stateManager = /*#__PURE__*/new WeakMap();\n\nvar _hidingIndexMapObserver = /*#__PURE__*/new WeakMap();\n\nexport var NestedHeaders = /*#__PURE__*/function (_BasePlugin) {\n  _inherits(NestedHeaders, _BasePlugin);\n\n  var _super = _createSuper(NestedHeaders);\n\n  function NestedHeaders() {\n    var _this;\n\n    _classCallCheck(this, NestedHeaders);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _stateManager.set(_assertThisInitialized(_this), {\n      writable: true,\n      value: new StateManager()\n    });\n\n    _hidingIndexMapObserver.set(_assertThisInitialized(_this), {\n      writable: true,\n      value: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"ghostTable\", new GhostTable(_assertThisInitialized(_this)));\n\n    _defineProperty(_assertThisInitialized(_this), \"detectedOverlappedHeaders\", false);\n\n    return _this;\n  }\n\n  _createClass(NestedHeaders, [{\n    key: \"isEnabled\",\n    value:\n    /**\r\n     * Check if plugin is enabled.\r\n     *\r\n     * @returns {boolean}\r\n     */\n    function isEnabled() {\n      return !!this.hot.getSettings()[PLUGIN_KEY];\n    }\n    /**\r\n     * Enables the plugin functionality for this Handsontable instance.\r\n     */\n\n  }, {\n    key: \"enablePlugin\",\n    value: function enablePlugin() {\n      var _this2 = this;\n\n      if (this.enabled) {\n        return;\n      }\n\n      var _this$hot$getSettings = this.hot.getSettings(),\n          nestedHeaders = _this$hot$getSettings.nestedHeaders;\n\n      if (!Array.isArray(nestedHeaders) || !Array.isArray(nestedHeaders[0])) {\n        warn(toSingleLine(_templateObject || (_templateObject = _taggedTemplateLiteral([\"Your Nested Headers plugin configuration is invalid. The settings has to be \\n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]\"], [\"Your Nested Headers plugin configuration is invalid. The settings has to be\\\\x20\\n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]\"]))));\n      }\n\n      this.addHook('init', function () {\n        return _this2.onInit();\n      });\n      this.addHook('afterLoadData', function () {\n        return _this2.onAfterLoadData.apply(_this2, arguments);\n      });\n      this.addHook('beforeOnCellMouseDown', function () {\n        return _this2.onBeforeOnCellMouseDown.apply(_this2, arguments);\n      });\n      this.addHook('afterOnCellMouseDown', function () {\n        return _this2.onAfterOnCellMouseDown.apply(_this2, arguments);\n      });\n      this.addHook('beforeOnCellMouseOver', function () {\n        return _this2.onBeforeOnCellMouseOver.apply(_this2, arguments);\n      });\n      this.addHook('afterGetColumnHeaderRenderers', function (array) {\n        return _this2.onAfterGetColumnHeaderRenderers(array);\n      });\n      this.addHook('modifyColWidth', function () {\n        return _this2.onModifyColWidth.apply(_this2, arguments);\n      });\n      this.addHook('beforeHighlightingColumnHeader', function () {\n        return _this2.onBeforeHighlightingColumnHeader.apply(_this2, arguments);\n      });\n      this.addHook('afterViewportColumnCalculatorOverride', function () {\n        return _this2.onAfterViewportColumnCalculatorOverride.apply(_this2, arguments);\n      });\n\n      _get(_getPrototypeOf(NestedHeaders.prototype), \"enablePlugin\", this).call(this);\n\n      this.updatePlugin(); // @TODO: Workaround for broken plugin initialization abstraction.\n    }\n    /**\r\n     * Updates the plugin state. This method is executed when {@link Core#updateSettings} is invoked.\r\n     */\n\n  }, {\n    key: \"updatePlugin\",\n    value: function updatePlugin() {\n      var _this3 = this;\n\n      if (!this.hot.view) {\n        // @TODO: Workaround for broken plugin initialization abstraction.\n        return;\n      }\n\n      var _this$hot$getSettings2 = this.hot.getSettings(),\n          nestedHeaders = _this$hot$getSettings2.nestedHeaders;\n\n      _classPrivateFieldGet(this, _stateManager).setColumnsLimit(this.hot.countSourceCols());\n\n      if (Array.isArray(nestedHeaders)) {\n        this.detectedOverlappedHeaders = _classPrivateFieldGet(this, _stateManager).setState(nestedHeaders);\n      }\n\n      if (this.detectedOverlappedHeaders) {\n        warn(toSingleLine(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"Your Nested Headers plugin setup contains overlapping headers. This kind of configuration \\n                        is currently not supported.\"], [\"Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\\\\x20\\n                        is currently not supported.\"]))));\n      }\n\n      if (this.enabled) {\n        // This line covers the case when a developer uses the external hiding maps to manipulate\n        // the columns' visibility. The tree state built from the settings - which is always built\n        // as if all the columns are visible, needs to be modified to be in sync with a dataset.\n        this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach(function (isColumnHidden, physicalColumnIndex) {\n          var actionName = isColumnHidden === true ? 'hide-column' : 'show-column';\n\n          _classPrivateFieldGet(_this3, _stateManager).triggerColumnModification(actionName, physicalColumnIndex);\n        });\n      }\n\n      if (!_classPrivateFieldGet(this, _hidingIndexMapObserver) && this.enabled) {\n        _classPrivateFieldSet(this, _hidingIndexMapObserver, this.hot.columnIndexMapper.createChangesObserver('hiding').subscribe(function (changes) {\n          changes.forEach(function (_ref) {\n            var op = _ref.op,\n                columnIndex = _ref.index,\n                newValue = _ref.newValue;\n\n            if (op === 'replace') {\n              var actionName = newValue === true ? 'hide-column' : 'show-column';\n\n              _classPrivateFieldGet(_this3, _stateManager).triggerColumnModification(actionName, columnIndex);\n            }\n          });\n        }));\n      }\n\n      this.ghostTable.buildWidthsMapper();\n\n      _get(_getPrototypeOf(NestedHeaders.prototype), \"updatePlugin\", this).call(this);\n    }\n    /**\r\n     * Disables the plugin functionality for this Handsontable instance.\r\n     */\n\n  }, {\n    key: \"disablePlugin\",\n    value: function disablePlugin() {\n      this.clearColspans();\n\n      _classPrivateFieldGet(this, _stateManager).clear();\n\n      _classPrivateFieldGet(this, _hidingIndexMapObserver).unsubscribe();\n\n      _classPrivateFieldSet(this, _hidingIndexMapObserver, null);\n\n      this.ghostTable.clear();\n\n      _get(_getPrototypeOf(NestedHeaders.prototype), \"disablePlugin\", this).call(this);\n    }\n    /**\r\n     * Returns an instance of the internal state manager of the plugin.\r\n     *\r\n     * @private\r\n     * @returns {StateManager}\r\n     */\n\n  }, {\n    key: \"getStateManager\",\n    value: function getStateManager() {\n      return _classPrivateFieldGet(this, _stateManager);\n    }\n    /**\r\n     * Gets a total number of headers levels.\r\n     *\r\n     * @private\r\n     * @returns {number}\r\n     */\n\n  }, {\n    key: \"getLayersCount\",\n    value: function getLayersCount() {\n      return _classPrivateFieldGet(this, _stateManager).getLayersCount();\n    }\n    /**\r\n     * Gets column settings for a specified header. The returned object contains\r\n     * information about the header label, its colspan length, or if it is hidden\r\n     * in the header renderers.\r\n     *\r\n     * @private\r\n     * @param {number} headerLevel Header level (0 = most distant to the table).\r\n     * @param {number} columnIndex A visual column index.\r\n     * @returns {object}\r\n     */\n\n  }, {\n    key: \"getHeaderSettings\",\n    value: function getHeaderSettings(headerLevel, columnIndex) {\n      return _classPrivateFieldGet(this, _stateManager).getHeaderSettings(headerLevel, columnIndex);\n    }\n    /**\r\n     * Clear the colspans remaining after plugin usage.\r\n     *\r\n     * @private\r\n     */\n\n  }, {\n    key: \"clearColspans\",\n    value: function clearColspans() {\n      if (!this.hot.view) {\n        return;\n      }\n\n      var wt = this.hot.view.wt;\n      var headerLevels = wt.getSetting('columnHeaders').length;\n      var mainHeaders = wt.wtTable.THEAD;\n      var topHeaders = wt.wtOverlays.topOverlay.clone.wtTable.THEAD;\n      var topLeftCornerHeaders = wt.wtOverlays.topLeftCornerOverlay ? wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.THEAD : null;\n\n      for (var i = 0; i < headerLevels; i++) {\n        var masterLevel = mainHeaders.childNodes[i];\n\n        if (!masterLevel) {\n          break;\n        }\n\n        var topLevel = topHeaders.childNodes[i];\n        var topLeftCornerLevel = topLeftCornerHeaders ? topLeftCornerHeaders.childNodes[i] : null;\n\n        for (var j = 0, masterNodes = masterLevel.childNodes.length; j < masterNodes; j++) {\n          masterLevel.childNodes[j].removeAttribute('colspan');\n          removeClass(masterLevel.childNodes[j], 'hiddenHeader');\n\n          if (topLevel && topLevel.childNodes[j]) {\n            topLevel.childNodes[j].removeAttribute('colspan');\n            removeClass(topLevel.childNodes[j], 'hiddenHeader');\n          }\n\n          if (topLeftCornerHeaders && topLeftCornerLevel && topLeftCornerLevel.childNodes[j]) {\n            topLeftCornerLevel.childNodes[j].removeAttribute('colspan');\n            removeClass(topLeftCornerLevel.childNodes[j], 'hiddenHeader');\n          }\n        }\n      }\n    }\n    /**\r\n     * Generates the appropriate header renderer for a header row.\r\n     *\r\n     * @private\r\n     * @param {number} headerLevel The index of header level counting from the top (positive\r\n     *                             values counting from 0 to N).\r\n     * @returns {Function}\r\n     * @fires Hooks#afterGetColHeader\r\n     */\n\n  }, {\n    key: \"headerRendererFactory\",\n    value: function headerRendererFactory(headerLevel) {\n      var _this4 = this;\n\n      var fixedColumnsLeft = this.hot.view.wt.getSetting('fixedColumnsLeft');\n      return function (renderedColumnIndex, TH) {\n        var _classPrivateFieldGet2;\n\n        var _this4$hot = _this4.hot,\n            rootDocument = _this4$hot.rootDocument,\n            columnIndexMapper = _this4$hot.columnIndexMapper,\n            view = _this4$hot.view;\n        var visualColumnsIndex = columnIndexMapper.getVisualFromRenderableIndex(renderedColumnIndex);\n\n        if (visualColumnsIndex === null) {\n          visualColumnsIndex = renderedColumnIndex;\n        }\n\n        TH.removeAttribute('colspan');\n        removeClass(TH, 'hiddenHeader');\n\n        var _ref2 = (_classPrivateFieldGet2 = _classPrivateFieldGet(_this4, _stateManager).getHeaderSettings(headerLevel, visualColumnsIndex)) !== null && _classPrivateFieldGet2 !== void 0 ? _classPrivateFieldGet2 : {\n          label: ''\n        },\n            colspan = _ref2.colspan,\n            label = _ref2.label,\n            isHidden = _ref2.isHidden,\n            isPlaceholder = _ref2.isPlaceholder;\n\n        if (isPlaceholder || isHidden) {\n          addClass(TH, 'hiddenHeader');\n        } else if (colspan > 1) {\n          var _view$wt$wtOverlays$t, _view$wt$wtOverlays$l;\n\n          var isTopLeftOverlay = (_view$wt$wtOverlays$t = view.wt.wtOverlays.topLeftCornerOverlay) === null || _view$wt$wtOverlays$t === void 0 ? void 0 : _view$wt$wtOverlays$t.clone.wtTable.THEAD.contains(TH);\n          var isLeftOverlay = (_view$wt$wtOverlays$l = view.wt.wtOverlays.leftOverlay) === null || _view$wt$wtOverlays$l === void 0 ? void 0 : _view$wt$wtOverlays$l.clone.wtTable.THEAD.contains(TH); // Check if there is a fixed column enabled, if so then reduce colspan to fixed column width.\n\n          var correctedColspan = isTopLeftOverlay || isLeftOverlay ? Math.min(colspan, fixedColumnsLeft - renderedColumnIndex) : colspan;\n\n          if (correctedColspan > 1) {\n            TH.setAttribute('colspan', correctedColspan);\n          }\n        }\n\n        var divEl = rootDocument.createElement('div');\n        var spanEl = rootDocument.createElement('span');\n        addClass(divEl, 'relative');\n        addClass(spanEl, 'colHeader');\n        fastInnerHTML(spanEl, label);\n        divEl.appendChild(spanEl);\n        empty(TH);\n        TH.appendChild(divEl);\n\n        _this4.hot.runHooks('afterGetColHeader', visualColumnsIndex, TH);\n      };\n    }\n    /**\r\n     * Allows to control which header DOM element will be used to highlight.\r\n     *\r\n     * @private\r\n     * @param {number} visualColumn A visual column index of the highlighted row header.\r\n     * @param {number} headerLevel A row header level that is currently highlighted.\r\n     * @param {object} highlightMeta An object with meta data that describes the highlight state.\r\n     * @returns {number}\r\n     */\n\n  }, {\n    key: \"onBeforeHighlightingColumnHeader\",\n    value: function onBeforeHighlightingColumnHeader(visualColumn, headerLevel, highlightMeta) {\n      var headerNodeData = _classPrivateFieldGet(this, _stateManager).getHeaderTreeNodeData(headerLevel, visualColumn);\n\n      if (!headerNodeData) {\n        return visualColumn;\n      }\n\n      var classNames = highlightMeta.classNames,\n          columnCursor = highlightMeta.columnCursor,\n          selectionType = highlightMeta.selectionType,\n          selectionWidth = highlightMeta.selectionWidth;\n\n      var _classPrivateFieldGet3 = _classPrivateFieldGet(this, _stateManager).getHeaderSettings(headerLevel, visualColumn),\n          isRoot = _classPrivateFieldGet3.isRoot,\n          colspan = _classPrivateFieldGet3.colspan;\n\n      if (selectionType === HEADER_TYPE) {\n        if (!isRoot) {\n          return headerNodeData.columnIndex;\n        }\n      } else if (selectionType === ACTIVE_HEADER_TYPE) {\n        if (colspan > selectionWidth - columnCursor || !isRoot) {\n          // Reset the class names array so the generated TH element won't be modified.\n          classNames.length = 0;\n        }\n      }\n\n      return visualColumn;\n    }\n    /**\r\n     * Allows to block the column selection that is controlled by the core Selection module.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event Mouse event.\r\n     * @param {CellCoords} coords Cell coords object containing the visual coordinates of the clicked cell.\r\n     * @param {CellCoords} TD The table cell or header element.\r\n     * @param {object} blockCalculations An object with keys `row`, `column` and `cell` which contains boolean values.\r\n     *                                   This object allows or disallows changing the selection for the particular axies.\r\n     */\n\n  }, {\n    key: \"onBeforeOnCellMouseDown\",\n    value: function onBeforeOnCellMouseDown(event, coords, TD, blockCalculations) {\n      var headerNodeData = this._getHeaderTreeNodeDataByCoords(coords);\n\n      if (headerNodeData) {\n        // Block the Selection module in controlling how the columns are selected. Pass the\n        // responsibility of the column selection to this plugin (see \"onAfterOnCellMouseDown\" hook).\n        blockCalculations.column = true;\n      }\n    }\n    /**\r\n     * Allows to control how the column selection based on the coordinates and the nested headers is made.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event Mouse event.\r\n     * @param {CellCoords} coords Cell coords object containing the visual coordinates of the clicked cell.\r\n     */\n\n  }, {\n    key: \"onAfterOnCellMouseDown\",\n    value: function onAfterOnCellMouseDown(event, coords) {\n      var headerNodeData = this._getHeaderTreeNodeDataByCoords(coords);\n\n      if (!headerNodeData) {\n        return;\n      }\n\n      var selection = this.hot.selection;\n      var currentSelection = selection.isSelected() ? selection.getSelectedRange().current() : null;\n      var columnsToSelect = [];\n      var columnIndex = headerNodeData.columnIndex,\n          origColspan = headerNodeData.origColspan; // The Selection module doesn't allow it to extend its behavior easily. That's why here we need\n      // to re-implement the \"click\" and \"shift\" behavior. As a workaround, the logic for the nested\n      // headers must implement a similar logic as in the original Selection handler\n      // (see src/selection/mouseEventHandler.js).\n\n      var allowRightClickSelection = !selection.inInSelection(coords);\n\n      if (event.shiftKey && currentSelection) {\n        if (coords.col < currentSelection.from.col) {\n          columnsToSelect.push(currentSelection.getTopRightCorner().col, columnIndex, coords.row);\n        } else if (coords.col > currentSelection.from.col) {\n          columnsToSelect.push(currentSelection.getTopLeftCorner().col, columnIndex + origColspan - 1, coords.row);\n        } else {\n          columnsToSelect.push(columnIndex, columnIndex + origColspan - 1, coords.row);\n        }\n      } else if (isLeftClick(event) || isRightClick(event) && allowRightClickSelection) {\n        columnsToSelect.push(columnIndex, columnIndex + origColspan - 1, coords.row);\n      } // The plugin takes control of the how the columns are selected.\n\n\n      selection.selectColumns.apply(selection, columnsToSelect);\n    }\n    /**\r\n     * Makes the header-selection properly select the nested headers.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event Mouse event.\r\n     * @param {CellCoords} coords Cell coords object containing the visual coordinates of the clicked cell.\r\n     * @param {HTMLElement} TD The cell element.\r\n     * @param {object} blockCalculations An object with keys `row`, `column` and `cell` which contains boolean values.\r\n     *                                   This object allows or disallows changing the selection for the particular axies.\r\n     */\n\n  }, {\n    key: \"onBeforeOnCellMouseOver\",\n    value: function onBeforeOnCellMouseOver(event, coords, TD, blockCalculations) {\n      var _this$hot;\n\n      if (!this.hot.view.isMouseDown()) {\n        return;\n      }\n\n      var headerNodeData = this._getHeaderTreeNodeDataByCoords(coords);\n\n      if (!headerNodeData) {\n        return;\n      }\n\n      var columnIndex = headerNodeData.columnIndex,\n          origColspan = headerNodeData.origColspan;\n      var selectedRange = this.hot.getSelectedRangeLast();\n      var topLeftCoords = selectedRange.getTopLeftCorner();\n      var bottomRightCoords = selectedRange.getBottomRightCorner();\n      var from = selectedRange.from; // Block the Selection module in controlling how the columns and cells are selected.\n      // From now on, the plugin is responsible for the selection.\n\n      blockCalculations.column = true;\n      blockCalculations.cell = true;\n      var columnsToSelect = [];\n\n      if (coords.col < from.col) {\n        columnsToSelect.push(bottomRightCoords.col, columnIndex);\n      } else if (coords.col > from.col) {\n        columnsToSelect.push(topLeftCoords.col, columnIndex + origColspan - 1);\n      } else {\n        columnsToSelect.push(columnIndex, columnIndex + origColspan - 1);\n      }\n\n      (_this$hot = this.hot).selectColumns.apply(_this$hot, columnsToSelect);\n    }\n    /**\r\n     * `afterGetColumnHeader` hook callback - prepares the header structure.\r\n     *\r\n     * @private\r\n     * @param {Array} renderersArray Array of renderers.\r\n     */\n\n  }, {\n    key: \"onAfterGetColumnHeaderRenderers\",\n    value: function onAfterGetColumnHeaderRenderers(renderersArray) {\n      if (renderersArray) {\n        renderersArray.length = 0;\n\n        for (var headerLayer = 0; headerLayer < _classPrivateFieldGet(this, _stateManager).getLayersCount(); headerLayer++) {\n          renderersArray.push(this.headerRendererFactory(headerLayer));\n        }\n      }\n    }\n    /**\r\n     * Make the renderer render the first nested column in its entirety.\r\n     *\r\n     * @private\r\n     * @param {object} calc Viewport column calculator.\r\n     */\n\n  }, {\n    key: \"onAfterViewportColumnCalculatorOverride\",\n    value: function onAfterViewportColumnCalculatorOverride(calc) {\n      var newStartColumn = calc.startColumn;\n\n      for (var headerLayer = 0; headerLayer < _classPrivateFieldGet(this, _stateManager).getLayersCount(); headerLayer++) {\n        var startColumn = _classPrivateFieldGet(this, _stateManager).findLeftMostColumnIndex(headerLayer, calc.startColumn);\n\n        var renderedStartColumn = this.hot.columnIndexMapper.getRenderableFromVisualIndex(startColumn);\n\n        if (renderedStartColumn < calc.startColumn) {\n          newStartColumn = renderedStartColumn;\n          break;\n        }\n      }\n\n      calc.startColumn = newStartColumn;\n    }\n    /**\r\n     * `modifyColWidth` hook callback - returns width from cache, when is greater than incoming from hook.\r\n     *\r\n     * @private\r\n     * @param {number} width Width from hook.\r\n     * @param {number} column Visual index of an column.\r\n     * @returns {number}\r\n     */\n\n  }, {\n    key: \"onModifyColWidth\",\n    value: function onModifyColWidth(width, column) {\n      var cachedWidth = this.ghostTable.widthsCache[column];\n      return width > cachedWidth ? width : cachedWidth;\n    }\n    /**\r\n     * Updates the plugin state after HoT initialization.\r\n     *\r\n     * @private\r\n     */\n\n  }, {\n    key: \"onInit\",\n    value: function onInit() {\n      // @TODO: Workaround for broken plugin initialization abstraction.\n      this.updatePlugin();\n    }\n    /**\r\n     * Updates the plugin state after new dataset load.\r\n     *\r\n     * @private\r\n     * @param {Array[]} sourceData Array of arrays or array of objects containing data.\r\n     * @param {boolean} initialLoad Flag that determines whether the data has been loaded\r\n     *                              during the initialization.\r\n     */\n\n  }, {\n    key: \"onAfterLoadData\",\n    value: function onAfterLoadData(sourceData, initialLoad) {\n      if (!initialLoad) {\n        this.updatePlugin();\n      }\n    }\n    /**\r\n     * Destroys the plugin instance.\r\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _classPrivateFieldSet(this, _stateManager, null);\n\n      if (_classPrivateFieldGet(this, _hidingIndexMapObserver) !== null) {\n        _classPrivateFieldGet(this, _hidingIndexMapObserver).unsubscribe();\n\n        _classPrivateFieldSet(this, _hidingIndexMapObserver, null);\n      }\n\n      _get(_getPrototypeOf(NestedHeaders.prototype), \"destroy\", this).call(this);\n    }\n    /**\r\n     * Gets the tree data that belongs to the column headers pointed by the passed coordinates.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coords The CellCoords instance.\r\n     * @returns {object|undefined}\r\n     */\n\n  }, {\n    key: \"_getHeaderTreeNodeDataByCoords\",\n    value: function _getHeaderTreeNodeDataByCoords(coords) {\n      if (coords.row >= 0 || coords.col < 0) {\n        return;\n      }\n\n      return _classPrivateFieldGet(this, _stateManager).getHeaderTreeNodeData(coords.row, coords.col);\n    }\n  }], [{\n    key: \"PLUGIN_KEY\",\n    get: function get() {\n      return PLUGIN_KEY;\n    }\n  }, {\n    key: \"PLUGIN_PRIORITY\",\n    get: function get() {\n      return PLUGIN_PRIORITY;\n    }\n    /**\r\n     * The state manager for the nested headers.\r\n     *\r\n     * @private\r\n     * @type {StateManager}\r\n     */\n\n  }]);\n\n  return NestedHeaders;\n}(BasePlugin);","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/handsontable/plugins/nestedHeaders/nestedHeaders.mjs"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_templateObject","_templateObject2","_taggedTemplateLiteral","strings","raw","slice","Object","freeze","defineProperties","value","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","call","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_defineProperty","_classPrivateFieldSet","privateMap","_classExtractFieldDescriptor","_classApplyDescriptorSet","set","_classPrivateFieldGet","_classApplyDescriptorGet","action","has","addClass","removeClass","fastInnerHTML","empty","isLeftClick","isRightClick","toSingleLine","warn","ACTIVE_HEADER_TYPE","HEADER_TYPE","BasePlugin","StateManager","GhostTable","PLUGIN_KEY","PLUGIN_PRIORITY","_stateManager","WeakMap","_hidingIndexMapObserver","NestedHeaders","_BasePlugin","_super","_this","_len","args","Array","_key","concat","isEnabled","hot","getSettings","enablePlugin","_this2","enabled","_this$hot$getSettings","nestedHeaders","isArray","addHook","onInit","onAfterLoadData","onBeforeOnCellMouseDown","onAfterOnCellMouseDown","onBeforeOnCellMouseOver","array","onAfterGetColumnHeaderRenderers","onModifyColWidth","onBeforeHighlightingColumnHeader","onAfterViewportColumnCalculatorOverride","updatePlugin","_this3","view","_this$hot$getSettings2","setColumnsLimit","countSourceCols","detectedOverlappedHeaders","setState","columnIndexMapper","hidingMapsCollection","getMergedValues","forEach","isColumnHidden","physicalColumnIndex","actionName","triggerColumnModification","createChangesObserver","subscribe","changes","_ref","op","columnIndex","index","newValue","ghostTable","buildWidthsMapper","disablePlugin","clearColspans","clear","unsubscribe","getStateManager","getLayersCount","getHeaderSettings","headerLevel","wt","headerLevels","getSetting","mainHeaders","wtTable","THEAD","topHeaders","wtOverlays","topOverlay","clone","topLeftCornerHeaders","topLeftCornerOverlay","masterLevel","childNodes","topLevel","topLeftCornerLevel","j","masterNodes","removeAttribute","headerRendererFactory","_this4","fixedColumnsLeft","renderedColumnIndex","TH","_classPrivateFieldGet2","_this4$hot","rootDocument","visualColumnsIndex","getVisualFromRenderableIndex","_ref2","label","colspan","isHidden","isPlaceholder","_view$wt$wtOverlays$t","_view$wt$wtOverlays$l","isTopLeftOverlay","contains","isLeftOverlay","leftOverlay","correctedColspan","Math","min","setAttribute","divEl","createElement","spanEl","appendChild","runHooks","visualColumn","highlightMeta","headerNodeData","getHeaderTreeNodeData","classNames","columnCursor","selectionType","selectionWidth","_classPrivateFieldGet3","isRoot","event","coords","TD","blockCalculations","_getHeaderTreeNodeDataByCoords","column","selection","currentSelection","isSelected","getSelectedRange","current","columnsToSelect","origColspan","allowRightClickSelection","inInSelection","shiftKey","col","from","push","getTopRightCorner","row","getTopLeftCorner","selectColumns","_this$hot","isMouseDown","selectedRange","getSelectedRangeLast","topLeftCoords","bottomRightCoords","getBottomRightCorner","cell","renderersArray","headerLayer","calc","newStartColumn","startColumn","findLeftMostColumnIndex","renderedStartColumn","getRenderableFromVisualIndex","width","cachedWidth","widthsCache","sourceData","initialLoad","destroy"],"mappings":"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","sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\r\n\r\nimport \"core-js/modules/es.object.set-prototype-of.js\";\r\nimport \"core-js/modules/es.object.get-prototype-of.js\";\r\nimport \"core-js/modules/es.reflect.construct.js\";\r\nimport \"core-js/modules/es.reflect.get.js\";\r\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\r\nimport \"core-js/modules/es.array.slice.js\";\r\nimport \"core-js/modules/es.object.freeze.js\";\r\nimport \"core-js/modules/es.symbol.js\";\r\nimport \"core-js/modules/es.symbol.description.js\";\r\nimport \"core-js/modules/es.symbol.iterator.js\";\r\n\r\nvar _templateObject, _templateObject2;\r\n\r\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\r\n\r\nimport \"core-js/modules/es.array.concat.js\";\r\nimport \"core-js/modules/web.dom-collections.for-each.js\";\r\nimport \"core-js/modules/es.array.iterator.js\";\r\nimport \"core-js/modules/es.object.to-string.js\";\r\nimport \"core-js/modules/es.string.iterator.js\";\r\nimport \"core-js/modules/es.weak-map.js\";\r\nimport \"core-js/modules/web.dom-collections.iterator.js\";\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\r\n\r\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\r\n\r\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\r\n\r\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n\r\nfunction _classPrivateFieldSet(receiver, privateMap, value) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\"); _classApplyDescriptorSet(receiver, descriptor, value); return value; }\r\n\r\nfunction _classApplyDescriptorSet(receiver, descriptor, value) { if (descriptor.set) { descriptor.set.call(receiver, value); } else { if (!descriptor.writable) { throw new TypeError(\"attempted to set read only private field\"); } descriptor.value = value; } }\r\n\r\nfunction _classPrivateFieldGet(receiver, privateMap) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"get\"); return _classApplyDescriptorGet(receiver, descriptor); }\r\n\r\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) { if (!privateMap.has(receiver)) { throw new TypeError(\"attempted to \" + action + \" private field on non-instance\"); } return privateMap.get(receiver); }\r\n\r\nfunction _classApplyDescriptorGet(receiver, descriptor) { if (descriptor.get) { return descriptor.get.call(receiver); } return descriptor.value; }\r\n\r\nimport { addClass, removeClass, fastInnerHTML, empty } from \"../../helpers/dom/element.mjs\";\r\nimport { isLeftClick, isRightClick } from \"../../helpers/dom/event.mjs\";\r\nimport { toSingleLine } from \"../../helpers/templateLiteralTag.mjs\";\r\nimport { warn } from \"../../helpers/console.mjs\";\r\nimport { ACTIVE_HEADER_TYPE, HEADER_TYPE } from \"../../selection/index.mjs\";\r\nimport { BasePlugin } from \"../base/index.mjs\";\r\nimport StateManager from \"./stateManager/index.mjs\";\r\nimport GhostTable from \"./utils/ghostTable.mjs\";\r\nexport var PLUGIN_KEY = 'nestedHeaders';\r\nexport var PLUGIN_PRIORITY = 280;\r\n/**\r\n * @plugin NestedHeaders\r\n * @description\r\n * The plugin allows to create a nested header structure, using the HTML's colspan attribute.\r\n *\r\n * To make any header wider (covering multiple table columns), it's corresponding configuration array element should be\r\n * provided as an object with `label` and `colspan` properties. The `label` property defines the header's label,\r\n * while the `colspan` property defines a number of columns that the header should cover.\r\n *\r\n * __Note__ that the plugin supports a *nested* structure, which means, any header cannot be wider than it's \"parent\". In\r\n * other words, headers cannot overlap each other.\r\n * @example\r\n *\r\n * ```js\r\n * const container = document.getElementById('example');\r\n * const hot = new Handsontable(container, {\r\n *   data: getData(),\r\n *   nestedHeaders: [\r\n *     ['A', {label: 'B', colspan: 8}, 'C'],\r\n *     ['D', {label: 'E', colspan: 4}, {label: 'F', colspan: 4}, 'G'],\r\n *     ['H', {label: 'I', colspan: 2}, {label: 'J', colspan: 2}, {label: 'K', colspan: 2}, {label: 'L', colspan: 2}, 'M'],\r\n *     ['N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W']\r\n *  ],\r\n * ```\r\n */\r\n\r\nvar _stateManager = /*#__PURE__*/new WeakMap();\r\n\r\nvar _hidingIndexMapObserver = /*#__PURE__*/new WeakMap();\r\n\r\nexport var NestedHeaders = /*#__PURE__*/function (_BasePlugin) {\r\n  _inherits(NestedHeaders, _BasePlugin);\r\n\r\n  var _super = _createSuper(NestedHeaders);\r\n\r\n  function NestedHeaders() {\r\n    var _this;\r\n\r\n    _classCallCheck(this, NestedHeaders);\r\n\r\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n      args[_key] = arguments[_key];\r\n    }\r\n\r\n    _this = _super.call.apply(_super, [this].concat(args));\r\n\r\n    _stateManager.set(_assertThisInitialized(_this), {\r\n      writable: true,\r\n      value: new StateManager()\r\n    });\r\n\r\n    _hidingIndexMapObserver.set(_assertThisInitialized(_this), {\r\n      writable: true,\r\n      value: null\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"ghostTable\", new GhostTable(_assertThisInitialized(_this)));\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"detectedOverlappedHeaders\", false);\r\n\r\n    return _this;\r\n  }\r\n\r\n  _createClass(NestedHeaders, [{\r\n    key: \"isEnabled\",\r\n    value:\r\n    /**\r\n     * Check if plugin is enabled.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    function isEnabled() {\r\n      return !!this.hot.getSettings()[PLUGIN_KEY];\r\n    }\r\n    /**\r\n     * Enables the plugin functionality for this Handsontable instance.\r\n     */\r\n\r\n  }, {\r\n    key: \"enablePlugin\",\r\n    value: function enablePlugin() {\r\n      var _this2 = this;\r\n\r\n      if (this.enabled) {\r\n        return;\r\n      }\r\n\r\n      var _this$hot$getSettings = this.hot.getSettings(),\r\n          nestedHeaders = _this$hot$getSettings.nestedHeaders;\r\n\r\n      if (!Array.isArray(nestedHeaders) || !Array.isArray(nestedHeaders[0])) {\r\n        warn(toSingleLine(_templateObject || (_templateObject = _taggedTemplateLiteral([\"Your Nested Headers plugin configuration is invalid. The settings has to be \\n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]\"], [\"Your Nested Headers plugin configuration is invalid. The settings has to be\\\\x20\\n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]\"]))));\r\n      }\r\n\r\n      this.addHook('init', function () {\r\n        return _this2.onInit();\r\n      });\r\n      this.addHook('afterLoadData', function () {\r\n        return _this2.onAfterLoadData.apply(_this2, arguments);\r\n      });\r\n      this.addHook('beforeOnCellMouseDown', function () {\r\n        return _this2.onBeforeOnCellMouseDown.apply(_this2, arguments);\r\n      });\r\n      this.addHook('afterOnCellMouseDown', function () {\r\n        return _this2.onAfterOnCellMouseDown.apply(_this2, arguments);\r\n      });\r\n      this.addHook('beforeOnCellMouseOver', function () {\r\n        return _this2.onBeforeOnCellMouseOver.apply(_this2, arguments);\r\n      });\r\n      this.addHook('afterGetColumnHeaderRenderers', function (array) {\r\n        return _this2.onAfterGetColumnHeaderRenderers(array);\r\n      });\r\n      this.addHook('modifyColWidth', function () {\r\n        return _this2.onModifyColWidth.apply(_this2, arguments);\r\n      });\r\n      this.addHook('beforeHighlightingColumnHeader', function () {\r\n        return _this2.onBeforeHighlightingColumnHeader.apply(_this2, arguments);\r\n      });\r\n      this.addHook('afterViewportColumnCalculatorOverride', function () {\r\n        return _this2.onAfterViewportColumnCalculatorOverride.apply(_this2, arguments);\r\n      });\r\n\r\n      _get(_getPrototypeOf(NestedHeaders.prototype), \"enablePlugin\", this).call(this);\r\n\r\n      this.updatePlugin(); // @TODO: Workaround for broken plugin initialization abstraction.\r\n    }\r\n    /**\r\n     * Updates the plugin state. This method is executed when {@link Core#updateSettings} is invoked.\r\n     */\r\n\r\n  }, {\r\n    key: \"updatePlugin\",\r\n    value: function updatePlugin() {\r\n      var _this3 = this;\r\n\r\n      if (!this.hot.view) {\r\n        // @TODO: Workaround for broken plugin initialization abstraction.\r\n        return;\r\n      }\r\n\r\n      var _this$hot$getSettings2 = this.hot.getSettings(),\r\n          nestedHeaders = _this$hot$getSettings2.nestedHeaders;\r\n\r\n      _classPrivateFieldGet(this, _stateManager).setColumnsLimit(this.hot.countSourceCols());\r\n\r\n      if (Array.isArray(nestedHeaders)) {\r\n        this.detectedOverlappedHeaders = _classPrivateFieldGet(this, _stateManager).setState(nestedHeaders);\r\n      }\r\n\r\n      if (this.detectedOverlappedHeaders) {\r\n        warn(toSingleLine(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"Your Nested Headers plugin setup contains overlapping headers. This kind of configuration \\n                        is currently not supported.\"], [\"Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\\\\x20\\n                        is currently not supported.\"]))));\r\n      }\r\n\r\n      if (this.enabled) {\r\n        // This line covers the case when a developer uses the external hiding maps to manipulate\r\n        // the columns' visibility. The tree state built from the settings - which is always built\r\n        // as if all the columns are visible, needs to be modified to be in sync with a dataset.\r\n        this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach(function (isColumnHidden, physicalColumnIndex) {\r\n          var actionName = isColumnHidden === true ? 'hide-column' : 'show-column';\r\n\r\n          _classPrivateFieldGet(_this3, _stateManager).triggerColumnModification(actionName, physicalColumnIndex);\r\n        });\r\n      }\r\n\r\n      if (!_classPrivateFieldGet(this, _hidingIndexMapObserver) && this.enabled) {\r\n        _classPrivateFieldSet(this, _hidingIndexMapObserver, this.hot.columnIndexMapper.createChangesObserver('hiding').subscribe(function (changes) {\r\n          changes.forEach(function (_ref) {\r\n            var op = _ref.op,\r\n                columnIndex = _ref.index,\r\n                newValue = _ref.newValue;\r\n\r\n            if (op === 'replace') {\r\n              var actionName = newValue === true ? 'hide-column' : 'show-column';\r\n\r\n              _classPrivateFieldGet(_this3, _stateManager).triggerColumnModification(actionName, columnIndex);\r\n            }\r\n          });\r\n        }));\r\n      }\r\n\r\n      this.ghostTable.buildWidthsMapper();\r\n\r\n      _get(_getPrototypeOf(NestedHeaders.prototype), \"updatePlugin\", this).call(this);\r\n    }\r\n    /**\r\n     * Disables the plugin functionality for this Handsontable instance.\r\n     */\r\n\r\n  }, {\r\n    key: \"disablePlugin\",\r\n    value: function disablePlugin() {\r\n      this.clearColspans();\r\n\r\n      _classPrivateFieldGet(this, _stateManager).clear();\r\n\r\n      _classPrivateFieldGet(this, _hidingIndexMapObserver).unsubscribe();\r\n\r\n      _classPrivateFieldSet(this, _hidingIndexMapObserver, null);\r\n\r\n      this.ghostTable.clear();\r\n\r\n      _get(_getPrototypeOf(NestedHeaders.prototype), \"disablePlugin\", this).call(this);\r\n    }\r\n    /**\r\n     * Returns an instance of the internal state manager of the plugin.\r\n     *\r\n     * @private\r\n     * @returns {StateManager}\r\n     */\r\n\r\n  }, {\r\n    key: \"getStateManager\",\r\n    value: function getStateManager() {\r\n      return _classPrivateFieldGet(this, _stateManager);\r\n    }\r\n    /**\r\n     * Gets a total number of headers levels.\r\n     *\r\n     * @private\r\n     * @returns {number}\r\n     */\r\n\r\n  }, {\r\n    key: \"getLayersCount\",\r\n    value: function getLayersCount() {\r\n      return _classPrivateFieldGet(this, _stateManager).getLayersCount();\r\n    }\r\n    /**\r\n     * Gets column settings for a specified header. The returned object contains\r\n     * information about the header label, its colspan length, or if it is hidden\r\n     * in the header renderers.\r\n     *\r\n     * @private\r\n     * @param {number} headerLevel Header level (0 = most distant to the table).\r\n     * @param {number} columnIndex A visual column index.\r\n     * @returns {object}\r\n     */\r\n\r\n  }, {\r\n    key: \"getHeaderSettings\",\r\n    value: function getHeaderSettings(headerLevel, columnIndex) {\r\n      return _classPrivateFieldGet(this, _stateManager).getHeaderSettings(headerLevel, columnIndex);\r\n    }\r\n    /**\r\n     * Clear the colspans remaining after plugin usage.\r\n     *\r\n     * @private\r\n     */\r\n\r\n  }, {\r\n    key: \"clearColspans\",\r\n    value: function clearColspans() {\r\n      if (!this.hot.view) {\r\n        return;\r\n      }\r\n\r\n      var wt = this.hot.view.wt;\r\n      var headerLevels = wt.getSetting('columnHeaders').length;\r\n      var mainHeaders = wt.wtTable.THEAD;\r\n      var topHeaders = wt.wtOverlays.topOverlay.clone.wtTable.THEAD;\r\n      var topLeftCornerHeaders = wt.wtOverlays.topLeftCornerOverlay ? wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.THEAD : null;\r\n\r\n      for (var i = 0; i < headerLevels; i++) {\r\n        var masterLevel = mainHeaders.childNodes[i];\r\n\r\n        if (!masterLevel) {\r\n          break;\r\n        }\r\n\r\n        var topLevel = topHeaders.childNodes[i];\r\n        var topLeftCornerLevel = topLeftCornerHeaders ? topLeftCornerHeaders.childNodes[i] : null;\r\n\r\n        for (var j = 0, masterNodes = masterLevel.childNodes.length; j < masterNodes; j++) {\r\n          masterLevel.childNodes[j].removeAttribute('colspan');\r\n          removeClass(masterLevel.childNodes[j], 'hiddenHeader');\r\n\r\n          if (topLevel && topLevel.childNodes[j]) {\r\n            topLevel.childNodes[j].removeAttribute('colspan');\r\n            removeClass(topLevel.childNodes[j], 'hiddenHeader');\r\n          }\r\n\r\n          if (topLeftCornerHeaders && topLeftCornerLevel && topLeftCornerLevel.childNodes[j]) {\r\n            topLeftCornerLevel.childNodes[j].removeAttribute('colspan');\r\n            removeClass(topLeftCornerLevel.childNodes[j], 'hiddenHeader');\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Generates the appropriate header renderer for a header row.\r\n     *\r\n     * @private\r\n     * @param {number} headerLevel The index of header level counting from the top (positive\r\n     *                             values counting from 0 to N).\r\n     * @returns {Function}\r\n     * @fires Hooks#afterGetColHeader\r\n     */\r\n\r\n  }, {\r\n    key: \"headerRendererFactory\",\r\n    value: function headerRendererFactory(headerLevel) {\r\n      var _this4 = this;\r\n\r\n      var fixedColumnsLeft = this.hot.view.wt.getSetting('fixedColumnsLeft');\r\n      return function (renderedColumnIndex, TH) {\r\n        var _classPrivateFieldGet2;\r\n\r\n        var _this4$hot = _this4.hot,\r\n            rootDocument = _this4$hot.rootDocument,\r\n            columnIndexMapper = _this4$hot.columnIndexMapper,\r\n            view = _this4$hot.view;\r\n        var visualColumnsIndex = columnIndexMapper.getVisualFromRenderableIndex(renderedColumnIndex);\r\n\r\n        if (visualColumnsIndex === null) {\r\n          visualColumnsIndex = renderedColumnIndex;\r\n        }\r\n\r\n        TH.removeAttribute('colspan');\r\n        removeClass(TH, 'hiddenHeader');\r\n\r\n        var _ref2 = (_classPrivateFieldGet2 = _classPrivateFieldGet(_this4, _stateManager).getHeaderSettings(headerLevel, visualColumnsIndex)) !== null && _classPrivateFieldGet2 !== void 0 ? _classPrivateFieldGet2 : {\r\n          label: ''\r\n        },\r\n            colspan = _ref2.colspan,\r\n            label = _ref2.label,\r\n            isHidden = _ref2.isHidden,\r\n            isPlaceholder = _ref2.isPlaceholder;\r\n\r\n        if (isPlaceholder || isHidden) {\r\n          addClass(TH, 'hiddenHeader');\r\n        } else if (colspan > 1) {\r\n          var _view$wt$wtOverlays$t, _view$wt$wtOverlays$l;\r\n\r\n          var isTopLeftOverlay = (_view$wt$wtOverlays$t = view.wt.wtOverlays.topLeftCornerOverlay) === null || _view$wt$wtOverlays$t === void 0 ? void 0 : _view$wt$wtOverlays$t.clone.wtTable.THEAD.contains(TH);\r\n          var isLeftOverlay = (_view$wt$wtOverlays$l = view.wt.wtOverlays.leftOverlay) === null || _view$wt$wtOverlays$l === void 0 ? void 0 : _view$wt$wtOverlays$l.clone.wtTable.THEAD.contains(TH); // Check if there is a fixed column enabled, if so then reduce colspan to fixed column width.\r\n\r\n          var correctedColspan = isTopLeftOverlay || isLeftOverlay ? Math.min(colspan, fixedColumnsLeft - renderedColumnIndex) : colspan;\r\n\r\n          if (correctedColspan > 1) {\r\n            TH.setAttribute('colspan', correctedColspan);\r\n          }\r\n        }\r\n\r\n        var divEl = rootDocument.createElement('div');\r\n        var spanEl = rootDocument.createElement('span');\r\n        addClass(divEl, 'relative');\r\n        addClass(spanEl, 'colHeader');\r\n        fastInnerHTML(spanEl, label);\r\n        divEl.appendChild(spanEl);\r\n        empty(TH);\r\n        TH.appendChild(divEl);\r\n\r\n        _this4.hot.runHooks('afterGetColHeader', visualColumnsIndex, TH);\r\n      };\r\n    }\r\n    /**\r\n     * Allows to control which header DOM element will be used to highlight.\r\n     *\r\n     * @private\r\n     * @param {number} visualColumn A visual column index of the highlighted row header.\r\n     * @param {number} headerLevel A row header level that is currently highlighted.\r\n     * @param {object} highlightMeta An object with meta data that describes the highlight state.\r\n     * @returns {number}\r\n     */\r\n\r\n  }, {\r\n    key: \"onBeforeHighlightingColumnHeader\",\r\n    value: function onBeforeHighlightingColumnHeader(visualColumn, headerLevel, highlightMeta) {\r\n      var headerNodeData = _classPrivateFieldGet(this, _stateManager).getHeaderTreeNodeData(headerLevel, visualColumn);\r\n\r\n      if (!headerNodeData) {\r\n        return visualColumn;\r\n      }\r\n\r\n      var classNames = highlightMeta.classNames,\r\n          columnCursor = highlightMeta.columnCursor,\r\n          selectionType = highlightMeta.selectionType,\r\n          selectionWidth = highlightMeta.selectionWidth;\r\n\r\n      var _classPrivateFieldGet3 = _classPrivateFieldGet(this, _stateManager).getHeaderSettings(headerLevel, visualColumn),\r\n          isRoot = _classPrivateFieldGet3.isRoot,\r\n          colspan = _classPrivateFieldGet3.colspan;\r\n\r\n      if (selectionType === HEADER_TYPE) {\r\n        if (!isRoot) {\r\n          return headerNodeData.columnIndex;\r\n        }\r\n      } else if (selectionType === ACTIVE_HEADER_TYPE) {\r\n        if (colspan > selectionWidth - columnCursor || !isRoot) {\r\n          // Reset the class names array so the generated TH element won't be modified.\r\n          classNames.length = 0;\r\n        }\r\n      }\r\n\r\n      return visualColumn;\r\n    }\r\n    /**\r\n     * Allows to block the column selection that is controlled by the core Selection module.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event Mouse event.\r\n     * @param {CellCoords} coords Cell coords object containing the visual coordinates of the clicked cell.\r\n     * @param {CellCoords} TD The table cell or header element.\r\n     * @param {object} blockCalculations An object with keys `row`, `column` and `cell` which contains boolean values.\r\n     *                                   This object allows or disallows changing the selection for the particular axies.\r\n     */\r\n\r\n  }, {\r\n    key: \"onBeforeOnCellMouseDown\",\r\n    value: function onBeforeOnCellMouseDown(event, coords, TD, blockCalculations) {\r\n      var headerNodeData = this._getHeaderTreeNodeDataByCoords(coords);\r\n\r\n      if (headerNodeData) {\r\n        // Block the Selection module in controlling how the columns are selected. Pass the\r\n        // responsibility of the column selection to this plugin (see \"onAfterOnCellMouseDown\" hook).\r\n        blockCalculations.column = true;\r\n      }\r\n    }\r\n    /**\r\n     * Allows to control how the column selection based on the coordinates and the nested headers is made.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event Mouse event.\r\n     * @param {CellCoords} coords Cell coords object containing the visual coordinates of the clicked cell.\r\n     */\r\n\r\n  }, {\r\n    key: \"onAfterOnCellMouseDown\",\r\n    value: function onAfterOnCellMouseDown(event, coords) {\r\n      var headerNodeData = this._getHeaderTreeNodeDataByCoords(coords);\r\n\r\n      if (!headerNodeData) {\r\n        return;\r\n      }\r\n\r\n      var selection = this.hot.selection;\r\n      var currentSelection = selection.isSelected() ? selection.getSelectedRange().current() : null;\r\n      var columnsToSelect = [];\r\n      var columnIndex = headerNodeData.columnIndex,\r\n          origColspan = headerNodeData.origColspan; // The Selection module doesn't allow it to extend its behavior easily. That's why here we need\r\n      // to re-implement the \"click\" and \"shift\" behavior. As a workaround, the logic for the nested\r\n      // headers must implement a similar logic as in the original Selection handler\r\n      // (see src/selection/mouseEventHandler.js).\r\n\r\n      var allowRightClickSelection = !selection.inInSelection(coords);\r\n\r\n      if (event.shiftKey && currentSelection) {\r\n        if (coords.col < currentSelection.from.col) {\r\n          columnsToSelect.push(currentSelection.getTopRightCorner().col, columnIndex, coords.row);\r\n        } else if (coords.col > currentSelection.from.col) {\r\n          columnsToSelect.push(currentSelection.getTopLeftCorner().col, columnIndex + origColspan - 1, coords.row);\r\n        } else {\r\n          columnsToSelect.push(columnIndex, columnIndex + origColspan - 1, coords.row);\r\n        }\r\n      } else if (isLeftClick(event) || isRightClick(event) && allowRightClickSelection) {\r\n        columnsToSelect.push(columnIndex, columnIndex + origColspan - 1, coords.row);\r\n      } // The plugin takes control of the how the columns are selected.\r\n\r\n\r\n      selection.selectColumns.apply(selection, columnsToSelect);\r\n    }\r\n    /**\r\n     * Makes the header-selection properly select the nested headers.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event Mouse event.\r\n     * @param {CellCoords} coords Cell coords object containing the visual coordinates of the clicked cell.\r\n     * @param {HTMLElement} TD The cell element.\r\n     * @param {object} blockCalculations An object with keys `row`, `column` and `cell` which contains boolean values.\r\n     *                                   This object allows or disallows changing the selection for the particular axies.\r\n     */\r\n\r\n  }, {\r\n    key: \"onBeforeOnCellMouseOver\",\r\n    value: function onBeforeOnCellMouseOver(event, coords, TD, blockCalculations) {\r\n      var _this$hot;\r\n\r\n      if (!this.hot.view.isMouseDown()) {\r\n        return;\r\n      }\r\n\r\n      var headerNodeData = this._getHeaderTreeNodeDataByCoords(coords);\r\n\r\n      if (!headerNodeData) {\r\n        return;\r\n      }\r\n\r\n      var columnIndex = headerNodeData.columnIndex,\r\n          origColspan = headerNodeData.origColspan;\r\n      var selectedRange = this.hot.getSelectedRangeLast();\r\n      var topLeftCoords = selectedRange.getTopLeftCorner();\r\n      var bottomRightCoords = selectedRange.getBottomRightCorner();\r\n      var from = selectedRange.from; // Block the Selection module in controlling how the columns and cells are selected.\r\n      // From now on, the plugin is responsible for the selection.\r\n\r\n      blockCalculations.column = true;\r\n      blockCalculations.cell = true;\r\n      var columnsToSelect = [];\r\n\r\n      if (coords.col < from.col) {\r\n        columnsToSelect.push(bottomRightCoords.col, columnIndex);\r\n      } else if (coords.col > from.col) {\r\n        columnsToSelect.push(topLeftCoords.col, columnIndex + origColspan - 1);\r\n      } else {\r\n        columnsToSelect.push(columnIndex, columnIndex + origColspan - 1);\r\n      }\r\n\r\n      (_this$hot = this.hot).selectColumns.apply(_this$hot, columnsToSelect);\r\n    }\r\n    /**\r\n     * `afterGetColumnHeader` hook callback - prepares the header structure.\r\n     *\r\n     * @private\r\n     * @param {Array} renderersArray Array of renderers.\r\n     */\r\n\r\n  }, {\r\n    key: \"onAfterGetColumnHeaderRenderers\",\r\n    value: function onAfterGetColumnHeaderRenderers(renderersArray) {\r\n      if (renderersArray) {\r\n        renderersArray.length = 0;\r\n\r\n        for (var headerLayer = 0; headerLayer < _classPrivateFieldGet(this, _stateManager).getLayersCount(); headerLayer++) {\r\n          renderersArray.push(this.headerRendererFactory(headerLayer));\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Make the renderer render the first nested column in its entirety.\r\n     *\r\n     * @private\r\n     * @param {object} calc Viewport column calculator.\r\n     */\r\n\r\n  }, {\r\n    key: \"onAfterViewportColumnCalculatorOverride\",\r\n    value: function onAfterViewportColumnCalculatorOverride(calc) {\r\n      var newStartColumn = calc.startColumn;\r\n\r\n      for (var headerLayer = 0; headerLayer < _classPrivateFieldGet(this, _stateManager).getLayersCount(); headerLayer++) {\r\n        var startColumn = _classPrivateFieldGet(this, _stateManager).findLeftMostColumnIndex(headerLayer, calc.startColumn);\r\n\r\n        var renderedStartColumn = this.hot.columnIndexMapper.getRenderableFromVisualIndex(startColumn);\r\n\r\n        if (renderedStartColumn < calc.startColumn) {\r\n          newStartColumn = renderedStartColumn;\r\n          break;\r\n        }\r\n      }\r\n\r\n      calc.startColumn = newStartColumn;\r\n    }\r\n    /**\r\n     * `modifyColWidth` hook callback - returns width from cache, when is greater than incoming from hook.\r\n     *\r\n     * @private\r\n     * @param {number} width Width from hook.\r\n     * @param {number} column Visual index of an column.\r\n     * @returns {number}\r\n     */\r\n\r\n  }, {\r\n    key: \"onModifyColWidth\",\r\n    value: function onModifyColWidth(width, column) {\r\n      var cachedWidth = this.ghostTable.widthsCache[column];\r\n      return width > cachedWidth ? width : cachedWidth;\r\n    }\r\n    /**\r\n     * Updates the plugin state after HoT initialization.\r\n     *\r\n     * @private\r\n     */\r\n\r\n  }, {\r\n    key: \"onInit\",\r\n    value: function onInit() {\r\n      // @TODO: Workaround for broken plugin initialization abstraction.\r\n      this.updatePlugin();\r\n    }\r\n    /**\r\n     * Updates the plugin state after new dataset load.\r\n     *\r\n     * @private\r\n     * @param {Array[]} sourceData Array of arrays or array of objects containing data.\r\n     * @param {boolean} initialLoad Flag that determines whether the data has been loaded\r\n     *                              during the initialization.\r\n     */\r\n\r\n  }, {\r\n    key: \"onAfterLoadData\",\r\n    value: function onAfterLoadData(sourceData, initialLoad) {\r\n      if (!initialLoad) {\r\n        this.updatePlugin();\r\n      }\r\n    }\r\n    /**\r\n     * Destroys the plugin instance.\r\n     */\r\n\r\n  }, {\r\n    key: \"destroy\",\r\n    value: function destroy() {\r\n      _classPrivateFieldSet(this, _stateManager, null);\r\n\r\n      if (_classPrivateFieldGet(this, _hidingIndexMapObserver) !== null) {\r\n        _classPrivateFieldGet(this, _hidingIndexMapObserver).unsubscribe();\r\n\r\n        _classPrivateFieldSet(this, _hidingIndexMapObserver, null);\r\n      }\r\n\r\n      _get(_getPrototypeOf(NestedHeaders.prototype), \"destroy\", this).call(this);\r\n    }\r\n    /**\r\n     * Gets the tree data that belongs to the column headers pointed by the passed coordinates.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coords The CellCoords instance.\r\n     * @returns {object|undefined}\r\n     */\r\n\r\n  }, {\r\n    key: \"_getHeaderTreeNodeDataByCoords\",\r\n    value: function _getHeaderTreeNodeDataByCoords(coords) {\r\n      if (coords.row >= 0 || coords.col < 0) {\r\n        return;\r\n      }\r\n\r\n      return _classPrivateFieldGet(this, _stateManager).getHeaderTreeNodeData(coords.row, coords.col);\r\n    }\r\n  }], [{\r\n    key: \"PLUGIN_KEY\",\r\n    get: function get() {\r\n      return PLUGIN_KEY;\r\n    }\r\n  }, {\r\n    key: \"PLUGIN_PRIORITY\",\r\n    get: function get() {\r\n      return PLUGIN_PRIORITY;\r\n    }\r\n    /**\r\n     * The state manager for the nested headers.\r\n     *\r\n     * @private\r\n     * @type {StateManager}\r\n     */\r\n\r\n  }]);\r\n\r\n  return NestedHeaders;\r\n}(BasePlugin);"]},"metadata":{},"sourceType":"module"}