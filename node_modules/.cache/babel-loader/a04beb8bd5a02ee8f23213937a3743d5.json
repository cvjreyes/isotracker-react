{"ast":null,"code":"import _objectSpread from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'antd/dist/antd.css';import{Table}from'antd';import IsoControlHoldsPopUp from'../isoControlHoldsPopUp/isoControlHoldsPopUp';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var IsoControlHoldsDataTable=/*#__PURE__*/function(_React$Component){_inherits(IsoControlHoldsDataTable,_React$Component);var _super=_createSuper(IsoControlHoldsDataTable);function IsoControlHoldsDataTable(props){var _this;_classCallCheck(this,IsoControlHoldsDataTable);_this=_super.call(this,props);_this.state={searchText:'',searchedColumn:'',data:[],displayData:[],filterData:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],tab:_this.props.currentTab,selectedRows:[],selectedRowsKeys:[],updateData:_this.props.updateData,username:\"\",acronyms:null,filters:[],currentRole:_this.props.currentRole};_this.getColumnSearchProps=function(dataIndex){return{render:function render(text){return text;}};};_this.handleReset=function(clearFilters){clearFilters();_this.setState({searchText:''});};_this.onSelectChange=function(selectedRowKeys,selectedRows){var ids=[];for(var i=0;i<selectedRows.length;i++){ids.push(selectedRows[i].id.props.children);}_this.setState({selectedRowsKeys:selectedRowKeys,selectedRows:selectedRows});//this.setState({ selectedRows: selectedRows });\n_this.props.onChange(ids);};_this.update=_this.update.bind(_assertThisInitialized(_this));return _this;}_createClass(IsoControlHoldsDataTable,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this2=this;var options;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};_context2.next=3;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/modelledEstimatedHolds\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){var rows,i,filterRow;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rows=[];for(i=0;i<json.rows.length;i++){rows.push({tag:json.rows[i].tag,holds:/*#__PURE__*/_jsx(IsoControlHoldsPopUp,{tag:json.rows[i].tag,update:_this2.update,updateData:_this2.props.updateData})});/*\r\n          if(!json.has_roles && !json.description){\r\n            row[\"holds\"] = <IsoControlHoldsPopUp tag={json.rows[i].tag} holds = {holds} descriptions = {descriptions}/>\r\n          }else if(json.has_roles && !json.description){\r\n\r\n          }else if(!json.has_roles && json.description){\r\n\r\n          }else{\r\n\r\n          }*/}filterRow=[{key:0,tag:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"TAG\",onChange:function onChange(e){return _this2.filter(0,e.target.value);}})})}];_context.next=5;return _this2.setState({data:rows,displayData:rows,filters:filterRow});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());case 3:case\"end\":return _context2.stop();}}},_callee2);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(prevProps,prevState){var _this3=this;var options;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(prevProps!==this.props)){_context4.next=4;break;}options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};_context4.next=4;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/modelledEstimatedHolds\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(json){var rows,i,filterRow;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:rows=[];for(i=0;i<json.rows.length;i++){rows.push({tag:json.rows[i].tag,holds:/*#__PURE__*/_jsx(IsoControlHoldsPopUp,{tag:json.rows[i].tag,update:_this3.update})});}filterRow=[{key:0,tag:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"filter__input\",placeholder:\"TAG\",onChange:function onChange(e){return _this3.filter(0,e.target.value);}})})}];_context3.next=5;return _this3.setState({data:rows,displayData:rows,filters:filterRow});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4){return _ref2.apply(this,arguments);};}());case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function componentDidUpdate(_x2,_x3){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()},{key:\"update\",value:function(){var _update=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.props.updateDataMethod();case 2:case\"end\":return _context5.stop();}}},_callee5,this);}));function update(){return _update.apply(this,arguments);}return update;}()},{key:\"filter\",value:function(){var _filter=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(column,value){var fd,auxDisplayData,resultData,fil,exists,i,_column;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:fd=this.state.filterData;fd[column]=value;_context6.next=4;return this.setState({filterData:fd});case 4:auxDisplayData=this.state.data;resultData=[];exists=null;for(i=0;i<auxDisplayData.length;i++){exists=true;for(_column=0;_column<Object.keys(auxDisplayData[i]).length;_column++){fil=Object.keys(auxDisplayData[i])[_column];if(auxDisplayData[i][fil]){if(this.state.filterData[_column]!==\"\"&&this.state.filterData[_column]&&!auxDisplayData[i][fil].includes(this.state.filterData[_column])){exists=false;}}}if(exists){resultData.push(auxDisplayData[i]);}}_context6.next=10;return this.setState({displayData:resultData});case 10:case\"end\":return _context6.stop();}}},_callee6,this);}));function filter(_x5,_x6){return _filter.apply(this,arguments);}return filter;}()},{key:\"render\",value:function render(){var _this4=this;var selectedRows=this.state.selectedRows;var selectedRowsKeys=this.state.selectedRowsKeys;var rowSelection={onChange:function onChange(selectedRowKeys,selectedRows){_this4.onSelectChange(selectedRowKeys,selectedRows);},getCheckboxProps:function getCheckboxProps(record){return{// Column configuration not to be checked\nname:record.name};}};var rowSelectionFilter={onChange:function onChange(selectedRowKeys,selectedRows){_this4.onSelectChange(selectedRowKeys,selectedRows);},getCheckboxProps:function getCheckboxProps(record){return{disabled:true,// Column configuration not to be checked\nname:record.name};}};if(localStorage.getItem(\"update\")===\"true\"){this.setState({selectedRows:[],selectedRowsKeys:[]});rowSelection.selectedRowKeys=[];rowSelection.selectedRows=[];localStorage.setItem(\"update\",false);}else{rowSelection.selectedRowKeys=selectedRowsKeys;rowSelection.selectedRows=selectedRows;}var columns=[_objectSpread({title:/*#__PURE__*/_jsx(\"center\",{className:\"dataTable__header__text\",children:\"TAG\"}),dataIndex:'tag',key:'tag'},this.getColumnSearchProps('tag')),{title:/*#__PURE__*/_jsx(\"div\",{className:\"dataTable__header__text\",children:\"Holds\"}),dataIndex:'holds',key:'holds',width:\"150px\"}];var totalElements=null;if(this.state.data.length===0){totalElements=null;}else{totalElements=/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",bottom:25,left:0},children:/*#__PURE__*/_jsxs(\"b\",{children:[\"Total elements: \",this.state.data.length]})});}var table=null;if(process.env.REACT_APP_PROGRESS===\"1\"){table=/*#__PURE__*/_jsx(Table,{className:\"customTable\",bordered:true,columns:columns,style:{height:'540px'},dataSource:this.state.displayData,scroll:{y:437},pagination:{disabled:true,defaultPageSize:5000},size:\"small\"});}else{table=/*#__PURE__*/_jsx(Table,{className:\"customTable\",bordered:true,rowSelection:_objectSpread({type:'checkbox'},rowSelection),columns:columns,style:{height:'540px'},dataSource:this.state.displayData,scroll:{y:437},pagination:{disabled:true,defaultPageSize:5000},size:\"small\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[this.state.updateData,/*#__PURE__*/_jsxs(\"div\",{className:\"dataTable__container\",children:[table,/*#__PURE__*/_jsx(Table,{className:\"filter__table\",pagination:{disabled:true},scroll:{y:437},showHeader:false,bordered:true,columns:columns,dataSource:this.state.filters,size:\"small\"}),totalElements]})]});}}]);return IsoControlHoldsDataTable;}(React.Component);export default IsoControlHoldsDataTable;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/components/isoControlHoldsDataTable/isoControlHoldsDataTable.js"],"names":["React","Table","IsoControlHoldsPopUp","IsoControlHoldsDataTable","props","state","searchText","searchedColumn","data","displayData","filterData","tab","currentTab","selectedRows","selectedRowsKeys","updateData","username","acronyms","filters","currentRole","getColumnSearchProps","dataIndex","render","text","handleReset","clearFilters","setState","onSelectChange","selectedRowKeys","ids","i","length","push","id","children","onChange","update","bind","options","method","headers","fetch","process","env","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","rows","tag","holds","filterRow","key","e","filter","target","value","prevProps","prevState","updateDataMethod","column","fd","auxDisplayData","resultData","exists","Object","keys","fil","includes","rowSelection","getCheckboxProps","record","name","rowSelectionFilter","disabled","localStorage","getItem","setItem","columns","title","width","totalElements","position","bottom","left","table","REACT_APP_PROGRESS","height","y","defaultPageSize","type","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'antd/dist/antd.css';\r\nimport { Table } from 'antd';\r\nimport IsoControlHoldsPopUp from '../isoControlHoldsPopUp/isoControlHoldsPopUp';\r\n\r\nclass IsoControlHoldsDataTable extends React.Component{\r\n  state = {\r\n    searchText: '',\r\n    searchedColumn: '',\r\n    data: [],\r\n    displayData: [],\r\n    filterData: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    tab: this.props.currentTab,\r\n    selectedRows: [],\r\n    selectedRowsKeys: [],\r\n    updateData: this.props.updateData,\r\n    username: \"\",\r\n    acronyms : null,\r\n    filters: [],\r\n    currentRole: this.props.currentRole,\r\n  };\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.update = this.update.bind(this)\r\n  }\r\n\r\n\r\n  async componentDidMount(){\r\n\r\n    const options = {\r\n        method: \"GET\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n    }\r\n\r\n    await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/modelledEstimatedHolds\", options)\r\n    .then(response => response.json())\r\n    .then(async json => {\r\n      let rows = [] \r\n      for(let i = 0; i < json.rows.length; i++){\r\n          rows.push({tag: json.rows[i].tag, holds: <IsoControlHoldsPopUp tag = {json.rows[i].tag} update={this.update} updateData={this.props.updateData}/>})\r\n          /*\r\n          if(!json.has_roles && !json.description){\r\n            row[\"holds\"] = <IsoControlHoldsPopUp tag={json.rows[i].tag} holds = {holds} descriptions = {descriptions}/>\r\n          }else if(json.has_roles && !json.description){\r\n\r\n          }else if(!json.has_roles && json.description){\r\n\r\n          }else{\r\n\r\n          }*/\r\n      }\r\n      const filterRow = [{key: 0, tag: <div><input type=\"text\" className=\"filter__input\" placeholder=\"TAG\" onChange={(e) => this.filter(0, e.target.value)}/></div>}]\r\n      await this.setState({data: rows, displayData: rows, filters: filterRow})\r\n    })\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState){\r\n    if(prevProps !== this.props){\r\n        const options = {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n        }\r\n    \r\n        await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/modelledEstimatedHolds\", options)\r\n        .then(response => response.json())\r\n        .then(async json => {\r\n          let rows = [] \r\n          for(let i = 0; i < json.rows.length; i++){\r\n              rows.push({tag: json.rows[i].tag, holds: <IsoControlHoldsPopUp tag = {json.rows[i].tag} update={this.update}/>})\r\n          }\r\n          const filterRow = [{key: 0, tag: <div><input type=\"text\" className=\"filter__input\" placeholder=\"TAG\" onChange={(e) => this.filter(0, e.target.value)}/></div>}]\r\n          await this.setState({data: rows, displayData: rows, filters: filterRow})\r\n        })\r\n      }\r\n\r\n  }\r\n\r\n  async update(){\r\n    await this.props.updateDataMethod()\r\n  }\r\n\r\n  async filter(column, value){\r\n    let fd = this.state.filterData\r\n    fd[column] = value\r\n    await this.setState({filterData: fd})\r\n\r\n    let auxDisplayData = this.state.data\r\n    let resultData = []\r\n    let fil, exists = null\r\n    for(let i = 0; i < auxDisplayData.length; i++){\r\n      exists = true\r\n      for(let column = 0; column < Object.keys(auxDisplayData[i]).length; column ++){\r\n          \r\n        fil = Object.keys(auxDisplayData[i])[column]\r\n       \r\n        if(auxDisplayData[i][fil]){\r\n            if(this.state.filterData[column] !== \"\" && this.state.filterData[column] && !auxDisplayData[i][fil].includes(this.state.filterData[column])){\r\n                exists = false\r\n            }\r\n        }\r\n        \r\n      }\r\n      if(exists){\r\n        resultData.push(auxDisplayData[i])\r\n      }\r\n    }\r\n    await this.setState({displayData: resultData})\r\n  }\r\n\r\n  \r\n  getColumnSearchProps = dataIndex => ({\r\n    \r\n    render: text => \r\n    text\r\n      \r\n  });\r\n\r\n\r\n  handleReset = clearFilters => {\r\n    clearFilters();\r\n    this.setState({ searchText: '' });\r\n  };\r\n\r\n  onSelectChange = (selectedRowKeys, selectedRows) => {\r\n    let ids = []\r\n    for(let i = 0; i < selectedRows.length; i++){\r\n      ids.push(selectedRows[i].id.props.children)\r\n    }\r\n    this.setState({\r\n      selectedRowsKeys: selectedRowKeys,\r\n      selectedRows: selectedRows\r\n    })\r\n    //this.setState({ selectedRows: selectedRows });\r\n    this.props.onChange(ids);\r\n    \r\n  };\r\n  \r\n\r\n  render() {\r\n    const selectedRows = this.state.selectedRows;\r\n    const selectedRowsKeys = this.state.selectedRowsKeys;\r\n    const rowSelection = {\r\n      onChange: (selectedRowKeys, selectedRows) => {\r\n        this.onSelectChange(selectedRowKeys, selectedRows);\r\n      },\r\n      getCheckboxProps: (record) => (      \r\n        {\r\n        \r\n        // Column configuration not to be checked\r\n        name: record.name,\r\n      }),\r\n    };\r\n\r\n    const rowSelectionFilter = {\r\n      onChange: (selectedRowKeys, selectedRows) => {\r\n        this.onSelectChange(selectedRowKeys, selectedRows);\r\n      },\r\n      getCheckboxProps: (record) => ({\r\n        disabled: true,\r\n        // Column configuration not to be checked\r\n        name: record.name,\r\n      }),\r\n    };\r\n    if(localStorage.getItem(\"update\") === \"true\"){\r\n      this.setState({\r\n        selectedRows: [],\r\n        selectedRowsKeys: []\r\n      })\r\n      rowSelection.selectedRowKeys = []\r\n      rowSelection.selectedRows = []\r\n      localStorage.setItem(\"update\", false)\r\n    }else{\r\n      rowSelection.selectedRowKeys = selectedRowsKeys \r\n      rowSelection.selectedRows = selectedRows;\r\n    }  \r\n    \r\n    \r\n    let columns = [\r\n      {\r\n        title: <center className=\"dataTable__header__text\">TAG</center>,\r\n        dataIndex: 'tag',\r\n        key: 'tag',\r\n        ...this.getColumnSearchProps('tag'),\r\n        \r\n      },\r\n      {\r\n        title: <div className=\"dataTable__header__text\">Holds</div>,\r\n        dataIndex: 'holds',\r\n        key: 'holds',\r\n        width: \"150px\"\r\n      },\r\n    ];    \r\n\r\n    var totalElements = null\r\n    if (this.state.data.length === 0){\r\n      totalElements = null;\r\n    }else{\r\n      totalElements = (<div style={{position: \"absolute\", bottom: 25, left:0}}>\r\n      <b>Total elements: {this.state.data.length}</b>\r\n     </div>);\r\n    }\r\n\r\n    let table = null\r\n    if(process.env.REACT_APP_PROGRESS === \"1\"){\r\n      table = <Table className=\"customTable\" bordered = {true} columns={columns} style={{ height: '540px' }}  dataSource={this.state.displayData} scroll={{y:437}} pagination={{disabled:true, defaultPageSize:5000}} size=\"small\"/>\r\n    }else{\r\n      table = <Table className=\"customTable\" bordered = {true} rowSelection={{type: 'checkbox', ...rowSelection}} columns={columns} style={{ height: '540px' }}  dataSource={this.state.displayData} scroll={{y:437}} pagination={{disabled:true, defaultPageSize:5000}} size=\"small\"/>\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        {this.state.updateData}\r\n        <div className=\"dataTable__container\">\r\n          {table}\r\n          <Table className=\"filter__table\" pagination={{disabled:true}}  scroll={{y:437}} showHeader = {false} bordered = {true} columns={columns} dataSource={this.state.filters} size=\"small\"/> \r\n          {totalElements}\r\n        </div>\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default IsoControlHoldsDataTable;"]},"metadata":{},"sourceType":"module"}