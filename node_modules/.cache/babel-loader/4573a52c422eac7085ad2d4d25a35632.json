{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\isotracker-dev\\\\isotracker-react\\\\src\\\\components\\\\equipTypesDataTable\\\\equipTypesDataTable.js\";\nimport React from 'react';\nimport 'antd/dist/antd.css';\nimport { Table, Input, Button, Space } from 'antd';\nimport { SearchOutlined } from '@ant-design/icons';\nimport { HotTable } from '@handsontable/react';\nimport 'handsontable/dist/handsontable.full.css';\nimport \"./equipTypesDataTable\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CryptoJS = require(\"crypto-js\");\n\nconst SecureStorage = require(\"secure-web-storage\");\n\nvar SECRET_KEY = 'sanud2ha8shd72h';\nvar secureStorage = new SecureStorage(localStorage, {\n  hash: function hash(key) {\n    key = CryptoJS.SHA256(key, SECRET_KEY);\n    return key.toString();\n  },\n  encrypt: function encrypt(data) {\n    data = CryptoJS.AES.encrypt(data, SECRET_KEY);\n    data = data.toString();\n    return data;\n  },\n  decrypt: function decrypt(data) {\n    data = CryptoJS.AES.decrypt(data, SECRET_KEY);\n    data = data.toString(CryptoJS.enc.Utf8);\n    return data;\n  }\n});\n\nclass EquipTypesDataTable extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      searchText: '',\n      searchedColumn: '',\n      typesData: [],\n      stepsData: [],\n      progressData: [],\n      tab: this.props.currentTab,\n      selectedRows: [],\n      selectedRowsKeys: [],\n      updateData: this.props.updateData,\n      username: \"\",\n      acronyms: null,\n      steps: []\n    };\n  }\n\n  async componentDidMount() {\n    const options = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    fetch(\"http://\" + process.env.REACT_APP_SERVER + \":\" + process.env.REACT_APP_NODE_PORT + \"/equipments/types\", options).then(response => response.json()).then(json => {\n      var rows = [];\n      var row = null;\n      rows.push([\"Code\", \"Name\", \"Weight\"]);\n\n      for (let i = 0; i < json.rows.length; i++) {\n        let mod = 0;\n\n        if (json.rows[i].modelled) {\n          mod = json.rows[i].modelled;\n        }\n\n        row = [json.rows[i].code, json.rows[i].name, json.rows[i].weight];\n\n        for (let j = 0; j < this.state.steps.length; j++) {\n          let currentStep = this.state.steps[j].toString();\n          row[currentStep] = json.rows[i][currentStep];\n        }\n\n        rows.push(row);\n      }\n\n      this.setState({\n        typesData: rows,\n        selectedRows: []\n      });\n    });\n    fetch(\"http://\" + process.env.REACT_APP_SERVER + \":\" + process.env.REACT_APP_NODE_PORT + \"/equipments/steps\", options).then(response => response.json()).then(json => {\n      var rows = [];\n      var row = null;\n      console.log(json.steps);\n      rows.push([\"Name\", \"Percentage\"]);\n\n      for (let i = 0; i < json.steps.length; i++) {\n        console.log(json.names[i]);\n        row = [json.names[i].name, json.steps[i].percentage];\n        rows.push(row);\n      }\n\n      this.setState({\n        stepsData: rows,\n        selectedRows: []\n      });\n    });\n  }\n\n  addRowTypes() {\n    let rows = this.state.typesData;\n    rows.push([\"\", \"\", \"\"]);\n    this.setState({\n      typesData: rows\n    });\n  }\n\n  submitChangesTypes() {\n    const body = {\n      rows: this.state.typesData\n    };\n    const options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body)\n    };\n    fetch(\"http://\" + process.env.REACT_APP_SERVER + \":\" + process.env.REACT_APP_NODE_PORT + \"/submit/equipments/types\", options).then(response => response.json()).then(json => {\n      if (json.error) {\n        console.log(\"error\");\n      } else {\n        console.log(\"success\");\n      }\n    });\n  }\n\n  addRowSteps() {\n    let rows = this.state.stepsData;\n    rows.push([\"\", \"\", \"\"]);\n    this.setState({\n      stepsData: rows\n    });\n  }\n\n  render() {\n    const settings = {\n      licenseKey: 'non-commercial-and-evaluation',\n      colWidths: 200 //... other options\n\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      style: {\n        float: \"left\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"hot-app\",\n          children: [/*#__PURE__*/_jsxDEV(HotTable, {\n            data: this.state.typesData,\n            colHeaders: true,\n            rowHeaders: true,\n            width: \"675\",\n            height: \"500\",\n            settings: settings,\n            manualColumnResize: true,\n            manualRowResize: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-sm btn-info\",\n              onClick: () => this.addRowTypes(),\n              style: {\n                marginRight: \"5px\",\n                fontSize: \"16px\"\n              },\n              children: \"Add row\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-sm btn-success\",\n              onClick: () => this.submitChangesTypes(),\n              style: {\n                marginRight: \"5px\",\n                fontSize: \"16px\"\n              },\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"hot-app\",\n          children: [/*#__PURE__*/_jsxDEV(HotTable, {\n            data: this.state.stepsData,\n            colHeaders: true,\n            rowHeaders: true,\n            width: \"450\",\n            height: \"500\",\n            settings: settings,\n            manualColumnResize: true,\n            manualRowResize: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-sm btn-info\",\n              onClick: () => this.addRowSteps(),\n              style: {\n                marginRight: \"5px\",\n                fontSize: \"16px\"\n              },\n              children: \"Add row\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-sm btn-success\",\n              onClick: () => this.submitChangesTypes(),\n              style: {\n                marginRight: \"5px\",\n                fontSize: \"16px\"\n              },\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default EquipTypesDataTable;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/components/equipTypesDataTable/equipTypesDataTable.js"],"names":["React","Table","Input","Button","Space","SearchOutlined","HotTable","CryptoJS","require","SecureStorage","SECRET_KEY","secureStorage","localStorage","hash","key","SHA256","toString","encrypt","data","AES","decrypt","enc","Utf8","EquipTypesDataTable","Component","state","searchText","searchedColumn","typesData","stepsData","progressData","tab","props","currentTab","selectedRows","selectedRowsKeys","updateData","username","acronyms","steps","componentDidMount","options","method","headers","fetch","process","env","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","rows","row","push","i","length","mod","modelled","code","name","weight","j","currentStep","setState","console","log","names","percentage","addRowTypes","submitChangesTypes","body","JSON","stringify","error","addRowSteps","render","settings","licenseKey","colWidths","float","marginRight","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'antd/dist/antd.css';\r\nimport { Table, Input, Button, Space } from 'antd';\r\nimport { SearchOutlined } from '@ant-design/icons';\r\nimport { HotTable } from '@handsontable/react';\r\nimport 'handsontable/dist/handsontable.full.css';\r\nimport \"./equipTypesDataTable\"\r\n\r\nconst CryptoJS = require(\"crypto-js\");\r\n    const SecureStorage = require(\"secure-web-storage\");\r\n    var SECRET_KEY = 'sanud2ha8shd72h';\r\n    \r\n    var secureStorage = new SecureStorage(localStorage, {\r\n        hash: function hash(key) {\r\n            key = CryptoJS.SHA256(key, SECRET_KEY);\r\n    \r\n            return key.toString();\r\n        },\r\n        encrypt: function encrypt(data) {\r\n            data = CryptoJS.AES.encrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString();\r\n    \r\n            return data;\r\n        },\r\n        decrypt: function decrypt(data) {\r\n            data = CryptoJS.AES.decrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString(CryptoJS.enc.Utf8);\r\n    \r\n            return data;\r\n        }\r\n    });\r\n\r\nclass EquipTypesDataTable extends React.Component{\r\n  state = {\r\n    searchText: '',\r\n    searchedColumn: '',\r\n    typesData: [],\r\n    stepsData: [],\r\n    progressData: [],\r\n    tab: this.props.currentTab,\r\n    selectedRows: [],\r\n    selectedRowsKeys: [],\r\n    updateData: this.props.updateData,\r\n    username: \"\",\r\n    acronyms : null,\r\n    steps: []\r\n  };\r\n\r\n  \r\n\r\n  async componentDidMount(){\r\n\r\n    const options = {\r\n        method: \"GET\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n    }\r\n\r\n    fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/equipments/types\", options)\r\n      .then(response => response.json())\r\n      .then(json => {\r\n        var rows = []\r\n        var row = null\r\n        rows.push([\"Code\", \"Name\", \"Weight\"])\r\n        for(let i = 0; i < json.rows.length; i++){\r\n            let mod = 0\r\n            if(json.rows[i].modelled){\r\n              mod = json.rows[i].modelled\r\n            }\r\n\r\n            row = [json.rows[i].code, json.rows[i].name, json.rows[i].weight]\r\n\r\n            for(let j = 0; j < this.state.steps.length; j++){\r\n              let currentStep = this.state.steps[j].toString()\r\n              row[currentStep] = json.rows[i][currentStep]\r\n            }\r\n            rows.push(row)\r\n        }\r\n        this.setState({typesData : rows, selectedRows: []});\r\n\r\n    }) \r\n\r\n    fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/equipments/steps\", options)\r\n      .then(response => response.json())\r\n      .then(json => {\r\n        var rows = []\r\n        var row = null\r\n        console.log(json.steps)\r\n        rows.push([\"Name\", \"Percentage\"])\r\n        for(let i = 0; i < json.steps.length; i++){\r\n          console.log(json.names[i])\r\n            row = [json.names[i].name, json.steps[i].percentage]\r\n\r\n            rows.push(row)\r\n        }\r\n        this.setState({stepsData : rows, selectedRows: []});\r\n\r\n    })\r\n  }\r\n\r\n  addRowTypes(){\r\n    let rows = this.state.typesData\r\n    rows.push([\"\",\"\",\"\"])\r\n    this.setState({typesData: rows})\r\n  }\r\n  \r\n  submitChangesTypes(){\r\n    const body = {\r\n      rows: this.state.typesData,\r\n    }\r\n    const options = {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(body)\r\n    }\r\n    fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/submit/equipments/types\", options)\r\n    .then(response => response.json())\r\n    .then(json =>{\r\n      if(json.error){\r\n        console.log(\"error\")\r\n      }else{\r\n        console.log(\"success\")\r\n      }\r\n    })\r\n  }\r\n\r\n  addRowSteps(){\r\n    let rows = this.state.stepsData\r\n    rows.push([\"\",\"\",\"\"])\r\n    this.setState({stepsData: rows})\r\n  }\r\n\r\n  render() {\r\n\r\n\r\n    const settings = {\r\n      licenseKey: 'non-commercial-and-evaluation',\r\n      colWidths: 200,\r\n      //... other options\r\n    }\r\n\r\n\r\n    return (\r\n      <div className=\"row\" style={{float:\"left\"}}>\r\n        <div className=\"column\">\r\n          <div id=\"hot-app\">\r\n            <HotTable\r\n              data={this.state.typesData}\r\n              colHeaders={true}\r\n              rowHeaders={true}\r\n              width=\"675\"\r\n              height=\"500\"\r\n              settings={settings} \r\n              manualColumnResize={true}\r\n              manualRowResize={true}\r\n            />\r\n            <br></br>\r\n            <center>\r\n                <button class=\"btn btn-sm btn-info\" onClick={() => this.addRowTypes()} style={{marginRight:\"5px\", fontSize:\"16px\"}}>Add row</button>\r\n                <button class=\"btn btn-sm btn-success\" onClick={() => this.submitChangesTypes()} style={{marginRight:\"5px\", fontSize:\"16px\"}}>Submit</button>\r\n            </center>\r\n          </div>\r\n        </div>\r\n        <div className=\"column\">\r\n          <div id=\"hot-app\">\r\n            <HotTable\r\n              data={this.state.stepsData}\r\n              colHeaders={true}\r\n              rowHeaders={true}\r\n              width=\"450\"\r\n              height=\"500\"\r\n              settings={settings} \r\n              manualColumnResize={true}\r\n              manualRowResize={true}\r\n            />\r\n            <br></br>\r\n            <center>\r\n                <button class=\"btn btn-sm btn-info\" onClick={() => this.addRowSteps()} style={{marginRight:\"5px\", fontSize:\"16px\"}}>Add row</button>\r\n                <button class=\"btn btn-sm btn-success\" onClick={() => this.submitChangesTypes()} style={{marginRight:\"5px\", fontSize:\"16px\"}}>Submit</button>\r\n            </center>\r\n          </div>\r\n        </div>\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EquipTypesDataTable;"]},"metadata":{},"sourceType":"module"}