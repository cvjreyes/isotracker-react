{"ast":null,"code":"function _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nimport { addClass, hasClass, removeClass, getComputedStyle, getTrimmingContainer, innerWidth, innerHeight, offset, outerHeight, outerWidth } from \"./../../../helpers/dom/element.mjs\";\nimport { stopImmediatePropagation } from \"./../../../helpers/dom/event.mjs\";\nimport { objectEach } from \"./../../../helpers/object.mjs\";\nimport { isMobileBrowser } from \"./../../../helpers/browser.mjs\";\nimport EventManager from \"./../../../eventManager.mjs\";\nimport CellCoords from \"./cell/coords.mjs\";\n/**\n *\n */\n\nvar Border = /*#__PURE__*/function () {\n  /**\n   * @param {Walkontable} wotInstance The Walkontable instance.\n   * @param {object} settings The border settings.\n   */\n  function Border(wotInstance, settings) {\n    _classCallCheck(this, Border);\n\n    if (!settings) {\n      return;\n    }\n\n    this.eventManager = new EventManager(wotInstance);\n    this.instance = wotInstance;\n    this.wot = wotInstance;\n    this.settings = settings;\n    this.mouseDown = false;\n    this.main = null;\n    this.top = null;\n    this.left = null;\n    this.bottom = null;\n    this.right = null;\n    this.topStyle = null;\n    this.leftStyle = null;\n    this.bottomStyle = null;\n    this.rightStyle = null;\n    this.cornerDefaultStyle = {\n      width: '6px',\n      height: '6px',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#FFF'\n    }; // Offset to moving the corner to be centered relative to the grid.\n\n    this.cornerCenterPointOffset = -(parseInt(this.cornerDefaultStyle.width, 10) / 2);\n    this.corner = null;\n    this.cornerStyle = null;\n    this.createBorders(settings);\n    this.registerListeners();\n  }\n  /**\n   * Register all necessary events.\n   */\n\n\n  _createClass(Border, [{\n    key: \"registerListeners\",\n    value: function registerListeners() {\n      var _this2 = this;\n\n      var documentBody = this.wot.rootDocument.body;\n      this.eventManager.addEventListener(documentBody, 'mousedown', function () {\n        return _this2.onMouseDown();\n      });\n      this.eventManager.addEventListener(documentBody, 'mouseup', function () {\n        return _this2.onMouseUp();\n      });\n\n      var _loop = function _loop(c, len) {\n        var element = _this2.main.childNodes[c];\n\n        _this2.eventManager.addEventListener(element, 'mouseenter', function (event) {\n          return _this2.onMouseEnter(event, _this2.main.childNodes[c]);\n        });\n      };\n\n      for (var c = 0, len = this.main.childNodes.length; c < len; c++) {\n        _loop(c, len);\n      }\n    }\n    /**\n     * Mouse down listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown() {\n      this.mouseDown = true;\n    }\n    /**\n     * Mouse up listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onMouseUp\",\n    value: function onMouseUp() {\n      this.mouseDown = false;\n    }\n    /**\n     * Mouse enter listener for fragment selection functionality.\n     *\n     * @private\n     * @param {Event} event Dom event.\n     * @param {HTMLElement} parentElement Part of border element.\n     */\n\n  }, {\n    key: \"onMouseEnter\",\n    value: function onMouseEnter(event, parentElement) {\n      if (!this.mouseDown || !this.wot.getSetting('hideBorderOnMouseDownOver')) {\n        return;\n      }\n\n      event.preventDefault();\n      stopImmediatePropagation(event);\n\n      var _this = this;\n\n      var documentBody = this.wot.rootDocument.body;\n      var bounds = parentElement.getBoundingClientRect(); // Hide border to prevents selection jumping when fragmentSelection is enabled.\n\n      parentElement.style.display = 'none';\n      /**\n       * @param {Event} mouseEvent The mouse event object.\n       * @returns {boolean}\n       */\n\n      function isOutside(mouseEvent) {\n        if (mouseEvent.clientY < Math.floor(bounds.top)) {\n          return true;\n        }\n\n        if (mouseEvent.clientY > Math.ceil(bounds.top + bounds.height)) {\n          return true;\n        }\n\n        if (mouseEvent.clientX < Math.floor(bounds.left)) {\n          return true;\n        }\n\n        if (mouseEvent.clientX > Math.ceil(bounds.left + bounds.width)) {\n          return true;\n        }\n      }\n      /**\n       * @param {Event} handlerEvent The mouse event object.\n       */\n\n\n      function handler(handlerEvent) {\n        if (isOutside(handlerEvent)) {\n          _this.eventManager.removeEventListener(documentBody, 'mousemove', handler);\n\n          parentElement.style.display = 'block';\n        }\n      }\n\n      this.eventManager.addEventListener(documentBody, 'mousemove', handler);\n    }\n    /**\n     * Create border elements.\n     *\n     * @param {object} settings The border settings.\n     */\n\n  }, {\n    key: \"createBorders\",\n    value: function createBorders(settings) {\n      var rootDocument = this.wot.rootDocument;\n      this.main = rootDocument.createElement('div');\n      var borderDivs = ['top', 'left', 'bottom', 'right', 'corner'];\n      var style = this.main.style;\n      style.position = 'absolute';\n      style.top = 0;\n      style.left = 0;\n\n      for (var i = 0; i < 5; i++) {\n        var position = borderDivs[i];\n        var div = rootDocument.createElement('div');\n        div.className = \"wtBorder \".concat(this.settings.className || ''); // + borderDivs[i];\n\n        if (this.settings[position] && this.settings[position].hide) {\n          div.className += ' hidden';\n        }\n\n        style = div.style;\n        style.backgroundColor = this.settings[position] && this.settings[position].color ? this.settings[position].color : settings.border.color;\n        style.height = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        style.width = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        this.main.appendChild(div);\n      }\n\n      this.top = this.main.childNodes[0];\n      this.left = this.main.childNodes[1];\n      this.bottom = this.main.childNodes[2];\n      this.right = this.main.childNodes[3];\n      this.topStyle = this.top.style;\n      this.leftStyle = this.left.style;\n      this.bottomStyle = this.bottom.style;\n      this.rightStyle = this.right.style;\n      this.corner = this.main.childNodes[4];\n      this.corner.className += ' corner';\n      this.cornerStyle = this.corner.style;\n      this.cornerStyle.width = this.cornerDefaultStyle.width;\n      this.cornerStyle.height = this.cornerDefaultStyle.height;\n      this.cornerStyle.border = [this.cornerDefaultStyle.borderWidth, this.cornerDefaultStyle.borderStyle, this.cornerDefaultStyle.borderColor].join(' ');\n\n      if (isMobileBrowser()) {\n        this.createMultipleSelectorHandles();\n      }\n\n      this.disappear();\n      var wtTable = this.wot.wtTable;\n      var bordersHolder = wtTable.bordersHolder;\n\n      if (!bordersHolder) {\n        bordersHolder = rootDocument.createElement('div');\n        bordersHolder.className = 'htBorders';\n        wtTable.bordersHolder = bordersHolder;\n        wtTable.spreader.appendChild(bordersHolder);\n      }\n\n      bordersHolder.appendChild(this.main);\n    }\n    /**\n     * Create multiple selector handler for mobile devices.\n     */\n\n  }, {\n    key: \"createMultipleSelectorHandles\",\n    value: function createMultipleSelectorHandles() {\n      var _this3 = this;\n\n      var rootDocument = this.wot.rootDocument;\n      this.selectionHandles = {\n        topLeft: rootDocument.createElement('DIV'),\n        topLeftHitArea: rootDocument.createElement('DIV'),\n        bottomRight: rootDocument.createElement('DIV'),\n        bottomRightHitArea: rootDocument.createElement('DIV')\n      };\n      var width = 10;\n      var hitAreaWidth = 40;\n      this.selectionHandles.topLeft.className = 'topLeftSelectionHandle';\n      this.selectionHandles.topLeftHitArea.className = 'topLeftSelectionHandle-HitArea';\n      this.selectionHandles.bottomRight.className = 'bottomRightSelectionHandle';\n      this.selectionHandles.bottomRightHitArea.className = 'bottomRightSelectionHandle-HitArea';\n      this.selectionHandles.styles = {\n        topLeft: this.selectionHandles.topLeft.style,\n        topLeftHitArea: this.selectionHandles.topLeftHitArea.style,\n        bottomRight: this.selectionHandles.bottomRight.style,\n        bottomRightHitArea: this.selectionHandles.bottomRightHitArea.style\n      };\n      var hitAreaStyle = {\n        position: 'absolute',\n        height: \"\".concat(hitAreaWidth, \"px\"),\n        width: \"\".concat(hitAreaWidth, \"px\"),\n        'border-radius': \"\".concat(parseInt(hitAreaWidth / 1.5, 10), \"px\")\n      };\n      objectEach(hitAreaStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottomRightHitArea[key] = value;\n        _this3.selectionHandles.styles.topLeftHitArea[key] = value;\n      });\n      var handleStyle = {\n        position: 'absolute',\n        height: \"\".concat(width, \"px\"),\n        width: \"\".concat(width, \"px\"),\n        'border-radius': \"\".concat(parseInt(width / 1.5, 10), \"px\"),\n        background: '#F5F5FF',\n        border: '1px solid #4285c8'\n      };\n      objectEach(handleStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottomRight[key] = value;\n        _this3.selectionHandles.styles.topLeft[key] = value;\n      });\n      this.main.appendChild(this.selectionHandles.topLeft);\n      this.main.appendChild(this.selectionHandles.bottomRight);\n      this.main.appendChild(this.selectionHandles.topLeftHitArea);\n      this.main.appendChild(this.selectionHandles.bottomRightHitArea);\n    }\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isPartRange\",\n    value: function isPartRange(row, col) {\n      var areaSelection = this.wot.selections.createOrGetArea();\n\n      if (areaSelection.cellRange) {\n        if (row !== areaSelection.cellRange.to.row || col !== areaSelection.cellRange.to.col) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @param {number} top The top position of the handler.\n     * @param {number} left The left position of the handler.\n     * @param {number} width The width of the handler.\n     * @param {number} height The height of the handler.\n     */\n\n  }, {\n    key: \"updateMultipleSelectionHandlesPosition\",\n    value: function updateMultipleSelectionHandlesPosition(row, col, top, left, width, height) {\n      var handleWidth = parseInt(this.selectionHandles.styles.topLeft.width, 10);\n      var hitAreaWidth = parseInt(this.selectionHandles.styles.topLeftHitArea.width, 10);\n      this.selectionHandles.styles.topLeft.top = \"\".concat(parseInt(top - handleWidth, 10), \"px\");\n      this.selectionHandles.styles.topLeft.left = \"\".concat(parseInt(left - handleWidth, 10), \"px\");\n      this.selectionHandles.styles.topLeftHitArea.top = \"\".concat(parseInt(top - hitAreaWidth / 4 * 3, 10), \"px\");\n      this.selectionHandles.styles.topLeftHitArea.left = \"\".concat(parseInt(left - hitAreaWidth / 4 * 3, 10), \"px\");\n      this.selectionHandles.styles.bottomRight.top = \"\".concat(parseInt(top + height, 10), \"px\");\n      this.selectionHandles.styles.bottomRight.left = \"\".concat(parseInt(left + width, 10), \"px\");\n      this.selectionHandles.styles.bottomRightHitArea.top = \"\".concat(parseInt(top + height - hitAreaWidth / 4, 10), \"px\");\n      this.selectionHandles.styles.bottomRightHitArea.left = \"\".concat(parseInt(left + width - hitAreaWidth / 4, 10), \"px\");\n\n      if (this.settings.border.cornerVisible && this.settings.border.cornerVisible()) {\n        this.selectionHandles.styles.topLeft.display = 'block';\n        this.selectionHandles.styles.topLeftHitArea.display = 'block';\n\n        if (this.isPartRange(row, col)) {\n          this.selectionHandles.styles.bottomRight.display = 'none';\n          this.selectionHandles.styles.bottomRightHitArea.display = 'none';\n        } else {\n          this.selectionHandles.styles.bottomRight.display = 'block';\n          this.selectionHandles.styles.bottomRightHitArea.display = 'block';\n        }\n      } else {\n        this.selectionHandles.styles.topLeft.display = 'none';\n        this.selectionHandles.styles.bottomRight.display = 'none';\n        this.selectionHandles.styles.topLeftHitArea.display = 'none';\n        this.selectionHandles.styles.bottomRightHitArea.display = 'none';\n      }\n\n      if (row === this.wot.wtSettings.getSetting('fixedRowsTop') || col === this.wot.wtSettings.getSetting('fixedColumnsLeft')) {\n        this.selectionHandles.styles.topLeft.zIndex = '9999';\n        this.selectionHandles.styles.topLeftHitArea.zIndex = '9999';\n      } else {\n        this.selectionHandles.styles.topLeft.zIndex = '';\n        this.selectionHandles.styles.topLeftHitArea.zIndex = '';\n      }\n    }\n    /**\n     * Show border around one or many cells.\n     *\n     * @param {Array} corners The corner coordinates.\n     */\n\n  }, {\n    key: \"appear\",\n    value: function appear(corners) {\n      if (this.disabled) {\n        return;\n      }\n\n      var _this$wot = this.wot,\n          wtTable = _this$wot.wtTable,\n          rootDocument = _this$wot.rootDocument,\n          rootWindow = _this$wot.rootWindow;\n      var fromRow;\n      var toRow;\n      var fromColumn;\n      var toColumn;\n      var rowHeader;\n      var columnHeader;\n      var rowsCount = wtTable.getRenderedRowsCount();\n\n      for (var i = 0; i < rowsCount; i += 1) {\n        var s = wtTable.rowFilter.renderedToSource(i);\n\n        if (s >= corners[0] && s <= corners[2]) {\n          fromRow = s;\n          rowHeader = corners[0];\n          break;\n        }\n      }\n\n      for (var _i = rowsCount - 1; _i >= 0; _i -= 1) {\n        var _s = wtTable.rowFilter.renderedToSource(_i);\n\n        if (_s >= corners[0] && _s <= corners[2]) {\n          toRow = _s;\n          break;\n        }\n      }\n\n      var columnsCount = wtTable.getRenderedColumnsCount();\n\n      for (var _i2 = 0; _i2 < columnsCount; _i2 += 1) {\n        var _s2 = wtTable.columnFilter.renderedToSource(_i2);\n\n        if (_s2 >= corners[1] && _s2 <= corners[3]) {\n          fromColumn = _s2;\n          columnHeader = corners[1];\n          break;\n        }\n      }\n\n      for (var _i3 = columnsCount - 1; _i3 >= 0; _i3 -= 1) {\n        var _s3 = wtTable.columnFilter.renderedToSource(_i3);\n\n        if (_s3 >= corners[1] && _s3 <= corners[3]) {\n          toColumn = _s3;\n          break;\n        }\n      }\n\n      if (fromRow === void 0 || fromColumn === void 0) {\n        this.disappear();\n        return;\n      }\n\n      var fromTD = wtTable.getCell(new CellCoords(fromRow, fromColumn));\n      var isMultiple = fromRow !== toRow || fromColumn !== toColumn;\n      var toTD = isMultiple ? wtTable.getCell(new CellCoords(toRow, toColumn)) : fromTD;\n      var fromOffset = offset(fromTD);\n      var toOffset = isMultiple ? offset(toTD) : fromOffset;\n      var containerOffset = offset(wtTable.TABLE);\n      var minTop = fromOffset.top;\n      var minLeft = fromOffset.left;\n      var left = minLeft - containerOffset.left - 1;\n      var width = toOffset.left + outerWidth(toTD) - minLeft;\n\n      if (this.isEntireColumnSelected(fromRow, toRow)) {\n        var modifiedValues = this.getDimensionsFromHeader('columns', fromColumn, toColumn, rowHeader, containerOffset);\n        var fromTH = null;\n\n        if (modifiedValues) {\n          var _modifiedValues = _slicedToArray(modifiedValues, 3);\n\n          fromTH = _modifiedValues[0];\n          left = _modifiedValues[1];\n          width = _modifiedValues[2];\n        }\n\n        if (fromTH) {\n          fromTD = fromTH;\n        }\n      }\n\n      var top = minTop - containerOffset.top - 1;\n      var height = toOffset.top + outerHeight(toTD) - minTop;\n\n      if (this.isEntireRowSelected(fromColumn, toColumn)) {\n        var _modifiedValues2 = this.getDimensionsFromHeader('rows', fromRow, toRow, columnHeader, containerOffset);\n\n        var _fromTH = null;\n\n        if (_modifiedValues2) {\n          var _modifiedValues3 = _slicedToArray(_modifiedValues2, 3);\n\n          _fromTH = _modifiedValues3[0];\n          top = _modifiedValues3[1];\n          height = _modifiedValues3[2];\n        }\n\n        if (_fromTH) {\n          fromTD = _fromTH;\n        }\n      }\n\n      var style = getComputedStyle(fromTD, rootWindow);\n\n      if (parseInt(style.borderTopWidth, 10) > 0) {\n        top += 1;\n        height = height > 0 ? height - 1 : 0;\n      }\n\n      if (parseInt(style.borderLeftWidth, 10) > 0) {\n        left += 1;\n        width = width > 0 ? width - 1 : 0;\n      }\n\n      this.topStyle.top = \"\".concat(top, \"px\");\n      this.topStyle.left = \"\".concat(left, \"px\");\n      this.topStyle.width = \"\".concat(width, \"px\");\n      this.topStyle.display = 'block';\n      this.leftStyle.top = \"\".concat(top, \"px\");\n      this.leftStyle.left = \"\".concat(left, \"px\");\n      this.leftStyle.height = \"\".concat(height, \"px\");\n      this.leftStyle.display = 'block';\n      var delta = Math.floor(this.settings.border.width / 2);\n      this.bottomStyle.top = \"\".concat(top + height - delta, \"px\");\n      this.bottomStyle.left = \"\".concat(left, \"px\");\n      this.bottomStyle.width = \"\".concat(width, \"px\");\n      this.bottomStyle.display = 'block';\n      this.rightStyle.top = \"\".concat(top, \"px\");\n      this.rightStyle.left = \"\".concat(left + width - delta, \"px\");\n      this.rightStyle.height = \"\".concat(height + 1, \"px\");\n      this.rightStyle.display = 'block';\n      var cornerVisibleSetting = this.settings.border.cornerVisible;\n      cornerVisibleSetting = typeof cornerVisibleSetting === 'function' ? cornerVisibleSetting(this.settings.layerLevel) : cornerVisibleSetting;\n      var hookResult = this.wot.getSetting('onModifyGetCellCoords', toRow, toColumn);\n      var checkRow = toRow,\n          checkCol = toColumn;\n\n      if (hookResult && Array.isArray(hookResult)) {\n        var _hookResult = _slicedToArray(hookResult, 4);\n\n        checkRow = _hookResult[2];\n        checkCol = _hookResult[3];\n      }\n\n      if (isMobileBrowser() || !cornerVisibleSetting || this.isPartRange(checkRow, checkCol)) {\n        this.cornerStyle.display = 'none';\n      } else {\n        this.cornerStyle.top = \"\".concat(top + height + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle.left = \"\".concat(left + width + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle.borderRightWidth = this.cornerDefaultStyle.borderWidth;\n        this.cornerStyle.width = this.cornerDefaultStyle.width; // Hide the fill handle, so the possible further adjustments won't force unneeded scrollbars.\n\n        this.cornerStyle.display = 'none';\n        var trimmingContainer = getTrimmingContainer(wtTable.TABLE);\n        var trimToWindow = trimmingContainer === rootWindow;\n\n        if (trimToWindow) {\n          trimmingContainer = rootDocument.documentElement;\n        }\n\n        if (toColumn === this.wot.getSetting('totalColumns') - 1) {\n          var toTdOffsetLeft = trimToWindow ? toTD.getBoundingClientRect().left : toTD.offsetLeft;\n          var cornerRightEdge = toTdOffsetLeft + outerWidth(toTD) + parseInt(this.cornerDefaultStyle.width, 10) / 2;\n          var cornerOverlappingContainer = cornerRightEdge >= innerWidth(trimmingContainer);\n\n          if (cornerOverlappingContainer) {\n            this.cornerStyle.left = \"\".concat(Math.floor(left + width + this.cornerCenterPointOffset - parseInt(this.cornerDefaultStyle.width, 10) / 2), \"px\"); // eslint-disable-line max-len\n\n            this.cornerStyle.borderRightWidth = 0;\n          }\n        }\n\n        if (toRow === this.wot.getSetting('totalRows') - 1) {\n          var toTdOffsetTop = trimToWindow ? toTD.getBoundingClientRect().top : toTD.offsetTop;\n          var cornerBottomEdge = toTdOffsetTop + outerHeight(toTD) + parseInt(this.cornerDefaultStyle.height, 10) / 2;\n\n          var _cornerOverlappingContainer = cornerBottomEdge >= innerHeight(trimmingContainer);\n\n          if (_cornerOverlappingContainer) {\n            this.cornerStyle.top = \"\".concat(Math.floor(top + height + this.cornerCenterPointOffset - parseInt(this.cornerDefaultStyle.height, 10) / 2), \"px\"); // eslint-disable-line max-len\n\n            this.cornerStyle.borderBottomWidth = 0;\n          }\n        }\n\n        this.cornerStyle.display = 'block';\n      }\n\n      if (isMobileBrowser()) {\n        this.updateMultipleSelectionHandlesPosition(toRow, toColumn, top, left, width, height);\n      }\n    }\n    /**\n     * Check whether an entire column of cells is selected.\n     *\n     * @private\n     * @param {number} startRowIndex Start row index.\n     * @param {number} endRowIndex End row index.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isEntireColumnSelected\",\n    value: function isEntireColumnSelected(startRowIndex, endRowIndex) {\n      return startRowIndex === this.wot.wtTable.getFirstRenderedRow() && endRowIndex === this.wot.wtTable.getLastRenderedRow();\n    }\n    /**\n     * Check whether an entire row of cells is selected.\n     *\n     * @private\n     * @param {number} startColumnIndex Start column index.\n     * @param {number} endColumnIndex End column index.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isEntireRowSelected\",\n    value: function isEntireRowSelected(startColumnIndex, endColumnIndex) {\n      return startColumnIndex === this.wot.wtTable.getFirstRenderedColumn() && endColumnIndex === this.wot.wtTable.getLastRenderedColumn();\n    }\n    /**\n     * Get left/top index and width/height depending on the `direction` provided.\n     *\n     * @private\n     * @param {string} direction `rows` or `columns`, defines if an entire column or row is selected.\n     * @param {number} fromIndex Start index of the selection.\n     * @param {number} toIndex End index of the selection.\n     * @param {number} headerIndex The header index as negative value.\n     * @param {number} containerOffset Offset of the container.\n     * @returns {Array|boolean} Returns an array of [headerElement, left, width] or [headerElement, top, height], depending on `direction` (`false` in case of an error getting the headers).\n     */\n\n  }, {\n    key: \"getDimensionsFromHeader\",\n    value: function getDimensionsFromHeader(direction, fromIndex, toIndex, headerIndex, containerOffset) {\n      var wtTable = this.wot.wtTable;\n      var rootHotElement = wtTable.wtRootElement.parentNode;\n      var getHeaderFn = null;\n      var dimensionFn = null;\n      var entireSelectionClassname = null;\n      var index = null;\n      var dimension = null;\n      var dimensionProperty = null;\n      var startHeader = null;\n      var endHeader = null;\n\n      switch (direction) {\n        case 'rows':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getRowHeader.apply(wtTable, arguments);\n          };\n\n          dimensionFn = function dimensionFn() {\n            return outerHeight.apply(void 0, arguments);\n          };\n\n          entireSelectionClassname = 'ht__selection--rows';\n          dimensionProperty = 'top';\n          break;\n\n        case 'columns':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getColumnHeader.apply(wtTable, arguments);\n          };\n\n          dimensionFn = function dimensionFn() {\n            return outerWidth.apply(void 0, arguments);\n          };\n\n          entireSelectionClassname = 'ht__selection--columns';\n          dimensionProperty = 'left';\n          break;\n\n        default:\n      }\n\n      if (rootHotElement.classList.contains(entireSelectionClassname)) {\n        var columnHeaderLevelCount = this.wot.getSetting('columnHeaders').length;\n        startHeader = getHeaderFn(fromIndex, columnHeaderLevelCount - headerIndex);\n        endHeader = getHeaderFn(toIndex, columnHeaderLevelCount - headerIndex);\n\n        if (!startHeader || !endHeader) {\n          return false;\n        }\n\n        var startHeaderOffset = offset(startHeader);\n        var endOffset = offset(endHeader);\n\n        if (startHeader && endHeader) {\n          index = startHeaderOffset[dimensionProperty] - containerOffset[dimensionProperty] - 1;\n          dimension = endOffset[dimensionProperty] + dimensionFn(endHeader) - startHeaderOffset[dimensionProperty];\n        }\n\n        return [startHeader, index, dimension];\n      }\n\n      return false;\n    }\n    /**\n     * Change border style.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, right, bottom, left.\n     * @param {object} border The border object descriptor.\n     */\n\n  }, {\n    key: \"changeBorderStyle\",\n    value: function changeBorderStyle(borderElement, border) {\n      var style = this[borderElement].style;\n      var borderStyle = border[borderElement];\n\n      if (!borderStyle || borderStyle.hide) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        if (hasClass(this[borderElement], 'hidden')) {\n          removeClass(this[borderElement], 'hidden');\n        }\n\n        style.backgroundColor = borderStyle.color;\n\n        if (borderElement === 'top' || borderElement === 'bottom') {\n          style.height = \"\".concat(borderStyle.width, \"px\");\n        }\n\n        if (borderElement === 'right' || borderElement === 'left') {\n          style.width = \"\".concat(borderStyle.width, \"px\");\n        }\n      }\n    }\n    /**\n     * Change border style to default.\n     *\n     * @private\n     * @param {string} position The position type (\"top\", \"bottom\", \"left\", \"right\") to change.\n     */\n\n  }, {\n    key: \"changeBorderToDefaultStyle\",\n    value: function changeBorderToDefaultStyle(position) {\n      var defaultBorder = {\n        width: 1,\n        color: '#000'\n      };\n      var style = this[position].style;\n      style.backgroundColor = defaultBorder.color;\n      style.width = \"\".concat(defaultBorder.width, \"px\");\n      style.height = \"\".concat(defaultBorder.width, \"px\");\n    }\n    /**\n     * Toggle class 'hidden' to element.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, right, bottom, left.\n     * @param {boolean} [remove] Defines type of the action to perform.\n     */\n\n  }, {\n    key: \"toggleHiddenClass\",\n    value: function toggleHiddenClass(borderElement, remove) {\n      this.changeBorderToDefaultStyle(borderElement);\n\n      if (remove) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        removeClass(this[borderElement], 'hidden');\n      }\n    }\n    /**\n     * Hide border.\n     */\n\n  }, {\n    key: \"disappear\",\n    value: function disappear() {\n      this.topStyle.display = 'none';\n      this.leftStyle.display = 'none';\n      this.bottomStyle.display = 'none';\n      this.rightStyle.display = 'none';\n      this.cornerStyle.display = 'none';\n\n      if (isMobileBrowser()) {\n        this.selectionHandles.styles.topLeft.display = 'none';\n        this.selectionHandles.styles.bottomRight.display = 'none';\n      }\n    }\n    /**\n     * Cleans up all the DOM state related to a Border instance. Call this prior to deleting a Border instance.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.eventManager.destroyWithOwnEventsOnly();\n      this.main.parentNode.removeChild(this.main);\n    }\n  }]);\n\n  return Border;\n}();\n\nexport default Border;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/handsontable/3rdparty/walkontable/src/border.mjs"],"names":["_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_arr","_n","_d","_s","_e","next","done","push","value","err","isArray","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","addClass","hasClass","removeClass","getComputedStyle","getTrimmingContainer","innerWidth","innerHeight","offset","outerHeight","outerWidth","stopImmediatePropagation","objectEach","isMobileBrowser","EventManager","CellCoords","Border","wotInstance","settings","eventManager","wot","mouseDown","main","top","left","bottom","right","topStyle","leftStyle","bottomStyle","rightStyle","cornerDefaultStyle","width","height","borderWidth","borderStyle","borderColor","cornerCenterPointOffset","parseInt","corner","cornerStyle","createBorders","registerListeners","_this2","documentBody","rootDocument","body","addEventListener","onMouseDown","onMouseUp","_loop","c","element","childNodes","event","onMouseEnter","parentElement","getSetting","preventDefault","_this","bounds","getBoundingClientRect","style","display","isOutside","mouseEvent","clientY","Math","floor","ceil","clientX","handler","handlerEvent","removeEventListener","createElement","borderDivs","position","div","className","concat","hide","backgroundColor","color","border","appendChild","join","createMultipleSelectorHandles","disappear","wtTable","bordersHolder","spreader","_this3","selectionHandles","topLeft","topLeftHitArea","bottomRight","bottomRightHitArea","hitAreaWidth","styles","hitAreaStyle","handleStyle","background","isPartRange","row","col","areaSelection","selections","createOrGetArea","cellRange","to","updateMultipleSelectionHandlesPosition","handleWidth","cornerVisible","wtSettings","zIndex","appear","corners","disabled","_this$wot","rootWindow","fromRow","toRow","fromColumn","toColumn","rowHeader","columnHeader","rowsCount","getRenderedRowsCount","s","rowFilter","renderedToSource","columnsCount","getRenderedColumnsCount","_i2","_s2","columnFilter","_i3","_s3","fromTD","getCell","isMultiple","toTD","fromOffset","toOffset","containerOffset","TABLE","minTop","minLeft","isEntireColumnSelected","modifiedValues","getDimensionsFromHeader","fromTH","_modifiedValues","isEntireRowSelected","_modifiedValues2","_fromTH","_modifiedValues3","borderTopWidth","borderLeftWidth","delta","cornerVisibleSetting","layerLevel","hookResult","checkRow","checkCol","_hookResult","borderRightWidth","trimmingContainer","trimToWindow","documentElement","toTdOffsetLeft","offsetLeft","cornerRightEdge","cornerOverlappingContainer","toTdOffsetTop","offsetTop","cornerBottomEdge","_cornerOverlappingContainer","borderBottomWidth","startRowIndex","endRowIndex","getFirstRenderedRow","getLastRenderedRow","startColumnIndex","endColumnIndex","getFirstRenderedColumn","getLastRenderedColumn","direction","fromIndex","toIndex","headerIndex","rootHotElement","wtRootElement","parentNode","getHeaderFn","dimensionFn","entireSelectionClassname","index","dimension","dimensionProperty","startHeader","endHeader","getRowHeader","apply","arguments","getColumnHeader","classList","contains","columnHeaderLevelCount","startHeaderOffset","endOffset","changeBorderStyle","borderElement","changeBorderToDefaultStyle","defaultBorder","toggleHiddenClass","remove","destroy","destroyWithOwnEventsOnly","removeChild"],"mappings":"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","sourcesContent":["function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { addClass, hasClass, removeClass, getComputedStyle, getTrimmingContainer, innerWidth, innerHeight, offset, outerHeight, outerWidth } from \"./../../../helpers/dom/element.mjs\";\nimport { stopImmediatePropagation } from \"./../../../helpers/dom/event.mjs\";\nimport { objectEach } from \"./../../../helpers/object.mjs\";\nimport { isMobileBrowser } from \"./../../../helpers/browser.mjs\";\nimport EventManager from \"./../../../eventManager.mjs\";\nimport CellCoords from \"./cell/coords.mjs\";\n/**\n *\n */\n\nvar Border = /*#__PURE__*/function () {\n  /**\n   * @param {Walkontable} wotInstance The Walkontable instance.\n   * @param {object} settings The border settings.\n   */\n  function Border(wotInstance, settings) {\n    _classCallCheck(this, Border);\n\n    if (!settings) {\n      return;\n    }\n\n    this.eventManager = new EventManager(wotInstance);\n    this.instance = wotInstance;\n    this.wot = wotInstance;\n    this.settings = settings;\n    this.mouseDown = false;\n    this.main = null;\n    this.top = null;\n    this.left = null;\n    this.bottom = null;\n    this.right = null;\n    this.topStyle = null;\n    this.leftStyle = null;\n    this.bottomStyle = null;\n    this.rightStyle = null;\n    this.cornerDefaultStyle = {\n      width: '6px',\n      height: '6px',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#FFF'\n    }; // Offset to moving the corner to be centered relative to the grid.\n\n    this.cornerCenterPointOffset = -(parseInt(this.cornerDefaultStyle.width, 10) / 2);\n    this.corner = null;\n    this.cornerStyle = null;\n    this.createBorders(settings);\n    this.registerListeners();\n  }\n  /**\n   * Register all necessary events.\n   */\n\n\n  _createClass(Border, [{\n    key: \"registerListeners\",\n    value: function registerListeners() {\n      var _this2 = this;\n\n      var documentBody = this.wot.rootDocument.body;\n      this.eventManager.addEventListener(documentBody, 'mousedown', function () {\n        return _this2.onMouseDown();\n      });\n      this.eventManager.addEventListener(documentBody, 'mouseup', function () {\n        return _this2.onMouseUp();\n      });\n\n      var _loop = function _loop(c, len) {\n        var element = _this2.main.childNodes[c];\n\n        _this2.eventManager.addEventListener(element, 'mouseenter', function (event) {\n          return _this2.onMouseEnter(event, _this2.main.childNodes[c]);\n        });\n      };\n\n      for (var c = 0, len = this.main.childNodes.length; c < len; c++) {\n        _loop(c, len);\n      }\n    }\n    /**\n     * Mouse down listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown() {\n      this.mouseDown = true;\n    }\n    /**\n     * Mouse up listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onMouseUp\",\n    value: function onMouseUp() {\n      this.mouseDown = false;\n    }\n    /**\n     * Mouse enter listener for fragment selection functionality.\n     *\n     * @private\n     * @param {Event} event Dom event.\n     * @param {HTMLElement} parentElement Part of border element.\n     */\n\n  }, {\n    key: \"onMouseEnter\",\n    value: function onMouseEnter(event, parentElement) {\n      if (!this.mouseDown || !this.wot.getSetting('hideBorderOnMouseDownOver')) {\n        return;\n      }\n\n      event.preventDefault();\n      stopImmediatePropagation(event);\n\n      var _this = this;\n\n      var documentBody = this.wot.rootDocument.body;\n      var bounds = parentElement.getBoundingClientRect(); // Hide border to prevents selection jumping when fragmentSelection is enabled.\n\n      parentElement.style.display = 'none';\n      /**\n       * @param {Event} mouseEvent The mouse event object.\n       * @returns {boolean}\n       */\n\n      function isOutside(mouseEvent) {\n        if (mouseEvent.clientY < Math.floor(bounds.top)) {\n          return true;\n        }\n\n        if (mouseEvent.clientY > Math.ceil(bounds.top + bounds.height)) {\n          return true;\n        }\n\n        if (mouseEvent.clientX < Math.floor(bounds.left)) {\n          return true;\n        }\n\n        if (mouseEvent.clientX > Math.ceil(bounds.left + bounds.width)) {\n          return true;\n        }\n      }\n      /**\n       * @param {Event} handlerEvent The mouse event object.\n       */\n\n\n      function handler(handlerEvent) {\n        if (isOutside(handlerEvent)) {\n          _this.eventManager.removeEventListener(documentBody, 'mousemove', handler);\n\n          parentElement.style.display = 'block';\n        }\n      }\n\n      this.eventManager.addEventListener(documentBody, 'mousemove', handler);\n    }\n    /**\n     * Create border elements.\n     *\n     * @param {object} settings The border settings.\n     */\n\n  }, {\n    key: \"createBorders\",\n    value: function createBorders(settings) {\n      var rootDocument = this.wot.rootDocument;\n      this.main = rootDocument.createElement('div');\n      var borderDivs = ['top', 'left', 'bottom', 'right', 'corner'];\n      var style = this.main.style;\n      style.position = 'absolute';\n      style.top = 0;\n      style.left = 0;\n\n      for (var i = 0; i < 5; i++) {\n        var position = borderDivs[i];\n        var div = rootDocument.createElement('div');\n        div.className = \"wtBorder \".concat(this.settings.className || ''); // + borderDivs[i];\n\n        if (this.settings[position] && this.settings[position].hide) {\n          div.className += ' hidden';\n        }\n\n        style = div.style;\n        style.backgroundColor = this.settings[position] && this.settings[position].color ? this.settings[position].color : settings.border.color;\n        style.height = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        style.width = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        this.main.appendChild(div);\n      }\n\n      this.top = this.main.childNodes[0];\n      this.left = this.main.childNodes[1];\n      this.bottom = this.main.childNodes[2];\n      this.right = this.main.childNodes[3];\n      this.topStyle = this.top.style;\n      this.leftStyle = this.left.style;\n      this.bottomStyle = this.bottom.style;\n      this.rightStyle = this.right.style;\n      this.corner = this.main.childNodes[4];\n      this.corner.className += ' corner';\n      this.cornerStyle = this.corner.style;\n      this.cornerStyle.width = this.cornerDefaultStyle.width;\n      this.cornerStyle.height = this.cornerDefaultStyle.height;\n      this.cornerStyle.border = [this.cornerDefaultStyle.borderWidth, this.cornerDefaultStyle.borderStyle, this.cornerDefaultStyle.borderColor].join(' ');\n\n      if (isMobileBrowser()) {\n        this.createMultipleSelectorHandles();\n      }\n\n      this.disappear();\n      var wtTable = this.wot.wtTable;\n      var bordersHolder = wtTable.bordersHolder;\n\n      if (!bordersHolder) {\n        bordersHolder = rootDocument.createElement('div');\n        bordersHolder.className = 'htBorders';\n        wtTable.bordersHolder = bordersHolder;\n        wtTable.spreader.appendChild(bordersHolder);\n      }\n\n      bordersHolder.appendChild(this.main);\n    }\n    /**\n     * Create multiple selector handler for mobile devices.\n     */\n\n  }, {\n    key: \"createMultipleSelectorHandles\",\n    value: function createMultipleSelectorHandles() {\n      var _this3 = this;\n\n      var rootDocument = this.wot.rootDocument;\n      this.selectionHandles = {\n        topLeft: rootDocument.createElement('DIV'),\n        topLeftHitArea: rootDocument.createElement('DIV'),\n        bottomRight: rootDocument.createElement('DIV'),\n        bottomRightHitArea: rootDocument.createElement('DIV')\n      };\n      var width = 10;\n      var hitAreaWidth = 40;\n      this.selectionHandles.topLeft.className = 'topLeftSelectionHandle';\n      this.selectionHandles.topLeftHitArea.className = 'topLeftSelectionHandle-HitArea';\n      this.selectionHandles.bottomRight.className = 'bottomRightSelectionHandle';\n      this.selectionHandles.bottomRightHitArea.className = 'bottomRightSelectionHandle-HitArea';\n      this.selectionHandles.styles = {\n        topLeft: this.selectionHandles.topLeft.style,\n        topLeftHitArea: this.selectionHandles.topLeftHitArea.style,\n        bottomRight: this.selectionHandles.bottomRight.style,\n        bottomRightHitArea: this.selectionHandles.bottomRightHitArea.style\n      };\n      var hitAreaStyle = {\n        position: 'absolute',\n        height: \"\".concat(hitAreaWidth, \"px\"),\n        width: \"\".concat(hitAreaWidth, \"px\"),\n        'border-radius': \"\".concat(parseInt(hitAreaWidth / 1.5, 10), \"px\")\n      };\n      objectEach(hitAreaStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottomRightHitArea[key] = value;\n        _this3.selectionHandles.styles.topLeftHitArea[key] = value;\n      });\n      var handleStyle = {\n        position: 'absolute',\n        height: \"\".concat(width, \"px\"),\n        width: \"\".concat(width, \"px\"),\n        'border-radius': \"\".concat(parseInt(width / 1.5, 10), \"px\"),\n        background: '#F5F5FF',\n        border: '1px solid #4285c8'\n      };\n      objectEach(handleStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottomRight[key] = value;\n        _this3.selectionHandles.styles.topLeft[key] = value;\n      });\n      this.main.appendChild(this.selectionHandles.topLeft);\n      this.main.appendChild(this.selectionHandles.bottomRight);\n      this.main.appendChild(this.selectionHandles.topLeftHitArea);\n      this.main.appendChild(this.selectionHandles.bottomRightHitArea);\n    }\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isPartRange\",\n    value: function isPartRange(row, col) {\n      var areaSelection = this.wot.selections.createOrGetArea();\n\n      if (areaSelection.cellRange) {\n        if (row !== areaSelection.cellRange.to.row || col !== areaSelection.cellRange.to.col) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @param {number} top The top position of the handler.\n     * @param {number} left The left position of the handler.\n     * @param {number} width The width of the handler.\n     * @param {number} height The height of the handler.\n     */\n\n  }, {\n    key: \"updateMultipleSelectionHandlesPosition\",\n    value: function updateMultipleSelectionHandlesPosition(row, col, top, left, width, height) {\n      var handleWidth = parseInt(this.selectionHandles.styles.topLeft.width, 10);\n      var hitAreaWidth = parseInt(this.selectionHandles.styles.topLeftHitArea.width, 10);\n      this.selectionHandles.styles.topLeft.top = \"\".concat(parseInt(top - handleWidth, 10), \"px\");\n      this.selectionHandles.styles.topLeft.left = \"\".concat(parseInt(left - handleWidth, 10), \"px\");\n      this.selectionHandles.styles.topLeftHitArea.top = \"\".concat(parseInt(top - hitAreaWidth / 4 * 3, 10), \"px\");\n      this.selectionHandles.styles.topLeftHitArea.left = \"\".concat(parseInt(left - hitAreaWidth / 4 * 3, 10), \"px\");\n      this.selectionHandles.styles.bottomRight.top = \"\".concat(parseInt(top + height, 10), \"px\");\n      this.selectionHandles.styles.bottomRight.left = \"\".concat(parseInt(left + width, 10), \"px\");\n      this.selectionHandles.styles.bottomRightHitArea.top = \"\".concat(parseInt(top + height - hitAreaWidth / 4, 10), \"px\");\n      this.selectionHandles.styles.bottomRightHitArea.left = \"\".concat(parseInt(left + width - hitAreaWidth / 4, 10), \"px\");\n\n      if (this.settings.border.cornerVisible && this.settings.border.cornerVisible()) {\n        this.selectionHandles.styles.topLeft.display = 'block';\n        this.selectionHandles.styles.topLeftHitArea.display = 'block';\n\n        if (this.isPartRange(row, col)) {\n          this.selectionHandles.styles.bottomRight.display = 'none';\n          this.selectionHandles.styles.bottomRightHitArea.display = 'none';\n        } else {\n          this.selectionHandles.styles.bottomRight.display = 'block';\n          this.selectionHandles.styles.bottomRightHitArea.display = 'block';\n        }\n      } else {\n        this.selectionHandles.styles.topLeft.display = 'none';\n        this.selectionHandles.styles.bottomRight.display = 'none';\n        this.selectionHandles.styles.topLeftHitArea.display = 'none';\n        this.selectionHandles.styles.bottomRightHitArea.display = 'none';\n      }\n\n      if (row === this.wot.wtSettings.getSetting('fixedRowsTop') || col === this.wot.wtSettings.getSetting('fixedColumnsLeft')) {\n        this.selectionHandles.styles.topLeft.zIndex = '9999';\n        this.selectionHandles.styles.topLeftHitArea.zIndex = '9999';\n      } else {\n        this.selectionHandles.styles.topLeft.zIndex = '';\n        this.selectionHandles.styles.topLeftHitArea.zIndex = '';\n      }\n    }\n    /**\n     * Show border around one or many cells.\n     *\n     * @param {Array} corners The corner coordinates.\n     */\n\n  }, {\n    key: \"appear\",\n    value: function appear(corners) {\n      if (this.disabled) {\n        return;\n      }\n\n      var _this$wot = this.wot,\n          wtTable = _this$wot.wtTable,\n          rootDocument = _this$wot.rootDocument,\n          rootWindow = _this$wot.rootWindow;\n      var fromRow;\n      var toRow;\n      var fromColumn;\n      var toColumn;\n      var rowHeader;\n      var columnHeader;\n      var rowsCount = wtTable.getRenderedRowsCount();\n\n      for (var i = 0; i < rowsCount; i += 1) {\n        var s = wtTable.rowFilter.renderedToSource(i);\n\n        if (s >= corners[0] && s <= corners[2]) {\n          fromRow = s;\n          rowHeader = corners[0];\n          break;\n        }\n      }\n\n      for (var _i = rowsCount - 1; _i >= 0; _i -= 1) {\n        var _s = wtTable.rowFilter.renderedToSource(_i);\n\n        if (_s >= corners[0] && _s <= corners[2]) {\n          toRow = _s;\n          break;\n        }\n      }\n\n      var columnsCount = wtTable.getRenderedColumnsCount();\n\n      for (var _i2 = 0; _i2 < columnsCount; _i2 += 1) {\n        var _s2 = wtTable.columnFilter.renderedToSource(_i2);\n\n        if (_s2 >= corners[1] && _s2 <= corners[3]) {\n          fromColumn = _s2;\n          columnHeader = corners[1];\n          break;\n        }\n      }\n\n      for (var _i3 = columnsCount - 1; _i3 >= 0; _i3 -= 1) {\n        var _s3 = wtTable.columnFilter.renderedToSource(_i3);\n\n        if (_s3 >= corners[1] && _s3 <= corners[3]) {\n          toColumn = _s3;\n          break;\n        }\n      }\n\n      if (fromRow === void 0 || fromColumn === void 0) {\n        this.disappear();\n        return;\n      }\n\n      var fromTD = wtTable.getCell(new CellCoords(fromRow, fromColumn));\n      var isMultiple = fromRow !== toRow || fromColumn !== toColumn;\n      var toTD = isMultiple ? wtTable.getCell(new CellCoords(toRow, toColumn)) : fromTD;\n      var fromOffset = offset(fromTD);\n      var toOffset = isMultiple ? offset(toTD) : fromOffset;\n      var containerOffset = offset(wtTable.TABLE);\n      var minTop = fromOffset.top;\n      var minLeft = fromOffset.left;\n      var left = minLeft - containerOffset.left - 1;\n      var width = toOffset.left + outerWidth(toTD) - minLeft;\n\n      if (this.isEntireColumnSelected(fromRow, toRow)) {\n        var modifiedValues = this.getDimensionsFromHeader('columns', fromColumn, toColumn, rowHeader, containerOffset);\n        var fromTH = null;\n\n        if (modifiedValues) {\n          var _modifiedValues = _slicedToArray(modifiedValues, 3);\n\n          fromTH = _modifiedValues[0];\n          left = _modifiedValues[1];\n          width = _modifiedValues[2];\n        }\n\n        if (fromTH) {\n          fromTD = fromTH;\n        }\n      }\n\n      var top = minTop - containerOffset.top - 1;\n      var height = toOffset.top + outerHeight(toTD) - minTop;\n\n      if (this.isEntireRowSelected(fromColumn, toColumn)) {\n        var _modifiedValues2 = this.getDimensionsFromHeader('rows', fromRow, toRow, columnHeader, containerOffset);\n\n        var _fromTH = null;\n\n        if (_modifiedValues2) {\n          var _modifiedValues3 = _slicedToArray(_modifiedValues2, 3);\n\n          _fromTH = _modifiedValues3[0];\n          top = _modifiedValues3[1];\n          height = _modifiedValues3[2];\n        }\n\n        if (_fromTH) {\n          fromTD = _fromTH;\n        }\n      }\n\n      var style = getComputedStyle(fromTD, rootWindow);\n\n      if (parseInt(style.borderTopWidth, 10) > 0) {\n        top += 1;\n        height = height > 0 ? height - 1 : 0;\n      }\n\n      if (parseInt(style.borderLeftWidth, 10) > 0) {\n        left += 1;\n        width = width > 0 ? width - 1 : 0;\n      }\n\n      this.topStyle.top = \"\".concat(top, \"px\");\n      this.topStyle.left = \"\".concat(left, \"px\");\n      this.topStyle.width = \"\".concat(width, \"px\");\n      this.topStyle.display = 'block';\n      this.leftStyle.top = \"\".concat(top, \"px\");\n      this.leftStyle.left = \"\".concat(left, \"px\");\n      this.leftStyle.height = \"\".concat(height, \"px\");\n      this.leftStyle.display = 'block';\n      var delta = Math.floor(this.settings.border.width / 2);\n      this.bottomStyle.top = \"\".concat(top + height - delta, \"px\");\n      this.bottomStyle.left = \"\".concat(left, \"px\");\n      this.bottomStyle.width = \"\".concat(width, \"px\");\n      this.bottomStyle.display = 'block';\n      this.rightStyle.top = \"\".concat(top, \"px\");\n      this.rightStyle.left = \"\".concat(left + width - delta, \"px\");\n      this.rightStyle.height = \"\".concat(height + 1, \"px\");\n      this.rightStyle.display = 'block';\n      var cornerVisibleSetting = this.settings.border.cornerVisible;\n      cornerVisibleSetting = typeof cornerVisibleSetting === 'function' ? cornerVisibleSetting(this.settings.layerLevel) : cornerVisibleSetting;\n      var hookResult = this.wot.getSetting('onModifyGetCellCoords', toRow, toColumn);\n      var checkRow = toRow,\n          checkCol = toColumn;\n\n      if (hookResult && Array.isArray(hookResult)) {\n        var _hookResult = _slicedToArray(hookResult, 4);\n\n        checkRow = _hookResult[2];\n        checkCol = _hookResult[3];\n      }\n\n      if (isMobileBrowser() || !cornerVisibleSetting || this.isPartRange(checkRow, checkCol)) {\n        this.cornerStyle.display = 'none';\n      } else {\n        this.cornerStyle.top = \"\".concat(top + height + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle.left = \"\".concat(left + width + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle.borderRightWidth = this.cornerDefaultStyle.borderWidth;\n        this.cornerStyle.width = this.cornerDefaultStyle.width; // Hide the fill handle, so the possible further adjustments won't force unneeded scrollbars.\n\n        this.cornerStyle.display = 'none';\n        var trimmingContainer = getTrimmingContainer(wtTable.TABLE);\n        var trimToWindow = trimmingContainer === rootWindow;\n\n        if (trimToWindow) {\n          trimmingContainer = rootDocument.documentElement;\n        }\n\n        if (toColumn === this.wot.getSetting('totalColumns') - 1) {\n          var toTdOffsetLeft = trimToWindow ? toTD.getBoundingClientRect().left : toTD.offsetLeft;\n          var cornerRightEdge = toTdOffsetLeft + outerWidth(toTD) + parseInt(this.cornerDefaultStyle.width, 10) / 2;\n          var cornerOverlappingContainer = cornerRightEdge >= innerWidth(trimmingContainer);\n\n          if (cornerOverlappingContainer) {\n            this.cornerStyle.left = \"\".concat(Math.floor(left + width + this.cornerCenterPointOffset - parseInt(this.cornerDefaultStyle.width, 10) / 2), \"px\"); // eslint-disable-line max-len\n\n            this.cornerStyle.borderRightWidth = 0;\n          }\n        }\n\n        if (toRow === this.wot.getSetting('totalRows') - 1) {\n          var toTdOffsetTop = trimToWindow ? toTD.getBoundingClientRect().top : toTD.offsetTop;\n          var cornerBottomEdge = toTdOffsetTop + outerHeight(toTD) + parseInt(this.cornerDefaultStyle.height, 10) / 2;\n\n          var _cornerOverlappingContainer = cornerBottomEdge >= innerHeight(trimmingContainer);\n\n          if (_cornerOverlappingContainer) {\n            this.cornerStyle.top = \"\".concat(Math.floor(top + height + this.cornerCenterPointOffset - parseInt(this.cornerDefaultStyle.height, 10) / 2), \"px\"); // eslint-disable-line max-len\n\n            this.cornerStyle.borderBottomWidth = 0;\n          }\n        }\n\n        this.cornerStyle.display = 'block';\n      }\n\n      if (isMobileBrowser()) {\n        this.updateMultipleSelectionHandlesPosition(toRow, toColumn, top, left, width, height);\n      }\n    }\n    /**\n     * Check whether an entire column of cells is selected.\n     *\n     * @private\n     * @param {number} startRowIndex Start row index.\n     * @param {number} endRowIndex End row index.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isEntireColumnSelected\",\n    value: function isEntireColumnSelected(startRowIndex, endRowIndex) {\n      return startRowIndex === this.wot.wtTable.getFirstRenderedRow() && endRowIndex === this.wot.wtTable.getLastRenderedRow();\n    }\n    /**\n     * Check whether an entire row of cells is selected.\n     *\n     * @private\n     * @param {number} startColumnIndex Start column index.\n     * @param {number} endColumnIndex End column index.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isEntireRowSelected\",\n    value: function isEntireRowSelected(startColumnIndex, endColumnIndex) {\n      return startColumnIndex === this.wot.wtTable.getFirstRenderedColumn() && endColumnIndex === this.wot.wtTable.getLastRenderedColumn();\n    }\n    /**\n     * Get left/top index and width/height depending on the `direction` provided.\n     *\n     * @private\n     * @param {string} direction `rows` or `columns`, defines if an entire column or row is selected.\n     * @param {number} fromIndex Start index of the selection.\n     * @param {number} toIndex End index of the selection.\n     * @param {number} headerIndex The header index as negative value.\n     * @param {number} containerOffset Offset of the container.\n     * @returns {Array|boolean} Returns an array of [headerElement, left, width] or [headerElement, top, height], depending on `direction` (`false` in case of an error getting the headers).\n     */\n\n  }, {\n    key: \"getDimensionsFromHeader\",\n    value: function getDimensionsFromHeader(direction, fromIndex, toIndex, headerIndex, containerOffset) {\n      var wtTable = this.wot.wtTable;\n      var rootHotElement = wtTable.wtRootElement.parentNode;\n      var getHeaderFn = null;\n      var dimensionFn = null;\n      var entireSelectionClassname = null;\n      var index = null;\n      var dimension = null;\n      var dimensionProperty = null;\n      var startHeader = null;\n      var endHeader = null;\n\n      switch (direction) {\n        case 'rows':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getRowHeader.apply(wtTable, arguments);\n          };\n\n          dimensionFn = function dimensionFn() {\n            return outerHeight.apply(void 0, arguments);\n          };\n\n          entireSelectionClassname = 'ht__selection--rows';\n          dimensionProperty = 'top';\n          break;\n\n        case 'columns':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getColumnHeader.apply(wtTable, arguments);\n          };\n\n          dimensionFn = function dimensionFn() {\n            return outerWidth.apply(void 0, arguments);\n          };\n\n          entireSelectionClassname = 'ht__selection--columns';\n          dimensionProperty = 'left';\n          break;\n\n        default:\n      }\n\n      if (rootHotElement.classList.contains(entireSelectionClassname)) {\n        var columnHeaderLevelCount = this.wot.getSetting('columnHeaders').length;\n        startHeader = getHeaderFn(fromIndex, columnHeaderLevelCount - headerIndex);\n        endHeader = getHeaderFn(toIndex, columnHeaderLevelCount - headerIndex);\n\n        if (!startHeader || !endHeader) {\n          return false;\n        }\n\n        var startHeaderOffset = offset(startHeader);\n        var endOffset = offset(endHeader);\n\n        if (startHeader && endHeader) {\n          index = startHeaderOffset[dimensionProperty] - containerOffset[dimensionProperty] - 1;\n          dimension = endOffset[dimensionProperty] + dimensionFn(endHeader) - startHeaderOffset[dimensionProperty];\n        }\n\n        return [startHeader, index, dimension];\n      }\n\n      return false;\n    }\n    /**\n     * Change border style.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, right, bottom, left.\n     * @param {object} border The border object descriptor.\n     */\n\n  }, {\n    key: \"changeBorderStyle\",\n    value: function changeBorderStyle(borderElement, border) {\n      var style = this[borderElement].style;\n      var borderStyle = border[borderElement];\n\n      if (!borderStyle || borderStyle.hide) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        if (hasClass(this[borderElement], 'hidden')) {\n          removeClass(this[borderElement], 'hidden');\n        }\n\n        style.backgroundColor = borderStyle.color;\n\n        if (borderElement === 'top' || borderElement === 'bottom') {\n          style.height = \"\".concat(borderStyle.width, \"px\");\n        }\n\n        if (borderElement === 'right' || borderElement === 'left') {\n          style.width = \"\".concat(borderStyle.width, \"px\");\n        }\n      }\n    }\n    /**\n     * Change border style to default.\n     *\n     * @private\n     * @param {string} position The position type (\"top\", \"bottom\", \"left\", \"right\") to change.\n     */\n\n  }, {\n    key: \"changeBorderToDefaultStyle\",\n    value: function changeBorderToDefaultStyle(position) {\n      var defaultBorder = {\n        width: 1,\n        color: '#000'\n      };\n      var style = this[position].style;\n      style.backgroundColor = defaultBorder.color;\n      style.width = \"\".concat(defaultBorder.width, \"px\");\n      style.height = \"\".concat(defaultBorder.width, \"px\");\n    }\n    /**\n     * Toggle class 'hidden' to element.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, right, bottom, left.\n     * @param {boolean} [remove] Defines type of the action to perform.\n     */\n\n  }, {\n    key: \"toggleHiddenClass\",\n    value: function toggleHiddenClass(borderElement, remove) {\n      this.changeBorderToDefaultStyle(borderElement);\n\n      if (remove) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        removeClass(this[borderElement], 'hidden');\n      }\n    }\n    /**\n     * Hide border.\n     */\n\n  }, {\n    key: \"disappear\",\n    value: function disappear() {\n      this.topStyle.display = 'none';\n      this.leftStyle.display = 'none';\n      this.bottomStyle.display = 'none';\n      this.rightStyle.display = 'none';\n      this.cornerStyle.display = 'none';\n\n      if (isMobileBrowser()) {\n        this.selectionHandles.styles.topLeft.display = 'none';\n        this.selectionHandles.styles.bottomRight.display = 'none';\n      }\n    }\n    /**\n     * Cleans up all the DOM state related to a Border instance. Call this prior to deleting a Border instance.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.eventManager.destroyWithOwnEventsOnly();\n      this.main.parentNode.removeChild(this.main);\n    }\n  }]);\n\n  return Border;\n}();\n\nexport default Border;"]},"metadata":{},"sourceType":"module"}