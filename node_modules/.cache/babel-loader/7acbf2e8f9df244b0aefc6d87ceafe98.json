{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'antd/dist/antd.css';import{HotTable}from'@handsontable/react';import'handsontable/dist/handsontable.full.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ElecExcelEdit=/*#__PURE__*/function(_React$Component){_inherits(ElecExcelEdit,_React$Component);var _super=_createSuper(ElecExcelEdit);function ElecExcelEdit(){var _this;_classCallCheck(this,ElecExcelEdit);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={searchText:'',searchedColumn:'',data:[],tab:_this.props.currentTab,selectedRows:[],selectedRowsKeys:[],updateData:_this.props.updateData,username:\"\",acronyms:null,steps:[],areas:[],types:[]};return _this;}_createClass(ElecExcelEdit,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var options;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/elecsEstimatedExcel\",options).then(function(response){return response.json();}).then(function(json){var rows=[];var row=null;rows.push({\"Area\":\"Area\",\"Type\":\"Type\",\"Quantity\":\"Quantity\"});for(var i=0;i<json.rows.length;i++){row={\"Area\":json.rows[i].area,\"Type\":json.rows[i].type,\"Quantity\":json.rows[i].quantity,id:json.rows[i].id};rows.push(row);}_this2.setState({data:rows,selectedRows:[]});});fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/areas\",options).then(function(response){return response.json();}).then(function(json){var areas_options=[];for(var i=0;i<json.length;i++){areas_options.push(json[i].name);}_this2.setState({areas:areas_options});});fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/electrical/types\",options).then(function(response){return response.json();}).then(function(json){var types_options=[];for(var i=0;i<json.rows.length;i++){types_options.push(json.rows[i].name);}_this2.setState({types:types_options});});case 4:case\"end\":return _context.stop();}}},_callee);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"addRow\",value:function addRow(){var rows=this.state.data;rows.push({\"Area\":\"\",\"Type\":\"\",\"Quantity\":\"\"});this.setState({data:rows});}},{key:\"submitChanges\",value:function submitChanges(){var body={rows:this.state.data};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/submit/electrical/estimated\",options).then(function(response){return response.json();}).then(function(json){});this.props.success();}},{key:\"render\",value:function render(){var _this3=this;var settings={licenseKey:'non-commercial-and-evaluation',colWidths:400//... other options\n};return/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"12%\"},children:/*#__PURE__*/_jsxs(\"div\",{id:\"hot-app\",children:[/*#__PURE__*/_jsx(HotTable,{data:this.state.data,colHeaders:true,rowHeaders:true,width:\"1276\",height:\"520\",settings:settings,manualColumnResize:true,manualRowResize:true,columns:[{data:\"Area\",type:'dropdown',source:this.state.areas},{data:\"Type\",type:'dropdown',source:this.state.types},{data:\"Quantity\",type:\"numeric\"}],filters:true,dropdownMenu:['make_read_only','---------','alignment','---------','filter_by_condition','---------','filter_operators','---------','filter_by_condition2','---------','filter_by_value','---------','filter_action_bar']}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"580px\"},children:[/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-sm btn-info\",onClick:function onClick(){return _this3.addRow();},style:{marginRight:\"5px\",fontSize:\"16px\",width:\"60px\",borderRadius:\"10px\"},children:\"Add\"}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-sm btn-success\",onClick:function onClick(){return _this3.submitChanges();},style:{marginRight:\"5px\",fontSize:\"16px\",width:\"60px\",borderRadius:\"10px\"},children:\"Save\"})]})]})});}}]);return ElecExcelEdit;}(React.Component);export default ElecExcelEdit;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/components/elecExcelEdit/elecExcelEdit.js"],"names":["React","HotTable","ElecExcelEdit","state","searchText","searchedColumn","data","tab","props","currentTab","selectedRows","selectedRowsKeys","updateData","username","acronyms","steps","areas","types","options","method","headers","fetch","process","env","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","rows","row","push","i","length","area","type","quantity","id","setState","areas_options","name","types_options","body","JSON","stringify","success","settings","licenseKey","colWidths","marginLeft","source","addRow","marginRight","fontSize","width","borderRadius","submitChanges","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'antd/dist/antd.css';\r\nimport { HotTable } from '@handsontable/react';\r\nimport 'handsontable/dist/handsontable.full.css';\r\n\r\n\r\nclass ElecExcelEdit extends React.Component{\r\n  state = {\r\n    searchText: '',\r\n    searchedColumn: '',\r\n    data: [],\r\n    tab: this.props.currentTab,\r\n    selectedRows: [],\r\n    selectedRowsKeys: [],\r\n    updateData: this.props.updateData,\r\n    username: \"\",\r\n    acronyms : null,\r\n    steps: [],\r\n    areas: [],\r\n    types: [],\r\n  };\r\n\r\n  async componentDidMount(){\r\n\r\n    const options = {\r\n        method: \"GET\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n    }\r\n\r\n    fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/elecsEstimatedExcel\", options)\r\n    .then(response => response.json())\r\n    .then(json => {\r\n      var rows = []\r\n      var row = null\r\n      rows.push({\"Area\": \"Area\", \"Type\": \"Type\", \"Quantity\": \"Quantity\"})\r\n      for(let i = 0; i < json.rows.length; i++){\r\n\r\n          row = {\"Area\": json.rows[i].area, \"Type\": json.rows[i].type, \"Quantity\": json.rows[i].quantity, id: json.rows[i].id}\r\n\r\n          rows.push(row)\r\n      }\r\n      this.setState({data : rows, selectedRows: []});\r\n\r\n  }) \r\n\r\n  fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/areas\", options)\r\n    .then(response => response.json())\r\n    .then(json => {\r\n      let areas_options = []\r\n      for(let i = 0; i < json.length; i++){\r\n        areas_options.push(json[i].name)\r\n      }\r\n      this.setState({areas : areas_options});\r\n\r\n  })\r\n\r\n  fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/electrical/types\", options)\r\n    .then(response => response.json())\r\n    .then(json => {\r\n      let types_options = []\r\n      for(let i = 0; i < json.rows.length; i++){\r\n        types_options.push(json.rows[i].name)\r\n      }\r\n      this.setState({types : types_options});\r\n\r\n  })\r\n}\r\n\r\n  addRow(){\r\n    let rows = this.state.data\r\n    rows.push({\"Area\": \"\", \"Type\": \"\", \"Quantity\": \"\"})\r\n    this.setState({data: rows})\r\n  }\r\n  \r\n  submitChanges(){\r\n    const body = {\r\n      rows: this.state.data,\r\n    }\r\n    const options = {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(body)\r\n    }\r\n    fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/submit/electrical/estimated\", options)\r\n    .then(response => response.json())\r\n    .then(json =>{\r\n\r\n    })\r\n    this.props.success()\r\n  }\r\n\r\n  render() {\r\n\r\n    const settings = {\r\n        licenseKey: 'non-commercial-and-evaluation',\r\n        colWidths: 400,\r\n        //... other options\r\n      }\r\n  \r\n\r\n      return (\r\n          <div style={{marginLeft:\"12%\"}}>\r\n            <div id=\"hot-app\">\r\n              <HotTable\r\n                data={this.state.data}\r\n                colHeaders={true}\r\n                rowHeaders={true}\r\n                width=\"1276\"\r\n                height=\"520\"\r\n                settings={settings} \r\n                manualColumnResize={true}\r\n                manualRowResize={true}\r\n                columns= {[{ data: \"Area\", type:'dropdown', source: this.state.areas }, { data: \"Type\", type:'dropdown', source: this.state.types }, {data: \"Quantity\", type:\"numeric\"}]}\r\n                filters={true}\r\n                dropdownMenu= {[\r\n                    'make_read_only',\r\n                    '---------',\r\n                    'alignment',\r\n                    '---------',\r\n                    'filter_by_condition',\r\n                    '---------',\r\n                    'filter_operators',\r\n                    '---------',\r\n                    'filter_by_condition2',\r\n                    '---------',\r\n                    'filter_by_value',\r\n                    '---------',\r\n                    'filter_action_bar',\r\n                  ]}\r\n              />\r\n              <br></br>\r\n              <div style={{marginLeft:\"580px\"}}>\r\n                  <button class=\"btn btn-sm btn-info\" onClick={() => this.addRow()} style={{marginRight:\"5px\", fontSize:\"16px\", width:\"60px\", borderRadius:\"10px\"}}>Add</button>\r\n                  <button class=\"btn btn-sm btn-success\" onClick={() => this.submitChanges()} style={{marginRight:\"5px\", fontSize:\"16px\", width:\"60px\", borderRadius:\"10px\"}}>Save</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default ElecExcelEdit;"]},"metadata":{},"sourceType":"module"}