{"ast":null,"code":"function _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport { hasCaptionProblem, isClassListSupported, isTextContentSupported, isGetComputedStyleSupported } from \"../feature.mjs\";\nimport { isSafari, isIE9 } from \"../browser.mjs\";\nimport { sanitize } from \"../string.mjs\";\n/**\n * Get the parent of the specified node in the DOM tree.\n *\n * @param {HTMLElement} element Element from which traversing is started.\n * @param {number} [level=0] Traversing deep level.\n * @returns {HTMLElement|null}\n */\n\nexport function getParent(element) {\n  var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var iteration = -1;\n  var parent = null;\n  var elementToCheck = element;\n\n  while (elementToCheck !== null) {\n    if (iteration === level) {\n      parent = elementToCheck;\n      break;\n    }\n\n    if (elementToCheck.host && elementToCheck.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      elementToCheck = elementToCheck.host;\n    } else {\n      iteration += 1;\n      elementToCheck = elementToCheck.parentNode;\n    }\n  }\n\n  return parent;\n}\n/**\n * Gets `frameElement` of the specified frame. Returns null if it is a top frame or if script has no access to read property.\n *\n * @param {Window} frame Frame from which should be get frameElement in safe way.\n * @returns {HTMLIFrameElement|null}\n */\n\nexport function getFrameElement(frame) {\n  return Object.getPrototypeOf(frame.parent) && frame.frameElement;\n}\n/**\n * Gets parent frame of the specified frame. Returns null if it is a top frame or if script has no access to read property.\n *\n * @param {Window} frame Frame from which should be get frameElement in safe way.\n * @returns {Window|null}\n */\n\nexport function getParentWindow(frame) {\n  return getFrameElement(frame) && frame.parent;\n}\n/**\n * Checks if script has access to read from parent frame of specified frame.\n *\n * @param {Window} frame Frame from which should be get frameElement in safe way.\n * @returns {boolean}\n */\n\nexport function hasAccessToParentWindow(frame) {\n  return !!Object.getPrototypeOf(frame.parent);\n}\n/**\n * Goes up the DOM tree (including given element) until it finds an parent element that matches the nodes or nodes name.\n * This method goes up through web components.\n *\n * @param {Node} element Element from which traversing is started.\n * @param {Array<string|Node>} [nodes] Array of elements or Array of elements name (in uppercase form).\n * @param {Node} [until] The element until the traversing ends.\n * @returns {Node|null}\n */\n\nexport function closest(element) {\n  var nodes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var until = arguments.length > 2 ? arguments[2] : undefined;\n  var _Node = Node,\n      ELEMENT_NODE = _Node.ELEMENT_NODE,\n      DOCUMENT_FRAGMENT_NODE = _Node.DOCUMENT_FRAGMENT_NODE;\n  var elementToCheck = element;\n\n  while (elementToCheck !== null && elementToCheck !== void 0 && elementToCheck !== until) {\n    var _elementToCheck = elementToCheck,\n        nodeType = _elementToCheck.nodeType,\n        nodeName = _elementToCheck.nodeName;\n\n    if (nodeType === ELEMENT_NODE && (nodes.includes(nodeName) || nodes.includes(elementToCheck))) {\n      return elementToCheck;\n    }\n\n    var _elementToCheck2 = elementToCheck,\n        host = _elementToCheck2.host;\n\n    if (host && nodeType === DOCUMENT_FRAGMENT_NODE) {\n      elementToCheck = host;\n    } else {\n      elementToCheck = elementToCheck.parentNode;\n    }\n  }\n\n  return null;\n}\n/**\n * Goes \"down\" the DOM tree (including given element) until it finds an element that matches the nodes or nodes name.\n *\n * @param {HTMLElement} element Element from which traversing is started.\n * @param {Array} nodes Array of elements or Array of elements name.\n * @param {HTMLElement} [until] The list of elements until the traversing ends.\n * @returns {HTMLElement|null}\n */\n\nexport function closestDown(element, nodes, until) {\n  var matched = [];\n  var elementToCheck = element;\n\n  while (elementToCheck) {\n    elementToCheck = closest(elementToCheck, nodes, until);\n\n    if (!elementToCheck || until && !until.contains(elementToCheck)) {\n      break;\n    }\n\n    matched.push(elementToCheck);\n\n    if (elementToCheck.host && elementToCheck.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      elementToCheck = elementToCheck.host;\n    } else {\n      elementToCheck = elementToCheck.parentNode;\n    }\n  }\n\n  var length = matched.length;\n  return length ? matched[length - 1] : null;\n}\n/**\n * Goes up the DOM tree and checks if element is child of another element.\n *\n * @param {HTMLElement} child Child element An element to check.\n * @param {object|string} parent Parent element OR selector of the parent element.\n *                               If string provided, function returns `true` for the first occurrence of element with that class.\n * @returns {boolean}\n */\n\nexport function isChildOf(child, parent) {\n  var node = child.parentNode;\n  var queriedParents = [];\n\n  if (typeof parent === 'string') {\n    if (child.defaultView) {\n      queriedParents = Array.prototype.slice.call(child.querySelectorAll(parent), 0);\n    } else {\n      queriedParents = Array.prototype.slice.call(child.ownerDocument.querySelectorAll(parent), 0);\n    }\n  } else {\n    queriedParents.push(parent);\n  }\n\n  while (node !== null) {\n    if (queriedParents.indexOf(node) > -1) {\n      return true;\n    }\n\n    node = node.parentNode;\n  }\n\n  return false;\n}\n/**\n * Counts index of element within its parent.\n * WARNING: for performance reasons, assumes there are only element nodes (no text nodes). This is true\n * for Walkotnable, otherwise would need to check for nodeType or use previousElementSibling.\n *\n * @see http://jsperf.com/sibling-index/10\n * @param {Element} element The element to check.\n * @returns {number}\n */\n\nexport function index(element) {\n  var i = 0;\n  var elementToCheck = element;\n\n  if (elementToCheck.previousSibling) {\n    /* eslint-disable no-cond-assign */\n    while (elementToCheck = elementToCheck.previousSibling) {\n      i += 1;\n    }\n  }\n\n  return i;\n}\n/**\n * Check if the provided overlay contains the provided element.\n *\n * @param {string} overlayType The type of the overlay.\n * @param {HTMLElement} element An element to check.\n * @param {HTMLElement} root The root element.\n * @returns {boolean}\n */\n\nexport function overlayContainsElement(overlayType, element, root) {\n  var overlayElement = root.parentElement.querySelector(\".ht_clone_\".concat(overlayType));\n  return overlayElement ? overlayElement.contains(element) : null;\n}\n\nvar _hasClass;\n\nvar _addClass;\n\nvar _removeClass;\n/**\n * @param {string} classNames The element \"class\" attribute string.\n * @returns {string[]}\n */\n\n\nfunction filterEmptyClassNames(classNames) {\n  if (!classNames || !classNames.length) {\n    return [];\n  }\n\n  return classNames.filter(function (x) {\n    return !!x;\n  });\n}\n\nif (isClassListSupported()) {\n  var isSupportMultipleClassesArg = function isSupportMultipleClassesArg(rootDocument) {\n    var element = rootDocument.createElement('div');\n    element.classList.add('test', 'test2');\n    return element.classList.contains('test2');\n  };\n\n  _hasClass = function _hasClass(element, className) {\n    if (element.classList === void 0 || typeof className !== 'string' || className === '') {\n      return false;\n    }\n\n    return element.classList.contains(className);\n  };\n\n  _addClass = function _addClass(element, classes) {\n    var rootDocument = element.ownerDocument;\n    var className = classes;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n\n    className = filterEmptyClassNames(className);\n\n    if (className.length > 0) {\n      if (isSupportMultipleClassesArg(rootDocument)) {\n        var _element$classList;\n\n        (_element$classList = element.classList).add.apply(_element$classList, _toConsumableArray(className));\n      } else {\n        var len = 0;\n\n        while (className && className[len]) {\n          element.classList.add(className[len]);\n          len += 1;\n        }\n      }\n    }\n  };\n\n  _removeClass = function _removeClass(element, classes) {\n    var rootDocument = element.ownerDocument;\n    var className = classes;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n\n    className = filterEmptyClassNames(className);\n\n    if (className.length > 0) {\n      if (isSupportMultipleClassesArg(rootDocument)) {\n        var _element$classList2;\n\n        (_element$classList2 = element.classList).remove.apply(_element$classList2, _toConsumableArray(className));\n      } else {\n        var len = 0;\n\n        while (className && className[len]) {\n          element.classList.remove(className[len]);\n          len += 1;\n        }\n      }\n    }\n  };\n} else {\n  var createClassNameRegExp = function createClassNameRegExp(className) {\n    return new RegExp(\"(\\\\s|^)\".concat(className, \"(\\\\s|$)\"));\n  };\n\n  _hasClass = function _hasClass(element, className) {\n    // http://snipplr.com/view/3561/addclass-removeclass-hasclass/\n    return element.className !== void 0 && createClassNameRegExp(className).test(element.className);\n  };\n\n  _addClass = function _addClass(element, classes) {\n    var _className = element.className;\n    var className = classes;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n\n    className = filterEmptyClassNames(className);\n\n    if (_className === '') {\n      _className = className.join(' ');\n    } else {\n      for (var len = 0; len < className.length; len++) {\n        if (className[len] && !createClassNameRegExp(className[len]).test(_className)) {\n          _className += \" \".concat(className[len]);\n        }\n      }\n    }\n\n    element.className = _className;\n  };\n\n  _removeClass = function _removeClass(element, classes) {\n    var len = 0;\n    var _className = element.className;\n    var className = classes;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n\n    className = filterEmptyClassNames(className);\n\n    while (className && className[len]) {\n      // String.prototype.trim is defined in polyfill.js\n      _className = _className.replace(createClassNameRegExp(className[len]), ' ').trim();\n      len += 1;\n    }\n\n    if (element.className !== _className) {\n      element.className = _className;\n    }\n  };\n}\n/**\n * Checks if element has class name.\n *\n * @param {HTMLElement} element An element to check.\n * @param {string} className Class name to check.\n * @returns {boolean}\n */\n\n\nexport function hasClass(element, className) {\n  return _hasClass(element, className);\n}\n/**\n * Add class name to an element.\n *\n * @param {HTMLElement} element An element to process.\n * @param {string|Array} className Class name as string or array of strings.\n */\n\nexport function addClass(element, className) {\n  _addClass(element, className);\n}\n/**\n * Remove class name from an element.\n *\n * @param {HTMLElement} element An element to process.\n * @param {string|Array} className Class name as string or array of strings.\n */\n\nexport function removeClass(element, className) {\n  _removeClass(element, className);\n}\n/**\n * @param {HTMLElement} element An element from the text is removed.\n */\n\nexport function removeTextNodes(element) {\n  if (element.nodeType === 3) {\n    element.parentNode.removeChild(element); // bye text nodes!\n  } else if (['TABLE', 'THEAD', 'TBODY', 'TFOOT', 'TR'].indexOf(element.nodeName) > -1) {\n    var childs = element.childNodes;\n\n    for (var i = childs.length - 1; i >= 0; i--) {\n      removeTextNodes(childs[i], element);\n    }\n  }\n}\n/**\n * Remove childs function\n * WARNING - this doesn't unload events and data attached by jQuery\n * http://jsperf.com/jquery-html-vs-empty-vs-innerhtml/9\n * http://jsperf.com/jquery-html-vs-empty-vs-innerhtml/11 - no siginificant improvement with Chrome remove() method.\n *\n * @param {HTMLElement} element An element to clear.\n */\n\nexport function empty(element) {\n  var child;\n  /* eslint-disable no-cond-assign */\n\n  while (child = element.lastChild) {\n    element.removeChild(child);\n  }\n}\nexport var HTML_CHARACTERS = /(<(.*)>|&(.*);)/;\n/**\n * Insert content into element trying avoid innerHTML method.\n *\n * @param {HTMLElement} element An element to write into.\n * @param {string} content The text to write.\n * @param {boolean} [sanitizeContent=true] If `true`, the content will be sanitized before writing to the element.\n */\n\nexport function fastInnerHTML(element, content) {\n  var sanitizeContent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n  if (HTML_CHARACTERS.test(content)) {\n    element.innerHTML = sanitizeContent ? sanitize(content) : content;\n  } else {\n    fastInnerText(element, content);\n  }\n}\n/**\n * Insert text content into element.\n *\n * @param {HTMLElement} element An element to write into.\n * @param {string} content The text to write.\n */\n\nexport function fastInnerText(element, content) {\n  var child = element.firstChild;\n\n  if (child && child.nodeType === 3 && child.nextSibling === null) {\n    // fast lane - replace existing text node\n    if (isTextContentSupported) {\n      // http://jsperf.com/replace-text-vs-reuse\n      child.textContent = content;\n    } else {\n      // http://jsperf.com/replace-text-vs-reuse\n      child.data = content;\n    }\n  } else {\n    // slow lane - empty element and insert a text node\n    empty(element);\n    element.appendChild(element.ownerDocument.createTextNode(content));\n  }\n}\n/**\n * Returns true if element is attached to the DOM and visible, false otherwise.\n *\n * @param {HTMLElement} element An element to check.\n * @returns {boolean}\n */\n\nexport function isVisible(element) {\n  var documentElement = element.ownerDocument.documentElement;\n  var next = element;\n\n  while (next !== documentElement) {\n    // until <html> reached\n    if (next === null) {\n      // parent detached from DOM\n      return false;\n    } else if (next.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      if (next.host) {\n        // this is Web Components Shadow DOM\n        // see: http://w3c.github.io/webcomponents/spec/shadow/#encapsulation\n        // according to spec, should be if (next.ownerDocument !== window.document), but that doesn't work yet\n        if (next.host.impl) {\n          // Chrome 33.0.1723.0 canary (2013-11-29) Web Platform features disabled\n          return isVisible(next.host.impl);\n        } else if (next.host) {\n          // Chrome 33.0.1723.0 canary (2013-11-29) Web Platform features enabled\n          return isVisible(next.host);\n        }\n\n        throw new Error('Lost in Web Components world');\n      } else {\n        return false; // this is a node detached from document in IE8\n      }\n    } else if (next.style && next.style.display === 'none') {\n      return false;\n    }\n\n    next = next.parentNode;\n  }\n\n  return true;\n}\n/**\n * Returns elements top and left offset relative to the document. Function is not compatible with jQuery offset.\n *\n * @param {HTMLElement} element An element to get the offset position from.\n * @returns {object} Returns object with `top` and `left` props.\n */\n\nexport function offset(element) {\n  var rootDocument = element.ownerDocument;\n  var rootWindow = rootDocument.defaultView;\n  var documentElement = rootDocument.documentElement;\n  var elementToCheck = element;\n  var offsetLeft;\n  var offsetTop;\n  var lastElem;\n  var box;\n\n  if (hasCaptionProblem() && elementToCheck.firstChild && elementToCheck.firstChild.nodeName === 'CAPTION') {\n    // fixes problem with Firefox ignoring <caption> in TABLE offset (see also export outerHeight)\n    // http://jsperf.com/offset-vs-getboundingclientrect/8\n    box = elementToCheck.getBoundingClientRect();\n    return {\n      top: box.top + (rootWindow.pageYOffset || documentElement.scrollTop) - (documentElement.clientTop || 0),\n      left: box.left + (rootWindow.pageXOffset || documentElement.scrollLeft) - (documentElement.clientLeft || 0)\n    };\n  }\n\n  offsetLeft = elementToCheck.offsetLeft;\n  offsetTop = elementToCheck.offsetTop;\n  lastElem = elementToCheck;\n  /* eslint-disable no-cond-assign */\n\n  while (elementToCheck = elementToCheck.offsetParent) {\n    // from my observation, document.body always has scrollLeft/scrollTop == 0\n    if (elementToCheck === rootDocument.body) {\n      break;\n    }\n\n    offsetLeft += elementToCheck.offsetLeft;\n    offsetTop += elementToCheck.offsetTop;\n    lastElem = elementToCheck;\n  } // slow - http://jsperf.com/offset-vs-getboundingclientrect/6\n\n\n  if (lastElem && lastElem.style.position === 'fixed') {\n    // if(lastElem !== document.body) { //faster but does gives false positive in Firefox\n    offsetLeft += rootWindow.pageXOffset || documentElement.scrollLeft;\n    offsetTop += rootWindow.pageYOffset || documentElement.scrollTop;\n  }\n\n  return {\n    left: offsetLeft,\n    top: offsetTop\n  };\n}\n/**\n * Returns the document's scrollTop property.\n *\n * @param {Window} [rootWindow] The document window owner.\n * @returns {number}\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getWindowScrollTop() {\n  var rootWindow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  var res = rootWindow.scrollY;\n\n  if (res === void 0) {\n    // IE8-11\n    res = rootWindow.document.documentElement.scrollTop;\n  }\n\n  return res;\n}\n/**\n * Returns the document's scrollLeft property.\n *\n * @param {Window} [rootWindow] The document window owner.\n * @returns {number}\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getWindowScrollLeft() {\n  var rootWindow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  var res = rootWindow.scrollX;\n\n  if (res === void 0) {\n    // IE8-11\n    res = rootWindow.document.documentElement.scrollLeft;\n  }\n\n  return res;\n}\n/**\n * Returns the provided element's scrollTop property.\n *\n * @param {HTMLElement} element An element to get the scroll top position from.\n * @param {Window} [rootWindow] The document window owner.\n * @returns {number}\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getScrollTop(element) {\n  var rootWindow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n\n  if (element === rootWindow) {\n    return getWindowScrollTop(rootWindow);\n  }\n\n  return element.scrollTop;\n}\n/**\n * Returns the provided element's scrollLeft property.\n *\n * @param {HTMLElement} element An element to get the scroll left position from.\n * @param {Window} [rootWindow] The document window owner.\n * @returns {number}\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getScrollLeft(element) {\n  var rootWindow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n\n  if (element === rootWindow) {\n    return getWindowScrollLeft(rootWindow);\n  }\n\n  return element.scrollLeft;\n}\n/**\n * Returns a DOM element responsible for scrolling of the provided element.\n *\n * @param {HTMLElement} element An element to get the scrollable element from.\n * @returns {HTMLElement} Element's scrollable parent.\n */\n\nexport function getScrollableElement(element) {\n  var rootDocument = element.ownerDocument;\n  var rootWindow = rootDocument ? rootDocument.defaultView : void 0;\n\n  if (!rootDocument) {\n    rootDocument = element.document ? element.document : element;\n    rootWindow = rootDocument.defaultView;\n  }\n\n  var props = ['auto', 'scroll'];\n  var supportedGetComputedStyle = isGetComputedStyleSupported();\n  var el = element.parentNode;\n\n  while (el && el.style && rootDocument.body !== el) {\n    var _el$style = el.style,\n        overflow = _el$style.overflow,\n        overflowX = _el$style.overflowX,\n        overflowY = _el$style.overflowY;\n\n    if ([overflow, overflowX, overflowY].includes('scroll')) {\n      return el;\n    } else if (supportedGetComputedStyle) {\n      var _rootWindow$getComput = rootWindow.getComputedStyle(el);\n\n      overflow = _rootWindow$getComput.overflow;\n      overflowX = _rootWindow$getComput.overflowX;\n      overflowY = _rootWindow$getComput.overflowY;\n\n      if (props.includes(overflow) || props.includes(overflowX) || props.includes(overflowY)) {\n        return el;\n      }\n    } // The '+ 1' after the scrollHeight/scrollWidth is to prevent problems with zoomed out Chrome.\n\n\n    if (el.clientHeight <= el.scrollHeight + 1 && (props.includes(overflowY) || props.includes(overflow))) {\n      return el;\n    }\n\n    if (el.clientWidth <= el.scrollWidth + 1 && (props.includes(overflowX) || props.includes(overflow))) {\n      return el;\n    }\n\n    el = el.parentNode;\n  }\n\n  return rootWindow;\n}\n/**\n * Returns a DOM element responsible for trimming the provided element.\n *\n * @param {HTMLElement} base Base element.\n * @returns {HTMLElement} Base element's trimming parent.\n */\n\nexport function getTrimmingContainer(base) {\n  var rootDocument = base.ownerDocument;\n  var rootWindow = rootDocument.defaultView;\n  var el = base.parentNode;\n\n  while (el && el.style && rootDocument.body !== el) {\n    if (el.style.overflow !== 'visible' && el.style.overflow !== '') {\n      return el;\n    }\n\n    var computedStyle = getComputedStyle(el, rootWindow);\n    var allowedProperties = ['scroll', 'hidden', 'auto'];\n    var property = computedStyle.getPropertyValue('overflow');\n    var propertyY = computedStyle.getPropertyValue('overflow-y');\n    var propertyX = computedStyle.getPropertyValue('overflow-x');\n\n    if (allowedProperties.includes(property) || allowedProperties.includes(propertyY) || allowedProperties.includes(propertyX)) {\n      return el;\n    }\n\n    el = el.parentNode;\n  }\n\n  return rootWindow;\n}\n/**\n * Returns a style property for the provided element. (Be it an inline or external style).\n *\n * @param {HTMLElement} element An element to get the style from.\n * @param {string} prop Wanted property.\n * @param {Window} [rootWindow] The document window owner.\n * @returns {string|undefined} Element's style property.\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getStyle(element, prop) {\n  var rootWindow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;\n\n  if (!element) {\n    return;\n  } else if (element === rootWindow) {\n    if (prop === 'width') {\n      return \"\".concat(rootWindow.innerWidth, \"px\");\n    } else if (prop === 'height') {\n      return \"\".concat(rootWindow.innerHeight, \"px\");\n    }\n\n    return;\n  }\n\n  var styleProp = element.style[prop];\n\n  if (styleProp !== '' && styleProp !== void 0) {\n    return styleProp;\n  }\n\n  var computedStyle = getComputedStyle(element, rootWindow);\n\n  if (computedStyle[prop] !== '' && computedStyle[prop] !== void 0) {\n    return computedStyle[prop];\n  }\n}\n/**\n * Verifies if element fit to provided CSSRule.\n *\n * @param {Element} element Element to verify with selector text.\n * @param {CSSRule} rule Selector text from CSSRule.\n * @returns {boolean}\n */\n\nexport function matchesCSSRules(element, rule) {\n  var selectorText = rule.selectorText;\n  var result = false;\n\n  if (rule.type === CSSRule.STYLE_RULE && selectorText) {\n    if (element.msMatchesSelector) {\n      result = element.msMatchesSelector(selectorText);\n    } else if (element.matches) {\n      result = element.matches(selectorText);\n    }\n  }\n\n  return result;\n}\n/**\n * Returns a computed style object for the provided element. (Needed if style is declared in external stylesheet).\n *\n * @param {HTMLElement} element An element to get style from.\n * @param {Window} [rootWindow] The document window owner.\n * @returns {IEElementStyle|CssStyle} Elements computed style object.\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getComputedStyle(element) {\n  var rootWindow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n  return element.currentStyle || rootWindow.getComputedStyle(element);\n}\n/**\n * Returns the element's outer width.\n *\n * @param {HTMLElement} element An element to get the width from.\n * @returns {number} Element's outer width.\n */\n\nexport function outerWidth(element) {\n  return Math.ceil(element.getBoundingClientRect().width);\n}\n/**\n * Returns the element's outer height.\n *\n * @param {HTMLElement} element An element to get the height from.\n * @returns {number} Element's outer height.\n */\n\nexport function outerHeight(element) {\n  if (hasCaptionProblem() && element.firstChild && element.firstChild.nodeName === 'CAPTION') {\n    // fixes problem with Firefox ignoring <caption> in TABLE.offsetHeight\n    // jQuery (1.10.1) still has this unsolved\n    // may be better to just switch to getBoundingClientRect\n    // http://bililite.com/blog/2009/03/27/finding-the-size-of-a-table/\n    // http://lists.w3.org/Archives/Public/www-style/2009Oct/0089.html\n    // http://bugs.jquery.com/ticket/2196\n    // http://lists.w3.org/Archives/Public/www-style/2009Oct/0140.html#start140\n    return element.offsetHeight + element.firstChild.offsetHeight;\n  }\n\n  return element.offsetHeight;\n}\n/**\n * Returns the element's inner height.\n *\n * @param {HTMLElement} element An element to get the height from.\n * @returns {number} Element's inner height.\n */\n\nexport function innerHeight(element) {\n  return element.clientHeight || element.innerHeight;\n}\n/**\n * Returns the element's inner width.\n *\n * @param {HTMLElement} element An element to get the width from.\n * @returns {number} Element's inner width.\n */\n\nexport function innerWidth(element) {\n  return element.clientWidth || element.innerWidth;\n}\n/**\n * @param {HTMLElement} element An element to which the event is added.\n * @param {string} event The event name.\n * @param {Function} callback The callback to add.\n */\n\nexport function addEvent(element, event, callback) {\n  element.addEventListener(event, callback, false);\n}\n/**\n * @param {HTMLElement} element An element from which the event is removed.\n * @param {string} event The event name.\n * @param {Function} callback The function reference to remove.\n */\n\nexport function removeEvent(element, event, callback) {\n  element.removeEventListener(event, callback, false);\n}\n/**\n * Returns caret position in text input.\n *\n * @author https://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea\n * @param {HTMLElement} el An element to check.\n * @returns {number}\n */\n\nexport function getCaretPosition(el) {\n  var rootDocument = el.ownerDocument;\n\n  if (el.selectionStart) {\n    return el.selectionStart;\n  } else if (rootDocument.selection) {\n    // IE8\n    el.focus();\n    var r = rootDocument.selection.createRange();\n\n    if (r === null) {\n      return 0;\n    }\n\n    var re = el.createTextRange();\n    var rc = re.duplicate();\n    re.moveToBookmark(r.getBookmark());\n    rc.setEndPoint('EndToStart', re);\n    return rc.text.length;\n  }\n\n  return 0;\n}\n/**\n * Returns end of the selection in text input.\n *\n * @param {HTMLElement} el An element to check.\n * @returns {number}\n */\n\nexport function getSelectionEndPosition(el) {\n  var rootDocument = el.ownerDocument;\n\n  if (el.selectionEnd) {\n    return el.selectionEnd;\n  } else if (rootDocument.selection) {\n    // IE8\n    var r = rootDocument.selection.createRange();\n\n    if (r === null) {\n      return 0;\n    }\n\n    var re = el.createTextRange();\n    return re.text.indexOf(r.text) + r.text.length;\n  }\n\n  return 0;\n}\n/**\n * Returns text under selection.\n *\n * @param {Window} [rootWindow] The document window owner.\n * @returns {string}\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getSelectionText() {\n  var rootWindow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  var rootDocument = rootWindow.document;\n  var text = '';\n\n  if (rootWindow.getSelection) {\n    text = rootWindow.getSelection().toString();\n  } else if (rootDocument.selection && rootDocument.selection.type !== 'Control') {\n    text = rootDocument.selection.createRange().text;\n  }\n\n  return text;\n}\n/**\n * Cross-platform helper to clear text selection.\n *\n * @param {Window} [rootWindow] The document window owner.\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function clearTextSelection() {\n  var rootWindow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  var rootDocument = rootWindow.document; // http://stackoverflow.com/questions/3169786/clear-text-selection-with-javascript\n\n  if (rootWindow.getSelection) {\n    if (rootWindow.getSelection().empty) {\n      // Chrome\n      rootWindow.getSelection().empty();\n    } else if (rootWindow.getSelection().removeAllRanges) {\n      // Firefox\n      rootWindow.getSelection().removeAllRanges();\n    }\n  } else if (rootDocument.selection) {\n    // IE?\n    rootDocument.selection.empty();\n  }\n}\n/**\n * Sets caret position in text input.\n *\n * @author http://blog.vishalon.net/index.php/javascript-getting-and-setting-caret-position-in-textarea/\n * @param {Element} element An element to process.\n * @param {number} pos The selection start position.\n * @param {number} endPos The selection end position.\n */\n\nexport function setCaretPosition(element, pos, endPos) {\n  if (endPos === void 0) {\n    endPos = pos;\n  }\n\n  if (element.setSelectionRange) {\n    element.focus();\n\n    try {\n      element.setSelectionRange(pos, endPos);\n    } catch (err) {\n      var elementParent = element.parentNode;\n      var parentDisplayValue = elementParent.style.display;\n      elementParent.style.display = 'block';\n      element.setSelectionRange(pos, endPos);\n      elementParent.style.display = parentDisplayValue;\n    }\n  }\n}\nvar cachedScrollbarWidth;\n/**\n * Helper to calculate scrollbar width.\n * Source: https://stackoverflow.com/questions/986937/how-can-i-get-the-browsers-scrollbar-sizes.\n *\n * @private\n * @param {Document} rootDocument The onwer of the document.\n * @returns {number}\n */\n// eslint-disable-next-line no-restricted-globals\n\nfunction walkontableCalculateScrollbarWidth() {\n  var rootDocument = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n  var inner = rootDocument.createElement('div');\n  inner.style.height = '200px';\n  inner.style.width = '100%';\n  var outer = rootDocument.createElement('div');\n  outer.style.boxSizing = 'content-box';\n  outer.style.height = '150px';\n  outer.style.left = '0px';\n  outer.style.overflow = 'hidden';\n  outer.style.position = 'absolute';\n  outer.style.top = '0px';\n  outer.style.width = '200px';\n  outer.style.visibility = 'hidden';\n  outer.appendChild(inner);\n  (rootDocument.body || rootDocument.documentElement).appendChild(outer);\n  var w1 = inner.offsetWidth;\n  outer.style.overflow = 'scroll';\n  var w2 = inner.offsetWidth;\n\n  if (w1 === w2) {\n    w2 = outer.clientWidth;\n  }\n\n  (rootDocument.body || rootDocument.documentElement).removeChild(outer);\n  return w1 - w2;\n}\n/**\n * Returns the computed width of the native browser scroll bar.\n *\n * @param {Document} [rootDocument] The owner of the document.\n * @returns {number} Width.\n */\n// eslint-disable-next-line no-restricted-globals\n\n\nexport function getScrollbarWidth() {\n  var rootDocument = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n\n  if (cachedScrollbarWidth === void 0) {\n    cachedScrollbarWidth = walkontableCalculateScrollbarWidth(rootDocument);\n  }\n\n  return cachedScrollbarWidth;\n}\n/**\n * Checks if the provided element has a vertical scrollbar.\n *\n * @param {HTMLElement} element An element to check.\n * @returns {boolean}\n */\n\nexport function hasVerticalScrollbar(element) {\n  return element.offsetWidth !== element.clientWidth;\n}\n/**\n * Checks if the provided element has a vertical scrollbar.\n *\n * @param {HTMLElement} element An element to check.\n * @returns {boolean}\n */\n\nexport function hasHorizontalScrollbar(element) {\n  return element.offsetHeight !== element.clientHeight;\n}\n/**\n * Sets overlay position depending on it's type and used browser.\n *\n * @param {HTMLElement} overlayElem An element to process.\n * @param {number} left The left position of the overlay.\n * @param {number} top The top position of the overlay.\n */\n\nexport function setOverlayPosition(overlayElem, left, top) {\n  if (isIE9()) {\n    overlayElem.style.top = top;\n    overlayElem.style.left = left;\n  } else if (isSafari()) {\n    overlayElem.style['-webkit-transform'] = \"translate3d(\".concat(left, \",\").concat(top, \",0)\");\n    overlayElem.style['-webkit-transform'] = \"translate3d(\".concat(left, \",\").concat(top, \",0)\");\n  } else {\n    overlayElem.style.transform = \"translate3d(\".concat(left, \",\").concat(top, \",0)\");\n  }\n}\n/**\n * @param {HTMLElement} element An element to process.\n * @returns {number|Array}\n */\n\nexport function getCssTransform(element) {\n  var transform;\n\n  if (element.style.transform && (transform = element.style.transform) !== '') {\n    return ['transform', transform];\n  } else if (element.style['-webkit-transform'] && (transform = element.style['-webkit-transform']) !== '') {\n    return ['-webkit-transform', transform];\n  }\n\n  return -1;\n}\n/**\n * @param {HTMLElement} element An element to process.\n */\n\nexport function resetCssTransform(element) {\n  if (element.style.transform && element.style.transform !== '') {\n    element.style.transform = '';\n  } else if (element.style['-webkit-transform'] && element.style['-webkit-transform'] !== '') {\n    element.style['-webkit-transform'] = '';\n  }\n}\n/**\n * Determines if the given DOM element is an input field.\n * Notice: By 'input' we mean input, textarea and select nodes.\n *\n * @param {HTMLElement} element - DOM element.\n * @returns {boolean}\n */\n\nexport function isInput(element) {\n  var inputs = ['INPUT', 'SELECT', 'TEXTAREA'];\n  return element && (inputs.indexOf(element.nodeName) > -1 || element.contentEditable === 'true');\n}\n/**\n * Determines if the given DOM element is an input field placed OUTSIDE of HOT.\n * Notice: By 'input' we mean input, textarea and select nodes which have defined 'data-hot-input' attribute.\n *\n * @param {HTMLElement} element - DOM element.\n * @returns {boolean}\n */\n\nexport function isOutsideInput(element) {\n  return isInput(element) && element.hasAttribute('data-hot-input') === false;\n}\n/**\n * Check if the given DOM element can be focused (by using \"select\" method).\n *\n * @param {HTMLElement} element - DOM element.\n */\n\nexport function selectElementIfAllowed(element) {\n  var activeElement = element.ownerDocument.activeElement;\n\n  if (!isOutsideInput(activeElement)) {\n    element.select();\n  }\n}\n/**\n * Check if the provided element is detached from DOM.\n *\n * @param {HTMLElement} element HTML element to be checked.\n * @returns {boolean} `true` if the element is detached, `false` otherwise.\n */\n\nexport function isDetached(element) {\n  return !element.parentNode;\n}","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/handsontable/helpers/dom/element.mjs"],"names":["_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","hasCaptionProblem","isClassListSupported","isTextContentSupported","isGetComputedStyleSupported","isSafari","isIE9","sanitize","getParent","element","level","arguments","undefined","iteration","parent","elementToCheck","host","nodeType","Node","DOCUMENT_FRAGMENT_NODE","parentNode","getFrameElement","frame","getPrototypeOf","frameElement","getParentWindow","hasAccessToParentWindow","closest","nodes","until","_Node","ELEMENT_NODE","_elementToCheck","nodeName","includes","_elementToCheck2","closestDown","matched","contains","push","isChildOf","child","node","queriedParents","defaultView","querySelectorAll","ownerDocument","indexOf","index","previousSibling","overlayContainsElement","overlayType","root","overlayElement","parentElement","querySelector","concat","_hasClass","_addClass","_removeClass","filterEmptyClassNames","classNames","filter","x","isSupportMultipleClassesArg","rootDocument","createElement","classList","add","className","classes","split","_element$classList","apply","_element$classList2","remove","createClassNameRegExp","RegExp","_className","join","replace","trim","hasClass","addClass","removeClass","removeTextNodes","removeChild","childs","childNodes","empty","lastChild","HTML_CHARACTERS","fastInnerHTML","content","sanitizeContent","innerHTML","fastInnerText","firstChild","nextSibling","textContent","data","appendChild","createTextNode","isVisible","documentElement","next","impl","Error","style","display","offset","rootWindow","offsetLeft","offsetTop","lastElem","box","getBoundingClientRect","top","pageYOffset","scrollTop","clientTop","left","pageXOffset","scrollLeft","clientLeft","offsetParent","body","position","getWindowScrollTop","window","res","scrollY","document","getWindowScrollLeft","scrollX","getScrollTop","getScrollLeft","getScrollableElement","props","supportedGetComputedStyle","el","_el$style","overflow","overflowX","overflowY","_rootWindow$getComput","getComputedStyle","clientHeight","scrollHeight","clientWidth","scrollWidth","getTrimmingContainer","base","computedStyle","allowedProperties","property","getPropertyValue","propertyY","propertyX","getStyle","prop","innerWidth","innerHeight","styleProp","matchesCSSRules","rule","selectorText","result","type","CSSRule","STYLE_RULE","msMatchesSelector","matches","currentStyle","outerWidth","Math","ceil","width","outerHeight","offsetHeight","addEvent","event","callback","addEventListener","removeEvent","removeEventListener","getCaretPosition","selectionStart","selection","focus","r","createRange","re","createTextRange","rc","duplicate","moveToBookmark","getBookmark","setEndPoint","text","getSelectionEndPosition","selectionEnd","getSelectionText","getSelection","clearTextSelection","removeAllRanges","setCaretPosition","pos","endPos","setSelectionRange","err","elementParent","parentDisplayValue","cachedScrollbarWidth","walkontableCalculateScrollbarWidth","inner","height","outer","boxSizing","visibility","w1","offsetWidth","w2","getScrollbarWidth","hasVerticalScrollbar","hasHorizontalScrollbar","setOverlayPosition","overlayElem","transform","getCssTransform","resetCssTransform","isInput","inputs","contentEditable","isOutsideInput","hasAttribute","selectElementIfAllowed","activeElement","select","isDetached"],"mappings":"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","sourcesContent":["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { hasCaptionProblem, isClassListSupported, isTextContentSupported, isGetComputedStyleSupported } from \"../feature.mjs\";\nimport { isSafari, isIE9 } from \"../browser.mjs\";\nimport { sanitize } from \"../string.mjs\";\n/**\n * Get the parent of the specified node in the DOM tree.\n *\n * @param {HTMLElement} element Element from which traversing is started.\n * @param {number} [level=0] Traversing deep level.\n * @returns {HTMLElement|null}\n */\n\nexport function getParent(element) {\n  var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var iteration = -1;\n  var parent = null;\n  var elementToCheck = element;\n\n  while (elementToCheck !== null) {\n    if (iteration === level) {\n      parent = elementToCheck;\n      break;\n    }\n\n    if (elementToCheck.host && elementToCheck.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      elementToCheck = elementToCheck.host;\n    } else {\n      iteration += 1;\n      elementToCheck = elementToCheck.parentNode;\n    }\n  }\n\n  return parent;\n}\n/**\n * Gets `frameElement` of the specified frame. Returns null if it is a top frame or if script has no access to read property.\n *\n * @param {Window} frame Frame from which should be get frameElement in safe way.\n * @returns {HTMLIFrameElement|null}\n */\n\nexport function getFrameElement(frame) {\n  return Object.getPrototypeOf(frame.parent) && frame.frameElement;\n}\n/**\n * Gets parent frame of the specified frame. Returns null if it is a top frame or if script has no access to read property.\n *\n * @param {Window} frame Frame from which should be get frameElement in safe way.\n * @returns {Window|null}\n */\n\nexport function getParentWindow(frame) {\n  return getFrameElement(frame) && frame.parent;\n}\n/**\n * Checks if script has access to read from parent frame of specified frame.\n *\n * @param {Window} frame Frame from which should be get frameElement in safe way.\n * @returns {boolean}\n */\n\nexport function hasAccessToParentWindow(frame) {\n  return !!Object.getPrototypeOf(frame.parent);\n}\n/**\n * Goes up the DOM tree (including given element) until it finds an parent element that matches the nodes or nodes name.\n * This method goes up through web components.\n *\n * @param {Node} element Element from which traversing is started.\n * @param {Array<string|Node>} [nodes] Array of elements or Array of elements name (in uppercase form).\n * @param {Node} [until] The element until the traversing ends.\n * @returns {Node|null}\n */\n\nexport function closest(element) {\n  var nodes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var until = arguments.length > 2 ? arguments[2] : undefined;\n  var _Node = Node,\n      ELEMENT_NODE = _Node.ELEMENT_NODE,\n      DOCUMENT_FRAGMENT_NODE = _Node.DOCUMENT_FRAGMENT_NODE;\n  var elementToCheck = element;\n\n  while (elementToCheck !== null && elementToCheck !== void 0 && elementToCheck !== until) {\n    var _elementToCheck = elementToCheck,\n        nodeType = _elementToCheck.nodeType,\n        nodeName = _elementToCheck.nodeName;\n\n    if (nodeType === ELEMENT_NODE && (nodes.includes(nodeName) || nodes.includes(elementToCheck))) {\n      return elementToCheck;\n    }\n\n    var _elementToCheck2 = elementToCheck,\n        host = _elementToCheck2.host;\n\n    if (host && nodeType === DOCUMENT_FRAGMENT_NODE) {\n      elementToCheck = host;\n    } else {\n      elementToCheck = elementToCheck.parentNode;\n    }\n  }\n\n  return null;\n}\n/**\n * Goes \"down\" the DOM tree (including given element) until it finds an element that matches the nodes or nodes name.\n *\n * @param {HTMLElement} element Element from which traversing is started.\n * @param {Array} nodes Array of elements or Array of elements name.\n * @param {HTMLElement} [until] The list of elements until the traversing ends.\n * @returns {HTMLElement|null}\n */\n\nexport function closestDown(element, nodes, until) {\n  var matched = [];\n  var elementToCheck = element;\n\n  while (elementToCheck) {\n    elementToCheck = closest(elementToCheck, nodes, until);\n\n    if (!elementToCheck || until && !until.contains(elementToCheck)) {\n      break;\n    }\n\n    matched.push(elementToCheck);\n\n    if (elementToCheck.host && elementToCheck.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      elementToCheck = elementToCheck.host;\n    } else {\n      elementToCheck = elementToCheck.parentNode;\n    }\n  }\n\n  var length = matched.length;\n  return length ? matched[length - 1] : null;\n}\n/**\n * Goes up the DOM tree and checks if element is child of another element.\n *\n * @param {HTMLElement} child Child element An element to check.\n * @param {object|string} parent Parent element OR selector of the parent element.\n *                               If string provided, function returns `true` for the first occurrence of element with that class.\n * @returns {boolean}\n */\n\nexport function isChildOf(child, parent) {\n  var node = child.parentNode;\n  var queriedParents = [];\n\n  if (typeof parent === 'string') {\n    if (child.defaultView) {\n      queriedParents = Array.prototype.slice.call(child.querySelectorAll(parent), 0);\n    } else {\n      queriedParents = Array.prototype.slice.call(child.ownerDocument.querySelectorAll(parent), 0);\n    }\n  } else {\n    queriedParents.push(parent);\n  }\n\n  while (node !== null) {\n    if (queriedParents.indexOf(node) > -1) {\n      return true;\n    }\n\n    node = node.parentNode;\n  }\n\n  return false;\n}\n/**\n * Counts index of element within its parent.\n * WARNING: for performance reasons, assumes there are only element nodes (no text nodes). This is true\n * for Walkotnable, otherwise would need to check for nodeType or use previousElementSibling.\n *\n * @see http://jsperf.com/sibling-index/10\n * @param {Element} element The element to check.\n * @returns {number}\n */\n\nexport function index(element) {\n  var i = 0;\n  var elementToCheck = element;\n\n  if (elementToCheck.previousSibling) {\n    /* eslint-disable no-cond-assign */\n    while (elementToCheck = elementToCheck.previousSibling) {\n      i += 1;\n    }\n  }\n\n  return i;\n}\n/**\n * Check if the provided overlay contains the provided element.\n *\n * @param {string} overlayType The type of the overlay.\n * @param {HTMLElement} element An element to check.\n * @param {HTMLElement} root The root element.\n * @returns {boolean}\n */\n\nexport function overlayContainsElement(overlayType, element, root) {\n  var overlayElement = root.parentElement.querySelector(\".ht_clone_\".concat(overlayType));\n  return overlayElement ? overlayElement.contains(element) : null;\n}\n\nvar _hasClass;\n\nvar _addClass;\n\nvar _removeClass;\n/**\n * @param {string} classNames The element \"class\" attribute string.\n * @returns {string[]}\n */\n\n\nfunction filterEmptyClassNames(classNames) {\n  if (!classNames || !classNames.length) {\n    return [];\n  }\n\n  return classNames.filter(function (x) {\n    return !!x;\n  });\n}\n\nif (isClassListSupported()) {\n  var isSupportMultipleClassesArg = function isSupportMultipleClassesArg(rootDocument) {\n    var element = rootDocument.createElement('div');\n    element.classList.add('test', 'test2');\n    return element.classList.contains('test2');\n  };\n\n  _hasClass = function _hasClass(element, className) {\n    if (element.classList === void 0 || typeof className !== 'string' || className === '') {\n      return false;\n    }\n\n    return element.classList.contains(className);\n  };\n\n  _addClass = function _addClass(element, classes) {\n    var rootDocument = element.ownerDocument;\n    var className = classes;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n\n    className = filterEmptyClassNames(className);\n\n    if (className.length > 0) {\n      if (isSupportMultipleClassesArg(rootDocument)) {\n        var _element$classList;\n\n        (_element$classList = element.classList).add.apply(_element$classList, _toConsumableArray(className));\n      } else {\n        var len = 0;\n\n        while (className && className[len]) {\n          element.classList.add(className[len]);\n          len += 1;\n        }\n      }\n    }\n  };\n\n  _removeClass = function _removeClass(element, classes) {\n    var rootDocument = element.ownerDocument;\n    var className = classes;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n\n    className = filterEmptyClassNames(className);\n\n    if (className.length > 0) {\n      if (isSupportMultipleClassesArg(rootDocument)) {\n        var _element$classList2;\n\n        (_element$classList2 = element.classList).remove.apply(_element$classList2, _toConsumableArray(className));\n      } else {\n        var len = 0;\n\n        while (className && className[len]) {\n          element.classList.remove(className[len]);\n          len += 1;\n        }\n      }\n    }\n  };\n} else {\n  var createClassNameRegExp = function createClassNameRegExp(className) {\n    return new RegExp(\"(\\\\s|^)\".concat(className, \"(\\\\s|$)\"));\n  };\n\n  _hasClass = function _hasClass(element, className) {\n    // http://snipplr.com/view/3561/addclass-removeclass-hasclass/\n    return element.className !== void 0 && createClassNameRegExp(className).test(element.className);\n  };\n\n  _addClass = function _addClass(element, classes) {\n    var _className = element.className;\n    var className = classes;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n\n    className = filterEmptyClassNames(className);\n\n    if (_className === '') {\n      _className = className.join(' ');\n    } else {\n      for (var len = 0; len < className.length; len++) {\n        if (className[len] && !createClassNameRegExp(className[len]).test(_className)) {\n          _className += \" \".concat(className[len]);\n        }\n      }\n    }\n\n    element.className = _className;\n  };\n\n  _removeClass = function _removeClass(element, classes) {\n    var len = 0;\n    var _className = element.className;\n    var className = classes;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n\n    className = filterEmptyClassNames(className);\n\n    while (className && className[len]) {\n      // String.prototype.trim is defined in polyfill.js\n      _className = _className.replace(createClassNameRegExp(className[len]), ' ').trim();\n      len += 1;\n    }\n\n    if (element.className !== _className) {\n      element.className = _className;\n    }\n  };\n}\n/**\n * Checks if element has class name.\n *\n * @param {HTMLElement} element An element to check.\n * @param {string} className Class name to check.\n * @returns {boolean}\n */\n\n\nexport function hasClass(element, className) {\n  return _hasClass(element, className);\n}\n/**\n * Add class name to an element.\n *\n * @param {HTMLElement} element An element to process.\n * @param {string|Array} className Class name as string or array of strings.\n */\n\nexport function addClass(element, className) {\n  _addClass(element, className);\n}\n/**\n * Remove class name from an element.\n *\n * @param {HTMLElement} element An element to process.\n * @param {string|Array} className Class name as string or array of strings.\n */\n\nexport function removeClass(element, className) {\n  _removeClass(element, className);\n}\n/**\n * @param {HTMLElement} element An element from the text is removed.\n */\n\nexport function removeTextNodes(element) {\n  if (element.nodeType === 3) {\n    element.parentNode.removeChild(element); // bye text nodes!\n  } else if (['TABLE', 'THEAD', 'TBODY', 'TFOOT', 'TR'].indexOf(element.nodeName) > -1) {\n    var childs = element.childNodes;\n\n    for (var i = childs.length - 1; i >= 0; i--) {\n      removeTextNodes(childs[i], element);\n    }\n  }\n}\n/**\n * Remove childs function\n * WARNING - this doesn't unload events and data attached by jQuery\n * http://jsperf.com/jquery-html-vs-empty-vs-innerhtml/9\n * http://jsperf.com/jquery-html-vs-empty-vs-innerhtml/11 - no siginificant improvement with Chrome remove() method.\n *\n * @param {HTMLElement} element An element to clear.\n */\n\nexport function empty(element) {\n  var child;\n  /* eslint-disable no-cond-assign */\n\n  while (child = element.lastChild) {\n    element.removeChild(child);\n  }\n}\nexport var HTML_CHARACTERS = /(<(.*)>|&(.*);)/;\n/**\n * Insert content into element trying avoid innerHTML method.\n *\n * @param {HTMLElement} element An element to write into.\n * @param {string} content The text to write.\n * @param {boolean} [sanitizeContent=true] If `true`, the content will be sanitized before writing to the element.\n */\n\nexport function fastInnerHTML(element, content) {\n  var sanitizeContent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n  if (HTML_CHARACTERS.test(content)) {\n    element.innerHTML = sanitizeContent ? sanitize(content) : content;\n  } else {\n    fastInnerText(element, content);\n  }\n}\n/**\n * Insert text content into element.\n *\n * @param {HTMLElement} element An element to write into.\n * @param {string} content The text to write.\n */\n\nexport function fastInnerText(element, content) {\n  var child = element.firstChild;\n\n  if (child && child.nodeType === 3 && child.nextSibling === null) {\n    // fast lane - replace existing text node\n    if (isTextContentSupported) {\n      // http://jsperf.com/replace-text-vs-reuse\n      child.textContent = content;\n    } else {\n      // http://jsperf.com/replace-text-vs-reuse\n      child.data = content;\n    }\n  } else {\n    // slow lane - empty element and insert a text node\n    empty(element);\n    element.appendChild(element.ownerDocument.createTextNode(content));\n  }\n}\n/**\n * Returns true if element is attached to the DOM and visible, false otherwise.\n *\n * @param {HTMLElement} element An element to check.\n * @returns {boolean}\n */\n\nexport function isVisible(element) {\n  var documentElement = element.ownerDocument.documentElement;\n  var next = element;\n\n  while (next !== documentElement) {\n    // until <html> reached\n    if (next === null) {\n      // parent detached from DOM\n      return false;\n    } else if (next.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      if (next.host) {\n        // this is Web Components Shadow DOM\n        // see: http://w3c.github.io/webcomponents/spec/shadow/#encapsulation\n        // according to spec, should be if (next.ownerDocument !== window.document), but that doesn't work yet\n        if (next.host.impl) {\n          // Chrome 33.0.1723.0 canary (2013-11-29) Web Platform features disabled\n          return isVisible(next.host.impl);\n        } else if (next.host) {\n          // Chrome 33.0.1723.0 canary (2013-11-29) Web Platform features enabled\n          return isVisible(next.host);\n        }\n\n        throw new Error('Lost in Web Components world');\n      } else {\n        return false; // this is a node detached from document in IE8\n      }\n    } else if (next.style && next.style.display === 'none') {\n      return false;\n    }\n\n    next = next.parentNode;\n  }\n\n  return true;\n}\n/**\n * Returns elements top and left offset relative to the document. Function is not compatible with jQuery offset.\n *\n * @param {HTMLElement} element An element to get the offset position from.\n * @returns {object} Returns object with `top` and `left` props.\n */\n\nexport function offset(element) {\n  var rootDocument = element.ownerDocument;\n  var rootWindow = rootDocument.defaultView;\n  var documentElement = rootDocument.documentElement;\n  var elementToCheck = element;\n  var offsetLeft;\n  var offsetTop;\n  var lastElem;\n  var box;\n\n  if (hasCaptionProblem() && elementToCheck.firstChild && elementToCheck.firstChild.nodeName === 'CAPTION') {\n    // fixes problem with Firefox ignoring <caption> in TABLE offset (see also export outerHeight)\n    // http://jsperf.com/offset-vs-getboundingclientrect/8\n    box = elementToCheck.getBoundingClientRect();\n    return {\n      top: box.top + (rootWindow.pageYOffset || documentElement.scrollTop) - (documentElement.clientTop || 0),\n      left: box.left + (rootWindow.pageXOffset || documentElement.scrollLeft) - (documentElement.clientLeft || 0)\n    };\n  }\n\n  offsetLeft = elementToCheck.offsetLeft;\n  offsetTop = elementToCheck.offsetTop;\n  lastElem = elementToCheck;\n  /* eslint-disable no-cond-assign */\n\n  while (elementToCheck = elementToCheck.offsetParent) {\n    // from my observation, document.body always has scrollLeft/scrollTop == 0\n    if (elementToCheck === rootDocument.body) {\n      break;\n    }\n\n    offsetLeft += elementToCheck.offsetLeft;\n    offsetTop += elementToCheck.offsetTop;\n    lastElem = elementToCheck;\n  } // slow - http://jsperf.com/offset-vs-getboundingclientrect/6\n\n\n  if (lastElem && lastElem.style.position === 'fixed') {\n    // if(lastElem !== document.body) { //faster but does gives false positive in Firefox\n    offsetLeft += rootWindow.pageXOffset || documentElement.scrollLeft;\n    offsetTop += rootWindow.pageYOffset || documentElement.scrollTop;\n  }\n\n  return {\n    left: offsetLeft,\n    top: offsetTop\n  };\n}\n/**\n * Returns the document's scrollTop property.\n *\n * @param {Window} [rootWindow] The document window owner.\n * @returns {number}\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getWindowScrollTop() {\n  var rootWindow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  var res = rootWindow.scrollY;\n\n  if (res === void 0) {\n    // IE8-11\n    res = rootWindow.document.documentElement.scrollTop;\n  }\n\n  return res;\n}\n/**\n * Returns the document's scrollLeft property.\n *\n * @param {Window} [rootWindow] The document window owner.\n * @returns {number}\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getWindowScrollLeft() {\n  var rootWindow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  var res = rootWindow.scrollX;\n\n  if (res === void 0) {\n    // IE8-11\n    res = rootWindow.document.documentElement.scrollLeft;\n  }\n\n  return res;\n}\n/**\n * Returns the provided element's scrollTop property.\n *\n * @param {HTMLElement} element An element to get the scroll top position from.\n * @param {Window} [rootWindow] The document window owner.\n * @returns {number}\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getScrollTop(element) {\n  var rootWindow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n\n  if (element === rootWindow) {\n    return getWindowScrollTop(rootWindow);\n  }\n\n  return element.scrollTop;\n}\n/**\n * Returns the provided element's scrollLeft property.\n *\n * @param {HTMLElement} element An element to get the scroll left position from.\n * @param {Window} [rootWindow] The document window owner.\n * @returns {number}\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getScrollLeft(element) {\n  var rootWindow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n\n  if (element === rootWindow) {\n    return getWindowScrollLeft(rootWindow);\n  }\n\n  return element.scrollLeft;\n}\n/**\n * Returns a DOM element responsible for scrolling of the provided element.\n *\n * @param {HTMLElement} element An element to get the scrollable element from.\n * @returns {HTMLElement} Element's scrollable parent.\n */\n\nexport function getScrollableElement(element) {\n  var rootDocument = element.ownerDocument;\n  var rootWindow = rootDocument ? rootDocument.defaultView : void 0;\n\n  if (!rootDocument) {\n    rootDocument = element.document ? element.document : element;\n    rootWindow = rootDocument.defaultView;\n  }\n\n  var props = ['auto', 'scroll'];\n  var supportedGetComputedStyle = isGetComputedStyleSupported();\n  var el = element.parentNode;\n\n  while (el && el.style && rootDocument.body !== el) {\n    var _el$style = el.style,\n        overflow = _el$style.overflow,\n        overflowX = _el$style.overflowX,\n        overflowY = _el$style.overflowY;\n\n    if ([overflow, overflowX, overflowY].includes('scroll')) {\n      return el;\n    } else if (supportedGetComputedStyle) {\n      var _rootWindow$getComput = rootWindow.getComputedStyle(el);\n\n      overflow = _rootWindow$getComput.overflow;\n      overflowX = _rootWindow$getComput.overflowX;\n      overflowY = _rootWindow$getComput.overflowY;\n\n      if (props.includes(overflow) || props.includes(overflowX) || props.includes(overflowY)) {\n        return el;\n      }\n    } // The '+ 1' after the scrollHeight/scrollWidth is to prevent problems with zoomed out Chrome.\n\n\n    if (el.clientHeight <= el.scrollHeight + 1 && (props.includes(overflowY) || props.includes(overflow))) {\n      return el;\n    }\n\n    if (el.clientWidth <= el.scrollWidth + 1 && (props.includes(overflowX) || props.includes(overflow))) {\n      return el;\n    }\n\n    el = el.parentNode;\n  }\n\n  return rootWindow;\n}\n/**\n * Returns a DOM element responsible for trimming the provided element.\n *\n * @param {HTMLElement} base Base element.\n * @returns {HTMLElement} Base element's trimming parent.\n */\n\nexport function getTrimmingContainer(base) {\n  var rootDocument = base.ownerDocument;\n  var rootWindow = rootDocument.defaultView;\n  var el = base.parentNode;\n\n  while (el && el.style && rootDocument.body !== el) {\n    if (el.style.overflow !== 'visible' && el.style.overflow !== '') {\n      return el;\n    }\n\n    var computedStyle = getComputedStyle(el, rootWindow);\n    var allowedProperties = ['scroll', 'hidden', 'auto'];\n    var property = computedStyle.getPropertyValue('overflow');\n    var propertyY = computedStyle.getPropertyValue('overflow-y');\n    var propertyX = computedStyle.getPropertyValue('overflow-x');\n\n    if (allowedProperties.includes(property) || allowedProperties.includes(propertyY) || allowedProperties.includes(propertyX)) {\n      return el;\n    }\n\n    el = el.parentNode;\n  }\n\n  return rootWindow;\n}\n/**\n * Returns a style property for the provided element. (Be it an inline or external style).\n *\n * @param {HTMLElement} element An element to get the style from.\n * @param {string} prop Wanted property.\n * @param {Window} [rootWindow] The document window owner.\n * @returns {string|undefined} Element's style property.\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getStyle(element, prop) {\n  var rootWindow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;\n\n  if (!element) {\n    return;\n  } else if (element === rootWindow) {\n    if (prop === 'width') {\n      return \"\".concat(rootWindow.innerWidth, \"px\");\n    } else if (prop === 'height') {\n      return \"\".concat(rootWindow.innerHeight, \"px\");\n    }\n\n    return;\n  }\n\n  var styleProp = element.style[prop];\n\n  if (styleProp !== '' && styleProp !== void 0) {\n    return styleProp;\n  }\n\n  var computedStyle = getComputedStyle(element, rootWindow);\n\n  if (computedStyle[prop] !== '' && computedStyle[prop] !== void 0) {\n    return computedStyle[prop];\n  }\n}\n/**\n * Verifies if element fit to provided CSSRule.\n *\n * @param {Element} element Element to verify with selector text.\n * @param {CSSRule} rule Selector text from CSSRule.\n * @returns {boolean}\n */\n\nexport function matchesCSSRules(element, rule) {\n  var selectorText = rule.selectorText;\n  var result = false;\n\n  if (rule.type === CSSRule.STYLE_RULE && selectorText) {\n    if (element.msMatchesSelector) {\n      result = element.msMatchesSelector(selectorText);\n    } else if (element.matches) {\n      result = element.matches(selectorText);\n    }\n  }\n\n  return result;\n}\n/**\n * Returns a computed style object for the provided element. (Needed if style is declared in external stylesheet).\n *\n * @param {HTMLElement} element An element to get style from.\n * @param {Window} [rootWindow] The document window owner.\n * @returns {IEElementStyle|CssStyle} Elements computed style object.\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getComputedStyle(element) {\n  var rootWindow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n  return element.currentStyle || rootWindow.getComputedStyle(element);\n}\n/**\n * Returns the element's outer width.\n *\n * @param {HTMLElement} element An element to get the width from.\n * @returns {number} Element's outer width.\n */\n\nexport function outerWidth(element) {\n  return Math.ceil(element.getBoundingClientRect().width);\n}\n/**\n * Returns the element's outer height.\n *\n * @param {HTMLElement} element An element to get the height from.\n * @returns {number} Element's outer height.\n */\n\nexport function outerHeight(element) {\n  if (hasCaptionProblem() && element.firstChild && element.firstChild.nodeName === 'CAPTION') {\n    // fixes problem with Firefox ignoring <caption> in TABLE.offsetHeight\n    // jQuery (1.10.1) still has this unsolved\n    // may be better to just switch to getBoundingClientRect\n    // http://bililite.com/blog/2009/03/27/finding-the-size-of-a-table/\n    // http://lists.w3.org/Archives/Public/www-style/2009Oct/0089.html\n    // http://bugs.jquery.com/ticket/2196\n    // http://lists.w3.org/Archives/Public/www-style/2009Oct/0140.html#start140\n    return element.offsetHeight + element.firstChild.offsetHeight;\n  }\n\n  return element.offsetHeight;\n}\n/**\n * Returns the element's inner height.\n *\n * @param {HTMLElement} element An element to get the height from.\n * @returns {number} Element's inner height.\n */\n\nexport function innerHeight(element) {\n  return element.clientHeight || element.innerHeight;\n}\n/**\n * Returns the element's inner width.\n *\n * @param {HTMLElement} element An element to get the width from.\n * @returns {number} Element's inner width.\n */\n\nexport function innerWidth(element) {\n  return element.clientWidth || element.innerWidth;\n}\n/**\n * @param {HTMLElement} element An element to which the event is added.\n * @param {string} event The event name.\n * @param {Function} callback The callback to add.\n */\n\nexport function addEvent(element, event, callback) {\n  element.addEventListener(event, callback, false);\n}\n/**\n * @param {HTMLElement} element An element from which the event is removed.\n * @param {string} event The event name.\n * @param {Function} callback The function reference to remove.\n */\n\nexport function removeEvent(element, event, callback) {\n  element.removeEventListener(event, callback, false);\n}\n/**\n * Returns caret position in text input.\n *\n * @author https://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea\n * @param {HTMLElement} el An element to check.\n * @returns {number}\n */\n\nexport function getCaretPosition(el) {\n  var rootDocument = el.ownerDocument;\n\n  if (el.selectionStart) {\n    return el.selectionStart;\n  } else if (rootDocument.selection) {\n    // IE8\n    el.focus();\n    var r = rootDocument.selection.createRange();\n\n    if (r === null) {\n      return 0;\n    }\n\n    var re = el.createTextRange();\n    var rc = re.duplicate();\n    re.moveToBookmark(r.getBookmark());\n    rc.setEndPoint('EndToStart', re);\n    return rc.text.length;\n  }\n\n  return 0;\n}\n/**\n * Returns end of the selection in text input.\n *\n * @param {HTMLElement} el An element to check.\n * @returns {number}\n */\n\nexport function getSelectionEndPosition(el) {\n  var rootDocument = el.ownerDocument;\n\n  if (el.selectionEnd) {\n    return el.selectionEnd;\n  } else if (rootDocument.selection) {\n    // IE8\n    var r = rootDocument.selection.createRange();\n\n    if (r === null) {\n      return 0;\n    }\n\n    var re = el.createTextRange();\n    return re.text.indexOf(r.text) + r.text.length;\n  }\n\n  return 0;\n}\n/**\n * Returns text under selection.\n *\n * @param {Window} [rootWindow] The document window owner.\n * @returns {string}\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function getSelectionText() {\n  var rootWindow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  var rootDocument = rootWindow.document;\n  var text = '';\n\n  if (rootWindow.getSelection) {\n    text = rootWindow.getSelection().toString();\n  } else if (rootDocument.selection && rootDocument.selection.type !== 'Control') {\n    text = rootDocument.selection.createRange().text;\n  }\n\n  return text;\n}\n/**\n * Cross-platform helper to clear text selection.\n *\n * @param {Window} [rootWindow] The document window owner.\n */\n// eslint-disable-next-line no-restricted-globals\n\nexport function clearTextSelection() {\n  var rootWindow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  var rootDocument = rootWindow.document; // http://stackoverflow.com/questions/3169786/clear-text-selection-with-javascript\n\n  if (rootWindow.getSelection) {\n    if (rootWindow.getSelection().empty) {\n      // Chrome\n      rootWindow.getSelection().empty();\n    } else if (rootWindow.getSelection().removeAllRanges) {\n      // Firefox\n      rootWindow.getSelection().removeAllRanges();\n    }\n  } else if (rootDocument.selection) {\n    // IE?\n    rootDocument.selection.empty();\n  }\n}\n/**\n * Sets caret position in text input.\n *\n * @author http://blog.vishalon.net/index.php/javascript-getting-and-setting-caret-position-in-textarea/\n * @param {Element} element An element to process.\n * @param {number} pos The selection start position.\n * @param {number} endPos The selection end position.\n */\n\nexport function setCaretPosition(element, pos, endPos) {\n  if (endPos === void 0) {\n    endPos = pos;\n  }\n\n  if (element.setSelectionRange) {\n    element.focus();\n\n    try {\n      element.setSelectionRange(pos, endPos);\n    } catch (err) {\n      var elementParent = element.parentNode;\n      var parentDisplayValue = elementParent.style.display;\n      elementParent.style.display = 'block';\n      element.setSelectionRange(pos, endPos);\n      elementParent.style.display = parentDisplayValue;\n    }\n  }\n}\nvar cachedScrollbarWidth;\n/**\n * Helper to calculate scrollbar width.\n * Source: https://stackoverflow.com/questions/986937/how-can-i-get-the-browsers-scrollbar-sizes.\n *\n * @private\n * @param {Document} rootDocument The onwer of the document.\n * @returns {number}\n */\n// eslint-disable-next-line no-restricted-globals\n\nfunction walkontableCalculateScrollbarWidth() {\n  var rootDocument = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n  var inner = rootDocument.createElement('div');\n  inner.style.height = '200px';\n  inner.style.width = '100%';\n  var outer = rootDocument.createElement('div');\n  outer.style.boxSizing = 'content-box';\n  outer.style.height = '150px';\n  outer.style.left = '0px';\n  outer.style.overflow = 'hidden';\n  outer.style.position = 'absolute';\n  outer.style.top = '0px';\n  outer.style.width = '200px';\n  outer.style.visibility = 'hidden';\n  outer.appendChild(inner);\n  (rootDocument.body || rootDocument.documentElement).appendChild(outer);\n  var w1 = inner.offsetWidth;\n  outer.style.overflow = 'scroll';\n  var w2 = inner.offsetWidth;\n\n  if (w1 === w2) {\n    w2 = outer.clientWidth;\n  }\n\n  (rootDocument.body || rootDocument.documentElement).removeChild(outer);\n  return w1 - w2;\n}\n/**\n * Returns the computed width of the native browser scroll bar.\n *\n * @param {Document} [rootDocument] The owner of the document.\n * @returns {number} Width.\n */\n// eslint-disable-next-line no-restricted-globals\n\n\nexport function getScrollbarWidth() {\n  var rootDocument = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n\n  if (cachedScrollbarWidth === void 0) {\n    cachedScrollbarWidth = walkontableCalculateScrollbarWidth(rootDocument);\n  }\n\n  return cachedScrollbarWidth;\n}\n/**\n * Checks if the provided element has a vertical scrollbar.\n *\n * @param {HTMLElement} element An element to check.\n * @returns {boolean}\n */\n\nexport function hasVerticalScrollbar(element) {\n  return element.offsetWidth !== element.clientWidth;\n}\n/**\n * Checks if the provided element has a vertical scrollbar.\n *\n * @param {HTMLElement} element An element to check.\n * @returns {boolean}\n */\n\nexport function hasHorizontalScrollbar(element) {\n  return element.offsetHeight !== element.clientHeight;\n}\n/**\n * Sets overlay position depending on it's type and used browser.\n *\n * @param {HTMLElement} overlayElem An element to process.\n * @param {number} left The left position of the overlay.\n * @param {number} top The top position of the overlay.\n */\n\nexport function setOverlayPosition(overlayElem, left, top) {\n  if (isIE9()) {\n    overlayElem.style.top = top;\n    overlayElem.style.left = left;\n  } else if (isSafari()) {\n    overlayElem.style['-webkit-transform'] = \"translate3d(\".concat(left, \",\").concat(top, \",0)\");\n    overlayElem.style['-webkit-transform'] = \"translate3d(\".concat(left, \",\").concat(top, \",0)\");\n  } else {\n    overlayElem.style.transform = \"translate3d(\".concat(left, \",\").concat(top, \",0)\");\n  }\n}\n/**\n * @param {HTMLElement} element An element to process.\n * @returns {number|Array}\n */\n\nexport function getCssTransform(element) {\n  var transform;\n\n  if (element.style.transform && (transform = element.style.transform) !== '') {\n    return ['transform', transform];\n  } else if (element.style['-webkit-transform'] && (transform = element.style['-webkit-transform']) !== '') {\n    return ['-webkit-transform', transform];\n  }\n\n  return -1;\n}\n/**\n * @param {HTMLElement} element An element to process.\n */\n\nexport function resetCssTransform(element) {\n  if (element.style.transform && element.style.transform !== '') {\n    element.style.transform = '';\n  } else if (element.style['-webkit-transform'] && element.style['-webkit-transform'] !== '') {\n    element.style['-webkit-transform'] = '';\n  }\n}\n/**\n * Determines if the given DOM element is an input field.\n * Notice: By 'input' we mean input, textarea and select nodes.\n *\n * @param {HTMLElement} element - DOM element.\n * @returns {boolean}\n */\n\nexport function isInput(element) {\n  var inputs = ['INPUT', 'SELECT', 'TEXTAREA'];\n  return element && (inputs.indexOf(element.nodeName) > -1 || element.contentEditable === 'true');\n}\n/**\n * Determines if the given DOM element is an input field placed OUTSIDE of HOT.\n * Notice: By 'input' we mean input, textarea and select nodes which have defined 'data-hot-input' attribute.\n *\n * @param {HTMLElement} element - DOM element.\n * @returns {boolean}\n */\n\nexport function isOutsideInput(element) {\n  return isInput(element) && element.hasAttribute('data-hot-input') === false;\n}\n/**\n * Check if the given DOM element can be focused (by using \"select\" method).\n *\n * @param {HTMLElement} element - DOM element.\n */\n\nexport function selectElementIfAllowed(element) {\n  var activeElement = element.ownerDocument.activeElement;\n\n  if (!isOutsideInput(activeElement)) {\n    element.select();\n  }\n}\n/**\n * Check if the provided element is detached from DOM.\n *\n * @param {HTMLElement} element HTML element to be checked.\n * @returns {boolean} `true` if the element is detached, `false` otherwise.\n */\n\nexport function isDetached(element) {\n  return !element.parentNode;\n}"]},"metadata":{},"sourceType":"module"}