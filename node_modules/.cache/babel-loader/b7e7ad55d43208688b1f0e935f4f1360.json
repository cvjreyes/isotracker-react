{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import\"./piping.css\";import React,{useState,useEffect}from'react';import NavBar from'../../components/navBar/navBar';import RoleDropDown from'../../components/roleDropDown/roleDropDown';import Alert from'@material-ui/lab/Alert';import Collapse from'@material-ui/core/Collapse';import PipingEstimatedDataTable from\"../../components/pipingEstimatedDataTable/pipingEstimatedDataTable\";import ModelledDataTable from\"../../components/modelledDataTable/modelledDataTable\";import ProgressPlotPiping from\"../../components/progressPlotPiping/progressPlotPiping\";import PipingTypesDataTable from\"../../components/pipingTypesDataTable/pipingTypesDataTable\";import PipingExcel from\"../../components/pipingExcel/pipingExcel\";import PipingExcelEdit from\"../../components/pipingExcelEdit/pipingExcelEdit\";import IsoTrackerLogo from\"../../assets/images/3DTracker.svg\";import Trash from\"../../assets/images/Trash.png\";import AlertF from\"../../components/alert/alert\";import Hold from\"../../assets/images/Prohibit.png\";import IdleTimer from'react-idle-timer';import{useHistory}from\"react-router\";import PipingNavBtns from\"../../components/pipingNavBtns/pipingNavBtns\";import PipingDataTable from\"../../components/pipingDataTable/pipingDataTable\";import PipingMyTrayTable from\"../../components/pipingMyTrayTable/pipingMyTrayTable\";import PipingBinTable from\"../../components/pipingBinTable/pipingBinTable\";import IsoControlFullDataTable from\"../../components/isoControlFullDataTable/isoControlFullDataTable\";import IsoControlGroupLineIdDataTable from\"../../components/isoControlGroupLineIdDataTable/isoControlGroupLineIdDataTable\";import UploadBOMIsocontrolPopUp from\"../../components/uploadBomIsocontrolPopUp/uploadBomIsocontrolPopUp\";import EstimatedPipesExcel from\"../../components/estimatedPipesExcel/estimatedPipesExcel\";import IsoControlHoldsDataTable from\"../../components/isoControlHoldsDataTable/isoControlHoldsDataTable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CryptoJS=require(\"crypto-js\");var SecureStorage=require(\"secure-web-storage\");var SECRET_KEY='sanud2ha8shd72h';var secureStorage=new SecureStorage(localStorage,{hash:function hash(key){key=CryptoJS.SHA256(key,SECRET_KEY);return key.toString();},encrypt:function encrypt(data){data=CryptoJS.AES.encrypt(data,SECRET_KEY);data=data.toString();return data;},decrypt:function decrypt(data){data=CryptoJS.AES.decrypt(data,SECRET_KEY);data=data.toString(CryptoJS.enc.Utf8);return data;}});var Piping=function Piping(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentRole=_useState2[0],setCurrentRole=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),roles=_useState4[0],setRoles=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),weight=_useState6[0],setWeight=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),progress=_useState8[0],setProgress=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),successAlert=_useState10[0],setSuccessAlert=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),selected=_useState12[0],setSelected=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),_updateData=_useState14[0],setUpdateData=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),warningSelected=_useState16[0],setWarningSelected=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),transactionSuccess=_useState18[0],setTransactionSuccess=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),notVI=_useState20[0],setNotVI=_useState20[1];var _useState21=useState(\"PipingMyTray\"),_useState22=_slicedToArray(_useState21,2),currentTab=_useState22[0],setCurrentTab=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),estimatedWarning=_useState24[0],setEstimatedWarning=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),estimatedEmpty=_useState26[0],setEstimatedEmpty=_useState26[1];var _useState27=useState(\"...\"),_useState28=_slicedToArray(_useState27,2),modelledWeight=_useState28[0],setModelledWeight=_useState28[1];var _useState29=useState(\"...\"),_useState30=_slicedToArray(_useState29,2),notModelledWeight=_useState30[0],setNotModelledWeight=_useState30[1];var _useState31=useState(\"...\"),_useState32=_slicedToArray(_useState31,2),totalIsocontrolWeight=_useState32[0],setTotalIsocontrolWeight=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),loading=_useState34[0],setLoading=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),maxTrayWarning=_useState36[0],setMaxTrayWarning=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),minTrayWarning=_useState38[0],setMinTrayWarning=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),unclaimAlert=_useState40[0],setUnclaimAlert=_useState40[1];var _useState41=useState(false),_useState42=_slicedToArray(_useState41,2),changesSaved=_useState42[0],setChangesSaved=_useState42[1];var history=useHistory();useEffect(function(){var body={user:currentUser};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/roles/user\",options).then(function(response){return response.json();}).then(function(json){setRoles(json.roles);if(secureStorage.getItem('role')!==null){setCurrentRole(secureStorage.getItem('role'));}else{secureStorage.setItem('role',json.roles[0]);setCurrentRole(secureStorage.getItem('role'));}}).catch(function(error){console.log(error);});},[currentRole]);useEffect(function(){var options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/estimatedPipingWeight\",options).then(function(response){return response.json();}).then(function(json){setWeight(json.weight);setProgress(json.progress);setModelledWeight(json.modelledWeight);}).catch(function(error){console.log(error);});var body={user:currentUser};options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[_updateData]);useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return setSelected([]);case 2:case\"end\":return _context2.stop();}}},_callee2);})),[currentTab]);function success(){setSuccessAlert(true);setTimeout(function(){setSuccessAlert(false);},1000);}function handleOnIdle(){var body={user:currentUser};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(json){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}());secureStorage.clear();history.push(\"/\"+process.env.REACT_APP_PROJECT);}useEffect(function(){if(!secureStorage.getItem(\"user\")){history.push(\"/\"+process.env.REACT_APP_PROJECT+\"/\");}},[]);var dataTableHeight=\"600px\";document.body.style.zoom=0.8;document.title=process.env.REACT_APP_APP_NAMEPROJ;if(currentTab===\"\"||currentTab===null){setCurrentTab(\"Estimated\");}var currentUser=secureStorage.getItem('user');var table=null;var actionBtns=null;var recycleBinBtn=null;var holdBtn=null;var isocontrolWeightsComponent=null;var isoControllLineIdGroupBtn=null;var uploadBOMBtn=null;if(currentTab===\"Estimated\"){table=/*#__PURE__*/_jsx(PipingEstimatedDataTable,{});}else if(currentTab===\"Modelled\"){table=/*#__PURE__*/_jsx(ModelledDataTable,{});}else if(currentTab===\"Progress\"){table=/*#__PURE__*/_jsx(ProgressPlotPiping,{});}else if(currentTab===\"Types\"){table=/*#__PURE__*/_jsx(PipingTypesDataTable,{});}else if(currentTab===\"Key parameters\"){table=/*#__PURE__*/_jsx(PipingExcel,{success:success.bind(_this)});}else if(currentTab===\"Edit\"){table=/*#__PURE__*/_jsx(PipingExcelEdit,{success:success.bind(_this)});}else if(currentTab===\"PipingModelled\"||currentTab===\"PipingSStress\"||currentTab===\"PipingRStress\"||currentTab===\"PipingStress\"||currentTab===\"PipingSupports\"||currentTab===\"PipingSDesign\"){actionBtns=/*#__PURE__*/_jsx(\"button\",{className:\"action__btn\",name:\"claim\",value:\"claim\",onClick:function onClick(){return claimClick();},children:\"Claim\"});table=/*#__PURE__*/_jsx(PipingDataTable,{currentTab:currentTab,updateData:_updateData,onChange:function onChange(value){return setSelected(value);},claimClick:claimClick.bind(_this),loading:function loading(value){return setLoading(value);}});}else if(currentTab===\"PipingMyTray\"){actionBtns=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action__btn\",name:\"claim\",value:\"claim\",onClick:function onClick(){return nextClick();},children:\"Next step\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action__btn\",name:\"unclaim\",value:\"unclaim\",onClick:function onClick(){return unclaimClick();},children:\"Unclaim\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action__btn\",name:\"claim\",value:\"claim\",onClick:function onClick(){return returnClick();},children:\"Return\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action__btn\",name:\"claim\",value:\"claim\",onClick:function onClick(){return deleteClick();},children:\"Delete\"})]});table=/*#__PURE__*/_jsx(PipingMyTrayTable,{onChange:function onChange(value){return setSelected(value);},updateData:_updateData,updateDataMethod:function updateDataMethod(){return setUpdateData(!_updateData);},loading:function loading(value){return setLoading(value);}});}if(currentTab===\"Piping recycle bin\"){table=/*#__PURE__*/_jsx(PipingBinTable,{onChange:function onChange(value){return setSelected(value);},updateData:_updateData,updateDataMethod:function updateDataMethod(){return setUpdateData(!_updateData);}});actionBtns=/*#__PURE__*/_jsx(\"button\",{className:\"action__btn\",name:\"restore\",value:\"restore\",onClick:function onClick(){return restoreClick();},children:\"Restore\"});recycleBinBtn=/*#__PURE__*/_jsxs(\"button\",{className:\"navBar__button\",style:{backgroundColor:\"#99C6F8\",marginLeft:\"232px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:Trash,alt:\"trash\",className:\"navBar__icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"navBar__button__text\",children:\"Trash\"})]});}else{recycleBinBtn=/*#__PURE__*/_jsxs(\"button\",{className:\"navBar__button\",onClick:function onClick(){return setCurrentTab(\"Piping recycle bin\");},style:{marginLeft:\"232px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:Trash,alt:\"trash\",className:\"navBar__icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"navBar__button__text\",children:\"Trash\"})]});}if(currentTab===\"IsocontrolHolds\"){table=/*#__PURE__*/_jsx(IsoControlHoldsDataTable,{updateData:_updateData,updateDataMethod:function updateDataMethod(){return setUpdateData(!_updateData);}});holdBtn=/*#__PURE__*/_jsxs(\"button\",{className:\"navBar__button\",style:{backgroundColor:\"#99C6F8\"},children:[/*#__PURE__*/_jsx(\"img\",{src:Hold,alt:\"hold\",className:\"navBar__icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"navBar__button__text\",children:\"Hold\"})]});}else{holdBtn=/*#__PURE__*/_jsxs(\"button\",{className:\"navBar__button\",onClick:function onClick(){return setCurrentTab(\"IsocontrolHolds\");},children:[/*#__PURE__*/_jsx(\"img\",{src:Hold,alt:\"hold\",className:\"navBar__icon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"navBar__button__text\",children:\"Hold\"})]});}if(currentTab===\"IsoControlFull\"){secureStorage.setItem(\"tab\",\"IsoControlFull\");table=/*#__PURE__*/_jsx(IsoControlFullDataTable,{loading:function loading(value){return setLoading(value);}});uploadBOMBtn=/*#__PURE__*/_jsx(UploadBOMIsocontrolPopUp,{success:success.bind(_this)});isoControllLineIdGroupBtn=/*#__PURE__*/_jsx(\"button\",{className:\"isocontrol__lineid__group__button\",onClick:function onClick(){setCurrentTab(\"IsoControlLineIdGroup\");},children:\"Group by line ID\"});}if(currentTab===\"EstimatedPipes\"){secureStorage.setItem(\"tab\",\"EstimatedPipes\");table=/*#__PURE__*/_jsx(EstimatedPipesExcel,{success:function success(){return setChangesSaved(true);},updateData:function updateData(){return setUpdateData(!_updateData);},estimatedWarning:function estimatedWarning(){return setEstimatedWarning(true);},estimatedEmpty:function estimatedEmpty(){return setEstimatedEmpty(true);}});}if(currentTab===\"IsoControlLineIdGroup\"){secureStorage.setItem(\"tab\",\"IsoControlLineIdGroup\");isoControllLineIdGroupBtn=/*#__PURE__*/_jsx(\"button\",{className:\"isocontrol__lineid__group__button\",style:{backgroundColor:\"rgb(148, 220, 170)\"},onClick:function onClick(){setCurrentTab(\"IsoControlFull\");},children:\"Group by line ID\"});table=/*#__PURE__*/_jsx(IsoControlGroupLineIdDataTable,{loading:function loading(value){return setLoading(value);}});//editCustomBtn = <button className=\"isocontrol__lineid__group__button\" onClick={() => {setCurrentTab(\"IsoControlEditCustom\")}} style={{marginLeft:\"20px\"}}>Edit custom fields</button>\n}if(currentTab===\"IsoControlFull\"){isocontrolWeightsComponent=/*#__PURE__*/_jsxs(\"button\",{className:\"isocontrol__weigths\",disabled:true,children:[\"Modelled: \",modelledWeight,\" t \\xA0\\xA0\\xA0\\xA0   Not modelled: \",notModelledWeight,\" t  \\xA0\\xA0\\xA0\\xA0 Total: \",totalIsocontrolWeight,\" t\"]});}function claimClick(){return _claimClick.apply(this,arguments);}function _claimClick(){_claimClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var body,options;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(selected.length>0)){_context4.next=16;break;}_context4.next=3;return setLoading(true);case 3:localStorage.setItem(\"update\",true);body={user:currentUser,pipes:selected};options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};_context4.next=8;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/claimPipes\",options).then(function(response){return response.json();}).then(function(json){if(json.success){setSuccessAlert(true);}});case 8:_context4.next=10;return setUpdateData(!_updateData);case 10:_context4.next=12;return setSelected([]);case 12:_context4.next=14;return setLoading(false);case 14:_context4.next=18;break;case 16:_context4.next=18;return setWarningSelected(true);case 18:case\"end\":return _context4.stop();}}},_callee4);}));return _claimClick.apply(this,arguments);}function unclaimClick(){return _unclaimClick.apply(this,arguments);}function _unclaimClick(){_unclaimClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var body,options;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(selected.length>0)){_context5.next=17;break;}_context5.next=3;return setLoading(true);case 3:localStorage.setItem(\"update\",true);console.log(selected);body={pipes:selected};options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};_context5.next=9;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/unclaimPipes\",options).then(function(response){return response.json();}).then(function(json){if(json.success){setUnclaimAlert(true);}});case 9:_context5.next=11;return setUpdateData(!_updateData);case 11:_context5.next=13;return setSelected([]);case 13:_context5.next=15;return setLoading(false);case 15:_context5.next=19;break;case 17:_context5.next=19;return setWarningSelected(true);case 19:case\"end\":return _context5.stop();}}},_callee5);}));return _unclaimClick.apply(this,arguments);}function nextClick(){return _nextClick.apply(this,arguments);}function _nextClick(){_nextClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var pipes,notvi,_maxTrayWarning,i,body,options;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(selected.length>0)){_context6.next=18;break;}localStorage.setItem(\"update\",true);pipes=[];notvi=false,_maxTrayWarning=false;for(i=0;i<selected.length;i++){if(selected[i][1].indexOf(1)>-1){notvi=true;}else if(selected[i][1].indexOf(2)>-1){_maxTrayWarning=true;}else{pipes.push(selected[i][0]);}}if(!(pipes.length>0)){_context6.next=10;break;}body={user:currentUser,pipes:pipes};options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};_context6.next=10;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/nextStep\",options).then(function(response){return response.json();}).then(function(json){if(json.success){setTransactionSuccess(true);}});case 10:if(notvi){setNotVI(true);}if(_maxTrayWarning){setMaxTrayWarning(true);}_context6.next=14;return setUpdateData(!_updateData);case 14:_context6.next=16;return setSelected([]);case 16:_context6.next=20;break;case 18:_context6.next=20;return setWarningSelected(true);case 20:case\"end\":return _context6.stop();}}},_callee6);}));return _nextClick.apply(this,arguments);}function returnClick(){return _returnClick.apply(this,arguments);}function _returnClick(){_returnClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var _minTrayWarning,pipes,notvi,i,body,options;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!(selected.length>0)){_context7.next=20;break;}localStorage.setItem(\"update\",true);_minTrayWarning=false;pipes=[];notvi=false;console.log(selected);for(i=0;i<selected.length;i++){if(selected[i][1].indexOf(3)>-1){_minTrayWarning=true;}else{pipes.push(selected[i][0]);}}if(!(pipes.length>0)){_context7.next=12;break;}body={user:currentUser,pipes:pipes};options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};_context7.next=12;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/returnPipes\",options).then(function(response){return response.json();}).then(function(json){if(json.success){setTransactionSuccess(true);}});case 12:if(notvi){setNotVI(true);}if(_minTrayWarning){setMinTrayWarning(true);}_context7.next=16;return setUpdateData(!_updateData);case 16:_context7.next=18;return setSelected([]);case 18:_context7.next=22;break;case 20:_context7.next=22;return setWarningSelected(true);case 22:case\"end\":return _context7.stop();}}},_callee7);}));return _returnClick.apply(this,arguments);}function restoreClick(){return _restoreClick.apply(this,arguments);}function _restoreClick(){_restoreClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var body,options;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!(selected.length>0)){_context8.next=12;break;}localStorage.setItem(\"update\",true);body={user:currentUser,pipes:selected};options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};_context8.next=6;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/restorePipes\",options).then(function(response){return response.json();}).then(function(json){if(json.success){setTransactionSuccess(true);}});case 6:_context8.next=8;return setUpdateData(!_updateData);case 8:_context8.next=10;return setSelected([]);case 10:_context8.next=14;break;case 12:_context8.next=14;return setWarningSelected(true);case 14:case\"end\":return _context8.stop();}}},_callee8);}));return _restoreClick.apply(this,arguments);}function deleteClick(){return _deleteClick.apply(this,arguments);}function _deleteClick(){_deleteClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var pipes,notvi,i,body,options;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!(selected.length>0)){_context9.next=17;break;}localStorage.setItem(\"update\",true);pipes=[];notvi=false;for(i=0;i<selected.length;i++){pipes.push(selected[i][0]);}if(!(pipes.length>0)){_context9.next=10;break;}body={user:currentUser,pipes:pipes};options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};_context9.next=10;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/deletePipes\",options).then(function(response){return response.json();}).then(function(json){if(json.success){setTransactionSuccess(true);}});case 10:if(notvi){setNotVI(true);}_context9.next=13;return setUpdateData(!_updateData);case 13:_context9.next=15;return setSelected([]);case 15:_context9.next=19;break;case 17:_context9.next=19;return setWarningSelected(true);case 19:case\"end\":return _context9.stop();}}},_callee9);}));return _deleteClick.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"body\",{children:[/*#__PURE__*/_jsx(IdleTimer,{timeout:1000*60*15,onIdle:handleOnIdle,debounce:250}),/*#__PURE__*/_jsx(NavBar,{onChange:function onChange(value){return setCurrentTab(currentTab);}}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(successAlert?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setSuccessAlert(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"success\",text:\"Pipes claimed!\",margin:\"0px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(changesSaved?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setChangesSaved(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"success\",text:\"Changes saved!\",margin:\"0px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(transactionSuccess?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setTransactionSuccess(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"success\",margin:\"0px\",text:\"The action has been completed.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(unclaimAlert?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setUnclaimAlert(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"success\",margin:\"0px\",text:\"Pipes unclaimed!\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(warningSelected?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setWarningSelected(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"warning\",text:\"Select at least one pipe!\",margin:\"10px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(notVI?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setNotVI(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"warning\",text:\"Can't send to S-Design without valves and instruments check or N/A!\",margin:\"10px\"})}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",marginTop:\"180px\",marginLeft:\"45%\"},children:/*#__PURE__*/_jsx(\"i\",{className:\"discipline__title\",style:{fontStyle:\"normal\"},children:\"Piping IsoControl\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(estimatedWarning?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setEstimatedWarning(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"warning\",text:\"Changes on modelled lines can't be saved!\",margin:\"0px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(estimatedEmpty?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setEstimatedEmpty(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"warning\",text:\"Pipes with empty values didn't save!\",margin:\"0px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(minTrayWarning?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setMinTrayWarning(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"warning\",text:\"Pipes on Modelled can't be returned!\",margin:\"0px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(maxTrayWarning?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return setMaxTrayWarning(false);},children:/*#__PURE__*/_jsx(AlertF,{type:\"warning\",text:\"Pipes on S-Design are completed!\",margin:\"0px\"})}),/*#__PURE__*/_jsx(Collapse,{in:loading,children:/*#__PURE__*/_jsx(Alert,{style:{fontSize:\"20px\",position:\"fixed\",left:\"50%\",top:\"10%\",transform:\"translate(-50%, -50%)\"},severity:\"info\",children:\"Processing...\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"isotracker__row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"isotracker__column\",children:[/*#__PURE__*/_jsx(\"img\",{src:IsoTrackerLogo,alt:\"isoTrackerLogo\",className:\"isoTrackerLogo__image2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"roleSelector__containerF\",children:/*#__PURE__*/_jsx(RoleDropDown,{style:{paddingLeft:\"2px\"},onChange:function onChange(value){return setCurrentRole(value);},roles:roles})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"isotracker__column\",children:/*#__PURE__*/_jsx(\"table\",{className:\"equipTable__table\",style:{marginTop:\"270px\",width:\"50%\",marginLeft:\"45%\"},children:/*#__PURE__*/_jsxs(\"tbody\",{className:\"equipable__body\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"equipTable__header\",style:{backgroundColor:\"#338DF1\",borderRadius:\"1em 0 0 0\"},children:\"Estimated weight\"}),/*#__PURE__*/_jsx(\"td\",{className:\"equipTable__header\",style:{backgroundColor:\"#338DF1\"},children:\"Modelled weight\"}),/*#__PURE__*/_jsx(\"td\",{className:\"equipTable__header\",style:{backgroundColor:\"#338DF1\",borderRadius:\"0 1em 0 0\"},children:\"Total progress\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"equipTable__state\",style:{borderRadius:\"0 0 0 1em\"},children:weight}),/*#__PURE__*/_jsx(\"td\",{className:\"equipTable__state\",children:modelledWeight}),/*#__PURE__*/_jsxs(\"td\",{className:\"equipTable__state\",style:{borderRadius:\"0 0 1em 0\"},children:[progress,\"%\"]})]})]})})})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"isotracker__table__container\",children:[/*#__PURE__*/_jsx(\"tr\",{className:\"isotracker__table__navBar__container\",children:/*#__PURE__*/_jsxs(\"th\",{colspan:\"2\",className:\"isotracker__table__navBar\",children:[recycleBinBtn,holdBtn]})}),/*#__PURE__*/_jsxs(\"tr\",{className:\"isotracker__table__tray__and__table__container\",style:{height:dataTableHeight},children:[/*#__PURE__*/_jsx(\"td\",{className:\"disciplines__table__trays\",children:/*#__PURE__*/_jsx(\"div\",{className:\"trays__container\",children:/*#__PURE__*/_jsx(PipingNavBtns,{onChange:function onChange(value){return setCurrentTab(value);},currentTab:currentTab,currentRole:currentRole})})}),/*#__PURE__*/_jsx(\"td\",{className:\"discplines__table__table\",style:{height:dataTableHeight},children:/*#__PURE__*/_jsxs(\"div\",{style:{height:dataTableHeight,width:\"2000px\"},className:\"isotracker__table__table__container\",children:[isoControllLineIdGroupBtn,uploadBOMBtn,table]})})]})]}),/*#__PURE__*/_jsx(\"center\",{className:\"actionBtns__container\",children:actionBtns})]});};export default Piping;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/pages/piping/piping.js"],"names":["React","useState","useEffect","NavBar","RoleDropDown","Alert","Collapse","PipingEstimatedDataTable","ModelledDataTable","ProgressPlotPiping","PipingTypesDataTable","PipingExcel","PipingExcelEdit","Trash","AlertF","Hold","IdleTimer","useHistory","PipingNavBtns","PipingDataTable","PipingMyTrayTable","PipingBinTable","IsoControlFullDataTable","IsoControlGroupLineIdDataTable","UploadBOMIsocontrolPopUp","EstimatedPipesExcel","IsoControlHoldsDataTable","CryptoJS","require","SecureStorage","SECRET_KEY","secureStorage","localStorage","hash","key","SHA256","toString","encrypt","data","AES","decrypt","enc","Utf8","Piping","currentRole","setCurrentRole","roles","setRoles","weight","setWeight","progress","setProgress","successAlert","setSuccessAlert","selected","setSelected","updateData","setUpdateData","warningSelected","setWarningSelected","transactionSuccess","setTransactionSuccess","notVI","setNotVI","currentTab","setCurrentTab","estimatedWarning","setEstimatedWarning","estimatedEmpty","setEstimatedEmpty","modelledWeight","setModelledWeight","notModelledWeight","setNotModelledWeight","totalIsocontrolWeight","setTotalIsocontrolWeight","loading","setLoading","maxTrayWarning","setMaxTrayWarning","minTrayWarning","setMinTrayWarning","unclaimAlert","setUnclaimAlert","changesSaved","setChangesSaved","history","body","user","currentUser","options","method","headers","JSON","stringify","fetch","process","env","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","getItem","setItem","catch","error","console","log","success","setTimeout","handleOnIdle","clear","push","REACT_APP_PROJECT","dataTableHeight","document","style","zoom","title","REACT_APP_APP_NAMEPROJ","table","actionBtns","recycleBinBtn","holdBtn","isocontrolWeightsComponent","isoControllLineIdGroupBtn","uploadBOMBtn","bind","claimClick","value","nextClick","unclaimClick","returnClick","deleteClick","restoreClick","backgroundColor","marginLeft","length","pipes","notvi","i","indexOf","position","marginTop","fontStyle","fontSize","left","top","transform","IsoTrackerLogo","paddingLeft","width","borderRadius","height"],"mappings":"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","sourcesContent":["import \"./piping.css\"\r\nimport React, { useState , useEffect} from 'react'\r\nimport NavBar from '../../components/navBar/navBar'\r\nimport RoleDropDown from '../../components/roleDropDown/roleDropDown'\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Collapse from '@material-ui/core/Collapse'\r\nimport PipingEstimatedDataTable from \"../../components/pipingEstimatedDataTable/pipingEstimatedDataTable\"\r\nimport ModelledDataTable from \"../../components/modelledDataTable/modelledDataTable\"\r\nimport ProgressPlotPiping from \"../../components/progressPlotPiping/progressPlotPiping\"\r\nimport PipingTypesDataTable from \"../../components/pipingTypesDataTable/pipingTypesDataTable\"\r\nimport PipingExcel from \"../../components/pipingExcel/pipingExcel\"\r\nimport PipingExcelEdit from \"../../components/pipingExcelEdit/pipingExcelEdit\"\r\nimport IsoTrackerLogo from \"../../assets/images/3DTracker.svg\"\r\nimport Trash from \"../../assets/images/Trash.png\"\r\nimport AlertF from \"../../components/alert/alert\"\r\nimport Hold from \"../../assets/images/Prohibit.png\"\r\n\r\nimport IdleTimer from 'react-idle-timer'\r\nimport {useHistory} from \"react-router\";\r\nimport PipingNavBtns from \"../../components/pipingNavBtns/pipingNavBtns\"\r\n\r\nimport PipingDataTable from \"../../components/pipingDataTable/pipingDataTable\"\r\nimport PipingMyTrayTable from \"../../components/pipingMyTrayTable/pipingMyTrayTable\"\r\nimport PipingBinTable from \"../../components/pipingBinTable/pipingBinTable\"\r\n\r\nimport IsoControlFullDataTable from \"../../components/isoControlFullDataTable/isoControlFullDataTable\"\r\nimport IsoControlGroupLineIdDataTable from \"../../components/isoControlGroupLineIdDataTable/isoControlGroupLineIdDataTable\"\r\nimport UploadBOMIsocontrolPopUp from \"../../components/uploadBomIsocontrolPopUp/uploadBomIsocontrolPopUp\"\r\nimport EstimatedPipesExcel from \"../../components/estimatedPipesExcel/estimatedPipesExcel\"\r\nimport IsoControlHoldsDataTable from \"../../components/isoControlHoldsDataTable/isoControlHoldsDataTable\";\r\n\r\nconst CryptoJS = require(\"crypto-js\");\r\nconst SecureStorage = require(\"secure-web-storage\");\r\nvar SECRET_KEY = 'sanud2ha8shd72h';\r\n\r\nvar secureStorage = new SecureStorage(localStorage, {\r\n    hash: function hash(key) {\r\n        key = CryptoJS.SHA256(key, SECRET_KEY);\r\n\r\n        return key.toString();\r\n    },\r\n    encrypt: function encrypt(data) {\r\n        data = CryptoJS.AES.encrypt(data, SECRET_KEY);\r\n\r\n        data = data.toString();\r\n\r\n        return data;\r\n    },\r\n    decrypt: function decrypt(data) {\r\n        data = CryptoJS.AES.decrypt(data, SECRET_KEY);\r\n\r\n        data = data.toString(CryptoJS.enc.Utf8);\r\n\r\n        return data;\r\n    }\r\n});\r\n\r\nconst Piping = () => {\r\n\r\n    const [currentRole, setCurrentRole] = useState();\r\n    const [roles, setRoles] = useState();\r\n    const[weight, setWeight] = useState();\r\n    const[progress, setProgress] = useState();\r\n    const[successAlert, setSuccessAlert] = useState(false);\r\n    const[selected, setSelected] = useState([])\r\n    const [updateData, setUpdateData] = useState(false);\r\n    const [warningSelected, setWarningSelected] = useState(false);\r\n    const [transactionSuccess, setTransactionSuccess] = useState(false)\r\n    const [notVI, setNotVI] = useState(false)\r\n    const [currentTab, setCurrentTab] = useState(\"PipingMyTray\")\r\n    const [estimatedWarning, setEstimatedWarning] = useState(false)\r\n    const [estimatedEmpty, setEstimatedEmpty] = useState(false)\r\n    const [modelledWeight, setModelledWeight] = useState(\"...\")\r\n    const [notModelledWeight, setNotModelledWeight] = useState(\"...\")\r\n    const [totalIsocontrolWeight, setTotalIsocontrolWeight] = useState(\"...\")\r\n    const [loading, setLoading] = useState(false)\r\n    const [maxTrayWarning, setMaxTrayWarning] = useState(false)\r\n    const [minTrayWarning, setMinTrayWarning] = useState(false)\r\n    const [unclaimAlert, setUnclaimAlert] = useState(false)\r\n    const [changesSaved, setChangesSaved] = useState(false)\r\n    const history = useHistory()\r\n\r\n    useEffect(()=>{\r\n        const body = {\r\n            user: currentUser,\r\n        }\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n       \r\n\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/roles/user\", options)\r\n            .then(response => response.json())\r\n            .then(json => {\r\n                setRoles(json.roles);\r\n                if(secureStorage.getItem('role') !== null){\r\n                    setCurrentRole(secureStorage.getItem('role'))\r\n                }else{\r\n                    secureStorage.setItem('role', json.roles[0])\r\n                    setCurrentRole(secureStorage.getItem('role'))\r\n                }\r\n                }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            })       \r\n            \r\n    },[currentRole]);\r\n\r\n    useEffect(()=>{\r\n\r\n        let options = {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n        }\r\n       \r\n\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/estimatedPipingWeight\", options)\r\n            .then(response => response.json())\r\n            .then(json => {\r\n                setWeight(json.weight)\r\n                setProgress(json.progress)\r\n                setModelledWeight(json.modelledWeight)\r\n            }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            })       \r\n\r\n            const body = {\r\n                user: currentUser,\r\n            }\r\n            options = {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify(body)\r\n            }\r\n            fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\", options)\r\n                .then(response => response.json())\r\n                .then(async json => {\r\n    \r\n                })\r\n            \r\n    },[updateData]);\r\n\r\n    useEffect(async ()=>{\r\n        await setSelected([])\r\n    },[currentTab]);\r\n\r\n    function success(){\r\n        setSuccessAlert(true)\r\n        setTimeout(function () {\r\n            setSuccessAlert(false)\r\n        }, 1000);\r\n    }\r\n\r\n    function handleOnIdle(){\r\n        const body = {\r\n            user: currentUser,\r\n        }\r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/exitEditCSP\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n\r\n            })\r\n        secureStorage.clear()\r\n        history.push(\"/\" + process.env.REACT_APP_PROJECT)\r\n    }\r\n    \r\n   \r\n\r\n    useEffect(()=>{\r\n        if(!secureStorage.getItem(\"user\")){\r\n            history.push(\"/\"+process.env.REACT_APP_PROJECT+\"/\");\r\n        }\r\n    }, [])\r\n\r\n    var dataTableHeight = \"600px\"\r\n\r\n    document.body.style.zoom = 0.8\r\n    document.title= process.env.REACT_APP_APP_NAMEPROJ\r\n    if(currentTab === \"\" || currentTab === null){\r\n        setCurrentTab(\"Estimated\")\r\n    }\r\n\r\n    var currentUser = secureStorage.getItem('user')\r\n    var table = null\r\n    let actionBtns = null\r\n    let recycleBinBtn = null\r\n    let holdBtn = null\r\n    let isocontrolWeightsComponent = null\r\n    let isoControllLineIdGroupBtn = null\r\n    let uploadBOMBtn = null\r\n\r\n    if(currentTab === \"Estimated\"){\r\n        table = <PipingEstimatedDataTable/>\r\n    }else if(currentTab === \"Modelled\"){    \r\n        table = <ModelledDataTable/>\r\n    }else if(currentTab === \"Progress\"){\r\n        table = <ProgressPlotPiping/>\r\n    }else if(currentTab === \"Types\"){\r\n        table = <PipingTypesDataTable/>\r\n    }else if(currentTab === \"Key parameters\"){\r\n        table = <PipingExcel success={success.bind(this)}/>\r\n    }else if(currentTab === \"Edit\"){\r\n        table = <PipingExcelEdit success={success.bind(this)}/>\r\n    }else if(currentTab === \"PipingModelled\" || currentTab === \"PipingSStress\" || currentTab === \"PipingRStress\" || currentTab === \"PipingStress\" || currentTab === \"PipingSupports\" || currentTab === \"PipingSDesign\"){\r\n        actionBtns = <button className=\"action__btn\"  name=\"claim\" value=\"claim\" onClick={() => claimClick()}>Claim</button>\r\n        table = <PipingDataTable currentTab = {currentTab} updateData={updateData} onChange={value=> setSelected(value)} claimClick={claimClick.bind(this)} loading={value => setLoading(value)}/>  \r\n    }else if(currentTab === \"PipingMyTray\"){\r\n        actionBtns = <div><button className=\"action__btn\"  name=\"claim\" value=\"claim\" onClick={() => nextClick()}>Next step</button><button className=\"action__btn\"  name=\"unclaim\" value=\"unclaim\" onClick={() => unclaimClick()}>Unclaim</button><button className=\"action__btn\"  name=\"claim\" value=\"claim\" onClick={() => returnClick()}>Return</button><button className=\"action__btn\"  name=\"claim\" value=\"claim\" onClick={() => deleteClick()}>Delete</button></div>\r\n        table = <PipingMyTrayTable onChange={value=> setSelected(value)} updateData={updateData} updateDataMethod={() => setUpdateData(!updateData)} loading={value => setLoading(value)}/>\r\n    }\r\n    \r\n    if(currentTab === \"Piping recycle bin\"){\r\n        table = <PipingBinTable onChange={value=> setSelected(value)} updateData={updateData} updateDataMethod={() => setUpdateData(!updateData)}/>\r\n        actionBtns = <button className=\"action__btn\"  name=\"restore\" value=\"restore\" onClick={() => restoreClick()}>Restore</button>\r\n        recycleBinBtn = <button className=\"navBar__button\" style={{backgroundColor:\"#99C6F8\", marginLeft:\"232px\"}}><img src={Trash} alt=\"trash\" className=\"navBar__icon\"></img><p className=\"navBar__button__text\">Trash</p></button>\r\n    }else{\r\n        recycleBinBtn = <button className=\"navBar__button\" onClick={()=>setCurrentTab(\"Piping recycle bin\")} style={{marginLeft:\"232px\"}}><img src={Trash} alt=\"trash\" className=\"navBar__icon\"></img><p className=\"navBar__button__text\">Trash</p></button>\r\n    }\r\n\r\n    if(currentTab === \"IsocontrolHolds\"){\r\n        table = <IsoControlHoldsDataTable updateData={updateData} updateDataMethod={() => setUpdateData(!updateData)}/>\r\n        holdBtn = <button className=\"navBar__button\"  style={{backgroundColor:\"#99C6F8\"}}><img src={Hold} alt=\"hold\" className=\"navBar__icon\"></img><p className=\"navBar__button__text\">Hold</p></button>\r\n    }else{\r\n        holdBtn = <button className=\"navBar__button\" onClick={()=>setCurrentTab(\"IsocontrolHolds\")}><img src={Hold} alt=\"hold\" className=\"navBar__icon\"></img><p className=\"navBar__button__text\">Hold</p></button>\r\n    }\r\n\r\n    if(currentTab === \"IsoControlFull\"){\r\n        secureStorage.setItem(\"tab\", \"IsoControlFull\")\r\n        table = <IsoControlFullDataTable loading={value => setLoading(value)}/>\r\n        uploadBOMBtn = <UploadBOMIsocontrolPopUp success={success.bind(this)} />\r\n        isoControllLineIdGroupBtn = <button className=\"isocontrol__lineid__group__button\" onClick={() =>{setCurrentTab(\"IsoControlLineIdGroup\")}}>Group by line ID</button>\r\n    }\r\n\r\n    if(currentTab === \"EstimatedPipes\"){\r\n        secureStorage.setItem(\"tab\", \"EstimatedPipes\")\r\n        table = <EstimatedPipesExcel success={() => setChangesSaved(true)} updateData={() => setUpdateData(!updateData)} estimatedWarning={() => setEstimatedWarning(true)} estimatedEmpty={() => setEstimatedEmpty(true)}/>\r\n    }\r\n\r\n    if(currentTab === \"IsoControlLineIdGroup\"){\r\n        secureStorage.setItem(\"tab\", \"IsoControlLineIdGroup\")\r\n        isoControllLineIdGroupBtn = <button className=\"isocontrol__lineid__group__button\" style={{backgroundColor: \"rgb(148, 220, 170)\"}} onClick={() => {setCurrentTab(\"IsoControlFull\")}}>Group by line ID</button>\r\n        table = <IsoControlGroupLineIdDataTable loading={value => setLoading(value)}/>\r\n        //editCustomBtn = <button className=\"isocontrol__lineid__group__button\" onClick={() => {setCurrentTab(\"IsoControlEditCustom\")}} style={{marginLeft:\"20px\"}}>Edit custom fields</button>\r\n\r\n    }\r\n    \r\n    \r\n    if(currentTab === \"IsoControlFull\"){\r\n        isocontrolWeightsComponent = <button className=\"isocontrol__weigths\" disabled>Modelled: {modelledWeight} t &nbsp;&nbsp;&nbsp;&nbsp;   Not modelled: {notModelledWeight} t  &nbsp;&nbsp;&nbsp;&nbsp; Total: {totalIsocontrolWeight} t</button>\r\n    }\r\n\r\n    \r\n    async function claimClick(){\r\n        if(selected.length > 0){\r\n            await setLoading(true)\r\n            localStorage.setItem(\"update\", true)\r\n            \r\n            const body ={\r\n                user: currentUser,\r\n                pipes: selected,\r\n            }\r\n            const options = {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify(body)\r\n            }\r\n\r\n            await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/claimPipes\", options)\r\n            .then(response => response.json())\r\n            .then(json =>{\r\n                if(json.success){\r\n                    setSuccessAlert(true)\r\n                }\r\n            })\r\n            await setUpdateData(!updateData)\r\n            await setSelected([])\r\n            await setLoading(false)\r\n\r\n        }else{\r\n            await setWarningSelected(true)\r\n        }\r\n\r\n    }\r\n\r\n    async function unclaimClick(){\r\n        if(selected.length > 0){\r\n            await setLoading(true)\r\n            localStorage.setItem(\"update\", true)\r\n            console.log(selected)\r\n            const body ={\r\n                pipes: selected,\r\n            }\r\n            const options = {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify(body)\r\n            }\r\n\r\n            await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/unclaimPipes\", options)\r\n            .then(response => response.json())\r\n            .then(json =>{\r\n                if(json.success){\r\n                    setUnclaimAlert(true)\r\n                }\r\n            })\r\n            await setUpdateData(!updateData)\r\n            await setSelected([])\r\n            await setLoading(false)\r\n\r\n        }else{\r\n            await setWarningSelected(true)\r\n        }\r\n\r\n    }\r\n\r\n    async function nextClick(){\r\n        if(selected.length > 0){\r\n            localStorage.setItem(\"update\", true)\r\n            let pipes = []\r\n            let notvi = false,maxTrayWarning = false\r\n            for(let i = 0; i < selected.length; i++){\r\n                if((selected[i][1]).indexOf(1) > -1){\r\n                    notvi = true\r\n                }else if((selected[i][1]).indexOf(2) > -1){\r\n                    maxTrayWarning = true\r\n                }else{\r\n                    pipes.push(selected[i][0])\r\n                }\r\n            }\r\n\r\n            if(pipes.length > 0){\r\n                const body ={\r\n                    user: currentUser,\r\n                    pipes: pipes,\r\n                }\r\n                const options = {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\"\r\n                    },\r\n                    body: JSON.stringify(body)\r\n                }\r\n    \r\n                await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/nextStep\", options)\r\n                .then(response => response.json())\r\n                .then(json =>{\r\n                    if(json.success){\r\n                        setTransactionSuccess(true)\r\n                    }\r\n                })\r\n            }\r\n\r\n            if(notvi){\r\n                setNotVI(true)\r\n            }\r\n\r\n            if(maxTrayWarning){\r\n                setMaxTrayWarning(true)\r\n            }\r\n\r\n            await setUpdateData(!updateData)\r\n            await setSelected([])\r\n            \r\n        }else{\r\n            await setWarningSelected(true)\r\n        }\r\n    }\r\n\r\n    async function returnClick(){\r\n        if(selected.length > 0){\r\n            localStorage.setItem(\"update\", true)\r\n            let minTrayWarning = false\r\n            let pipes = []\r\n            let notvi = false\r\n            console.log(selected)\r\n            for(let i = 0; i < selected.length; i++){\r\n                if((selected[i][1]).indexOf(3) > -1){\r\n                    minTrayWarning = true\r\n                }else{\r\n                    pipes.push(selected[i][0])\r\n                }\r\n            }\r\n\r\n            if(pipes.length > 0){\r\n                const body ={\r\n                    user: currentUser,\r\n                    pipes: pipes,\r\n                }\r\n                const options = {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\"\r\n                    },\r\n                    body: JSON.stringify(body)\r\n                }\r\n    \r\n                await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/returnPipes\", options)\r\n                .then(response => response.json())\r\n                .then(json =>{\r\n                    if(json.success){\r\n                        setTransactionSuccess(true)\r\n                    }\r\n                })\r\n            }\r\n\r\n            if(notvi){\r\n                setNotVI(true)\r\n            }\r\n\r\n            if(minTrayWarning){\r\n                setMinTrayWarning(true)\r\n            }\r\n            \r\n            await setUpdateData(!updateData)\r\n            await setSelected([])\r\n            \r\n        }else{\r\n            await setWarningSelected(true)\r\n        }\r\n    }\r\n\r\n    async function restoreClick(){\r\n        if(selected.length > 0){\r\n            localStorage.setItem(\"update\", true)\r\n            \r\n            const body ={\r\n                user: currentUser,\r\n                pipes: selected,\r\n            }\r\n            const options = {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify(body)\r\n            }\r\n\r\n            await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/restorePipes\", options)\r\n            .then(response => response.json())\r\n            .then(json =>{\r\n                if(json.success){\r\n                    setTransactionSuccess(true)\r\n                }\r\n            })\r\n\r\n            await setUpdateData(!updateData)\r\n            await setSelected([])\r\n            \r\n        }else{\r\n            await setWarningSelected(true)\r\n        }\r\n    }\r\n\r\n    async function deleteClick(){\r\n        if(selected.length > 0){\r\n            localStorage.setItem(\"update\", true)\r\n            let pipes = []\r\n            let notvi = false\r\n            for(let i = 0; i < selected.length; i++){\r\n                pipes.push(selected[i][0])\r\n            }\r\n\r\n            if(pipes.length > 0){\r\n                const body ={\r\n                    user: currentUser,\r\n                    pipes: pipes,\r\n                }\r\n                const options = {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\"\r\n                    },\r\n                    body: JSON.stringify(body)\r\n                }\r\n    \r\n                await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/deletePipes\", options)\r\n                .then(response => response.json())\r\n                .then(json =>{\r\n                    if(json.success){\r\n                        setTransactionSuccess(true)\r\n                    }\r\n                })\r\n            }\r\n\r\n            if(notvi){\r\n                setNotVI(true)\r\n            }\r\n\r\n            await setUpdateData(!updateData)\r\n            await setSelected([])\r\n            \r\n        }else{\r\n            await setWarningSelected(true)\r\n        }\r\n    }\r\n\r\n\r\n    return(\r\n        \r\n        <body>\r\n            <IdleTimer\r\n                timeout={1000 * 60 * 15}\r\n                onIdle={handleOnIdle}\r\n                debounce={250}\r\n            />\r\n            <NavBar onChange={value => setCurrentTab(currentTab)}/>\r\n            <div\r\n            className={`alert alert-success ${successAlert ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setSuccessAlert(false)}\r\n            >\r\n                <AlertF type=\"success\" text=\"Pipes claimed!\" margin=\"0px\"/>\r\n            </div>\r\n            <div\r\n            className={`alert alert-success ${changesSaved ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setChangesSaved(false)}\r\n            >\r\n            <AlertF type=\"success\" text=\"Changes saved!\" margin=\"0px\"/>\r\n            </div>\r\n            <div\r\n            className={`alert alert-success ${transactionSuccess ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setTransactionSuccess(false)}\r\n            >\r\n                <AlertF type=\"success\" margin=\"0px\" text=\"The action has been completed.\"/>\r\n            </div>\r\n            <div\r\n            className={`alert alert-success ${unclaimAlert ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setUnclaimAlert(false)}\r\n            >\r\n                <AlertF type=\"success\" margin=\"0px\" text=\"Pipes unclaimed!\"/>\r\n            </div>\r\n            <div\r\n            className={`alert alert-success ${warningSelected ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setWarningSelected(false)}\r\n            >\r\n                <AlertF type=\"warning\" text=\"Select at least one pipe!\" margin=\"10px\"/>   \r\n            </div>\r\n            <div\r\n            className={`alert alert-success ${notVI ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setNotVI(false)}\r\n            >\r\n                <AlertF type=\"warning\" text=\"Can't send to S-Design without valves and instruments check or N/A!\" margin=\"10px\"/>   \r\n            </div>\r\n            <div style={{position:\"absolute\", marginTop:\"180px\", marginLeft:\"45%\"}}>\r\n                <i className=\"discipline__title\" style={{fontStyle:\"normal\"}}>Piping IsoControl</i>\r\n            </div>\r\n            <div\r\n            className={`alert alert-success ${estimatedWarning ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setEstimatedWarning(false)}\r\n            >\r\n            <AlertF type=\"warning\" text=\"Changes on modelled lines can't be saved!\" margin=\"0px\"/>   \r\n            </div>\r\n            <div\r\n            className={`alert alert-success ${estimatedEmpty ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setEstimatedEmpty(false)}\r\n            >\r\n            <AlertF type=\"warning\" text=\"Pipes with empty values didn't save!\" margin=\"0px\"/>   \r\n            \r\n            </div>\r\n            <div\r\n            className={`alert alert-success ${minTrayWarning ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setMinTrayWarning(false)}\r\n            >\r\n            <AlertF type=\"warning\" text=\"Pipes on Modelled can't be returned!\" margin=\"0px\"/>   \r\n            \r\n            </div>\r\n            <div\r\n            className={`alert alert-success ${maxTrayWarning ? 'alert-shown' : 'alert-hidden'}`}\r\n            onTransitionEnd={() => setMaxTrayWarning(false)}\r\n            >\r\n            <AlertF type=\"warning\" text=\"Pipes on S-Design are completed!\" margin=\"0px\"/>   \r\n            \r\n            </div>\r\n            <Collapse in={loading}>\r\n                <Alert style={{fontSize:\"20px\",position: \"fixed\", left: \"50%\", top:\"10%\", transform: \"translate(-50%, -50%)\"}} severity=\"info\"\r\n                    >\r\n                    Processing...\r\n                </Alert>\r\n            </Collapse>\r\n                <div className=\"isotracker__row\">\r\n                  <div className=\"isotracker__column\">\r\n                      <img src={IsoTrackerLogo} alt=\"isoTrackerLogo\" className=\"isoTrackerLogo__image2\"/>\r\n                      \r\n                      <div className=\"roleSelector__containerF\">\r\n                              <RoleDropDown style={{paddingLeft: \"2px\"}} onChange={value => setCurrentRole(value)} roles = {roles}/>\r\n                      </div>\r\n                      \r\n                  </div>\r\n\r\n                  <div className=\"isotracker__column\">\r\n                  \r\n                  <table className=\"equipTable__table\" style={{marginTop:\"270px\", width:\"50%\", marginLeft:\"45%\"}}>\r\n                        <tbody className=\"equipable__body\">\r\n                            <tr>    \r\n                                <td  className=\"equipTable__header\" style={{backgroundColor:\"#338DF1\", borderRadius:\"1em 0 0 0\"}}>Estimated weight</td>\r\n                                <td  className=\"equipTable__header\" style={{backgroundColor:\"#338DF1\"}}>Modelled weight</td>\r\n                                <td className=\"equipTable__header\" style={{backgroundColor:\"#338DF1\", borderRadius:\"0 1em 0 0\"}}>Total progress</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td className=\"equipTable__state\" style={{borderRadius:\"0 0 0 1em\"}}>{weight}</td>\r\n                                <td className=\"equipTable__state\">{modelledWeight}</td>\r\n                                <td className=\"equipTable__state\" style={{borderRadius:\"0 0 1em 0\"}}>{progress}%</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    \r\n                  </div>               \r\n                  \r\n                  \r\n              </div>\r\n              <table className=\"isotracker__table__container\">\r\n                      <tr className=\"isotracker__table__navBar__container\">\r\n                          <th  colspan=\"2\" className=\"isotracker__table__navBar\">\r\n                            {recycleBinBtn}\r\n                            {holdBtn}\r\n                          </th>\r\n                      </tr>\r\n                      <tr className=\"isotracker__table__tray__and__table__container\" style={{height: dataTableHeight}}>\r\n                          <td className=\"disciplines__table__trays\">\r\n                              <div className=\"trays__container\">\r\n                              \r\n                              <PipingNavBtns onChange={value => setCurrentTab(value)} currentTab = {currentTab} currentRole = {currentRole}/> \r\n                                    {/* \r\n                                  <p className=\"isotracker__table__trays__group\">Options</p>\r\n                                  <center className=\"equimentsNavBtns__center\">              \r\n                                    <EquipmentsNavBtns onChange={value => setCurrentTab(value)} currentTab = {currentTab} currentRole = {currentRole} discipline = \"Equipment\"/>               \r\n                                    </center>\r\n                                    */}\r\n                              </div>\r\n                          </td>\r\n                          <td className=\"discplines__table__table\" style={{height: dataTableHeight}} >\r\n                              <div  style={{height: dataTableHeight, width:\"2000px\"}} className=\"isotracker__table__table__container\">\r\n                                  {isoControllLineIdGroupBtn}\r\n                                  {uploadBOMBtn}\r\n                                  {table}\r\n                              </div>\r\n                          </td>\r\n                          \r\n                      </tr>\r\n                  </table>\r\n                  <center className=\"actionBtns__container\">\r\n                      {actionBtns}\r\n                  </center>\r\n         </body>\r\n    )\r\n}\r\n\r\nexport default Piping;"]},"metadata":{},"sourceType":"module"}