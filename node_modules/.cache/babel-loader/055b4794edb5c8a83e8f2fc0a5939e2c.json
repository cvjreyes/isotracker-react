{"ast":null,"code":"import _slicedToArray from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./login.css';import React,{useState}from'react';import{useHistory}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CryptoJS=require(\"crypto-js\");var SecureStorage=require(\"secure-web-storage\");var SECRET_KEY='sanud2ha8shd72h';var secureStorage=new SecureStorage(localStorage,{hash:function hash(key){key=CryptoJS.SHA256(key,SECRET_KEY);return key.toString();},encrypt:function encrypt(data){data=CryptoJS.AES.encrypt(data,SECRET_KEY);data=data.toString();return data;},decrypt:function decrypt(data){data=CryptoJS.AES.decrypt(data,SECRET_KEY);data=data.toString(CryptoJS.enc.Utf8);return data;}});var Login=function Login(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var history=useHistory();var body={email:email,password:password};var handleLogin=function handleLogin(){var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};fetch(\"http://localhost:5000/login\",options).then(function(response){return response.json();}).then(function(json){localStorage.setItem('token',json.token);secureStorage.setItem('user',json.user);secureStorage.setItem('tab',\"Status\");history.replace('/');window.location.reload(false);}).catch(function(error){setError(true);});};return/*#__PURE__*/_jsx(\"div\",{className:\"login__form__container\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Log in\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"Enter email\",onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Enter password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error__message\",style:{color:\"red\"},children:\"Email or password incorrect. Try again.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark btn-lg btn-block\",style:{marginTop:\"30px\",backgroundColor:\"#17a2b8\"},onClick:handleLogin,children:\"Log in\"})]})});};export default Login;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/components/login/login.js"],"names":["React","useState","useHistory","CryptoJS","require","SecureStorage","SECRET_KEY","secureStorage","localStorage","hash","key","SHA256","toString","encrypt","data","AES","decrypt","enc","Utf8","Login","props","email","setEmail","password","setPassword","error","setError","history","body","handleLogin","options","method","headers","JSON","stringify","fetch","then","response","json","setItem","token","user","replace","window","location","reload","catch","e","target","value","color","marginTop","backgroundColor"],"mappings":"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","sourcesContent":["import './login.css'\r\nimport React, { useState} from 'react'\r\nimport {useHistory} from \"react-router\";\r\n\r\nconst CryptoJS = require(\"crypto-js\");\r\nconst SecureStorage = require(\"secure-web-storage\");\r\nvar SECRET_KEY = 'sanud2ha8shd72h';\r\n \r\nvar secureStorage = new SecureStorage(localStorage, {\r\n    hash: function hash(key) {\r\n        key = CryptoJS.SHA256(key, SECRET_KEY);\r\n \r\n        return key.toString();\r\n    },\r\n    encrypt: function encrypt(data) {\r\n        data = CryptoJS.AES.encrypt(data, SECRET_KEY);\r\n \r\n        data = data.toString();\r\n \r\n        return data;\r\n    },\r\n    decrypt: function decrypt(data) {\r\n        data = CryptoJS.AES.decrypt(data, SECRET_KEY);\r\n \r\n        data = data.toString(CryptoJS.enc.Utf8);\r\n \r\n        return data;\r\n    }\r\n});\r\n\r\n\r\nconst Login = props =>{\r\n    const [email, setEmail] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [error, setError] = useState(false);\r\n    const history = useHistory();\r\n\r\n    const body = {\r\n        email: email,\r\n        password: password\r\n    }\r\n\r\n    const handleLogin = () => {\r\n        \r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n        fetch(\"http://localhost:5000/login\", options)\r\n            .then(response => response.json())\r\n            .then(json => {\r\n                    localStorage.setItem('token', json.token);\r\n                    secureStorage.setItem('user', json.user)\r\n                    secureStorage.setItem('tab', \"Status\")      \r\n                    history.replace('/');\r\n                    window.location.reload(false);\r\n                    \r\n                }\r\n            )\r\n            .catch(error => {\r\n                setError(true);\r\n            })               \r\n        \r\n    }\r\n\r\n\r\n\r\n    return(\r\n        <div className=\"login__form__container\">\r\n                    <form>\r\n                        <center><h3>Log in</h3></center>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label>Email</label>\r\n                            <input type=\"email\" className=\"form-control\" placeholder=\"Enter email\" onChange={(e) => setEmail(e.target.value)} />\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label>Password</label>\r\n                            <input type=\"password\" className=\"form-control\" placeholder=\"Enter password\" onChange={(e) => setPassword(e.target.value)}/>\r\n                        </div>\r\n                        {error && <p className=\"error__message\" style={{color: \"red\"}}>Email or password incorrect. Try again.</p>}\r\n                        <button type=\"submit\" className=\"btn btn-dark btn-lg btn-block\" style={{marginTop:\"30px\", backgroundColor: \"#17a2b8\"}}  onClick={handleLogin}>Log in</button>\r\n                    </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}