{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nimport { BasePlugin } from \"../base/index.mjs\";\nimport Hooks from \"../../pluginHooks.mjs\";\nimport { offset, outerHeight, outerWidth } from \"../../helpers/dom/element.mjs\";\nimport { arrayEach, arrayMap } from \"../../helpers/array.mjs\";\nimport { isObjectEqual } from \"../../helpers/object.mjs\";\nimport EventManager from \"../../eventManager.mjs\";\nimport { CellCoords, CellRange } from \"../../3rdparty/walkontable/src/index.mjs\";\nimport { getDeltas, getDragDirectionAndRange, DIRECTIONS, getMappedFillHandleSetting } from \"./utils.mjs\";\nHooks.getSingleton().register('modifyAutofillRange');\nHooks.getSingleton().register('beforeAutofill');\nHooks.getSingleton().register('afterAutofill');\nexport var PLUGIN_KEY = 'autofill';\nexport var PLUGIN_PRIORITY = 20;\nvar INSERT_ROW_ALTER_ACTION_NAME = 'insert_row';\nvar INTERVAL_FOR_ADDING_ROW = 200;\n/**\r\n * This plugin provides \"drag-down\" and \"copy-down\" functionalities, both operated using the small square in the right\r\n * bottom of the cell selection.\r\n *\r\n * \"Drag-down\" expands the value of the selected cells to the neighbouring cells when you drag the small\r\n * square in the corner.\r\n *\r\n * \"Copy-down\" copies the value of the selection to all empty cells below when you double click the small square.\r\n *\r\n * @class Autofill\r\n * @plugin Autofill\r\n */\n\nexport var Autofill = /*#__PURE__*/function (_BasePlugin) {\n  _inherits(Autofill, _BasePlugin);\n\n  var _super = _createSuper(Autofill);\n\n  function Autofill(hotInstance) {\n    var _this;\n\n    _classCallCheck(this, Autofill);\n\n    _this = _super.call(this, hotInstance);\n    /**\r\n     * Event manager instance.\r\n     *\r\n     * @private\r\n     * @type {EventManager}\r\n     */\n\n    _this.eventManager = new EventManager(_assertThisInitialized(_this));\n    /**\r\n     * Specifies if adding new row started.\r\n     *\r\n     * @private\r\n     * @type {boolean}\r\n     */\n\n    _this.addingStarted = false;\n    /**\r\n     * Specifies if there was mouse down on the cell corner.\r\n     *\r\n     * @private\r\n     * @type {boolean}\r\n     */\n\n    _this.mouseDownOnCellCorner = false;\n    /**\r\n     * Specifies if mouse was dragged outside Handsontable.\r\n     *\r\n     * @private\r\n     * @type {boolean}\r\n     */\n\n    _this.mouseDragOutside = false;\n    /**\r\n     * Specifies how many cell levels were dragged using the handle.\r\n     *\r\n     * @private\r\n     * @type {boolean}\r\n     */\n\n    _this.handleDraggedCells = 0;\n    /**\r\n     * Specifies allowed directions of drag (`'horizontal'` or '`vertical`').\r\n     *\r\n     * @private\r\n     * @type {string[]}\r\n     */\n\n    _this.directions = [];\n    /**\r\n     * Specifies if can insert new rows if needed.\r\n     *\r\n     * @type {boolean}\r\n     */\n\n    _this.autoInsertRow = false;\n    return _this;\n  }\n  /**\r\n   * Checks if the plugin is enabled in the Handsontable settings.\r\n   *\r\n   * @returns {boolean}\r\n   */\n\n\n  _createClass(Autofill, [{\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this.hot.getSettings().fillHandle;\n    }\n    /**\r\n     * Enables the plugin functionality for this Handsontable instance.\r\n     */\n\n  }, {\n    key: \"enablePlugin\",\n    value: function enablePlugin() {\n      var _this2 = this;\n\n      if (this.enabled) {\n        return;\n      }\n\n      this.mapSettings();\n      this.registerEvents();\n      this.addHook('afterOnCellCornerMouseDown', function (event) {\n        return _this2.onAfterCellCornerMouseDown(event);\n      });\n      this.addHook('afterOnCellCornerDblClick', function (event) {\n        return _this2.onCellCornerDblClick(event);\n      });\n      this.addHook('beforeOnCellMouseOver', function (_, coords) {\n        return _this2.onBeforeCellMouseOver(coords);\n      });\n\n      _get(_getPrototypeOf(Autofill.prototype), \"enablePlugin\", this).call(this);\n    }\n    /**\r\n     * Updates the plugin state. This method is executed when {@link Core#updateSettings} is invoked.\r\n     */\n\n  }, {\n    key: \"updatePlugin\",\n    value: function updatePlugin() {\n      this.disablePlugin();\n      this.enablePlugin();\n\n      _get(_getPrototypeOf(Autofill.prototype), \"updatePlugin\", this).call(this);\n    }\n    /**\r\n     * Disables the plugin functionality for this Handsontable instance.\r\n     */\n\n  }, {\n    key: \"disablePlugin\",\n    value: function disablePlugin() {\n      this.clearMappedSettings();\n\n      _get(_getPrototypeOf(Autofill.prototype), \"disablePlugin\", this).call(this);\n    }\n    /**\r\n     * Gets selection data.\r\n     *\r\n     * @private\r\n     * @returns {object[]} Ranges Array of objects with properties `startRow`, `startCol`, `endRow` and `endCol`.\r\n     */\n\n  }, {\n    key: \"getSelectionData\",\n    value: function getSelectionData() {\n      var _this3 = this;\n\n      var selection = this.hot.getSelectedRangeLast();\n\n      var _selection$getTopLeft = selection.getTopLeftCorner(),\n          startRow = _selection$getTopLeft.row,\n          startCol = _selection$getTopLeft.col;\n\n      var _selection$getBottomR = selection.getBottomRightCorner(),\n          endRow = _selection$getBottomR.row,\n          endCol = _selection$getBottomR.col;\n\n      var copyableRanges = this.hot.runHooks('modifyCopyableRange', [{\n        startRow: startRow,\n        startCol: startCol,\n        endRow: endRow,\n        endCol: endCol\n      }]);\n      var copyableRows = [];\n      var copyableColumns = [];\n      var data = [];\n      arrayEach(copyableRanges, function (range) {\n        for (var visualRow = range.startRow; visualRow <= range.endRow; visualRow += 1) {\n          if (copyableRows.indexOf(visualRow) === -1) {\n            copyableRows.push(visualRow);\n          }\n        }\n\n        for (var visualColumn = range.startCol; visualColumn <= range.endCol; visualColumn += 1) {\n          if (copyableColumns.indexOf(visualColumn) === -1) {\n            copyableColumns.push(visualColumn);\n          }\n        }\n      });\n      arrayEach(copyableRows, function (row) {\n        var rowSet = [];\n        arrayEach(copyableColumns, function (column) {\n          rowSet.push(_this3.hot.getCopyableData(row, column));\n        });\n        data.push(rowSet);\n      });\n      return data;\n    }\n    /**\r\n     * Try to apply fill values to the area in fill border, omitting the selection border.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Reports if fill was applied.\r\n     *\r\n     * @fires Hooks#modifyAutofillRange\r\n     * @fires Hooks#beforeAutofill\r\n     * @fires Hooks#afterAutofill\r\n     */\n\n  }, {\n    key: \"fillIn\",\n    value: function fillIn() {\n      if (this.hot.selection.highlight.getFill().isEmpty()) {\n        return false;\n      } // Fill area may starts or ends with invisible cell. There won't be any information about it as highlighted\n      // selection store just renderable indexes (It's part of Walkontable). I extrapolate where the start or/and\n      // the end is.\n\n\n      var _this$hot$selection$h = this.hot.selection.highlight.getFill().getVisualCorners(),\n          _this$hot$selection$h2 = _slicedToArray(_this$hot$selection$h, 4),\n          fillStartRow = _this$hot$selection$h2[0],\n          fillStartColumn = _this$hot$selection$h2[1],\n          fillEndRow = _this$hot$selection$h2[2],\n          fillEndColumn = _this$hot$selection$h2[3];\n\n      var selectionRangeLast = this.hot.getSelectedRangeLast();\n      var topLeftCorner = selectionRangeLast.getTopLeftCorner();\n      var bottomRightCorner = selectionRangeLast.getBottomRightCorner();\n      this.resetSelectionOfDraggedArea();\n      var cornersOfSelectedCells = [topLeftCorner.row, topLeftCorner.col, bottomRightCorner.row, bottomRightCorner.col];\n      var cornersOfSelectionAndDragAreas = this.hot.runHooks('modifyAutofillRange', [Math.min(topLeftCorner.row, fillStartRow), Math.min(topLeftCorner.col, fillStartColumn), Math.max(bottomRightCorner.row, fillEndRow), Math.max(bottomRightCorner.col, fillEndColumn)], cornersOfSelectedCells);\n\n      var _getDragDirectionAndR = getDragDirectionAndRange(cornersOfSelectedCells, cornersOfSelectionAndDragAreas),\n          directionOfDrag = _getDragDirectionAndR.directionOfDrag,\n          startOfDragCoords = _getDragDirectionAndR.startOfDragCoords,\n          endOfDragCoords = _getDragDirectionAndR.endOfDragCoords;\n\n      if (startOfDragCoords && startOfDragCoords.row > -1 && startOfDragCoords.col > -1) {\n        var selectionData = this.getSelectionData();\n        var sourceRange = selectionRangeLast.clone();\n        var targetRange = new CellRange(startOfDragCoords, startOfDragCoords, endOfDragCoords);\n        var beforeAutofillHookResult = this.hot.runHooks('beforeAutofill', selectionData, sourceRange, targetRange, directionOfDrag);\n\n        if (beforeAutofillHookResult === false) {\n          this.hot.selection.highlight.getFill().clear();\n          this.hot.render();\n          return false;\n        } // TODO: The `hasFillDataChanged` hook argument allows skipping processing of the autofill\n        // handler when the user modifies the fillData in the `beforeAutofill` hook. The workaround\n        // is necessary for the Formulas plugin and can be removed after implementing the missing\n        // feature for the HF (such as `getFillRangeData` method). With that the last argument could\n        // be removed from the `afterAutofill` hook.\n\n\n        var sourceFrom = sourceRange.from,\n            sourceTo = sourceRange.to;\n        var refData = this.hot.getData(sourceFrom.row, sourceFrom.col, sourceTo.row, sourceTo.col);\n        var hasFillDataChanged = !isObjectEqual(refData, beforeAutofillHookResult);\n        var deltas = getDeltas(startOfDragCoords, endOfDragCoords, selectionData, directionOfDrag);\n        var fillData = beforeAutofillHookResult;\n        var res = beforeAutofillHookResult;\n\n        if (['up', 'left'].indexOf(directionOfDrag) > -1 && !(res.length === 1 && res[0].length === 0)) {\n          fillData = [];\n\n          if (directionOfDrag === 'up') {\n            var dragLength = endOfDragCoords.row - startOfDragCoords.row + 1;\n            var fillOffset = dragLength % res.length;\n\n            for (var i = 0; i < dragLength; i++) {\n              fillData.push(res[(i + (res.length - fillOffset)) % res.length]);\n            }\n          } else {\n            var _dragLength = endOfDragCoords.col - startOfDragCoords.col + 1;\n\n            var _fillOffset = _dragLength % res[0].length;\n\n            for (var _i2 = 0; _i2 < res.length; _i2++) {\n              fillData.push([]);\n\n              for (var j = 0; j < _dragLength; j++) {\n                fillData[_i2].push(res[_i2][(j + (res[_i2].length - _fillOffset)) % res[_i2].length]);\n              }\n            }\n          }\n        }\n\n        this.hot.populateFromArray(startOfDragCoords.row, startOfDragCoords.col, fillData, endOfDragCoords.row, endOfDragCoords.col, \"\".concat(this.pluginName, \".fill\"), null, directionOfDrag, deltas);\n        this.setSelection(cornersOfSelectionAndDragAreas);\n        this.hot.runHooks('afterAutofill', fillData, sourceRange, targetRange, directionOfDrag, hasFillDataChanged);\n        this.hot.render();\n      } else {\n        // reset to avoid some range bug\n        this.hot._refreshBorders();\n      }\n\n      return true;\n    }\n    /**\r\n     * Reduces the selection area if the handle was dragged outside of the table or on headers.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coords Indexes of selection corners.\r\n     * @returns {CellCoords}\r\n     */\n\n  }, {\n    key: \"reduceSelectionAreaIfNeeded\",\n    value: function reduceSelectionAreaIfNeeded(coords) {\n      if (coords.row < 0) {\n        coords.row = 0;\n      }\n\n      if (coords.col < 0) {\n        coords.col = 0;\n      }\n\n      return coords;\n    }\n    /**\r\n     * Gets the coordinates of the drag & drop borders.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coordsOfSelection `CellCoords` coord object.\r\n     * @returns {CellCoords}\r\n     */\n\n  }, {\n    key: \"getCoordsOfDragAndDropBorders\",\n    value: function getCoordsOfDragAndDropBorders(coordsOfSelection) {\n      var currentSelection = this.hot.getSelectedRangeLast();\n      var bottomRightCorner = currentSelection.getBottomRightCorner();\n      var coords = coordsOfSelection;\n\n      if (this.directions.includes(DIRECTIONS.vertical) && this.directions.includes(DIRECTIONS.horizontal)) {\n        var topLeftCorner = currentSelection.getTopLeftCorner();\n\n        if (bottomRightCorner.col <= coordsOfSelection.col || topLeftCorner.col >= coordsOfSelection.col) {\n          coords = new CellCoords(bottomRightCorner.row, coordsOfSelection.col);\n        }\n\n        if (bottomRightCorner.row < coordsOfSelection.row || topLeftCorner.row > coordsOfSelection.row) {\n          coords = new CellCoords(coordsOfSelection.row, bottomRightCorner.col);\n        }\n      } else if (this.directions.includes(DIRECTIONS.vertical)) {\n        coords = new CellCoords(coordsOfSelection.row, bottomRightCorner.col);\n      } else if (this.directions.includes(DIRECTIONS.horizontal)) {\n        coords = new CellCoords(bottomRightCorner.row, coordsOfSelection.col);\n      } else {\n        // wrong direction\n        return;\n      }\n\n      return this.reduceSelectionAreaIfNeeded(coords);\n    }\n    /**\r\n     * Show the fill border.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coordsOfSelection `CellCoords` coord object.\r\n     */\n\n  }, {\n    key: \"showBorder\",\n    value: function showBorder(coordsOfSelection) {\n      var coordsOfDragAndDropBorders = this.getCoordsOfDragAndDropBorders(coordsOfSelection);\n\n      if (coordsOfDragAndDropBorders) {\n        this.redrawBorders(coordsOfDragAndDropBorders);\n      }\n    }\n    /**\r\n     * Add new row.\r\n     *\r\n     * @private\r\n     */\n\n  }, {\n    key: \"addRow\",\n    value: function addRow() {\n      var _this4 = this;\n\n      this.hot._registerTimeout(function () {\n        _this4.hot.alter(INSERT_ROW_ALTER_ACTION_NAME, void 0, 1, \"\".concat(_this4.pluginName, \".fill\"));\n\n        _this4.addingStarted = false;\n      }, INTERVAL_FOR_ADDING_ROW);\n    }\n    /**\r\n     * Add new rows if they are needed to continue auto-filling values.\r\n     *\r\n     * @private\r\n     */\n\n  }, {\n    key: \"addNewRowIfNeeded\",\n    value: function addNewRowIfNeeded() {\n      if (!this.hot.selection.highlight.getFill().isEmpty() && this.addingStarted === false && this.autoInsertRow) {\n        var cornersOfSelectedCells = this.hot.getSelectedLast();\n        var cornersOfSelectedDragArea = this.hot.selection.highlight.getFill().getVisualCorners();\n        var nrOfTableRows = this.hot.countRows();\n\n        if (cornersOfSelectedCells[2] < nrOfTableRows - 1 && cornersOfSelectedDragArea[2] === nrOfTableRows - 1) {\n          this.addingStarted = true;\n          this.addRow();\n        }\n      }\n    }\n    /**\r\n     * Get index of last adjacent filled in row.\r\n     *\r\n     * @private\r\n     * @param {Array} cornersOfSelectedCells Indexes of selection corners.\r\n     * @returns {number} Gives number greater than or equal to zero when selection adjacent can be applied.\r\n     *                   Or -1 when selection adjacent can't be applied.\r\n     */\n\n  }, {\n    key: \"getIndexOfLastAdjacentFilledInRow\",\n    value: function getIndexOfLastAdjacentFilledInRow(cornersOfSelectedCells) {\n      var data = this.hot.getData();\n      var nrOfTableRows = this.hot.countRows();\n      var lastFilledInRowIndex;\n\n      for (var rowIndex = cornersOfSelectedCells[2] + 1; rowIndex < nrOfTableRows; rowIndex++) {\n        for (var columnIndex = cornersOfSelectedCells[1]; columnIndex <= cornersOfSelectedCells[3]; columnIndex++) {\n          var dataInCell = data[rowIndex][columnIndex];\n\n          if (dataInCell) {\n            return -1;\n          }\n        }\n\n        var dataInNextLeftCell = data[rowIndex][cornersOfSelectedCells[1] - 1];\n        var dataInNextRightCell = data[rowIndex][cornersOfSelectedCells[3] + 1];\n\n        if (!!dataInNextLeftCell || !!dataInNextRightCell) {\n          lastFilledInRowIndex = rowIndex;\n        }\n      }\n\n      return lastFilledInRowIndex;\n    }\n    /**\r\n     * Adds a selection from the start area to the specific row index.\r\n     *\r\n     * @private\r\n     * @param {Array} selectStartArea Selection area from which we start to create more comprehensive selection.\r\n     * @param {number} rowIndex The row index into the selection will be added.\r\n     */\n\n  }, {\n    key: \"addSelectionFromStartAreaToSpecificRowIndex\",\n    value: function addSelectionFromStartAreaToSpecificRowIndex(selectStartArea, rowIndex) {\n      this.hot.selection.highlight.getFill().clear().add(new CellCoords(selectStartArea[0], selectStartArea[1])).add(new CellCoords(rowIndex, selectStartArea[3])).commit();\n    }\n    /**\r\n     * Sets selection based on passed corners.\r\n     *\r\n     * @private\r\n     * @param {Array} cornersOfArea An array witch defines selection.\r\n     */\n\n  }, {\n    key: \"setSelection\",\n    value: function setSelection(cornersOfArea) {\n      var _this$hot;\n\n      (_this$hot = this.hot).selectCell.apply(_this$hot, _toConsumableArray(arrayMap(cornersOfArea, function (index) {\n        return Math.max(index, 0);\n      })).concat([false, false]));\n    }\n    /**\r\n     * Try to select cells down to the last row in the left column and then returns if selection was applied.\r\n     *\r\n     * @private\r\n     * @returns {boolean}\r\n     */\n\n  }, {\n    key: \"selectAdjacent\",\n    value: function selectAdjacent() {\n      var cornersOfSelectedCells = this.hot.getSelectedLast();\n      var lastFilledInRowIndex = this.getIndexOfLastAdjacentFilledInRow(cornersOfSelectedCells);\n\n      if (lastFilledInRowIndex === -1 || lastFilledInRowIndex === void 0) {\n        return false;\n      }\n\n      this.addSelectionFromStartAreaToSpecificRowIndex(cornersOfSelectedCells, lastFilledInRowIndex);\n      return true;\n    }\n    /**\r\n     * Resets selection of dragged area.\r\n     *\r\n     * @private\r\n     */\n\n  }, {\n    key: \"resetSelectionOfDraggedArea\",\n    value: function resetSelectionOfDraggedArea() {\n      this.handleDraggedCells = 0;\n      this.hot.selection.highlight.getFill().clear();\n    }\n    /**\r\n     * Redraws borders.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coords `CellCoords` coord object.\r\n     */\n\n  }, {\n    key: \"redrawBorders\",\n    value: function redrawBorders(coords) {\n      this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(coords).commit();\n      this.hot.view.render();\n    }\n    /**\r\n     * Get if mouse was dragged outside.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event `mousemove` event properties.\r\n     * @returns {boolean}\r\n     */\n\n  }, {\n    key: \"getIfMouseWasDraggedOutside\",\n    value: function getIfMouseWasDraggedOutside(event) {\n      var documentElement = this.hot.rootDocument.documentElement;\n      var tableBottom = offset(this.hot.table).top - (this.hot.rootWindow.pageYOffset || documentElement.scrollTop) + outerHeight(this.hot.table);\n      var tableRight = offset(this.hot.table).left - (this.hot.rootWindow.pageXOffset || documentElement.scrollLeft) + outerWidth(this.hot.table);\n      return event.clientY > tableBottom && event.clientX <= tableRight;\n    }\n    /**\r\n     * Bind the events used by the plugin.\r\n     *\r\n     * @private\r\n     */\n\n  }, {\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _this5 = this;\n\n      var documentElement = this.hot.rootDocument.documentElement;\n      this.eventManager.addEventListener(documentElement, 'mouseup', function () {\n        return _this5.onMouseUp();\n      });\n      this.eventManager.addEventListener(documentElement, 'mousemove', function (event) {\n        return _this5.onMouseMove(event);\n      });\n    }\n    /**\r\n     * On cell corner double click callback.\r\n     *\r\n     * @private\r\n     */\n\n  }, {\n    key: \"onCellCornerDblClick\",\n    value: function onCellCornerDblClick() {\n      var selectionApplied = this.selectAdjacent();\n\n      if (selectionApplied) {\n        this.fillIn();\n      }\n    }\n    /**\r\n     * On after cell corner mouse down listener.\r\n     *\r\n     * @private\r\n     */\n\n  }, {\n    key: \"onAfterCellCornerMouseDown\",\n    value: function onAfterCellCornerMouseDown() {\n      this.handleDraggedCells = 1;\n      this.mouseDownOnCellCorner = true;\n    }\n    /**\r\n     * On before cell mouse over listener.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coords `CellCoords` coord object.\r\n     */\n\n  }, {\n    key: \"onBeforeCellMouseOver\",\n    value: function onBeforeCellMouseOver(coords) {\n      if (this.mouseDownOnCellCorner && !this.hot.view.isMouseDown() && this.handleDraggedCells) {\n        this.handleDraggedCells += 1;\n        this.showBorder(coords);\n        this.addNewRowIfNeeded();\n      }\n    }\n    /**\r\n     * On mouse up listener.\r\n     *\r\n     * @private\r\n     */\n\n  }, {\n    key: \"onMouseUp\",\n    value: function onMouseUp() {\n      if (this.handleDraggedCells) {\n        if (this.handleDraggedCells > 1) {\n          this.fillIn();\n        }\n\n        this.handleDraggedCells = 0;\n        this.mouseDownOnCellCorner = false;\n      }\n    }\n    /**\r\n     * On mouse move listener.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event `mousemove` event properties.\r\n     */\n\n  }, {\n    key: \"onMouseMove\",\n    value: function onMouseMove(event) {\n      var mouseWasDraggedOutside = this.getIfMouseWasDraggedOutside(event);\n\n      if (this.addingStarted === false && this.handleDraggedCells > 0 && mouseWasDraggedOutside) {\n        this.mouseDragOutside = true;\n        this.addingStarted = true;\n      } else {\n        this.mouseDragOutside = false;\n      }\n\n      if (this.mouseDragOutside && this.autoInsertRow) {\n        this.addRow();\n      }\n    }\n    /**\r\n     * Clears mapped settings.\r\n     *\r\n     * @private\r\n     */\n\n  }, {\n    key: \"clearMappedSettings\",\n    value: function clearMappedSettings() {\n      this.directions.length = 0;\n      this.autoInsertRow = false;\n    }\n    /**\r\n     * Map settings.\r\n     *\r\n     * @private\r\n     */\n\n  }, {\n    key: \"mapSettings\",\n    value: function mapSettings() {\n      var mappedSettings = getMappedFillHandleSetting(this.hot.getSettings().fillHandle);\n      this.directions = mappedSettings.directions;\n      this.autoInsertRow = mappedSettings.autoInsertRow;\n    }\n    /**\r\n     * Destroys the plugin instance.\r\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(Autofill.prototype), \"destroy\", this).call(this);\n    }\n  }], [{\n    key: \"PLUGIN_KEY\",\n    get: function get() {\n      return PLUGIN_KEY;\n    }\n  }, {\n    key: \"PLUGIN_PRIORITY\",\n    get: function get() {\n      return PLUGIN_PRIORITY;\n    }\n  }]);\n\n  return Autofill;\n}(BasePlugin);","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/handsontable/plugins/autofill/autofill.mjs"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","iter","Array","from","isArray","_arrayLikeToArray","_slicedToArray","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","o","minLen","n","Object","toString","call","slice","name","test","len","length","arr2","_i","_arr","_n","_d","_s","_e","next","done","push","value","err","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","BasePlugin","Hooks","offset","outerHeight","outerWidth","arrayEach","arrayMap","isObjectEqual","EventManager","CellCoords","CellRange","getDeltas","getDragDirectionAndRange","DIRECTIONS","getMappedFillHandleSetting","getSingleton","register","PLUGIN_KEY","PLUGIN_PRIORITY","INSERT_ROW_ALTER_ACTION_NAME","INTERVAL_FOR_ADDING_ROW","Autofill","_BasePlugin","_super","hotInstance","_this","eventManager","addingStarted","mouseDownOnCellCorner","mouseDragOutside","handleDraggedCells","directions","autoInsertRow","isEnabled","hot","getSettings","fillHandle","enablePlugin","_this2","enabled","mapSettings","registerEvents","addHook","event","onAfterCellCornerMouseDown","onCellCornerDblClick","_","coords","onBeforeCellMouseOver","updatePlugin","disablePlugin","clearMappedSettings","getSelectionData","_this3","selection","getSelectedRangeLast","_selection$getTopLeft","getTopLeftCorner","startRow","row","startCol","col","_selection$getBottomR","getBottomRightCorner","endRow","endCol","copyableRanges","runHooks","copyableRows","copyableColumns","data","range","visualRow","indexOf","visualColumn","rowSet","column","getCopyableData","fillIn","highlight","getFill","isEmpty","_this$hot$selection$h","getVisualCorners","_this$hot$selection$h2","fillStartRow","fillStartColumn","fillEndRow","fillEndColumn","selectionRangeLast","topLeftCorner","bottomRightCorner","resetSelectionOfDraggedArea","cornersOfSelectedCells","cornersOfSelectionAndDragAreas","Math","min","max","_getDragDirectionAndR","directionOfDrag","startOfDragCoords","endOfDragCoords","selectionData","sourceRange","clone","targetRange","beforeAutofillHookResult","clear","render","sourceFrom","sourceTo","to","refData","getData","hasFillDataChanged","deltas","fillData","res","dragLength","fillOffset","_dragLength","_fillOffset","_i2","j","populateFromArray","concat","pluginName","setSelection","_refreshBorders","reduceSelectionAreaIfNeeded","getCoordsOfDragAndDropBorders","coordsOfSelection","currentSelection","includes","vertical","horizontal","showBorder","coordsOfDragAndDropBorders","redrawBorders","addRow","_this4","_registerTimeout","alter","addNewRowIfNeeded","getSelectedLast","cornersOfSelectedDragArea","nrOfTableRows","countRows","getIndexOfLastAdjacentFilledInRow","lastFilledInRowIndex","rowIndex","columnIndex","dataInCell","dataInNextLeftCell","dataInNextRightCell","addSelectionFromStartAreaToSpecificRowIndex","selectStartArea","add","commit","cornersOfArea","_this$hot","selectCell","index","selectAdjacent","view","getIfMouseWasDraggedOutside","documentElement","rootDocument","tableBottom","table","top","rootWindow","pageYOffset","scrollTop","tableRight","left","pageXOffset","scrollLeft","clientY","clientX","_this5","addEventListener","onMouseUp","onMouseMove","selectionApplied","isMouseDown","mouseWasDraggedOutside","mappedSettings","destroy"],"mappings":"AAAA,SAASA,OAAT,CAAiBC,GAAjB,EAAsB;AAAE;;AAA2B,MAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgC,OAAOA,MAAM,CAACC,QAAd,KAA2B,QAA/D,EAAyE;AAAEH,IAAAA,OAAO,GAAG,SAASA,OAAT,CAAiBC,GAAjB,EAAsB;AAAE,aAAO,OAAOA,GAAd;AAAoB,KAAtD;AAAyD,GAApI,MAA0I;AAAED,IAAAA,OAAO,GAAG,SAASA,OAAT,CAAiBC,GAAjB,EAAsB;AAAE,aAAOA,GAAG,IAAI,OAAOC,MAAP,KAAkB,UAAzB,IAAuCD,GAAG,CAACG,WAAJ,KAAoBF,MAA3D,IAAqED,GAAG,KAAKC,MAAM,CAACG,SAApF,GAAgG,QAAhG,GAA2G,OAAOJ,GAAzH;AAA+H,KAAjK;AAAoK;;AAAC,SAAOD,OAAO,CAACC,GAAD,CAAd;AAAsB;;AAE1X,SAASK,kBAAT,CAA4BC,GAA5B,EAAiC;AAAE,SAAOC,kBAAkB,CAACD,GAAD,CAAlB,IAA2BE,gBAAgB,CAACF,GAAD,CAA3C,IAAoDG,2BAA2B,CAACH,GAAD,CAA/E,IAAwFI,kBAAkB,EAAjH;AAAsH;;AAEzJ,SAASA,kBAAT,GAA8B;AAAE,QAAM,IAAIC,SAAJ,CAAc,sIAAd,CAAN;AAA8J;;AAE9L,SAASH,gBAAT,CAA0BI,IAA1B,EAAgC;AAAE,MAAI,OAAOX,MAAP,KAAkB,WAAlB,IAAiCW,IAAI,CAACX,MAAM,CAACC,QAAR,CAAJ,IAAyB,IAA1D,IAAkEU,IAAI,CAAC,YAAD,CAAJ,IAAsB,IAA5F,EAAkG,OAAOC,KAAK,CAACC,IAAN,CAAWF,IAAX,CAAP;AAA0B;;AAE9J,SAASL,kBAAT,CAA4BD,GAA5B,EAAiC;AAAE,MAAIO,KAAK,CAACE,OAAN,CAAcT,GAAd,CAAJ,EAAwB,OAAOU,iBAAiB,CAACV,GAAD,CAAxB;AAAgC;;AAE3F,SAASW,cAAT,CAAwBX,GAAxB,EAA6BY,CAA7B,EAAgC;AAAE,SAAOC,eAAe,CAACb,GAAD,CAAf,IAAwBc,qBAAqB,CAACd,GAAD,EAAMY,CAAN,CAA7C,IAAyDT,2BAA2B,CAACH,GAAD,EAAMY,CAAN,CAApF,IAAgGG,gBAAgB,EAAvH;AAA4H;;AAE9J,SAASA,gBAAT,GAA4B;AAAE,QAAM,IAAIV,SAAJ,CAAc,2IAAd,CAAN;AAAmK;;AAEjM,SAASF,2BAAT,CAAqCa,CAArC,EAAwCC,MAAxC,EAAgD;AAAE,MAAI,CAACD,CAAL,EAAQ;AAAQ,MAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAON,iBAAiB,CAACM,CAAD,EAAIC,MAAJ,CAAxB;AAAqC,MAAIC,CAAC,GAAGC,MAAM,CAACrB,SAAP,CAAiBsB,QAAjB,CAA0BC,IAA1B,CAA+BL,CAA/B,EAAkCM,KAAlC,CAAwC,CAAxC,EAA2C,CAAC,CAA5C,CAAR;AAAwD,MAAIJ,CAAC,KAAK,QAAN,IAAkBF,CAAC,CAACnB,WAAxB,EAAqCqB,CAAC,GAAGF,CAAC,CAACnB,WAAF,CAAc0B,IAAlB;AAAwB,MAAIL,CAAC,KAAK,KAAN,IAAeA,CAAC,KAAK,KAAzB,EAAgC,OAAOX,KAAK,CAACC,IAAN,CAAWQ,CAAX,CAAP;AAAsB,MAAIE,CAAC,KAAK,WAAN,IAAqB,2CAA2CM,IAA3C,CAAgDN,CAAhD,CAAzB,EAA6E,OAAOR,iBAAiB,CAACM,CAAD,EAAIC,MAAJ,CAAxB;AAAsC;;AAEha,SAASP,iBAAT,CAA2BV,GAA3B,EAAgCyB,GAAhC,EAAqC;AAAE,MAAIA,GAAG,IAAI,IAAP,IAAeA,GAAG,GAAGzB,GAAG,CAAC0B,MAA7B,EAAqCD,GAAG,GAAGzB,GAAG,CAAC0B,MAAV;;AAAkB,OAAK,IAAId,CAAC,GAAG,CAAR,EAAWe,IAAI,GAAG,IAAIpB,KAAJ,CAAUkB,GAAV,CAAvB,EAAuCb,CAAC,GAAGa,GAA3C,EAAgDb,CAAC,EAAjD,EAAqD;AAAEe,IAAAA,IAAI,CAACf,CAAD,CAAJ,GAAUZ,GAAG,CAACY,CAAD,CAAb;AAAmB;;AAAC,SAAOe,IAAP;AAAc;;AAEvL,SAASb,qBAAT,CAA+Bd,GAA/B,EAAoCY,CAApC,EAAuC;AAAE,MAAIgB,EAAE,GAAG5B,GAAG,KAAK,OAAOL,MAAP,KAAkB,WAAlB,IAAiCK,GAAG,CAACL,MAAM,CAACC,QAAR,CAApC,IAAyDI,GAAG,CAAC,YAAD,CAAjE,CAAZ;;AAA8F,MAAI4B,EAAE,IAAI,IAAV,EAAgB;AAAQ,MAAIC,IAAI,GAAG,EAAX;AAAe,MAAIC,EAAE,GAAG,IAAT;AAAe,MAAIC,EAAE,GAAG,KAAT;;AAAgB,MAAIC,EAAJ,EAAQC,EAAR;;AAAY,MAAI;AAAE,SAAKL,EAAE,GAAGA,EAAE,CAACP,IAAH,CAAQrB,GAAR,CAAV,EAAwB,EAAE8B,EAAE,GAAG,CAACE,EAAE,GAAGJ,EAAE,CAACM,IAAH,EAAN,EAAiBC,IAAxB,CAAxB,EAAuDL,EAAE,GAAG,IAA5D,EAAkE;AAAED,MAAAA,IAAI,CAACO,IAAL,CAAUJ,EAAE,CAACK,KAAb;;AAAqB,UAAIzB,CAAC,IAAIiB,IAAI,CAACH,MAAL,KAAgBd,CAAzB,EAA4B;AAAQ;AAAE,GAArI,CAAsI,OAAO0B,GAAP,EAAY;AAAEP,IAAAA,EAAE,GAAG,IAAL;AAAWE,IAAAA,EAAE,GAAGK,GAAL;AAAW,GAA1K,SAAmL;AAAE,QAAI;AAAE,UAAI,CAACR,EAAD,IAAOF,EAAE,CAAC,QAAD,CAAF,IAAgB,IAA3B,EAAiCA,EAAE,CAAC,QAAD,CAAF;AAAiB,KAAxD,SAAiE;AAAE,UAAIG,EAAJ,EAAQ,MAAME,EAAN;AAAW;AAAE;;AAAC,SAAOJ,IAAP;AAAc;;AAErf,SAAShB,eAAT,CAAyBb,GAAzB,EAA8B;AAAE,MAAIO,KAAK,CAACE,OAAN,CAAcT,GAAd,CAAJ,EAAwB,OAAOA,GAAP;AAAa;;AAsBrE,SAASuC,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIpC,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASqC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;AAAE,OAAK,IAAIhC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgC,KAAK,CAAClB,MAA1B,EAAkCd,CAAC,EAAnC,EAAuC;AAAE,QAAIiC,UAAU,GAAGD,KAAK,CAAChC,CAAD,CAAtB;AAA2BiC,IAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AAAwDD,IAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AAAgC,QAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAA4B7B,IAAAA,MAAM,CAAC8B,cAAP,CAAsBN,MAAtB,EAA8BE,UAAU,CAACK,GAAzC,EAA8CL,UAA9C;AAA4D;AAAE;;AAE7T,SAASM,YAAT,CAAsBV,WAAtB,EAAmCW,UAAnC,EAA+CC,WAA/C,EAA4D;AAAE,MAAID,UAAJ,EAAgBV,iBAAiB,CAACD,WAAW,CAAC3C,SAAb,EAAwBsD,UAAxB,CAAjB;AAAsD,MAAIC,WAAJ,EAAiBX,iBAAiB,CAACD,WAAD,EAAcY,WAAd,CAAjB;AAA6C,SAAOZ,WAAP;AAAqB;;AAEvN,SAASa,IAAT,CAAcX,MAAd,EAAsBY,QAAtB,EAAgCC,QAAhC,EAA0C;AAAE,MAAI,OAAOC,OAAP,KAAmB,WAAnB,IAAkCA,OAAO,CAACC,GAA9C,EAAmD;AAAEJ,IAAAA,IAAI,GAAGG,OAAO,CAACC,GAAf;AAAqB,GAA1E,MAAgF;AAAEJ,IAAAA,IAAI,GAAG,SAASA,IAAT,CAAcX,MAAd,EAAsBY,QAAtB,EAAgCC,QAAhC,EAA0C;AAAE,UAAIG,IAAI,GAAGC,cAAc,CAACjB,MAAD,EAASY,QAAT,CAAzB;;AAA6C,UAAI,CAACI,IAAL,EAAW;AAAQ,UAAIE,IAAI,GAAG1C,MAAM,CAAC2C,wBAAP,CAAgCH,IAAhC,EAAsCJ,QAAtC,CAAX;;AAA4D,UAAIM,IAAI,CAACH,GAAT,EAAc;AAAE,eAAOG,IAAI,CAACH,GAAL,CAASrC,IAAT,CAAcmC,QAAd,CAAP;AAAiC;;AAAC,aAAOK,IAAI,CAACxB,KAAZ;AAAoB,KAArP;AAAwP;;AAAC,SAAOiB,IAAI,CAACX,MAAD,EAASY,QAAT,EAAmBC,QAAQ,IAAIb,MAA/B,CAAX;AAAoD;;AAE3a,SAASiB,cAAT,CAAwBG,MAAxB,EAAgCR,QAAhC,EAA0C;AAAE,SAAO,CAACpC,MAAM,CAACrB,SAAP,CAAiBkE,cAAjB,CAAgC3C,IAAhC,CAAqC0C,MAArC,EAA6CR,QAA7C,CAAR,EAAgE;AAAEQ,IAAAA,MAAM,GAAGE,eAAe,CAACF,MAAD,CAAxB;AAAkC,QAAIA,MAAM,KAAK,IAAf,EAAqB;AAAQ;;AAAC,SAAOA,MAAP;AAAgB;;AAE9L,SAASG,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,UAAM,IAAI/D,SAAJ,CAAc,oDAAd,CAAN;AAA4E;;AAAC8D,EAAAA,QAAQ,CAACrE,SAAT,GAAqBqB,MAAM,CAACkD,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAACtE,SAAvC,EAAkD;AAAED,IAAAA,WAAW,EAAE;AAAEwC,MAAAA,KAAK,EAAE8B,QAAT;AAAmBnB,MAAAA,QAAQ,EAAE,IAA7B;AAAmCD,MAAAA,YAAY,EAAE;AAAjD;AAAf,GAAlD,CAArB;AAAkJ,MAAIqB,UAAJ,EAAgBE,eAAe,CAACH,QAAD,EAAWC,UAAX,CAAf;AAAwC;;AAEjY,SAASE,eAAT,CAAyBtD,CAAzB,EAA4BuD,CAA5B,EAA+B;AAAED,EAAAA,eAAe,GAAGnD,MAAM,CAACqD,cAAP,IAAyB,SAASF,eAAT,CAAyBtD,CAAzB,EAA4BuD,CAA5B,EAA+B;AAAEvD,IAAAA,CAAC,CAACyD,SAAF,GAAcF,CAAd;AAAiB,WAAOvD,CAAP;AAAW,GAAxG;;AAA0G,SAAOsD,eAAe,CAACtD,CAAD,EAAIuD,CAAJ,CAAtB;AAA+B;;AAE1K,SAASG,YAAT,CAAsBC,OAAtB,EAA+B;AAAE,MAAIC,yBAAyB,GAAGC,yBAAyB,EAAzD;;AAA6D,SAAO,SAASC,oBAAT,GAAgC;AAAE,QAAIC,KAAK,GAAGd,eAAe,CAACU,OAAD,CAA3B;AAAA,QAAsCK,MAAtC;;AAA8C,QAAIJ,yBAAJ,EAA+B;AAAE,UAAIK,SAAS,GAAGhB,eAAe,CAAC,IAAD,CAAf,CAAsBpE,WAAtC;;AAAmDmF,MAAAA,MAAM,GAAGvB,OAAO,CAACyB,SAAR,CAAkBH,KAAlB,EAAyBI,SAAzB,EAAoCF,SAApC,CAAT;AAA0D,KAA9I,MAAoJ;AAAED,MAAAA,MAAM,GAAGD,KAAK,CAACK,KAAN,CAAY,IAAZ,EAAkBD,SAAlB,CAAT;AAAwC;;AAAC,WAAOE,0BAA0B,CAAC,IAAD,EAAOL,MAAP,CAAjC;AAAkD,GAAxU;AAA2U;;AAEza,SAASK,0BAAT,CAAoCC,IAApC,EAA0CjE,IAA1C,EAAgD;AAAE,MAAIA,IAAI,KAAK5B,OAAO,CAAC4B,IAAD,CAAP,KAAkB,QAAlB,IAA8B,OAAOA,IAAP,KAAgB,UAAnD,CAAR,EAAwE;AAAE,WAAOA,IAAP;AAAc;;AAAC,SAAOkE,sBAAsB,CAACD,IAAD,CAA7B;AAAsC;;AAEjL,SAASC,sBAAT,CAAgCD,IAAhC,EAAsC;AAAE,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAE,UAAM,IAAIE,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOF,IAAP;AAAc;;AAEtK,SAAST,yBAAT,GAAqC;AAAE,MAAI,OAAOpB,OAAP,KAAmB,WAAnB,IAAkC,CAACA,OAAO,CAACyB,SAA/C,EAA0D,OAAO,KAAP;AAAc,MAAIzB,OAAO,CAACyB,SAAR,CAAkBO,IAAtB,EAA4B,OAAO,KAAP;AAAc,MAAI,OAAOC,KAAP,KAAiB,UAArB,EAAiC,OAAO,IAAP;;AAAa,MAAI;AAAEC,IAAAA,OAAO,CAAC7F,SAAR,CAAkB8F,OAAlB,CAA0BvE,IAA1B,CAA+BoC,OAAO,CAACyB,SAAR,CAAkBS,OAAlB,EAA2B,EAA3B,EAA+B,YAAY,CAAE,CAA7C,CAA/B;AAAgF,WAAO,IAAP;AAAc,GAApG,CAAqG,OAAOE,CAAP,EAAU;AAAE,WAAO,KAAP;AAAe;AAAE;;AAEzU,SAAS5B,eAAT,CAAyBjD,CAAzB,EAA4B;AAAEiD,EAAAA,eAAe,GAAG9C,MAAM,CAACqD,cAAP,GAAwBrD,MAAM,CAAC2E,cAA/B,GAAgD,SAAS7B,eAAT,CAAyBjD,CAAzB,EAA4B;AAAE,WAAOA,CAAC,CAACyD,SAAF,IAAetD,MAAM,CAAC2E,cAAP,CAAsB9E,CAAtB,CAAtB;AAAiD,GAAjJ;AAAmJ,SAAOiD,eAAe,CAACjD,CAAD,CAAtB;AAA4B;;AAE7M,SAAS+E,UAAT,QAA2B,mBAA3B;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,SAASC,MAAT,EAAiBC,WAAjB,EAA8BC,UAA9B,QAAgD,+BAAhD;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,yBAApC;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,OAAOC,YAAP,MAAyB,wBAAzB;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,0CAAtC;AACA,SAASC,SAAT,EAAoBC,wBAApB,EAA8CC,UAA9C,EAA0DC,0BAA1D,QAA4F,aAA5F;AACAb,KAAK,CAACc,YAAN,GAAqBC,QAArB,CAA8B,qBAA9B;AACAf,KAAK,CAACc,YAAN,GAAqBC,QAArB,CAA8B,gBAA9B;AACAf,KAAK,CAACc,YAAN,GAAqBC,QAArB,CAA8B,eAA9B;AACA,OAAO,IAAIC,UAAU,GAAG,UAAjB;AACP,OAAO,IAAIC,eAAe,GAAG,EAAtB;AACP,IAAIC,4BAA4B,GAAG,YAAnC;AACA,IAAIC,uBAAuB,GAAG,GAA9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,IAAIC,QAAQ,GAAG,aAAa,UAAUC,WAAV,EAAuB;AACxDnD,EAAAA,SAAS,CAACkD,QAAD,EAAWC,WAAX,CAAT;;AAEA,MAAIC,MAAM,GAAG5C,YAAY,CAAC0C,QAAD,CAAzB;;AAEA,WAASA,QAAT,CAAkBG,WAAlB,EAA+B;AAC7B,QAAIC,KAAJ;;AAEAjF,IAAAA,eAAe,CAAC,IAAD,EAAO6E,QAAP,CAAf;;AAEAI,IAAAA,KAAK,GAAGF,MAAM,CAACjG,IAAP,CAAY,IAAZ,EAAkBkG,WAAlB,CAAR;AACA;AACJ;AACA;AACA;AACA;AACA;;AAEIC,IAAAA,KAAK,CAACC,YAAN,GAAqB,IAAIlB,YAAJ,CAAiBhB,sBAAsB,CAACiC,KAAD,CAAvC,CAArB;AACA;AACJ;AACA;AACA;AACA;AACA;;AAEIA,IAAAA,KAAK,CAACE,aAAN,GAAsB,KAAtB;AACA;AACJ;AACA;AACA;AACA;AACA;;AAEIF,IAAAA,KAAK,CAACG,qBAAN,GAA8B,KAA9B;AACA;AACJ;AACA;AACA;AACA;AACA;;AAEIH,IAAAA,KAAK,CAACI,gBAAN,GAAyB,KAAzB;AACA;AACJ;AACA;AACA;AACA;AACA;;AAEIJ,IAAAA,KAAK,CAACK,kBAAN,GAA2B,CAA3B;AACA;AACJ;AACA;AACA;AACA;AACA;;AAEIL,IAAAA,KAAK,CAACM,UAAN,GAAmB,EAAnB;AACA;AACJ;AACA;AACA;AACA;;AAEIN,IAAAA,KAAK,CAACO,aAAN,GAAsB,KAAtB;AACA,WAAOP,KAAP;AACD;AACD;AACF;AACA;AACA;AACA;;;AAGErE,EAAAA,YAAY,CAACiE,QAAD,EAAW,CAAC;AACtBlE,IAAAA,GAAG,EAAE,WADiB;AAEtBb,IAAAA,KAAK,EAAE,SAAS2F,SAAT,GAAqB;AAC1B,aAAO,KAAKC,GAAL,CAASC,WAAT,GAAuBC,UAA9B;AACD;AACD;AACJ;AACA;;AAP0B,GAAD,EASpB;AACDjF,IAAAA,GAAG,EAAE,cADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS+F,YAAT,GAAwB;AAC7B,UAAIC,MAAM,GAAG,IAAb;;AAEA,UAAI,KAAKC,OAAT,EAAkB;AAChB;AACD;;AAED,WAAKC,WAAL;AACA,WAAKC,cAAL;AACA,WAAKC,OAAL,CAAa,4BAAb,EAA2C,UAAUC,KAAV,EAAiB;AAC1D,eAAOL,MAAM,CAACM,0BAAP,CAAkCD,KAAlC,CAAP;AACD,OAFD;AAGA,WAAKD,OAAL,CAAa,2BAAb,EAA0C,UAAUC,KAAV,EAAiB;AACzD,eAAOL,MAAM,CAACO,oBAAP,CAA4BF,KAA5B,CAAP;AACD,OAFD;AAGA,WAAKD,OAAL,CAAa,uBAAb,EAAsC,UAAUI,CAAV,EAAaC,MAAb,EAAqB;AACzD,eAAOT,MAAM,CAACU,qBAAP,CAA6BD,MAA7B,CAAP;AACD,OAFD;;AAIAxF,MAAAA,IAAI,CAACW,eAAe,CAACmD,QAAQ,CAACtH,SAAV,CAAhB,EAAsC,cAAtC,EAAsD,IAAtD,CAAJ,CAAgEuB,IAAhE,CAAqE,IAArE;AACD;AACD;AACJ;AACA;;AAzBK,GAToB,EAoCpB;AACD6B,IAAAA,GAAG,EAAE,cADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS2G,YAAT,GAAwB;AAC7B,WAAKC,aAAL;AACA,WAAKb,YAAL;;AAEA9E,MAAAA,IAAI,CAACW,eAAe,CAACmD,QAAQ,CAACtH,SAAV,CAAhB,EAAsC,cAAtC,EAAsD,IAAtD,CAAJ,CAAgEuB,IAAhE,CAAqE,IAArE;AACD;AACD;AACJ;AACA;;AAVK,GApCoB,EAgDpB;AACD6B,IAAAA,GAAG,EAAE,eADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS4G,aAAT,GAAyB;AAC9B,WAAKC,mBAAL;;AAEA5F,MAAAA,IAAI,CAACW,eAAe,CAACmD,QAAQ,CAACtH,SAAV,CAAhB,EAAsC,eAAtC,EAAuD,IAAvD,CAAJ,CAAiEuB,IAAjE,CAAsE,IAAtE;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;;AAZK,GAhDoB,EA8DpB;AACD6B,IAAAA,GAAG,EAAE,kBADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS8G,gBAAT,GAA4B;AACjC,UAAIC,MAAM,GAAG,IAAb;;AAEA,UAAIC,SAAS,GAAG,KAAKpB,GAAL,CAASqB,oBAAT,EAAhB;;AAEA,UAAIC,qBAAqB,GAAGF,SAAS,CAACG,gBAAV,EAA5B;AAAA,UACIC,QAAQ,GAAGF,qBAAqB,CAACG,GADrC;AAAA,UAEIC,QAAQ,GAAGJ,qBAAqB,CAACK,GAFrC;;AAIA,UAAIC,qBAAqB,GAAGR,SAAS,CAACS,oBAAV,EAA5B;AAAA,UACIC,MAAM,GAAGF,qBAAqB,CAACH,GADnC;AAAA,UAEIM,MAAM,GAAGH,qBAAqB,CAACD,GAFnC;;AAIA,UAAIK,cAAc,GAAG,KAAKhC,GAAL,CAASiC,QAAT,CAAkB,qBAAlB,EAAyC,CAAC;AAC7DT,QAAAA,QAAQ,EAAEA,QADmD;AAE7DE,QAAAA,QAAQ,EAAEA,QAFmD;AAG7DI,QAAAA,MAAM,EAAEA,MAHqD;AAI7DC,QAAAA,MAAM,EAAEA;AAJqD,OAAD,CAAzC,CAArB;AAMA,UAAIG,YAAY,GAAG,EAAnB;AACA,UAAIC,eAAe,GAAG,EAAtB;AACA,UAAIC,IAAI,GAAG,EAAX;AACAjE,MAAAA,SAAS,CAAC6D,cAAD,EAAiB,UAAUK,KAAV,EAAiB;AACzC,aAAK,IAAIC,SAAS,GAAGD,KAAK,CAACb,QAA3B,EAAqCc,SAAS,IAAID,KAAK,CAACP,MAAxD,EAAgEQ,SAAS,IAAI,CAA7E,EAAgF;AAC9E,cAAIJ,YAAY,CAACK,OAAb,CAAqBD,SAArB,MAAoC,CAAC,CAAzC,EAA4C;AAC1CJ,YAAAA,YAAY,CAAC/H,IAAb,CAAkBmI,SAAlB;AACD;AACF;;AAED,aAAK,IAAIE,YAAY,GAAGH,KAAK,CAACX,QAA9B,EAAwCc,YAAY,IAAIH,KAAK,CAACN,MAA9D,EAAsES,YAAY,IAAI,CAAtF,EAAyF;AACvF,cAAIL,eAAe,CAACI,OAAhB,CAAwBC,YAAxB,MAA0C,CAAC,CAA/C,EAAkD;AAChDL,YAAAA,eAAe,CAAChI,IAAhB,CAAqBqI,YAArB;AACD;AACF;AACF,OAZQ,CAAT;AAaArE,MAAAA,SAAS,CAAC+D,YAAD,EAAe,UAAUT,GAAV,EAAe;AACrC,YAAIgB,MAAM,GAAG,EAAb;AACAtE,QAAAA,SAAS,CAACgE,eAAD,EAAkB,UAAUO,MAAV,EAAkB;AAC3CD,UAAAA,MAAM,CAACtI,IAAP,CAAYgH,MAAM,CAACnB,GAAP,CAAW2C,eAAX,CAA2BlB,GAA3B,EAAgCiB,MAAhC,CAAZ;AACD,SAFQ,CAAT;AAGAN,QAAAA,IAAI,CAACjI,IAAL,CAAUsI,MAAV;AACD,OANQ,CAAT;AAOA,aAAOL,IAAP;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAvDK,GA9DoB,EAuHpB;AACDnH,IAAAA,GAAG,EAAE,QADJ;AAEDb,IAAAA,KAAK,EAAE,SAASwI,MAAT,GAAkB;AACvB,UAAI,KAAK5C,GAAL,CAASoB,SAAT,CAAmByB,SAAnB,CAA6BC,OAA7B,GAAuCC,OAAvC,EAAJ,EAAsD;AACpD,eAAO,KAAP;AACD,OAHsB,CAGrB;AACF;AACA;;;AAGA,UAAIC,qBAAqB,GAAG,KAAKhD,GAAL,CAASoB,SAAT,CAAmByB,SAAnB,CAA6BC,OAA7B,GAAuCG,gBAAvC,EAA5B;AAAA,UACIC,sBAAsB,GAAGxK,cAAc,CAACsK,qBAAD,EAAwB,CAAxB,CAD3C;AAAA,UAEIG,YAAY,GAAGD,sBAAsB,CAAC,CAAD,CAFzC;AAAA,UAGIE,eAAe,GAAGF,sBAAsB,CAAC,CAAD,CAH5C;AAAA,UAIIG,UAAU,GAAGH,sBAAsB,CAAC,CAAD,CAJvC;AAAA,UAKII,aAAa,GAAGJ,sBAAsB,CAAC,CAAD,CAL1C;;AAOA,UAAIK,kBAAkB,GAAG,KAAKvD,GAAL,CAASqB,oBAAT,EAAzB;AACA,UAAImC,aAAa,GAAGD,kBAAkB,CAAChC,gBAAnB,EAApB;AACA,UAAIkC,iBAAiB,GAAGF,kBAAkB,CAAC1B,oBAAnB,EAAxB;AACA,WAAK6B,2BAAL;AACA,UAAIC,sBAAsB,GAAG,CAACH,aAAa,CAAC/B,GAAf,EAAoB+B,aAAa,CAAC7B,GAAlC,EAAuC8B,iBAAiB,CAAChC,GAAzD,EAA8DgC,iBAAiB,CAAC9B,GAAhF,CAA7B;AACA,UAAIiC,8BAA8B,GAAG,KAAK5D,GAAL,CAASiC,QAAT,CAAkB,qBAAlB,EAAyC,CAAC4B,IAAI,CAACC,GAAL,CAASN,aAAa,CAAC/B,GAAvB,EAA4B0B,YAA5B,CAAD,EAA4CU,IAAI,CAACC,GAAL,CAASN,aAAa,CAAC7B,GAAvB,EAA4ByB,eAA5B,CAA5C,EAA0FS,IAAI,CAACE,GAAL,CAASN,iBAAiB,CAAChC,GAA3B,EAAgC4B,UAAhC,CAA1F,EAAuIQ,IAAI,CAACE,GAAL,CAASN,iBAAiB,CAAC9B,GAA3B,EAAgC2B,aAAhC,CAAvI,CAAzC,EAAiOK,sBAAjO,CAArC;;AAEA,UAAIK,qBAAqB,GAAGtF,wBAAwB,CAACiF,sBAAD,EAAyBC,8BAAzB,CAApD;AAAA,UACIK,eAAe,GAAGD,qBAAqB,CAACC,eAD5C;AAAA,UAEIC,iBAAiB,GAAGF,qBAAqB,CAACE,iBAF9C;AAAA,UAGIC,eAAe,GAAGH,qBAAqB,CAACG,eAH5C;;AAKA,UAAID,iBAAiB,IAAIA,iBAAiB,CAACzC,GAAlB,GAAwB,CAAC,CAA9C,IAAmDyC,iBAAiB,CAACvC,GAAlB,GAAwB,CAAC,CAAhF,EAAmF;AACjF,YAAIyC,aAAa,GAAG,KAAKlD,gBAAL,EAApB;AACA,YAAImD,WAAW,GAAGd,kBAAkB,CAACe,KAAnB,EAAlB;AACA,YAAIC,WAAW,GAAG,IAAI/F,SAAJ,CAAc0F,iBAAd,EAAiCA,iBAAjC,EAAoDC,eAApD,CAAlB;AACA,YAAIK,wBAAwB,GAAG,KAAKxE,GAAL,CAASiC,QAAT,CAAkB,gBAAlB,EAAoCmC,aAApC,EAAmDC,WAAnD,EAAgEE,WAAhE,EAA6EN,eAA7E,CAA/B;;AAEA,YAAIO,wBAAwB,KAAK,KAAjC,EAAwC;AACtC,eAAKxE,GAAL,CAASoB,SAAT,CAAmByB,SAAnB,CAA6BC,OAA7B,GAAuC2B,KAAvC;AACA,eAAKzE,GAAL,CAAS0E,MAAT;AACA,iBAAO,KAAP;AACD,SAVgF,CAU/E;AACF;AACA;AACA;AACA;;;AAGA,YAAIC,UAAU,GAAGN,WAAW,CAAC9L,IAA7B;AAAA,YACIqM,QAAQ,GAAGP,WAAW,CAACQ,EAD3B;AAEA,YAAIC,OAAO,GAAG,KAAK9E,GAAL,CAAS+E,OAAT,CAAiBJ,UAAU,CAAClD,GAA5B,EAAiCkD,UAAU,CAAChD,GAA5C,EAAiDiD,QAAQ,CAACnD,GAA1D,EAA+DmD,QAAQ,CAACjD,GAAxE,CAAd;AACA,YAAIqD,kBAAkB,GAAG,CAAC3G,aAAa,CAACyG,OAAD,EAAUN,wBAAV,CAAvC;AACA,YAAIS,MAAM,GAAGxG,SAAS,CAACyF,iBAAD,EAAoBC,eAApB,EAAqCC,aAArC,EAAoDH,eAApD,CAAtB;AACA,YAAIiB,QAAQ,GAAGV,wBAAf;AACA,YAAIW,GAAG,GAAGX,wBAAV;;AAEA,YAAI,CAAC,IAAD,EAAO,MAAP,EAAejC,OAAf,CAAuB0B,eAAvB,IAA0C,CAAC,CAA3C,IAAgD,EAAEkB,GAAG,CAAC1L,MAAJ,KAAe,CAAf,IAAoB0L,GAAG,CAAC,CAAD,CAAH,CAAO1L,MAAP,KAAkB,CAAxC,CAApD,EAAgG;AAC9FyL,UAAAA,QAAQ,GAAG,EAAX;;AAEA,cAAIjB,eAAe,KAAK,IAAxB,EAA8B;AAC5B,gBAAImB,UAAU,GAAGjB,eAAe,CAAC1C,GAAhB,GAAsByC,iBAAiB,CAACzC,GAAxC,GAA8C,CAA/D;AACA,gBAAI4D,UAAU,GAAGD,UAAU,GAAGD,GAAG,CAAC1L,MAAlC;;AAEA,iBAAK,IAAId,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyM,UAApB,EAAgCzM,CAAC,EAAjC,EAAqC;AACnCuM,cAAAA,QAAQ,CAAC/K,IAAT,CAAcgL,GAAG,CAAC,CAACxM,CAAC,IAAIwM,GAAG,CAAC1L,MAAJ,GAAa4L,UAAjB,CAAF,IAAkCF,GAAG,CAAC1L,MAAvC,CAAjB;AACD;AACF,WAPD,MAOO;AACL,gBAAI6L,WAAW,GAAGnB,eAAe,CAACxC,GAAhB,GAAsBuC,iBAAiB,CAACvC,GAAxC,GAA8C,CAAhE;;AAEA,gBAAI4D,WAAW,GAAGD,WAAW,GAAGH,GAAG,CAAC,CAAD,CAAH,CAAO1L,MAAvC;;AAEA,iBAAK,IAAI+L,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGL,GAAG,CAAC1L,MAA5B,EAAoC+L,GAAG,EAAvC,EAA2C;AACzCN,cAAAA,QAAQ,CAAC/K,IAAT,CAAc,EAAd;;AAEA,mBAAK,IAAIsL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAApB,EAAiCG,CAAC,EAAlC,EAAsC;AACpCP,gBAAAA,QAAQ,CAACM,GAAD,CAAR,CAAcrL,IAAd,CAAmBgL,GAAG,CAACK,GAAD,CAAH,CAAS,CAACC,CAAC,IAAIN,GAAG,CAACK,GAAD,CAAH,CAAS/L,MAAT,GAAkB8L,WAAtB,CAAF,IAAwCJ,GAAG,CAACK,GAAD,CAAH,CAAS/L,MAA1D,CAAnB;AACD;AACF;AACF;AACF;;AAED,aAAKuG,GAAL,CAAS0F,iBAAT,CAA2BxB,iBAAiB,CAACzC,GAA7C,EAAkDyC,iBAAiB,CAACvC,GAApE,EAAyEuD,QAAzE,EAAmFf,eAAe,CAAC1C,GAAnG,EAAwG0C,eAAe,CAACxC,GAAxH,EAA6H,GAAGgE,MAAH,CAAU,KAAKC,UAAf,EAA2B,OAA3B,CAA7H,EAAkK,IAAlK,EAAwK3B,eAAxK,EAAyLgB,MAAzL;AACA,aAAKY,YAAL,CAAkBjC,8BAAlB;AACA,aAAK5D,GAAL,CAASiC,QAAT,CAAkB,eAAlB,EAAmCiD,QAAnC,EAA6Cb,WAA7C,EAA0DE,WAA1D,EAAuEN,eAAvE,EAAwFe,kBAAxF;AACA,aAAKhF,GAAL,CAAS0E,MAAT;AACD,OAtDD,MAsDO;AACL;AACA,aAAK1E,GAAL,CAAS8F,eAAT;AACD;;AAED,aAAO,IAAP;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;AAhGK,GAvHoB,EAyNpB;AACD7K,IAAAA,GAAG,EAAE,6BADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS2L,2BAAT,CAAqClF,MAArC,EAA6C;AAClD,UAAIA,MAAM,CAACY,GAAP,GAAa,CAAjB,EAAoB;AAClBZ,QAAAA,MAAM,CAACY,GAAP,GAAa,CAAb;AACD;;AAED,UAAIZ,MAAM,CAACc,GAAP,GAAa,CAAjB,EAAoB;AAClBd,QAAAA,MAAM,CAACc,GAAP,GAAa,CAAb;AACD;;AAED,aAAOd,MAAP;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;AAnBK,GAzNoB,EA8OpB;AACD5F,IAAAA,GAAG,EAAE,+BADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS4L,6BAAT,CAAuCC,iBAAvC,EAA0D;AAC/D,UAAIC,gBAAgB,GAAG,KAAKlG,GAAL,CAASqB,oBAAT,EAAvB;AACA,UAAIoC,iBAAiB,GAAGyC,gBAAgB,CAACrE,oBAAjB,EAAxB;AACA,UAAIhB,MAAM,GAAGoF,iBAAb;;AAEA,UAAI,KAAKpG,UAAL,CAAgBsG,QAAhB,CAAyBxH,UAAU,CAACyH,QAApC,KAAiD,KAAKvG,UAAL,CAAgBsG,QAAhB,CAAyBxH,UAAU,CAAC0H,UAApC,CAArD,EAAsG;AACpG,YAAI7C,aAAa,GAAG0C,gBAAgB,CAAC3E,gBAAjB,EAApB;;AAEA,YAAIkC,iBAAiB,CAAC9B,GAAlB,IAAyBsE,iBAAiB,CAACtE,GAA3C,IAAkD6B,aAAa,CAAC7B,GAAd,IAAqBsE,iBAAiB,CAACtE,GAA7F,EAAkG;AAChGd,UAAAA,MAAM,GAAG,IAAItC,UAAJ,CAAekF,iBAAiB,CAAChC,GAAjC,EAAsCwE,iBAAiB,CAACtE,GAAxD,CAAT;AACD;;AAED,YAAI8B,iBAAiB,CAAChC,GAAlB,GAAwBwE,iBAAiB,CAACxE,GAA1C,IAAiD+B,aAAa,CAAC/B,GAAd,GAAoBwE,iBAAiB,CAACxE,GAA3F,EAAgG;AAC9FZ,UAAAA,MAAM,GAAG,IAAItC,UAAJ,CAAe0H,iBAAiB,CAACxE,GAAjC,EAAsCgC,iBAAiB,CAAC9B,GAAxD,CAAT;AACD;AACF,OAVD,MAUO,IAAI,KAAK9B,UAAL,CAAgBsG,QAAhB,CAAyBxH,UAAU,CAACyH,QAApC,CAAJ,EAAmD;AACxDvF,QAAAA,MAAM,GAAG,IAAItC,UAAJ,CAAe0H,iBAAiB,CAACxE,GAAjC,EAAsCgC,iBAAiB,CAAC9B,GAAxD,CAAT;AACD,OAFM,MAEA,IAAI,KAAK9B,UAAL,CAAgBsG,QAAhB,CAAyBxH,UAAU,CAAC0H,UAApC,CAAJ,EAAqD;AAC1DxF,QAAAA,MAAM,GAAG,IAAItC,UAAJ,CAAekF,iBAAiB,CAAChC,GAAjC,EAAsCwE,iBAAiB,CAACtE,GAAxD,CAAT;AACD,OAFM,MAEA;AACL;AACA;AACD;;AAED,aAAO,KAAKoE,2BAAL,CAAiClF,MAAjC,CAAP;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;;AAjCK,GA9OoB,EAiRpB;AACD5F,IAAAA,GAAG,EAAE,YADJ;AAEDb,IAAAA,KAAK,EAAE,SAASkM,UAAT,CAAoBL,iBAApB,EAAuC;AAC5C,UAAIM,0BAA0B,GAAG,KAAKP,6BAAL,CAAmCC,iBAAnC,CAAjC;;AAEA,UAAIM,0BAAJ,EAAgC;AAC9B,aAAKC,aAAL,CAAmBD,0BAAnB;AACD;AACF;AACD;AACJ;AACA;AACA;AACA;;AAbK,GAjRoB,EAgSpB;AACDtL,IAAAA,GAAG,EAAE,QADJ;AAEDb,IAAAA,KAAK,EAAE,SAASqM,MAAT,GAAkB;AACvB,UAAIC,MAAM,GAAG,IAAb;;AAEA,WAAK1G,GAAL,CAAS2G,gBAAT,CAA0B,YAAY;AACpCD,QAAAA,MAAM,CAAC1G,GAAP,CAAW4G,KAAX,CAAiB3H,4BAAjB,EAA+C,KAAK,CAApD,EAAuD,CAAvD,EAA0D,GAAG0G,MAAH,CAAUe,MAAM,CAACd,UAAjB,EAA6B,OAA7B,CAA1D;;AAEAc,QAAAA,MAAM,CAACjH,aAAP,GAAuB,KAAvB;AACD,OAJD,EAIGP,uBAJH;AAKD;AACD;AACJ;AACA;AACA;AACA;;AAfK,GAhSoB,EAiTpB;AACDjE,IAAAA,GAAG,EAAE,mBADJ;AAEDb,IAAAA,KAAK,EAAE,SAASyM,iBAAT,GAA6B;AAClC,UAAI,CAAC,KAAK7G,GAAL,CAASoB,SAAT,CAAmByB,SAAnB,CAA6BC,OAA7B,GAAuCC,OAAvC,EAAD,IAAqD,KAAKtD,aAAL,KAAuB,KAA5E,IAAqF,KAAKK,aAA9F,EAA6G;AAC3G,YAAI6D,sBAAsB,GAAG,KAAK3D,GAAL,CAAS8G,eAAT,EAA7B;AACA,YAAIC,yBAAyB,GAAG,KAAK/G,GAAL,CAASoB,SAAT,CAAmByB,SAAnB,CAA6BC,OAA7B,GAAuCG,gBAAvC,EAAhC;AACA,YAAI+D,aAAa,GAAG,KAAKhH,GAAL,CAASiH,SAAT,EAApB;;AAEA,YAAItD,sBAAsB,CAAC,CAAD,CAAtB,GAA4BqD,aAAa,GAAG,CAA5C,IAAiDD,yBAAyB,CAAC,CAAD,CAAzB,KAAiCC,aAAa,GAAG,CAAtG,EAAyG;AACvG,eAAKvH,aAAL,GAAqB,IAArB;AACA,eAAKgH,MAAL;AACD;AACF;AACF;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AArBK,GAjToB,EAwUpB;AACDxL,IAAAA,GAAG,EAAE,mCADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS8M,iCAAT,CAA2CvD,sBAA3C,EAAmE;AACxE,UAAIvB,IAAI,GAAG,KAAKpC,GAAL,CAAS+E,OAAT,EAAX;AACA,UAAIiC,aAAa,GAAG,KAAKhH,GAAL,CAASiH,SAAT,EAApB;AACA,UAAIE,oBAAJ;;AAEA,WAAK,IAAIC,QAAQ,GAAGzD,sBAAsB,CAAC,CAAD,CAAtB,GAA4B,CAAhD,EAAmDyD,QAAQ,GAAGJ,aAA9D,EAA6EI,QAAQ,EAArF,EAAyF;AACvF,aAAK,IAAIC,WAAW,GAAG1D,sBAAsB,CAAC,CAAD,CAA7C,EAAkD0D,WAAW,IAAI1D,sBAAsB,CAAC,CAAD,CAAvF,EAA4F0D,WAAW,EAAvG,EAA2G;AACzG,cAAIC,UAAU,GAAGlF,IAAI,CAACgF,QAAD,CAAJ,CAAeC,WAAf,CAAjB;;AAEA,cAAIC,UAAJ,EAAgB;AACd,mBAAO,CAAC,CAAR;AACD;AACF;;AAED,YAAIC,kBAAkB,GAAGnF,IAAI,CAACgF,QAAD,CAAJ,CAAezD,sBAAsB,CAAC,CAAD,CAAtB,GAA4B,CAA3C,CAAzB;AACA,YAAI6D,mBAAmB,GAAGpF,IAAI,CAACgF,QAAD,CAAJ,CAAezD,sBAAsB,CAAC,CAAD,CAAtB,GAA4B,CAA3C,CAA1B;;AAEA,YAAI,CAAC,CAAC4D,kBAAF,IAAwB,CAAC,CAACC,mBAA9B,EAAmD;AACjDL,UAAAA,oBAAoB,GAAGC,QAAvB;AACD;AACF;;AAED,aAAOD,oBAAP;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;AAhCK,GAxUoB,EA0WpB;AACDlM,IAAAA,GAAG,EAAE,6CADJ;AAEDb,IAAAA,KAAK,EAAE,SAASqN,2CAAT,CAAqDC,eAArD,EAAsEN,QAAtE,EAAgF;AACrF,WAAKpH,GAAL,CAASoB,SAAT,CAAmByB,SAAnB,CAA6BC,OAA7B,GAAuC2B,KAAvC,GAA+CkD,GAA/C,CAAmD,IAAIpJ,UAAJ,CAAemJ,eAAe,CAAC,CAAD,CAA9B,EAAmCA,eAAe,CAAC,CAAD,CAAlD,CAAnD,EAA2GC,GAA3G,CAA+G,IAAIpJ,UAAJ,CAAe6I,QAAf,EAAyBM,eAAe,CAAC,CAAD,CAAxC,CAA/G,EAA6JE,MAA7J;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;;AAVK,GA1WoB,EAsXpB;AACD3M,IAAAA,GAAG,EAAE,cADJ;AAEDb,IAAAA,KAAK,EAAE,SAASyL,YAAT,CAAsBgC,aAAtB,EAAqC;AAC1C,UAAIC,SAAJ;;AAEA,OAACA,SAAS,GAAG,KAAK9H,GAAlB,EAAuB+H,UAAvB,CAAkC5K,KAAlC,CAAwC2K,SAAxC,EAAmDhQ,kBAAkB,CAACsG,QAAQ,CAACyJ,aAAD,EAAgB,UAAUG,KAAV,EAAiB;AAC7G,eAAOnE,IAAI,CAACE,GAAL,CAASiE,KAAT,EAAgB,CAAhB,CAAP;AACD,OAF6E,CAAT,CAAlB,CAE/CrC,MAF+C,CAExC,CAAC,KAAD,EAAQ,KAAR,CAFwC,CAAnD;AAGD;AACD;AACJ;AACA;AACA;AACA;AACA;;AAdK,GAtXoB,EAsYpB;AACD1K,IAAAA,GAAG,EAAE,gBADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS6N,cAAT,GAA0B;AAC/B,UAAItE,sBAAsB,GAAG,KAAK3D,GAAL,CAAS8G,eAAT,EAA7B;AACA,UAAIK,oBAAoB,GAAG,KAAKD,iCAAL,CAAuCvD,sBAAvC,CAA3B;;AAEA,UAAIwD,oBAAoB,KAAK,CAAC,CAA1B,IAA+BA,oBAAoB,KAAK,KAAK,CAAjE,EAAoE;AAClE,eAAO,KAAP;AACD;;AAED,WAAKM,2CAAL,CAAiD9D,sBAAjD,EAAyEwD,oBAAzE;AACA,aAAO,IAAP;AACD;AACD;AACJ;AACA;AACA;AACA;;AAjBK,GAtYoB,EAyZpB;AACDlM,IAAAA,GAAG,EAAE,6BADJ;AAEDb,IAAAA,KAAK,EAAE,SAASsJ,2BAAT,GAAuC;AAC5C,WAAK9D,kBAAL,GAA0B,CAA1B;AACA,WAAKI,GAAL,CAASoB,SAAT,CAAmByB,SAAnB,CAA6BC,OAA7B,GAAuC2B,KAAvC;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;;AAXK,GAzZoB,EAsapB;AACDxJ,IAAAA,GAAG,EAAE,eADJ;AAEDb,IAAAA,KAAK,EAAE,SAASoM,aAAT,CAAuB3F,MAAvB,EAA+B;AACpC,WAAKb,GAAL,CAASoB,SAAT,CAAmByB,SAAnB,CAA6BC,OAA7B,GAAuC2B,KAAvC,GAA+CkD,GAA/C,CAAmD,KAAK3H,GAAL,CAASqB,oBAAT,GAAgC9I,IAAnF,EAAyFoP,GAAzF,CAA6F,KAAK3H,GAAL,CAASqB,oBAAT,GAAgCwD,EAA7H,EAAiI8C,GAAjI,CAAqI9G,MAArI,EAA6I+G,MAA7I;AACA,WAAK5H,GAAL,CAASkI,IAAT,CAAcxD,MAAd;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;AAZK,GAtaoB,EAobpB;AACDzJ,IAAAA,GAAG,EAAE,6BADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS+N,2BAAT,CAAqC1H,KAArC,EAA4C;AACjD,UAAI2H,eAAe,GAAG,KAAKpI,GAAL,CAASqI,YAAT,CAAsBD,eAA5C;AACA,UAAIE,WAAW,GAAGtK,MAAM,CAAC,KAAKgC,GAAL,CAASuI,KAAV,CAAN,CAAuBC,GAAvB,IAA8B,KAAKxI,GAAL,CAASyI,UAAT,CAAoBC,WAApB,IAAmCN,eAAe,CAACO,SAAjF,IAA8F1K,WAAW,CAAC,KAAK+B,GAAL,CAASuI,KAAV,CAA3H;AACA,UAAIK,UAAU,GAAG5K,MAAM,CAAC,KAAKgC,GAAL,CAASuI,KAAV,CAAN,CAAuBM,IAAvB,IAA+B,KAAK7I,GAAL,CAASyI,UAAT,CAAoBK,WAApB,IAAmCV,eAAe,CAACW,UAAlF,IAAgG7K,UAAU,CAAC,KAAK8B,GAAL,CAASuI,KAAV,CAA3H;AACA,aAAO9H,KAAK,CAACuI,OAAN,GAAgBV,WAAhB,IAA+B7H,KAAK,CAACwI,OAAN,IAAiBL,UAAvD;AACD;AACD;AACJ;AACA;AACA;AACA;;AAZK,GApboB,EAkcpB;AACD3N,IAAAA,GAAG,EAAE,gBADJ;AAEDb,IAAAA,KAAK,EAAE,SAASmG,cAAT,GAA0B;AAC/B,UAAI2I,MAAM,GAAG,IAAb;;AAEA,UAAId,eAAe,GAAG,KAAKpI,GAAL,CAASqI,YAAT,CAAsBD,eAA5C;AACA,WAAK5I,YAAL,CAAkB2J,gBAAlB,CAAmCf,eAAnC,EAAoD,SAApD,EAA+D,YAAY;AACzE,eAAOc,MAAM,CAACE,SAAP,EAAP;AACD,OAFD;AAGA,WAAK5J,YAAL,CAAkB2J,gBAAlB,CAAmCf,eAAnC,EAAoD,WAApD,EAAiE,UAAU3H,KAAV,EAAiB;AAChF,eAAOyI,MAAM,CAACG,WAAP,CAAmB5I,KAAnB,CAAP;AACD,OAFD;AAGD;AACD;AACJ;AACA;AACA;AACA;;AAjBK,GAlcoB,EAqdpB;AACDxF,IAAAA,GAAG,EAAE,sBADJ;AAEDb,IAAAA,KAAK,EAAE,SAASuG,oBAAT,GAAgC;AACrC,UAAI2I,gBAAgB,GAAG,KAAKrB,cAAL,EAAvB;;AAEA,UAAIqB,gBAAJ,EAAsB;AACpB,aAAK1G,MAAL;AACD;AACF;AACD;AACJ;AACA;AACA;AACA;;AAbK,GArdoB,EAoepB;AACD3H,IAAAA,GAAG,EAAE,4BADJ;AAEDb,IAAAA,KAAK,EAAE,SAASsG,0BAAT,GAAsC;AAC3C,WAAKd,kBAAL,GAA0B,CAA1B;AACA,WAAKF,qBAAL,GAA6B,IAA7B;AACD;AACD;AACJ;AACA;AACA;AACA;AACA;;AAXK,GApeoB,EAifpB;AACDzE,IAAAA,GAAG,EAAE,uBADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS0G,qBAAT,CAA+BD,MAA/B,EAAuC;AAC5C,UAAI,KAAKnB,qBAAL,IAA8B,CAAC,KAAKM,GAAL,CAASkI,IAAT,CAAcqB,WAAd,EAA/B,IAA8D,KAAK3J,kBAAvE,EAA2F;AACzF,aAAKA,kBAAL,IAA2B,CAA3B;AACA,aAAK0G,UAAL,CAAgBzF,MAAhB;AACA,aAAKgG,iBAAL;AACD;AACF;AACD;AACJ;AACA;AACA;AACA;;AAbK,GAjfoB,EAggBpB;AACD5L,IAAAA,GAAG,EAAE,WADJ;AAEDb,IAAAA,KAAK,EAAE,SAASgP,SAAT,GAAqB;AAC1B,UAAI,KAAKxJ,kBAAT,EAA6B;AAC3B,YAAI,KAAKA,kBAAL,GAA0B,CAA9B,EAAiC;AAC/B,eAAKgD,MAAL;AACD;;AAED,aAAKhD,kBAAL,GAA0B,CAA1B;AACA,aAAKF,qBAAL,GAA6B,KAA7B;AACD;AACF;AACD;AACJ;AACA;AACA;AACA;AACA;;AAjBK,GAhgBoB,EAmhBpB;AACDzE,IAAAA,GAAG,EAAE,aADJ;AAEDb,IAAAA,KAAK,EAAE,SAASiP,WAAT,CAAqB5I,KAArB,EAA4B;AACjC,UAAI+I,sBAAsB,GAAG,KAAKrB,2BAAL,CAAiC1H,KAAjC,CAA7B;;AAEA,UAAI,KAAKhB,aAAL,KAAuB,KAAvB,IAAgC,KAAKG,kBAAL,GAA0B,CAA1D,IAA+D4J,sBAAnE,EAA2F;AACzF,aAAK7J,gBAAL,GAAwB,IAAxB;AACA,aAAKF,aAAL,GAAqB,IAArB;AACD,OAHD,MAGO;AACL,aAAKE,gBAAL,GAAwB,KAAxB;AACD;;AAED,UAAI,KAAKA,gBAAL,IAAyB,KAAKG,aAAlC,EAAiD;AAC/C,aAAK2G,MAAL;AACD;AACF;AACD;AACJ;AACA;AACA;AACA;;AApBK,GAnhBoB,EAyiBpB;AACDxL,IAAAA,GAAG,EAAE,qBADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS6G,mBAAT,GAA+B;AACpC,WAAKpB,UAAL,CAAgBpG,MAAhB,GAAyB,CAAzB;AACA,WAAKqG,aAAL,GAAqB,KAArB;AACD;AACD;AACJ;AACA;AACA;AACA;;AAVK,GAziBoB,EAqjBpB;AACD7E,IAAAA,GAAG,EAAE,aADJ;AAEDb,IAAAA,KAAK,EAAE,SAASkG,WAAT,GAAuB;AAC5B,UAAImJ,cAAc,GAAG7K,0BAA0B,CAAC,KAAKoB,GAAL,CAASC,WAAT,GAAuBC,UAAxB,CAA/C;AACA,WAAKL,UAAL,GAAkB4J,cAAc,CAAC5J,UAAjC;AACA,WAAKC,aAAL,GAAqB2J,cAAc,CAAC3J,aAApC;AACD;AACD;AACJ;AACA;;AATK,GArjBoB,EAgkBpB;AACD7E,IAAAA,GAAG,EAAE,SADJ;AAEDb,IAAAA,KAAK,EAAE,SAASsP,OAAT,GAAmB;AACxBrO,MAAAA,IAAI,CAACW,eAAe,CAACmD,QAAQ,CAACtH,SAAV,CAAhB,EAAsC,SAAtC,EAAiD,IAAjD,CAAJ,CAA2DuB,IAA3D,CAAgE,IAAhE;AACD;AAJA,GAhkBoB,CAAX,EAqkBR,CAAC;AACH6B,IAAAA,GAAG,EAAE,YADF;AAEHQ,IAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAClB,aAAOsD,UAAP;AACD;AAJE,GAAD,EAKD;AACD9D,IAAAA,GAAG,EAAE,iBADJ;AAEDQ,IAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAClB,aAAOuD,eAAP;AACD;AAJA,GALC,CArkBQ,CAAZ;;AAilBA,SAAOG,QAAP;AACD,CA7pBkC,CA6pBjCrB,UA7pBiC,CAA5B","sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\r\n\r\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\r\n\r\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\r\n\r\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\r\n\r\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\r\n\r\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\r\n\r\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\r\n\r\nimport \"core-js/modules/es.array.index-of.js\";\r\nimport \"core-js/modules/es.array.includes.js\";\r\nimport \"core-js/modules/es.string.includes.js\";\r\nimport \"core-js/modules/es.array.concat.js\";\r\nimport \"core-js/modules/es.object.set-prototype-of.js\";\r\nimport \"core-js/modules/es.object.get-prototype-of.js\";\r\nimport \"core-js/modules/es.reflect.construct.js\";\r\nimport \"core-js/modules/es.reflect.get.js\";\r\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\r\nimport \"core-js/modules/es.symbol.js\";\r\nimport \"core-js/modules/es.symbol.description.js\";\r\nimport \"core-js/modules/es.object.to-string.js\";\r\nimport \"core-js/modules/es.symbol.iterator.js\";\r\nimport \"core-js/modules/es.array.iterator.js\";\r\nimport \"core-js/modules/es.string.iterator.js\";\r\nimport \"core-js/modules/web.dom-collections.iterator.js\";\r\nimport \"core-js/modules/es.array.slice.js\";\r\nimport \"core-js/modules/es.function.name.js\";\r\nimport \"core-js/modules/es.array.from.js\";\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\r\n\r\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\r\n\r\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\r\n\r\nimport { BasePlugin } from \"../base/index.mjs\";\r\nimport Hooks from \"../../pluginHooks.mjs\";\r\nimport { offset, outerHeight, outerWidth } from \"../../helpers/dom/element.mjs\";\r\nimport { arrayEach, arrayMap } from \"../../helpers/array.mjs\";\r\nimport { isObjectEqual } from \"../../helpers/object.mjs\";\r\nimport EventManager from \"../../eventManager.mjs\";\r\nimport { CellCoords, CellRange } from \"../../3rdparty/walkontable/src/index.mjs\";\r\nimport { getDeltas, getDragDirectionAndRange, DIRECTIONS, getMappedFillHandleSetting } from \"./utils.mjs\";\r\nHooks.getSingleton().register('modifyAutofillRange');\r\nHooks.getSingleton().register('beforeAutofill');\r\nHooks.getSingleton().register('afterAutofill');\r\nexport var PLUGIN_KEY = 'autofill';\r\nexport var PLUGIN_PRIORITY = 20;\r\nvar INSERT_ROW_ALTER_ACTION_NAME = 'insert_row';\r\nvar INTERVAL_FOR_ADDING_ROW = 200;\r\n/**\r\n * This plugin provides \"drag-down\" and \"copy-down\" functionalities, both operated using the small square in the right\r\n * bottom of the cell selection.\r\n *\r\n * \"Drag-down\" expands the value of the selected cells to the neighbouring cells when you drag the small\r\n * square in the corner.\r\n *\r\n * \"Copy-down\" copies the value of the selection to all empty cells below when you double click the small square.\r\n *\r\n * @class Autofill\r\n * @plugin Autofill\r\n */\r\n\r\nexport var Autofill = /*#__PURE__*/function (_BasePlugin) {\r\n  _inherits(Autofill, _BasePlugin);\r\n\r\n  var _super = _createSuper(Autofill);\r\n\r\n  function Autofill(hotInstance) {\r\n    var _this;\r\n\r\n    _classCallCheck(this, Autofill);\r\n\r\n    _this = _super.call(this, hotInstance);\r\n    /**\r\n     * Event manager instance.\r\n     *\r\n     * @private\r\n     * @type {EventManager}\r\n     */\r\n\r\n    _this.eventManager = new EventManager(_assertThisInitialized(_this));\r\n    /**\r\n     * Specifies if adding new row started.\r\n     *\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n\r\n    _this.addingStarted = false;\r\n    /**\r\n     * Specifies if there was mouse down on the cell corner.\r\n     *\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n\r\n    _this.mouseDownOnCellCorner = false;\r\n    /**\r\n     * Specifies if mouse was dragged outside Handsontable.\r\n     *\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n\r\n    _this.mouseDragOutside = false;\r\n    /**\r\n     * Specifies how many cell levels were dragged using the handle.\r\n     *\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n\r\n    _this.handleDraggedCells = 0;\r\n    /**\r\n     * Specifies allowed directions of drag (`'horizontal'` or '`vertical`').\r\n     *\r\n     * @private\r\n     * @type {string[]}\r\n     */\r\n\r\n    _this.directions = [];\r\n    /**\r\n     * Specifies if can insert new rows if needed.\r\n     *\r\n     * @type {boolean}\r\n     */\r\n\r\n    _this.autoInsertRow = false;\r\n    return _this;\r\n  }\r\n  /**\r\n   * Checks if the plugin is enabled in the Handsontable settings.\r\n   *\r\n   * @returns {boolean}\r\n   */\r\n\r\n\r\n  _createClass(Autofill, [{\r\n    key: \"isEnabled\",\r\n    value: function isEnabled() {\r\n      return this.hot.getSettings().fillHandle;\r\n    }\r\n    /**\r\n     * Enables the plugin functionality for this Handsontable instance.\r\n     */\r\n\r\n  }, {\r\n    key: \"enablePlugin\",\r\n    value: function enablePlugin() {\r\n      var _this2 = this;\r\n\r\n      if (this.enabled) {\r\n        return;\r\n      }\r\n\r\n      this.mapSettings();\r\n      this.registerEvents();\r\n      this.addHook('afterOnCellCornerMouseDown', function (event) {\r\n        return _this2.onAfterCellCornerMouseDown(event);\r\n      });\r\n      this.addHook('afterOnCellCornerDblClick', function (event) {\r\n        return _this2.onCellCornerDblClick(event);\r\n      });\r\n      this.addHook('beforeOnCellMouseOver', function (_, coords) {\r\n        return _this2.onBeforeCellMouseOver(coords);\r\n      });\r\n\r\n      _get(_getPrototypeOf(Autofill.prototype), \"enablePlugin\", this).call(this);\r\n    }\r\n    /**\r\n     * Updates the plugin state. This method is executed when {@link Core#updateSettings} is invoked.\r\n     */\r\n\r\n  }, {\r\n    key: \"updatePlugin\",\r\n    value: function updatePlugin() {\r\n      this.disablePlugin();\r\n      this.enablePlugin();\r\n\r\n      _get(_getPrototypeOf(Autofill.prototype), \"updatePlugin\", this).call(this);\r\n    }\r\n    /**\r\n     * Disables the plugin functionality for this Handsontable instance.\r\n     */\r\n\r\n  }, {\r\n    key: \"disablePlugin\",\r\n    value: function disablePlugin() {\r\n      this.clearMappedSettings();\r\n\r\n      _get(_getPrototypeOf(Autofill.prototype), \"disablePlugin\", this).call(this);\r\n    }\r\n    /**\r\n     * Gets selection data.\r\n     *\r\n     * @private\r\n     * @returns {object[]} Ranges Array of objects with properties `startRow`, `startCol`, `endRow` and `endCol`.\r\n     */\r\n\r\n  }, {\r\n    key: \"getSelectionData\",\r\n    value: function getSelectionData() {\r\n      var _this3 = this;\r\n\r\n      var selection = this.hot.getSelectedRangeLast();\r\n\r\n      var _selection$getTopLeft = selection.getTopLeftCorner(),\r\n          startRow = _selection$getTopLeft.row,\r\n          startCol = _selection$getTopLeft.col;\r\n\r\n      var _selection$getBottomR = selection.getBottomRightCorner(),\r\n          endRow = _selection$getBottomR.row,\r\n          endCol = _selection$getBottomR.col;\r\n\r\n      var copyableRanges = this.hot.runHooks('modifyCopyableRange', [{\r\n        startRow: startRow,\r\n        startCol: startCol,\r\n        endRow: endRow,\r\n        endCol: endCol\r\n      }]);\r\n      var copyableRows = [];\r\n      var copyableColumns = [];\r\n      var data = [];\r\n      arrayEach(copyableRanges, function (range) {\r\n        for (var visualRow = range.startRow; visualRow <= range.endRow; visualRow += 1) {\r\n          if (copyableRows.indexOf(visualRow) === -1) {\r\n            copyableRows.push(visualRow);\r\n          }\r\n        }\r\n\r\n        for (var visualColumn = range.startCol; visualColumn <= range.endCol; visualColumn += 1) {\r\n          if (copyableColumns.indexOf(visualColumn) === -1) {\r\n            copyableColumns.push(visualColumn);\r\n          }\r\n        }\r\n      });\r\n      arrayEach(copyableRows, function (row) {\r\n        var rowSet = [];\r\n        arrayEach(copyableColumns, function (column) {\r\n          rowSet.push(_this3.hot.getCopyableData(row, column));\r\n        });\r\n        data.push(rowSet);\r\n      });\r\n      return data;\r\n    }\r\n    /**\r\n     * Try to apply fill values to the area in fill border, omitting the selection border.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Reports if fill was applied.\r\n     *\r\n     * @fires Hooks#modifyAutofillRange\r\n     * @fires Hooks#beforeAutofill\r\n     * @fires Hooks#afterAutofill\r\n     */\r\n\r\n  }, {\r\n    key: \"fillIn\",\r\n    value: function fillIn() {\r\n      if (this.hot.selection.highlight.getFill().isEmpty()) {\r\n        return false;\r\n      } // Fill area may starts or ends with invisible cell. There won't be any information about it as highlighted\r\n      // selection store just renderable indexes (It's part of Walkontable). I extrapolate where the start or/and\r\n      // the end is.\r\n\r\n\r\n      var _this$hot$selection$h = this.hot.selection.highlight.getFill().getVisualCorners(),\r\n          _this$hot$selection$h2 = _slicedToArray(_this$hot$selection$h, 4),\r\n          fillStartRow = _this$hot$selection$h2[0],\r\n          fillStartColumn = _this$hot$selection$h2[1],\r\n          fillEndRow = _this$hot$selection$h2[2],\r\n          fillEndColumn = _this$hot$selection$h2[3];\r\n\r\n      var selectionRangeLast = this.hot.getSelectedRangeLast();\r\n      var topLeftCorner = selectionRangeLast.getTopLeftCorner();\r\n      var bottomRightCorner = selectionRangeLast.getBottomRightCorner();\r\n      this.resetSelectionOfDraggedArea();\r\n      var cornersOfSelectedCells = [topLeftCorner.row, topLeftCorner.col, bottomRightCorner.row, bottomRightCorner.col];\r\n      var cornersOfSelectionAndDragAreas = this.hot.runHooks('modifyAutofillRange', [Math.min(topLeftCorner.row, fillStartRow), Math.min(topLeftCorner.col, fillStartColumn), Math.max(bottomRightCorner.row, fillEndRow), Math.max(bottomRightCorner.col, fillEndColumn)], cornersOfSelectedCells);\r\n\r\n      var _getDragDirectionAndR = getDragDirectionAndRange(cornersOfSelectedCells, cornersOfSelectionAndDragAreas),\r\n          directionOfDrag = _getDragDirectionAndR.directionOfDrag,\r\n          startOfDragCoords = _getDragDirectionAndR.startOfDragCoords,\r\n          endOfDragCoords = _getDragDirectionAndR.endOfDragCoords;\r\n\r\n      if (startOfDragCoords && startOfDragCoords.row > -1 && startOfDragCoords.col > -1) {\r\n        var selectionData = this.getSelectionData();\r\n        var sourceRange = selectionRangeLast.clone();\r\n        var targetRange = new CellRange(startOfDragCoords, startOfDragCoords, endOfDragCoords);\r\n        var beforeAutofillHookResult = this.hot.runHooks('beforeAutofill', selectionData, sourceRange, targetRange, directionOfDrag);\r\n\r\n        if (beforeAutofillHookResult === false) {\r\n          this.hot.selection.highlight.getFill().clear();\r\n          this.hot.render();\r\n          return false;\r\n        } // TODO: The `hasFillDataChanged` hook argument allows skipping processing of the autofill\r\n        // handler when the user modifies the fillData in the `beforeAutofill` hook. The workaround\r\n        // is necessary for the Formulas plugin and can be removed after implementing the missing\r\n        // feature for the HF (such as `getFillRangeData` method). With that the last argument could\r\n        // be removed from the `afterAutofill` hook.\r\n\r\n\r\n        var sourceFrom = sourceRange.from,\r\n            sourceTo = sourceRange.to;\r\n        var refData = this.hot.getData(sourceFrom.row, sourceFrom.col, sourceTo.row, sourceTo.col);\r\n        var hasFillDataChanged = !isObjectEqual(refData, beforeAutofillHookResult);\r\n        var deltas = getDeltas(startOfDragCoords, endOfDragCoords, selectionData, directionOfDrag);\r\n        var fillData = beforeAutofillHookResult;\r\n        var res = beforeAutofillHookResult;\r\n\r\n        if (['up', 'left'].indexOf(directionOfDrag) > -1 && !(res.length === 1 && res[0].length === 0)) {\r\n          fillData = [];\r\n\r\n          if (directionOfDrag === 'up') {\r\n            var dragLength = endOfDragCoords.row - startOfDragCoords.row + 1;\r\n            var fillOffset = dragLength % res.length;\r\n\r\n            for (var i = 0; i < dragLength; i++) {\r\n              fillData.push(res[(i + (res.length - fillOffset)) % res.length]);\r\n            }\r\n          } else {\r\n            var _dragLength = endOfDragCoords.col - startOfDragCoords.col + 1;\r\n\r\n            var _fillOffset = _dragLength % res[0].length;\r\n\r\n            for (var _i2 = 0; _i2 < res.length; _i2++) {\r\n              fillData.push([]);\r\n\r\n              for (var j = 0; j < _dragLength; j++) {\r\n                fillData[_i2].push(res[_i2][(j + (res[_i2].length - _fillOffset)) % res[_i2].length]);\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        this.hot.populateFromArray(startOfDragCoords.row, startOfDragCoords.col, fillData, endOfDragCoords.row, endOfDragCoords.col, \"\".concat(this.pluginName, \".fill\"), null, directionOfDrag, deltas);\r\n        this.setSelection(cornersOfSelectionAndDragAreas);\r\n        this.hot.runHooks('afterAutofill', fillData, sourceRange, targetRange, directionOfDrag, hasFillDataChanged);\r\n        this.hot.render();\r\n      } else {\r\n        // reset to avoid some range bug\r\n        this.hot._refreshBorders();\r\n      }\r\n\r\n      return true;\r\n    }\r\n    /**\r\n     * Reduces the selection area if the handle was dragged outside of the table or on headers.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coords Indexes of selection corners.\r\n     * @returns {CellCoords}\r\n     */\r\n\r\n  }, {\r\n    key: \"reduceSelectionAreaIfNeeded\",\r\n    value: function reduceSelectionAreaIfNeeded(coords) {\r\n      if (coords.row < 0) {\r\n        coords.row = 0;\r\n      }\r\n\r\n      if (coords.col < 0) {\r\n        coords.col = 0;\r\n      }\r\n\r\n      return coords;\r\n    }\r\n    /**\r\n     * Gets the coordinates of the drag & drop borders.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coordsOfSelection `CellCoords` coord object.\r\n     * @returns {CellCoords}\r\n     */\r\n\r\n  }, {\r\n    key: \"getCoordsOfDragAndDropBorders\",\r\n    value: function getCoordsOfDragAndDropBorders(coordsOfSelection) {\r\n      var currentSelection = this.hot.getSelectedRangeLast();\r\n      var bottomRightCorner = currentSelection.getBottomRightCorner();\r\n      var coords = coordsOfSelection;\r\n\r\n      if (this.directions.includes(DIRECTIONS.vertical) && this.directions.includes(DIRECTIONS.horizontal)) {\r\n        var topLeftCorner = currentSelection.getTopLeftCorner();\r\n\r\n        if (bottomRightCorner.col <= coordsOfSelection.col || topLeftCorner.col >= coordsOfSelection.col) {\r\n          coords = new CellCoords(bottomRightCorner.row, coordsOfSelection.col);\r\n        }\r\n\r\n        if (bottomRightCorner.row < coordsOfSelection.row || topLeftCorner.row > coordsOfSelection.row) {\r\n          coords = new CellCoords(coordsOfSelection.row, bottomRightCorner.col);\r\n        }\r\n      } else if (this.directions.includes(DIRECTIONS.vertical)) {\r\n        coords = new CellCoords(coordsOfSelection.row, bottomRightCorner.col);\r\n      } else if (this.directions.includes(DIRECTIONS.horizontal)) {\r\n        coords = new CellCoords(bottomRightCorner.row, coordsOfSelection.col);\r\n      } else {\r\n        // wrong direction\r\n        return;\r\n      }\r\n\r\n      return this.reduceSelectionAreaIfNeeded(coords);\r\n    }\r\n    /**\r\n     * Show the fill border.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coordsOfSelection `CellCoords` coord object.\r\n     */\r\n\r\n  }, {\r\n    key: \"showBorder\",\r\n    value: function showBorder(coordsOfSelection) {\r\n      var coordsOfDragAndDropBorders = this.getCoordsOfDragAndDropBorders(coordsOfSelection);\r\n\r\n      if (coordsOfDragAndDropBorders) {\r\n        this.redrawBorders(coordsOfDragAndDropBorders);\r\n      }\r\n    }\r\n    /**\r\n     * Add new row.\r\n     *\r\n     * @private\r\n     */\r\n\r\n  }, {\r\n    key: \"addRow\",\r\n    value: function addRow() {\r\n      var _this4 = this;\r\n\r\n      this.hot._registerTimeout(function () {\r\n        _this4.hot.alter(INSERT_ROW_ALTER_ACTION_NAME, void 0, 1, \"\".concat(_this4.pluginName, \".fill\"));\r\n\r\n        _this4.addingStarted = false;\r\n      }, INTERVAL_FOR_ADDING_ROW);\r\n    }\r\n    /**\r\n     * Add new rows if they are needed to continue auto-filling values.\r\n     *\r\n     * @private\r\n     */\r\n\r\n  }, {\r\n    key: \"addNewRowIfNeeded\",\r\n    value: function addNewRowIfNeeded() {\r\n      if (!this.hot.selection.highlight.getFill().isEmpty() && this.addingStarted === false && this.autoInsertRow) {\r\n        var cornersOfSelectedCells = this.hot.getSelectedLast();\r\n        var cornersOfSelectedDragArea = this.hot.selection.highlight.getFill().getVisualCorners();\r\n        var nrOfTableRows = this.hot.countRows();\r\n\r\n        if (cornersOfSelectedCells[2] < nrOfTableRows - 1 && cornersOfSelectedDragArea[2] === nrOfTableRows - 1) {\r\n          this.addingStarted = true;\r\n          this.addRow();\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Get index of last adjacent filled in row.\r\n     *\r\n     * @private\r\n     * @param {Array} cornersOfSelectedCells Indexes of selection corners.\r\n     * @returns {number} Gives number greater than or equal to zero when selection adjacent can be applied.\r\n     *                   Or -1 when selection adjacent can't be applied.\r\n     */\r\n\r\n  }, {\r\n    key: \"getIndexOfLastAdjacentFilledInRow\",\r\n    value: function getIndexOfLastAdjacentFilledInRow(cornersOfSelectedCells) {\r\n      var data = this.hot.getData();\r\n      var nrOfTableRows = this.hot.countRows();\r\n      var lastFilledInRowIndex;\r\n\r\n      for (var rowIndex = cornersOfSelectedCells[2] + 1; rowIndex < nrOfTableRows; rowIndex++) {\r\n        for (var columnIndex = cornersOfSelectedCells[1]; columnIndex <= cornersOfSelectedCells[3]; columnIndex++) {\r\n          var dataInCell = data[rowIndex][columnIndex];\r\n\r\n          if (dataInCell) {\r\n            return -1;\r\n          }\r\n        }\r\n\r\n        var dataInNextLeftCell = data[rowIndex][cornersOfSelectedCells[1] - 1];\r\n        var dataInNextRightCell = data[rowIndex][cornersOfSelectedCells[3] + 1];\r\n\r\n        if (!!dataInNextLeftCell || !!dataInNextRightCell) {\r\n          lastFilledInRowIndex = rowIndex;\r\n        }\r\n      }\r\n\r\n      return lastFilledInRowIndex;\r\n    }\r\n    /**\r\n     * Adds a selection from the start area to the specific row index.\r\n     *\r\n     * @private\r\n     * @param {Array} selectStartArea Selection area from which we start to create more comprehensive selection.\r\n     * @param {number} rowIndex The row index into the selection will be added.\r\n     */\r\n\r\n  }, {\r\n    key: \"addSelectionFromStartAreaToSpecificRowIndex\",\r\n    value: function addSelectionFromStartAreaToSpecificRowIndex(selectStartArea, rowIndex) {\r\n      this.hot.selection.highlight.getFill().clear().add(new CellCoords(selectStartArea[0], selectStartArea[1])).add(new CellCoords(rowIndex, selectStartArea[3])).commit();\r\n    }\r\n    /**\r\n     * Sets selection based on passed corners.\r\n     *\r\n     * @private\r\n     * @param {Array} cornersOfArea An array witch defines selection.\r\n     */\r\n\r\n  }, {\r\n    key: \"setSelection\",\r\n    value: function setSelection(cornersOfArea) {\r\n      var _this$hot;\r\n\r\n      (_this$hot = this.hot).selectCell.apply(_this$hot, _toConsumableArray(arrayMap(cornersOfArea, function (index) {\r\n        return Math.max(index, 0);\r\n      })).concat([false, false]));\r\n    }\r\n    /**\r\n     * Try to select cells down to the last row in the left column and then returns if selection was applied.\r\n     *\r\n     * @private\r\n     * @returns {boolean}\r\n     */\r\n\r\n  }, {\r\n    key: \"selectAdjacent\",\r\n    value: function selectAdjacent() {\r\n      var cornersOfSelectedCells = this.hot.getSelectedLast();\r\n      var lastFilledInRowIndex = this.getIndexOfLastAdjacentFilledInRow(cornersOfSelectedCells);\r\n\r\n      if (lastFilledInRowIndex === -1 || lastFilledInRowIndex === void 0) {\r\n        return false;\r\n      }\r\n\r\n      this.addSelectionFromStartAreaToSpecificRowIndex(cornersOfSelectedCells, lastFilledInRowIndex);\r\n      return true;\r\n    }\r\n    /**\r\n     * Resets selection of dragged area.\r\n     *\r\n     * @private\r\n     */\r\n\r\n  }, {\r\n    key: \"resetSelectionOfDraggedArea\",\r\n    value: function resetSelectionOfDraggedArea() {\r\n      this.handleDraggedCells = 0;\r\n      this.hot.selection.highlight.getFill().clear();\r\n    }\r\n    /**\r\n     * Redraws borders.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coords `CellCoords` coord object.\r\n     */\r\n\r\n  }, {\r\n    key: \"redrawBorders\",\r\n    value: function redrawBorders(coords) {\r\n      this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(coords).commit();\r\n      this.hot.view.render();\r\n    }\r\n    /**\r\n     * Get if mouse was dragged outside.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event `mousemove` event properties.\r\n     * @returns {boolean}\r\n     */\r\n\r\n  }, {\r\n    key: \"getIfMouseWasDraggedOutside\",\r\n    value: function getIfMouseWasDraggedOutside(event) {\r\n      var documentElement = this.hot.rootDocument.documentElement;\r\n      var tableBottom = offset(this.hot.table).top - (this.hot.rootWindow.pageYOffset || documentElement.scrollTop) + outerHeight(this.hot.table);\r\n      var tableRight = offset(this.hot.table).left - (this.hot.rootWindow.pageXOffset || documentElement.scrollLeft) + outerWidth(this.hot.table);\r\n      return event.clientY > tableBottom && event.clientX <= tableRight;\r\n    }\r\n    /**\r\n     * Bind the events used by the plugin.\r\n     *\r\n     * @private\r\n     */\r\n\r\n  }, {\r\n    key: \"registerEvents\",\r\n    value: function registerEvents() {\r\n      var _this5 = this;\r\n\r\n      var documentElement = this.hot.rootDocument.documentElement;\r\n      this.eventManager.addEventListener(documentElement, 'mouseup', function () {\r\n        return _this5.onMouseUp();\r\n      });\r\n      this.eventManager.addEventListener(documentElement, 'mousemove', function (event) {\r\n        return _this5.onMouseMove(event);\r\n      });\r\n    }\r\n    /**\r\n     * On cell corner double click callback.\r\n     *\r\n     * @private\r\n     */\r\n\r\n  }, {\r\n    key: \"onCellCornerDblClick\",\r\n    value: function onCellCornerDblClick() {\r\n      var selectionApplied = this.selectAdjacent();\r\n\r\n      if (selectionApplied) {\r\n        this.fillIn();\r\n      }\r\n    }\r\n    /**\r\n     * On after cell corner mouse down listener.\r\n     *\r\n     * @private\r\n     */\r\n\r\n  }, {\r\n    key: \"onAfterCellCornerMouseDown\",\r\n    value: function onAfterCellCornerMouseDown() {\r\n      this.handleDraggedCells = 1;\r\n      this.mouseDownOnCellCorner = true;\r\n    }\r\n    /**\r\n     * On before cell mouse over listener.\r\n     *\r\n     * @private\r\n     * @param {CellCoords} coords `CellCoords` coord object.\r\n     */\r\n\r\n  }, {\r\n    key: \"onBeforeCellMouseOver\",\r\n    value: function onBeforeCellMouseOver(coords) {\r\n      if (this.mouseDownOnCellCorner && !this.hot.view.isMouseDown() && this.handleDraggedCells) {\r\n        this.handleDraggedCells += 1;\r\n        this.showBorder(coords);\r\n        this.addNewRowIfNeeded();\r\n      }\r\n    }\r\n    /**\r\n     * On mouse up listener.\r\n     *\r\n     * @private\r\n     */\r\n\r\n  }, {\r\n    key: \"onMouseUp\",\r\n    value: function onMouseUp() {\r\n      if (this.handleDraggedCells) {\r\n        if (this.handleDraggedCells > 1) {\r\n          this.fillIn();\r\n        }\r\n\r\n        this.handleDraggedCells = 0;\r\n        this.mouseDownOnCellCorner = false;\r\n      }\r\n    }\r\n    /**\r\n     * On mouse move listener.\r\n     *\r\n     * @private\r\n     * @param {MouseEvent} event `mousemove` event properties.\r\n     */\r\n\r\n  }, {\r\n    key: \"onMouseMove\",\r\n    value: function onMouseMove(event) {\r\n      var mouseWasDraggedOutside = this.getIfMouseWasDraggedOutside(event);\r\n\r\n      if (this.addingStarted === false && this.handleDraggedCells > 0 && mouseWasDraggedOutside) {\r\n        this.mouseDragOutside = true;\r\n        this.addingStarted = true;\r\n      } else {\r\n        this.mouseDragOutside = false;\r\n      }\r\n\r\n      if (this.mouseDragOutside && this.autoInsertRow) {\r\n        this.addRow();\r\n      }\r\n    }\r\n    /**\r\n     * Clears mapped settings.\r\n     *\r\n     * @private\r\n     */\r\n\r\n  }, {\r\n    key: \"clearMappedSettings\",\r\n    value: function clearMappedSettings() {\r\n      this.directions.length = 0;\r\n      this.autoInsertRow = false;\r\n    }\r\n    /**\r\n     * Map settings.\r\n     *\r\n     * @private\r\n     */\r\n\r\n  }, {\r\n    key: \"mapSettings\",\r\n    value: function mapSettings() {\r\n      var mappedSettings = getMappedFillHandleSetting(this.hot.getSettings().fillHandle);\r\n      this.directions = mappedSettings.directions;\r\n      this.autoInsertRow = mappedSettings.autoInsertRow;\r\n    }\r\n    /**\r\n     * Destroys the plugin instance.\r\n     */\r\n\r\n  }, {\r\n    key: \"destroy\",\r\n    value: function destroy() {\r\n      _get(_getPrototypeOf(Autofill.prototype), \"destroy\", this).call(this);\r\n    }\r\n  }], [{\r\n    key: \"PLUGIN_KEY\",\r\n    get: function get() {\r\n      return PLUGIN_KEY;\r\n    }\r\n  }, {\r\n    key: \"PLUGIN_PRIORITY\",\r\n    get: function get() {\r\n      return PLUGIN_PRIORITY;\r\n    }\r\n  }]);\r\n\r\n  return Autofill;\r\n}(BasePlugin);"]},"metadata":{},"sourceType":"module"}