{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Modal from'react-awesome-modal';import\"./forceClaimPopUp.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CryptoJS=require(\"crypto-js\");var SecureStorage=require(\"secure-web-storage\");var SECRET_KEY='sanud2ha8shd72h';var secureStorage=new SecureStorage(localStorage,{hash:function hash(key){key=CryptoJS.SHA256(key,SECRET_KEY);return key.toString();},encrypt:function encrypt(data){data=CryptoJS.AES.encrypt(data,SECRET_KEY);data=data.toString();return data;},decrypt:function decrypt(data){data=CryptoJS.AES.decrypt(data,SECRET_KEY);data=data.toString(CryptoJS.enc.Utf8);return data;}});var UploadPopUp=/*#__PURE__*/function(_Component){_inherits(UploadPopUp,_Component);var _super=_createSuper(UploadPopUp);function UploadPopUp(props){var _this;_classCallCheck(this,UploadPopUp);_this=_super.call(this,props);_this.state={visible:false,users:[]};_this.id=props.id;return _this;}_createClass(UploadPopUp,[{key:\"openModal\",value:function(){var _openModal=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this2=this;var options;return _regeneratorRuntime.wrap(function _callee3$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};_context4.next=3;return this.setState({users:[]});case 3:_context4.next=5;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/users/\"+secureStorage.getItem(\"tab\"),options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(json){var usernames,_loop,i;return _regeneratorRuntime.wrap(function _callee2$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:usernames=json.usernames;_loop=/*#__PURE__*/_regeneratorRuntime.mark(function _loop(i){return _regeneratorRuntime.wrap(function _loop$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/getroles/\"+json.usernames[i],options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){var j,users_array,_users_array,_users_array2,_users_array3,_users_array4,_users_array5,_users_array6,_users_array7;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:j=0;case 1:if(!(j<json.roles.length)){_context.next=45;break;}if(!(secureStorage.getItem(\"tab\")===\"Design\"&&(json.roles[j]===\"DES\"||json.roles[j]===\"LDE\"))){_context.next=7;break;}users_array=_this2.state.users;users_array.push(json.roles[j]+\" - \"+usernames[i]);_context.next=7;return _this2.setState({users:users_array});case 7:if(!(secureStorage.getItem(\"tab\")===\"Stress\"&&(json.roles[j]===\"STR\"||json.roles[j]===\"LST\"))){_context.next=12;break;}_users_array=_this2.state.users;_users_array.push(json.roles[j]+\" - \"+usernames[i]);_context.next=12;return _this2.setState({users:_users_array});case 12:if(!(secureStorage.getItem(\"tab\")===\"Supports\"&&(json.roles[j]===\"SUP\"||json.roles[j]===\"LSP\"))){_context.next=17;break;}_users_array2=_this2.state.users;_users_array2.push(json.roles[j]+\" - \"+usernames[i]);_context.next=17;return _this2.setState({users:_users_array2});case 17:if(!(secureStorage.getItem(\"tab\")===\"Materials\"&&json.roles[j]===\"MAT\")){_context.next=22;break;}_users_array3=_this2.state.users;_users_array3.push(json.roles[j]+\" - \"+usernames[i]);_context.next=22;return _this2.setState({users:_users_array3});case 22:if(!(secureStorage.getItem(\"tab\")===\"Issuer\"&&json.roles[j]===\"ISS\")){_context.next=27;break;}_users_array4=_this2.state.users;_users_array4.push(json.roles[j]+\" - \"+usernames[i]);_context.next=27;return _this2.setState({users:_users_array4});case 27:if(!(secureStorage.getItem(\"tab\")===\"Materials\"&&json.roles[j]===\"MAT\")){_context.next=32;break;}_users_array5=_this2.state.users;_users_array5.push(json.roles[j]+\" - \"+usernames[i]);_context.next=32;return _this2.setState({users:_users_array5});case 32:if(!(secureStorage.getItem(\"tab\")===\"Process\"&&json.roles[j]===\"PRO\")){_context.next=37;break;}_users_array6=_this2.state.users;_users_array6.push(json.roles[j]+\" - \"+usernames[i]);_context.next=37;return _this2.setState({users:_users_array6});case 37:if(!(secureStorage.getItem(\"tab\")===\"Instrument\"&&json.roles[j]===\"INS\")){_context.next=42;break;}_users_array7=_this2.state.users;_users_array7.push(json.roles[j]+\" - \"+usernames[i]);_context.next=42;return _this2.setState({users:_users_array7});case 42:j++;_context.next=1;break;case 45:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}());case 2:case\"end\":return _context2.stop();}}},_loop);});i=0;case 3:if(!(i<json.usernames.length)){_context3.next=8;break;}return _context3.delegateYield(_loop(i),\"t0\",5);case 5:i++;_context3.next=3;break;case 8:case\"end\":return _context3.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}());case 5:this.setState({visible:true});case 6:case\"end\":return _context4.stop();}}},_callee3,this);}));function openModal(){return _openModal.apply(this,arguments);}return openModal;}()},{key:\"closeModal\",value:function closeModal(){this.setState({visible:false});}},{key:\"getUser\",value:function getUser(){this.props.assignToUser(document.getElementById(\"userSelect\").value);this.closeModal();}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"section\",{style:{float:\"left\"},children:[/*#__PURE__*/_jsx(\"button\",{value:\"Force claim\",className:\"action__btn\",onClick:function onClick(){return _this3.openModal();},children:\"Assign\"}),\"                \",/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Modal,{visible:this.state.visible,width:\"650\",height:\"180\",effect:\"fadeInUp\",onClickAway:function onClickAway(){return _this3.closeModal();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"popUp__container\",children:/*#__PURE__*/_jsx(\"center\",{className:\"popUp__title\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Select a user\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"selector__container\",children:[/*#__PURE__*/_jsx(\"select\",{id:\"userSelect\",className:\"userSelect\",children:this.state.users.map(function(user){return/*#__PURE__*/_jsx(\"option\",{children:user});})}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-sm btn-success\",style:{fontSize:\"15px\"},onClick:function onClick(){return _this3.getUser();},children:\"Assign\"})]})]})})]});}}]);return UploadPopUp;}(Component);export{UploadPopUp as default};","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/components/forceClaimPopUp/forceClaimPopUp.js"],"names":["React","Component","Modal","CryptoJS","require","SecureStorage","SECRET_KEY","secureStorage","localStorage","hash","key","SHA256","toString","encrypt","data","AES","decrypt","enc","Utf8","UploadPopUp","props","state","visible","users","id","options","method","headers","setState","fetch","process","env","REACT_APP_SERVER","REACT_APP_NODE_PORT","getItem","then","response","json","usernames","i","j","roles","length","users_array","push","assignToUser","document","getElementById","value","closeModal","float","openModal","map","user","fontSize","getUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Modal from 'react-awesome-modal';\r\nimport \"./forceClaimPopUp.css\"\r\n\r\nconst CryptoJS = require(\"crypto-js\");\r\n    const SecureStorage = require(\"secure-web-storage\");\r\n    var SECRET_KEY = 'sanud2ha8shd72h';\r\n    \r\n    var secureStorage = new SecureStorage(localStorage, {\r\n        hash: function hash(key) {\r\n            key = CryptoJS.SHA256(key, SECRET_KEY);\r\n    \r\n            return key.toString();\r\n        },\r\n        encrypt: function encrypt(data) {\r\n            data = CryptoJS.AES.encrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString();\r\n    \r\n            return data;\r\n        },\r\n        decrypt: function decrypt(data) {\r\n            data = CryptoJS.AES.decrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString(CryptoJS.enc.Utf8);\r\n    \r\n            return data;\r\n        }\r\n    });\r\n\r\nexport default class UploadPopUp extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            visible : false,\r\n            users: []\r\n        }\r\n        this.id = props.id;\r\n    }\r\n\r\n    async openModal() {  \r\n        const options = {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        }\r\n        await this.setState({\r\n            users: []\r\n        })\r\n        await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/users/\"+secureStorage.getItem(\"tab\"), options)\r\n        .then(response => response.json())\r\n        .then(async json => {\r\n            let usernames = json.usernames\r\n            for(let i = 0; i < json.usernames.length; i++){\r\n                await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/api/getroles/\"+json.usernames[i], options)\r\n                .then(response => response.json())\r\n                .then(async json =>{\r\n                    for(let j = 0; j < json.roles.length; j++){\r\n                        if(secureStorage.getItem(\"tab\") === \"Design\" && (json.roles[j] === \"DES\" || json.roles[j] === \"LDE\")){\r\n                            let users_array = this.state.users\r\n                            users_array.push(json.roles[j] + \" - \" + usernames[i])\r\n                            await this.setState({\r\n                                users : users_array\r\n                            })\r\n                        }\r\n                        if(secureStorage.getItem(\"tab\") === \"Stress\" && (json.roles[j] === \"STR\" || json.roles[j] === \"LST\")){\r\n                            let users_array = this.state.users\r\n                            users_array.push(json.roles[j] + \" - \" + usernames[i])\r\n                            await this.setState({\r\n                                users : users_array\r\n                            })\r\n                        }\r\n                        if(secureStorage.getItem(\"tab\") === \"Supports\" && (json.roles[j] === \"SUP\" || json.roles[j] === \"LSP\")){\r\n                            let users_array = this.state.users\r\n                            users_array.push(json.roles[j] + \" - \" + usernames[i])\r\n                            await this.setState({\r\n                                users : users_array\r\n                            })\r\n                        }\r\n                        if(secureStorage.getItem(\"tab\") === \"Materials\" && json.roles[j] === \"MAT\"){\r\n                            let users_array = this.state.users\r\n                            users_array.push(json.roles[j] + \" - \" + usernames[i])\r\n                            await this.setState({\r\n                                users : users_array\r\n                            })\r\n                        }\r\n                        if(secureStorage.getItem(\"tab\") === \"Issuer\" && json.roles[j] === \"ISS\"){\r\n                            let users_array = this.state.users\r\n                            users_array.push(json.roles[j] + \" - \" + usernames[i])\r\n                            await this.setState({\r\n                                users : users_array\r\n                            })\r\n                        }\r\n                        if(secureStorage.getItem(\"tab\") === \"Materials\" && json.roles[j] === \"MAT\"){\r\n                            let users_array = this.state.users\r\n                            users_array.push(json.roles[j] + \" - \" + usernames[i])\r\n                            await this.setState({\r\n                                users : users_array\r\n                            })\r\n                        }\r\n                        if(secureStorage.getItem(\"tab\") === \"Process\" && json.roles[j] === \"PRO\"){\r\n                            let users_array = this.state.users\r\n                            users_array.push(json.roles[j] + \" - \" + usernames[i])\r\n                            await this.setState({\r\n                                users : users_array\r\n                            })\r\n                        }\r\n                        if(secureStorage.getItem(\"tab\") === \"Instrument\" && json.roles[j] === \"INS\"){\r\n                            let users_array = this.state.users\r\n                            users_array.push(json.roles[j] + \" - \" + usernames[i])\r\n                            await this.setState({\r\n                                users : users_array\r\n                            })\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        })   \r\n        this.setState({\r\n            visible : true,\r\n        });\r\n\r\n    }\r\n\r\n    closeModal() {\r\n        this.setState({\r\n            visible : false,\r\n        });\r\n    }\r\n\r\n    getUser(){\r\n        this.props.assignToUser(document.getElementById(\"userSelect\").value)\r\n        this.closeModal()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <section style={{float:\"left\"}}>\r\n                <button value=\"Force claim\" className=\"action__btn\"  onClick={() => this.openModal()}>Assign</button>                <div>\r\n                    <Modal visible={this.state.visible} width=\"650\" height=\"180\" effect=\"fadeInUp\" onClickAway={() => this.closeModal()}>\r\n                        <div className=\"popUp__container\" >\r\n                            <center className=\"popUp__title\"><h1>Select a user</h1></center>          \r\n                        </div>\r\n                        <div className=\"selector__container\">\r\n                        \r\n                            <select id=\"userSelect\" className=\"userSelect\">\r\n                                {this.state.users.map(user =>(\r\n                                    <option>{user}</option>\r\n                                ))}\r\n                            </select>\r\n                                \r\n                            <button class=\"btn btn-sm btn-success\" style={{fontSize:\"15px\"}} onClick={()=>this.getUser()}>Assign</button>\r\n                        </div>\r\n                    </Modal>\r\n                </div>\r\n            </section>\r\n            \r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}