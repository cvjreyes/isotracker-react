{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\isotracker-dev\\\\isotracker-react\\\\src\\\\pages\\\\welcomeLoginF\\\\welcomeLoginF.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport './welcomeLoginF.css';\nimport TechnipLogo from \"../../assets/images/technip.png\";\nimport IsoTrackerLogo from \"../../assets/images/IsoTracker.svg\";\nimport FullTrackerLogo from \"../../assets/images/3DTracker.svg\";\nimport { useState } from \"react\";\nimport Eye from \"../../assets/images/eye.png\";\nimport GreenCircle from \"../../assets/images/green_circle.png\";\nimport BlueCircle from \"../../assets/images/blue_circle.png\";\nimport { useHistory } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CryptoJS = require(\"crypto-js\");\n\nconst SecureStorage = require(\"secure-web-storage\");\n\nvar SECRET_KEY = 'sanud2ha8shd72h';\nvar secureStorage = new SecureStorage(localStorage, {\n  hash: function hash(key) {\n    key = CryptoJS.SHA256(key, SECRET_KEY);\n    return key.toString();\n  },\n  encrypt: function encrypt(data) {\n    data = CryptoJS.AES.encrypt(data, SECRET_KEY);\n    data = data.toString();\n    return data;\n  },\n  decrypt: function decrypt(data) {\n    data = CryptoJS.AES.decrypt(data, SECRET_KEY);\n    data = data.toString(CryptoJS.enc.Utf8);\n    return data;\n  }\n}); //PÃ¡gina de welcome que actua como portada\n\nconst WelcomeLoginF = () => {\n  _s();\n\n  document.body.style.zoom = 0.9;\n  document.title = process.env.REACT_APP_APP_NAMEPROJ;\n  const [passwordShown, setPasswordShown] = useState(false);\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState(false);\n  const history = useHistory();\n\n  const togglePassword = () => {\n    setPasswordShown(!passwordShown);\n  };\n\n  const body = {\n    email: email,\n    password: password\n  };\n\n  const handleLogin = () => {\n    const options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body)\n    };\n    fetch(\"http://\" + process.env.REACT_APP_SERVER + \":\" + process.env.REACT_APP_NODE_PORT + \"/login\", options).then(response => response.json()).then(json => {\n      console.log(process.env.REACT_APP_PROGRESS);\n\n      if (process.env.REACT_APP_PROGRESS === \"1\") {\n        localStorage.setItem('token', json.token);\n        secureStorage.setItem('user', json.user);\n        secureStorage.setItem('tab', \"Status\");\n        secureStorage.setItem(\"equip_tab\", \"Estimated\");\n        secureStorage.setItem(\"inst_tab\", \"Estimated\");\n        secureStorage.setItem(\"civ_tab\", \"Estimated\");\n        secureStorage.setItem(\"elec_tab\", \"Estimated\");\n        secureStorage.setItem(\"piping_tab\", \"Estimated\");\n        history.replace('/' + process.env.REACT_APP_PROJECT + '/home');\n        window.location.reload(false);\n      } else {\n        localStorage.setItem('token', json.token);\n        secureStorage.setItem('user', json.user);\n        secureStorage.setItem('tab', \"Status\");\n        history.push('/' + process.env.REACT_APP_PROJECT + '/isotracker');\n        window.location.reload(false);\n      }\n    }).catch(error => {\n      setError(true);\n    });\n  };\n\n  let logo = null;\n\n  if (process.env.REACT_APP_PROGRESS === \"0\") {\n    logo = IsoTrackerLogo;\n  } else {\n    logo = FullTrackerLogo;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"body\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"background\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: TechnipLogo,\n        alt: \"technipLogo\",\n        className: \"technipLogo__image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: GreenCircle,\n        alt: \"greenCircle\",\n        className: \"greenCircle__image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: BlueCircle,\n        alt: \"blueCircle\",\n        className: \"blueCircle__image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login__form\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          alt: \"isoTrackerLogo\",\n          className: \"isoTrackerLogo__image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n          className: \"welcome__text\",\n          children: \"Welcome\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n          className: \"enter__text\",\n          children: \"Please, enter youe e-mail account and password.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n          className: \"email__label\",\n          children: \"E-mail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"email__input\",\n          onChange: e => setEmail(e.target.value),\n          onKeyPress: event => {\n            if (event.key === 'Enter') {\n              handleLogin();\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n          className: \"password__label\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"password__input\",\n            type: passwordShown ? \"text\" : \"password\",\n            onChange: e => setPassword(e.target.value),\n            onKeyPress: event => {\n              if (event.key === 'Enter') {\n                handleLogin();\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            onClick: togglePassword,\n            src: Eye,\n            alt: \"eye\",\n            className: \"eye__image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login__buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"login__button\",\n            onClick: handleLogin,\n            children: \"Log In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 21\n          }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error__message\",\n            style: {\n              color: \"red\",\n              position: \"absolute\"\n            },\n            children: \"Email or password incorrect. Try again.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 31\n          }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n            className: \"navis__text\",\n            children: \"Or you can access to NavisattSelect\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"navis__button\",\n            onClick: e => history.push(\"/\" + process.env.REACT_APP_PROJECT + \"/navis\"),\n            children: \"NAVISATTSELECT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n};\n\n_s(WelcomeLoginF, \"0r2zIpGA54g8pAZC054qf0mec5o=\", false, function () {\n  return [useHistory];\n});\n\n_c = WelcomeLoginF;\nexport default WelcomeLoginF;\n\nvar _c;\n\n$RefreshReg$(_c, \"WelcomeLoginF\");","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/pages/welcomeLoginF/welcomeLoginF.js"],"names":["React","TechnipLogo","useState","Eye","GreenCircle","BlueCircle","useHistory","CryptoJS","require","SecureStorage","SECRET_KEY","secureStorage","localStorage","hash","key","SHA256","toString","encrypt","data","AES","decrypt","enc","Utf8","WelcomeLoginF","document","body","style","zoom","title","process","env","REACT_APP_APP_NAMEPROJ","passwordShown","setPasswordShown","email","setEmail","password","setPassword","error","setError","history","togglePassword","handleLogin","options","method","headers","JSON","stringify","fetch","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","console","log","REACT_APP_PROGRESS","setItem","token","user","replace","REACT_APP_PROJECT","window","location","reload","push","catch","logo","IsoTrackerLogo","FullTrackerLogo","e","target","value","event","color","position"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport './welcomeLoginF.css'\r\nimport TechnipLogo from \"../../assets/images/technip.png\"\r\nimport IsoTrackerLogo from \"../../assets/images/IsoTracker.svg\"\r\nimport FullTrackerLogo from \"../../assets/images/3DTracker.svg\"\r\nimport { useState } from \"react\";\r\nimport Eye from \"../../assets/images/eye.png\"\r\nimport GreenCircle from \"../../assets/images/green_circle.png\"\r\nimport BlueCircle from \"../../assets/images/blue_circle.png\"\r\nimport {useHistory} from \"react-router\";\r\n\r\nconst CryptoJS = require(\"crypto-js\");\r\nconst SecureStorage = require(\"secure-web-storage\");\r\nvar SECRET_KEY = 'sanud2ha8shd72h';\r\n \r\nvar secureStorage = new SecureStorage(localStorage, {\r\n    hash: function hash(key) {\r\n        key = CryptoJS.SHA256(key, SECRET_KEY);\r\n \r\n        return key.toString();\r\n    },\r\n    encrypt: function encrypt(data) {\r\n        data = CryptoJS.AES.encrypt(data, SECRET_KEY);\r\n \r\n        data = data.toString();\r\n \r\n        return data;\r\n    },\r\n    decrypt: function decrypt(data) {\r\n        data = CryptoJS.AES.decrypt(data, SECRET_KEY);\r\n \r\n        data = data.toString(CryptoJS.enc.Utf8);\r\n \r\n        return data;\r\n    }\r\n});\r\n\r\n//PÃ¡gina de welcome que actua como portada\r\n\r\nconst WelcomeLoginF = () =>{\r\n    document.body.style.zoom = 0.9\r\n    document.title= process.env.REACT_APP_APP_NAMEPROJ\r\n\r\n    const [passwordShown, setPasswordShown] = useState(false);\r\n    const [email, setEmail] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [error, setError] = useState(false);\r\n    const history = useHistory();\r\n\r\n    const togglePassword = () => {\r\n        setPasswordShown(!passwordShown);\r\n    };\r\n\r\n    const body = {\r\n        email: email,\r\n        password: password\r\n    }\r\n\r\n    const handleLogin = () => {\r\n        \r\n        const options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n        fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/login\", options)\r\n            .then(response => response.json())\r\n            .then(json => {\r\n                console.log(process.env.REACT_APP_PROGRESS)\r\n                if(process.env.REACT_APP_PROGRESS === \"1\"){\r\n                    localStorage.setItem('token', json.token);\r\n                    secureStorage.setItem('user', json.user)\r\n                    secureStorage.setItem('tab', \"Status\")   \r\n                    secureStorage.setItem(\"equip_tab\", \"Estimated\")  \r\n                    secureStorage.setItem(\"inst_tab\", \"Estimated\")    \r\n                    secureStorage.setItem(\"civ_tab\", \"Estimated\")  \r\n                    secureStorage.setItem(\"elec_tab\", \"Estimated\")  \r\n                    secureStorage.setItem(\"piping_tab\", \"Estimated\")\r\n                    history.replace('/'+process.env.REACT_APP_PROJECT+'/home');\r\n                    window.location.reload(false);\r\n                }else{\r\n                    localStorage.setItem('token', json.token);\r\n                    secureStorage.setItem('user', json.user)\r\n                    secureStorage.setItem('tab', \"Status\")   \r\n                    history.push('/'+process.env.REACT_APP_PROJECT+'/isotracker');\r\n                    window.location.reload(false);\r\n                }\r\n            })\r\n        \r\n            .catch(error => {\r\n                setError(true);\r\n            })               \r\n        \r\n    }\r\n    \r\n    let logo = null\r\n\r\n    if(process.env.REACT_APP_PROGRESS === \"0\"){\r\n        logo = IsoTrackerLogo\r\n    }else{\r\n        logo = FullTrackerLogo\r\n    }\r\n\r\n    return(\r\n        <body>\r\n        <div className=\"background\">\r\n            <img src={TechnipLogo} alt=\"technipLogo\" className=\"technipLogo__image\"/>\r\n            <img src={GreenCircle} alt=\"greenCircle\" className=\"greenCircle__image\"/>\r\n            <img src={BlueCircle} alt=\"blueCircle\" className=\"blueCircle__image\"/>\r\n            \r\n            <div className=\"login__form\">\r\n                <img src={logo} alt=\"isoTrackerLogo\" className=\"isoTrackerLogo__image\"/>\r\n                <text className=\"welcome__text\">Welcome</text>\r\n                <text className=\"enter__text\">Please, enter youe e-mail account and password.</text>\r\n                <text className=\"email__label\">E-mail</text>\r\n                <input type=\"text\" className=\"email__input\" onChange={(e) => setEmail(e.target.value)} onKeyPress={event => {\r\n                        if (event.key === 'Enter') {\r\n                        handleLogin()\r\n                        }\r\n                    }}></input>\r\n                <text className=\"password__label\">Password</text>\r\n                <div>\r\n                    <input className=\"password__input\" type={passwordShown ? \"text\" : \"password\"} onChange={(e) => setPassword(e.target.value)}\r\n                    onKeyPress={event => {\r\n                        if (event.key === 'Enter') {\r\n                        handleLogin()\r\n                        }\r\n                    }}/>\r\n                    <img onClick={togglePassword} src={Eye} alt=\"eye\" className=\"eye__image\"></img>\r\n                </div>\r\n                <div className=\"login__buttons\">\r\n                    <button className=\"login__button\" onClick={handleLogin}>Log In</button>\r\n                    {error && <p className=\"error__message\" style={{color: \"red\", position:\"absolute\"}}>Email or password incorrect. Try again.</p>} \r\n\r\n                    <text className=\"navis__text\">Or you can access to NavisattSelect</text>\r\n                    <button className=\"navis__button\" onClick={(e) => history.push(\"/\"+process.env.REACT_APP_PROJECT+\"/navis\")}>NAVISATTSELECT</button>\r\n            </div>\r\n            </div>\r\n            \r\n        </div>\r\n        </body>\r\n    );\r\n};\r\n\r\nexport default WelcomeLoginF;"]},"metadata":{},"sourceType":"module"}