{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectSpread from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _defineProperty from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{Component}from'react';import Modal from'react-awesome-modal';import SupervisorAccountIcon from'@mui/icons-material/SupervisorAccount';import TreeItem,{treeItemClasses}from'@mui/lab/TreeItem';import{styled}from'@mui/material/styles';import Box from'@mui/material/Box';import Typography from'@mui/material/Typography';import AlertF from\"../../components/alert/alert\";import ReactTooltip from\"react-tooltip\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CryptoJS=require(\"crypto-js\");var SecureStorage=require(\"secure-web-storage\");var SECRET_KEY='sanud2ha8shd72h';var secureStorage=new SecureStorage(localStorage,{hash:function hash(key){key=CryptoJS.SHA256(key,SECRET_KEY);return key.toString();},encrypt:function encrypt(data){data=CryptoJS.AES.encrypt(data,SECRET_KEY);data=data.toString();return data;},decrypt:function decrypt(data){data=CryptoJS.AES.decrypt(data,SECRET_KEY);data=data.toString(CryptoJS.enc.Utf8);return data;}});var StyledTreeItemRoot=styled(TreeItem)(function(_ref){var _ref2;var theme=_ref.theme;return _ref2={color:theme.palette.text.secondary},_defineProperty(_ref2,\"& .\".concat(treeItemClasses.content),_defineProperty({color:theme.palette.text.secondary,borderTopRightRadius:theme.spacing(2),borderBottomRightRadius:theme.spacing(2),paddingRight:theme.spacing(1),fontWeight:theme.typography.fontWeightMedium,'&.Mui-expanded':{fontWeight:theme.typography.fontWeightRegular},'&:hover':{backgroundColor:theme.palette.action.hover},'&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused':{backgroundColor:\"var(--tree-view-bg-color, \".concat(theme.palette.action.selected,\")\"),color:'var(--tree-view-color)'}},\"& .\".concat(treeItemClasses.label),{fontWeight:'inherit',color:'inherit'})),_defineProperty(_ref2,\"& .\".concat(treeItemClasses.group),_defineProperty({marginLeft:0},\"& .\".concat(treeItemClasses.content),{paddingLeft:theme.spacing(2)})),_ref2;});function StyledTreeItem(props){var bgColor=props.bgColor,color=props.color,LabelIcon=props.labelIcon,labelInfo=props.labelInfo,labelText=props.labelText,other=_objectWithoutProperties(props,[\"bgColor\",\"color\",\"labelIcon\",\"labelInfo\",\"labelText\"]);return/*#__PURE__*/_jsx(StyledTreeItemRoot,_objectSpread({label:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',p:0.5,pr:0},children:[/*#__PURE__*/_jsx(Box,{component:LabelIcon,color:\"inherit\",sx:{mr:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{fontWeight:'inherit',flexGrow:1},children:labelText}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",children:labelInfo})]}),style:{'--tree-view-color':color,'--tree-view-bg-color':bgColor}},other));}var QtrackerNVNPopUp=/*#__PURE__*/function(_Component){_inherits(QtrackerNVNPopUp,_Component);var _super=_createSuper(QtrackerNVNPopUp);function QtrackerNVNPopUp(props){var _this;_classCallCheck(this,QtrackerNVNPopUp);_this=_super.call(this,props);_this.state={visible:false,name:null,attach:null,description:null,errorBlankRequest:false};return _this;}_createClass(QtrackerNVNPopUp,[{key:\"openModal\",value:function(){var _openModal=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.setState({visible:true,name:null,description:null,attach:null});case 2:case\"end\":return _context.stop();}}},_callee,this);}));function openModal(){return _openModal.apply(this,arguments);}return openModal;}()},{key:\"closeModal\",value:function(){var _closeModal=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.setState({visible:false,name:null,description:null,attach:null});case 2:this.refs.name.value=null;this.refs.description.value=null;this.refs.attach.value=null;case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function closeModal(){return _closeModal.apply(this,arguments);}return closeModal;}()},{key:\"request\",value:function(){var _request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this2=this;var has_attach,body,options;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(this.state.name&&this.state.description)){_context4.next=9;break;}if(this.state.attach){has_attach=true;}else{has_attach=false;}body={name:this.state.name,description:this.state.description,has_attach:has_attach,user:secureStorage.getItem(\"user\")};options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)};_context4.next=6;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/requestNVN\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(json){var extension,file;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(json.filename&&_this2.state.attach)){_context3.next=8;break;}extension=_this2.state.attach.name.split('.').pop();file=new FormData();file.append('file',_this2.state.attach,json.filename+\".\"+extension);_context3.next=6;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/uploadAttach\",{method:'POST',body:file}).then(function(response){if(response.status===200){_this2.props.success();}});case 6:_context3.next=9;break;case 8:_this2.props.success();case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref3.apply(this,arguments);};}());case 6:this.closeModal();_context4.next=10;break;case 9:this.setState({errorBlankRequest:true});case 10:case\"end\":return _context4.stop();}}},_callee4,this);}));function request(){return _request.apply(this,arguments);}return request;}()},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(StyledTreeItem,{nodeId:\"10\",labelText:\"NotViewInNavis\",labelIcon:SupervisorAccountIcon,onClick:function onClick(){return _this3.openModal();},color:\"none\",bgColor:\"none\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Modal,{visible:this.state.visible,width:\"700\",height:\"500\",effect:\"fadeInUp\",onClickAway:function onClickAway(){return _this3.closeModal();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success \".concat(this.state.errorBlankRequest?'alert-shown':'alert-hidden'),onTransitionEnd:function onTransitionEnd(){return _this3.setState({errorBlankRequest:false});},children:/*#__PURE__*/_jsx(AlertF,{type:\"qtracker\",text:\"At least one field is blank!\",margin:\"5px\"})}),/*#__PURE__*/_jsx(\"center\",{className:\"qtracker__popUp__title\",style:{marginBottom:\"30px\"},children:/*#__PURE__*/_jsx(\"h3\",{children:\"NOT VIEW IN NAVIS\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"qtrackerRequest__container\",children:[/*#__PURE__*/_jsx(\"input\",{\"data-for\":\"name-help\",\"data-tip\":\"Name help\",\"data-iscapture\":\"true\",type:\"text\",placeholder:\"Name\",id:\"name\",className:\"qtrackerPopUp__input__text\",ref:\"name\",style:{marginBottom:\"20px\",color:'black'},value:this.state.name,onChange:function onChange(e){return _this3.setState({name:e.target.value});}}),/*#__PURE__*/_jsx(ReactTooltip,{id:\"name-help\",place:\"right\",type:\"dark\",effect:\"solid\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",className:\"qtrackerPopUp__input__text\",rows:\"5\",placeholder:\"Description\",ref:\"description\",style:{marginBottom:\"20px\",color:\"black\"},onChange:function onChange(e){return _this3.setState({description:e.target.value});}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"attach\",className:\"qtrackerPopUp__input__file\",ref:\"attach\",style:{marginBottom:\"30px\"},onChange:function onChange(e){return _this3.setState({attach:e.target.files[0]});}}),/*#__PURE__*/_jsx(\"label\",{for:\"attach\",className:\"attach__label\",children:\"Attach: \"}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-sm btn-success\",onClick:function onClick(){return _this3.request();},style:{marginRight:\"5px\",fontSize:\"20px\"},children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-sm btn-danger\",onClick:function onClick(){return _this3.closeModal();},style:{marginLeft:\"5px\",fontSize:\"20px\"},children:\"Cancel\"})]})]})})]});}}]);return QtrackerNVNPopUp;}(Component);export{QtrackerNVNPopUp as default};","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/components/qtrackerNVNPopUp/qtrackerNVNPopUp.js"],"names":["React","Component","Modal","SupervisorAccountIcon","TreeItem","treeItemClasses","styled","Box","Typography","AlertF","ReactTooltip","CryptoJS","require","SecureStorage","SECRET_KEY","secureStorage","localStorage","hash","key","SHA256","toString","encrypt","data","AES","decrypt","enc","Utf8","StyledTreeItemRoot","theme","color","palette","text","secondary","content","borderTopRightRadius","spacing","borderBottomRightRadius","paddingRight","fontWeight","typography","fontWeightMedium","fontWeightRegular","backgroundColor","action","hover","selected","label","group","marginLeft","paddingLeft","StyledTreeItem","props","bgColor","LabelIcon","labelIcon","labelInfo","labelText","other","display","alignItems","p","pr","mr","flexGrow","QtrackerNVNPopUp","state","visible","name","attach","description","errorBlankRequest","setState","refs","value","has_attach","body","user","getItem","options","method","headers","JSON","stringify","fetch","process","env","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","filename","extension","split","pop","file","FormData","append","status","success","closeModal","openModal","marginBottom","e","target","files","request","marginRight","fontSize"],"mappings":"opCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,qBAAP,KAAkC,uCAAlC,CACA,MAAOC,CAAAA,QAAP,EAAmBC,eAAnB,KAA0C,mBAA1C,CAEA,OAASC,MAAT,KAAuB,sBAAvB,CACA,MAAOC,CAAAA,GAAP,KAAgB,mBAAhB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,8BAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,eAAzB,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAGC,OAAO,CAAC,WAAD,CAAxB,CACI,GAAMC,CAAAA,aAAa,CAAGD,OAAO,CAAC,oBAAD,CAA7B,CACA,GAAIE,CAAAA,UAAU,CAAG,iBAAjB,CAEA,GAAIC,CAAAA,aAAa,CAAG,GAAIF,CAAAA,aAAJ,CAAkBG,YAAlB,CAAgC,CAChDC,IAAI,CAAE,QAASA,CAAAA,IAAT,CAAcC,GAAd,CAAmB,CACrBA,GAAG,CAAGP,QAAQ,CAACQ,MAAT,CAAgBD,GAAhB,CAAqBJ,UAArB,CAAN,CAEA,MAAOI,CAAAA,GAAG,CAACE,QAAJ,EAAP,CACH,CAL+C,CAMhDC,OAAO,CAAE,QAASA,CAAAA,OAAT,CAAiBC,IAAjB,CAAuB,CAC5BA,IAAI,CAAGX,QAAQ,CAACY,GAAT,CAAaF,OAAb,CAAqBC,IAArB,CAA2BR,UAA3B,CAAP,CAEAQ,IAAI,CAAGA,IAAI,CAACF,QAAL,EAAP,CAEA,MAAOE,CAAAA,IAAP,CACH,CAZ+C,CAahDE,OAAO,CAAE,QAASA,CAAAA,OAAT,CAAiBF,IAAjB,CAAuB,CAC5BA,IAAI,CAAGX,QAAQ,CAACY,GAAT,CAAaC,OAAb,CAAqBF,IAArB,CAA2BR,UAA3B,CAAP,CAEAQ,IAAI,CAAGA,IAAI,CAACF,QAAL,CAAcT,QAAQ,CAACc,GAAT,CAAaC,IAA3B,CAAP,CAEA,MAAOJ,CAAAA,IAAP,CACH,CAnB+C,CAAhC,CAApB,CAsBA,GAAMK,CAAAA,kBAAkB,CAAGrB,MAAM,CAACF,QAAD,CAAN,CAAiB,4BAAGwB,CAAAA,KAAH,MAAGA,KAAH,eACxCC,KAAK,CAAED,KAAK,CAACE,OAAN,CAAcC,IAAd,CAAmBC,SADc,qCAEjC3B,eAAe,CAAC4B,OAFiB,mBAGtCJ,KAAK,CAAED,KAAK,CAACE,OAAN,CAAcC,IAAd,CAAmBC,SAHY,CAItCE,oBAAoB,CAAEN,KAAK,CAACO,OAAN,CAAc,CAAd,CAJgB,CAKtCC,uBAAuB,CAAER,KAAK,CAACO,OAAN,CAAc,CAAd,CALa,CAMtCE,YAAY,CAAET,KAAK,CAACO,OAAN,CAAc,CAAd,CANwB,CAOtCG,UAAU,CAAEV,KAAK,CAACW,UAAN,CAAiBC,gBAPS,CAQtC,iBAAkB,CAChBF,UAAU,CAAEV,KAAK,CAACW,UAAN,CAAiBE,iBADb,CARoB,CAWtC,UAAW,CACTC,eAAe,CAAEd,KAAK,CAACE,OAAN,CAAca,MAAd,CAAqBC,KAD7B,CAX2B,CActC,4DAA6D,CAC3DF,eAAe,qCAA+Bd,KAAK,CAACE,OAAN,CAAca,MAAd,CAAqBE,QAApD,KAD4C,CAE3DhB,KAAK,CAAE,wBAFoD,CAdvB,eAkB/BxB,eAAe,CAACyC,KAlBe,EAkBL,CAC/BR,UAAU,CAAE,SADmB,CAE/BT,KAAK,CAAE,SAFwB,CAlBK,sCAuBjCxB,eAAe,CAAC0C,KAvBiB,mBAwBtCC,UAAU,CAAE,CAxB0B,eAyB/B3C,eAAe,CAAC4B,OAzBe,EAyBH,CACjCgB,WAAW,CAAErB,KAAK,CAACO,OAAN,CAAc,CAAd,CADoB,CAzBG,UAAjB,CAA3B,CA+BE,QAASe,CAAAA,cAAT,CAAwBC,KAAxB,CAA+B,IAE3BC,CAAAA,OAF2B,CAQzBD,KARyB,CAE3BC,OAF2B,CAG3BvB,KAH2B,CAQzBsB,KARyB,CAG3BtB,KAH2B,CAIhBwB,SAJgB,CAQzBF,KARyB,CAI3BG,SAJ2B,CAK3BC,SAL2B,CAQzBJ,KARyB,CAK3BI,SAL2B,CAM3BC,SAN2B,CAQzBL,KARyB,CAM3BK,SAN2B,CAOxBC,KAPwB,0BAQzBN,KARyB,0DAU7B,mBACE,KAAC,kBAAD,gBACE,KAAK,cACH,MAAC,GAAD,EAAK,EAAE,CAAE,CAAEO,OAAO,CAAE,MAAX,CAAmBC,UAAU,CAAE,QAA/B,CAAyCC,CAAC,CAAE,GAA5C,CAAiDC,EAAE,CAAE,CAArD,CAAT,wBACE,KAAC,GAAD,EAAK,SAAS,CAAER,SAAhB,CAA2B,KAAK,CAAC,SAAjC,CAA2C,EAAE,CAAE,CAAES,EAAE,CAAE,CAAN,CAA/C,EADF,cAEE,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,EAAE,CAAE,CAAExB,UAAU,CAAE,SAAd,CAAyByB,QAAQ,CAAE,CAAnC,CAA7B,UACGP,SADH,EAFF,cAKE,KAAC,UAAD,EAAY,OAAO,CAAC,SAApB,UACGD,SADH,EALF,GAFJ,CAYE,KAAK,CAAE,CACL,oBAAqB1B,KADhB,CAEL,uBAAwBuB,OAFnB,CAZT,EAgBMK,KAhBN,EADF,CAoBD,C,GAUcO,CAAAA,gB,oHACjB,0BAAYb,KAAZ,CAAmB,kDACf,uBAAMA,KAAN,EACA,MAAKc,KAAL,CAAa,CACTC,OAAO,CAAG,KADD,CAETC,IAAI,CAAE,IAFG,CAGTC,MAAM,CAAE,IAHC,CAITC,WAAW,CAAE,IAJJ,CAKTC,iBAAiB,CAAE,KALV,CAAb,CAFe,aASlB,C,wIAED,yJACU,MAAKC,QAAL,CAAc,CAChBL,OAAO,CAAG,IADM,CAEhBC,IAAI,CAAE,IAFU,CAGhBE,WAAW,CAAE,IAHG,CAIhBD,MAAM,CAAE,IAJQ,CAAd,CADV,4D,kMASA,+JACU,MAAKG,QAAL,CAAc,CAChBL,OAAO,CAAG,KADM,CAEhBC,IAAI,CAAE,IAFU,CAGhBE,WAAW,CAAE,IAHG,CAIhBD,MAAM,CAAE,IAJQ,CAAd,CADV,QAQI,KAAKI,IAAL,CAAUL,IAAV,CAAeM,KAAf,CAAuB,IAAvB,CACA,KAAKD,IAAL,CAAUH,WAAV,CAAsBI,KAAtB,CAA8B,IAA9B,CACA,KAAKD,IAAL,CAAUJ,MAAV,CAAiBK,KAAjB,CAAyB,IAAzB,CAVJ,6D,+LAcA,yLAEK,KAAKR,KAAL,CAAWE,IAAX,EAAmB,KAAKF,KAAL,CAAWI,WAFnC,2BAKI,GAAG,KAAKJ,KAAL,CAAWG,MAAd,CAAqB,CACnBM,UAAU,CAAG,IAAb,CACD,CAFD,IAEK,CACHA,UAAU,CAAG,KAAb,CACD,CACGC,IAVR,CAUc,CACNR,IAAI,CAAG,KAAKF,KAAL,CAAWE,IADZ,CAENE,WAAW,CAAE,KAAKJ,KAAL,CAAWI,WAFlB,CAGNK,UAAU,CAAEA,UAHN,CAINE,IAAI,CAAE7D,aAAa,CAAC8D,OAAd,CAAsB,MAAtB,CAJA,CAVd,CAgBUC,OAhBV,CAgBoB,CACZC,MAAM,CAAE,MADI,CAEZC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFG,CAKZL,IAAI,CAAEM,IAAI,CAACC,SAAL,CAAeP,IAAf,CALM,CAhBpB,wBAuBYQ,CAAAA,KAAK,CAAC,UAAUC,OAAO,CAACC,GAAR,CAAYC,gBAAtB,CAAuC,GAAvC,CAA2CF,OAAO,CAACC,GAAR,CAAYE,mBAAvD,CAA2E,sBAA5E,CAAoGT,OAApG,CAAL,CACDU,IADC,CACI,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EADZ,EAEDF,IAFC,2FAEI,kBAAME,IAAN,8IACCA,IAAI,CAACC,QAAL,EAAiB,MAAI,CAAC1B,KAAL,CAAWG,MAD7B,2BAEMwB,SAFN,CAEkB,MAAI,CAAC3B,KAAL,CAAWG,MAAX,CAAkBD,IAAlB,CAAuB0B,KAAvB,CAA6B,GAA7B,EAAkCC,GAAlC,EAFlB,CAGMC,IAHN,CAGc,GAAIC,CAAAA,QAAJ,EAHd,CAIAD,IAAI,CAACE,MAAL,CAAY,MAAZ,CAAoB,MAAI,CAAChC,KAAL,CAAWG,MAA/B,CAAuCsB,IAAI,CAACC,QAAL,CAAgB,GAAhB,CAAsBC,SAA7D,EAJA,uBAKMT,CAAAA,KAAK,CAAC,UAAUC,OAAO,CAACC,GAAR,CAAYC,gBAAtB,CAAuC,GAAvC,CAA2CF,OAAO,CAACC,GAAR,CAAYE,mBAAvD,CAA2E,wBAA5E,CAAsG,CAC7GR,MAAM,CAAE,MADqG,CAE7GJ,IAAI,CAAEoB,IAFuG,CAAtG,CAAL,CAGCP,IAHD,CAGM,SAAAC,QAAQ,CAAG,CACf,GAAIA,QAAQ,CAACS,MAAT,GAAoB,GAAxB,CAA4B,CACxB,MAAI,CAAC/C,KAAL,CAAWgD,OAAX,GACH,CACJ,CAPC,CALN,sCAeE,MAAI,CAAChD,KAAL,CAAWgD,OAAX,GAfF,wDAFJ,gEAvBZ,QA2CU,KAAKC,UAAL,GA3CV,+BA6CI,KAAK7B,QAAL,CAAc,CAACD,iBAAiB,CAAE,IAApB,CAAd,EA7CJ,8D,qGAkDA,iBAAS,iBAEL,mBACI,oCACQ,KAAC,cAAD,EACA,MAAM,CAAC,IADP,CAEA,SAAS,CAAC,gBAFV,CAGA,SAAS,CAAEnE,qBAHX,CAIA,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACkG,SAAL,EAAN,EAJT,CAKA,KAAK,CAAC,MALN,CAMA,OAAO,CAAC,MANR,EADR,cASQ,kCAEA,MAAC,KAAD,EAAO,OAAO,CAAE,KAAKpC,KAAL,CAAWC,OAA3B,CAAoC,KAAK,CAAC,KAA1C,CAAgD,MAAM,CAAC,KAAvD,CAA6D,MAAM,CAAC,UAApE,CAA+E,WAAW,CAAE,6BAAM,CAAA,MAAI,CAACkC,UAAL,EAAN,EAA5F,wBACI,YACA,SAAS,+BAAyB,KAAKnC,KAAL,CAAWK,iBAAX,CAA+B,aAA/B,CAA+C,cAAxE,CADT,CAEA,eAAe,CAAE,iCAAM,CAAA,MAAI,CAACC,QAAL,CAAc,CAACD,iBAAiB,CAAE,KAApB,CAAd,CAAN,EAFjB,uBAII,KAAC,MAAD,EAAQ,IAAI,CAAC,UAAb,CAAwB,IAAI,CAAC,8BAA7B,CAA4D,MAAM,CAAC,KAAnE,EAJJ,EADJ,cAOI,eAAQ,SAAS,CAAC,wBAAlB,CAA2C,KAAK,CAAE,CAACgC,YAAY,CAAE,MAAf,CAAlD,uBAA0E,yCAA1E,EAPJ,cAQI,aAAK,SAAS,CAAC,4BAAf,wBACI,cAAO,WAAS,WAAhB,CAA4B,WAAS,WAArC,CAAiD,iBAAe,MAAhE,CAAuE,IAAI,CAAC,MAA5E,CAAmF,WAAW,CAAC,MAA/F,CAAsG,EAAE,CAAC,MAAzG,CAAgH,SAAS,CAAC,4BAA1H,CAAuJ,GAAG,CAAC,MAA3J,CAAkK,KAAK,CAAE,CAACA,YAAY,CAAE,MAAf,CAAuBzE,KAAK,CAAC,OAA7B,CAAzK,CAAgN,KAAK,CAAE,KAAKoC,KAAL,CAAWE,IAAlO,CAAwO,QAAQ,CAAE,kBAACoC,CAAD,QAAO,CAAA,MAAI,CAAChC,QAAL,CAAc,CAACJ,IAAI,CAAEoC,CAAC,CAACC,MAAF,CAAS/B,KAAhB,CAAd,CAAP,EAAlP,EADJ,cAEI,KAAC,YAAD,EAAc,EAAE,CAAC,WAAjB,CAA6B,KAAK,CAAC,OAAnC,CAA2C,IAAI,CAAC,MAAhD,CAAuD,MAAM,CAAC,OAA9D,EAFJ,cAII,iBAAU,IAAI,CAAC,aAAf,CAA6B,SAAS,CAAC,4BAAvC,CAAoE,IAAI,CAAC,GAAzE,CAA6E,WAAW,CAAC,aAAzF,CAAuG,GAAG,CAAC,aAA3G,CAAyH,KAAK,CAAE,CAAC6B,YAAY,CAAC,MAAd,CAAsBzE,KAAK,CAAC,OAA5B,CAAhI,CAAsK,QAAQ,CAAE,kBAAC0E,CAAD,QAAO,CAAA,MAAI,CAAChC,QAAL,CAAc,CAACF,WAAW,CAAEkC,CAAC,CAACC,MAAF,CAAS/B,KAAvB,CAAd,CAAP,EAAhL,EAJJ,cAOI,cAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,QAAtB,CAA8B,SAAS,CAAC,4BAAxC,CAAsE,GAAG,CAAC,QAA1E,CAAmF,KAAK,CAAE,CAAC6B,YAAY,CAAE,MAAf,CAA1F,CAAkH,QAAQ,CAAE,kBAACC,CAAD,QAAO,CAAA,MAAI,CAAChC,QAAL,CAAc,CAACH,MAAM,CAAEmC,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAT,CAAd,CAAP,EAA5H,EAPJ,cAQI,cAAO,GAAG,CAAC,QAAX,CAAoB,SAAS,CAAC,eAA9B,sBARJ,cASI,eAAQ,KAAK,CAAC,wBAAd,CAAuC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACC,OAAL,EAAN,EAAhD,CAAsE,KAAK,CAAE,CAACC,WAAW,CAAC,KAAb,CAAoBC,QAAQ,CAAC,MAA7B,CAA7E,oBATJ,cAUI,eAAQ,KAAK,CAAC,uBAAd,CAAsC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACR,UAAL,EAAN,EAA/C,CAAwE,KAAK,CAAE,CAACpD,UAAU,CAAC,KAAZ,CAAmB4D,QAAQ,CAAC,MAA5B,CAA/E,oBAVJ,GARJ,GAFA,EATR,GADJ,CAoCH,C,8BA3HyC3G,S,SAAzB+D,gB","sourcesContent":["import React, { Component } from 'react';\r\nimport Modal from 'react-awesome-modal';\r\nimport SupervisorAccountIcon from '@mui/icons-material/SupervisorAccount';\r\nimport TreeItem, { treeItemClasses } from '@mui/lab/TreeItem';\r\nimport PropTypes from 'prop-types';\r\nimport { styled } from '@mui/material/styles';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\nimport AlertF from \"../../components/alert/alert\"\r\nimport ReactTooltip from \"react-tooltip\"\r\n\r\nconst CryptoJS = require(\"crypto-js\");\r\n    const SecureStorage = require(\"secure-web-storage\");\r\n    var SECRET_KEY = 'sanud2ha8shd72h';\r\n\r\n    var secureStorage = new SecureStorage(localStorage, {\r\n        hash: function hash(key) {\r\n            key = CryptoJS.SHA256(key, SECRET_KEY);\r\n    \r\n            return key.toString();\r\n        },\r\n        encrypt: function encrypt(data) {\r\n            data = CryptoJS.AES.encrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString();\r\n    \r\n            return data;\r\n        },\r\n        decrypt: function decrypt(data) {\r\n            data = CryptoJS.AES.decrypt(data, SECRET_KEY);\r\n    \r\n            data = data.toString(CryptoJS.enc.Utf8);\r\n    \r\n            return data;\r\n        }\r\n    });\r\n\r\n    const StyledTreeItemRoot = styled(TreeItem)(({ theme }) => ({\r\n        color: theme.palette.text.secondary,\r\n        [`& .${treeItemClasses.content}`]: {\r\n          color: theme.palette.text.secondary,\r\n          borderTopRightRadius: theme.spacing(2),\r\n          borderBottomRightRadius: theme.spacing(2),\r\n          paddingRight: theme.spacing(1),\r\n          fontWeight: theme.typography.fontWeightMedium,\r\n          '&.Mui-expanded': {\r\n            fontWeight: theme.typography.fontWeightRegular,\r\n          },\r\n          '&:hover': {\r\n            backgroundColor: theme.palette.action.hover,\r\n          },\r\n          '&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused': {\r\n            backgroundColor: `var(--tree-view-bg-color, ${theme.palette.action.selected})`,\r\n            color: 'var(--tree-view-color)',\r\n          },\r\n          [`& .${treeItemClasses.label}`]: {\r\n            fontWeight: 'inherit',\r\n            color: 'inherit',\r\n          },\r\n        },\r\n        [`& .${treeItemClasses.group}`]: {\r\n          marginLeft: 0,\r\n          [`& .${treeItemClasses.content}`]: {\r\n            paddingLeft: theme.spacing(2),\r\n          },\r\n        },\r\n      }));\r\n      \r\n      function StyledTreeItem(props) {\r\n        const {\r\n          bgColor,\r\n          color,\r\n          labelIcon: LabelIcon,\r\n          labelInfo,\r\n          labelText,\r\n          ...other\r\n        } = props;\r\n      \r\n        return (\r\n          <StyledTreeItemRoot\r\n            label={\r\n              <Box sx={{ display: 'flex', alignItems: 'center', p: 0.5, pr: 0}}>\r\n                <Box component={LabelIcon} color=\"inherit\" sx={{ mr: 1 }} />\r\n                <Typography variant=\"h5\" sx={{ fontWeight: 'inherit', flexGrow: 1 }}>\r\n                  {labelText}\r\n                </Typography>\r\n                <Typography variant=\"caption\">\r\n                  {labelInfo}\r\n                </Typography>\r\n              </Box>\r\n            }\r\n            style={{\r\n              '--tree-view-color': color,\r\n              '--tree-view-bg-color': bgColor,\r\n            }}\r\n            {...other}\r\n          />\r\n        );\r\n      }\r\n      \r\n      StyledTreeItem.propTypes = {\r\n        bgColor: PropTypes.string,\r\n        color: PropTypes.string,\r\n        labelIcon: PropTypes.elementType.isRequired,\r\n        labelInfo: PropTypes.string,\r\n        labelText: PropTypes.string.isRequired,\r\n      };\r\n\r\nexport default class QtrackerNVNPopUp extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            visible : false,\r\n            name: null,\r\n            attach: null,\r\n            description: null,\r\n            errorBlankRequest: false\r\n        }\r\n    }\r\n\r\n    async openModal() {\r\n        await this.setState({\r\n            visible : true,\r\n            name: null,\r\n            description: null,\r\n            attach: null\r\n        });\r\n    }\r\n\r\n    async closeModal() {\r\n        await this.setState({\r\n            visible : false,\r\n            name: null,\r\n            description: null,\r\n            attach: null\r\n        });\r\n\r\n        this.refs.name.value = null;\r\n        this.refs.description.value = null;\r\n        this.refs.attach.value = null;\r\n\r\n    }\r\n\r\n    async request(){\r\n        \r\n      if(this.state.name && this.state.description){\r\n        let has_attach\r\n\r\n        if(this.state.attach){\r\n          has_attach = true\r\n        }else{\r\n          has_attach = false\r\n        }\r\n        let body ={\r\n            name : this.state.name,\r\n            description: this.state.description,\r\n            has_attach: has_attach,\r\n            user: secureStorage.getItem(\"user\")\r\n          }\r\n          let options = {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(body)\r\n        }\r\n          await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/requestNVN\", options)\r\n              .then(response => response.json())\r\n              .then(async json => {\r\n                  if(json.filename && this.state.attach){\r\n                    const extension = this.state.attach.name.split('.').pop();\r\n                    const file  = new FormData(); \r\n                    file.append('file', this.state.attach, json.filename + \".\" + extension);\r\n                    await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/qtracker/uploadAttach\", {\r\n                        method: 'POST',\r\n                        body: file,\r\n                        }).then(response =>{\r\n                            if (response.status === 200){\r\n                                this.props.success()\r\n                            }\r\n                        })                       \r\n                    \r\n                  }else{\r\n                      this.props.success()\r\n                  }\r\n              })\r\n              this.closeModal()\r\n    }else{\r\n        this.setState({errorBlankRequest: true})\r\n    }\r\n        \r\n    }    \r\n\r\n    render() {       \r\n        \r\n        return (\r\n            <div>\r\n                    <StyledTreeItem\r\n                    nodeId=\"10\"\r\n                    labelText=\"NotViewInNavis\"\r\n                    labelIcon={SupervisorAccountIcon}\r\n                    onClick={() => this.openModal()}\r\n                    color=\"none\" \r\n                    bgColor=\"none\"\r\n                    />                \r\n                    <div>\r\n                    \r\n                    <Modal visible={this.state.visible} width=\"700\" height=\"500\" effect=\"fadeInUp\" onClickAway={() => this.closeModal()}>\r\n                        <div\r\n                        className={`alert alert-success ${this.state.errorBlankRequest ? 'alert-shown' : 'alert-hidden'}`}\r\n                        onTransitionEnd={() => this.setState({errorBlankRequest: false})}\r\n                        >\r\n                            <AlertF type=\"qtracker\" text=\"At least one field is blank!\" margin=\"5px\"/>                            \r\n                        </div>\r\n                        <center className=\"qtracker__popUp__title\" style={{marginBottom: \"30px\"}}><h3>NOT VIEW IN NAVIS</h3></center>\r\n                        <div className=\"qtrackerRequest__container\">\r\n                            <input data-for=\"name-help\" data-tip=\"Name help\" data-iscapture=\"true\" type=\"text\" placeholder=\"Name\" id=\"name\" className=\"qtrackerPopUp__input__text\" ref=\"name\" style={{marginBottom: \"20px\", color:'black'}} value={this.state.name} onChange={(e) => this.setState({name: e.target.value})} ></input>\r\n                            <ReactTooltip id=\"name-help\" place=\"right\" type=\"dark\" effect=\"solid\"/>\r\n\r\n                            <textarea name=\"description\" className=\"qtrackerPopUp__input__text\" rows=\"5\" placeholder=\"Description\" ref=\"description\" style={{marginBottom:\"20px\", color:\"black\"}} onChange={(e) => this.setState({description: e.target.value})}/>\r\n                            \r\n\r\n                            <input type=\"file\" id=\"attach\"className=\"qtrackerPopUp__input__file\"  ref=\"attach\" style={{marginBottom: \"30px\"}} onChange={(e) => this.setState({attach: e.target.files[0]})} ></input>\r\n                            <label for=\"attach\" className=\"attach__label\">Attach: </label>\r\n                            <button class=\"btn btn-sm btn-success\" onClick={() => this.request()} style={{marginRight:\"5px\", fontSize:\"20px\"}}>Submit</button>\r\n                            <button class=\"btn btn-sm btn-danger\" onClick={() => this.closeModal()} style={{marginLeft:\"5px\", fontSize:\"20px\"}}>Cancel</button>\r\n                        </div>\r\n                    </Modal>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}