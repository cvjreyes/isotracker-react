{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{LineChart,Line,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer}from'recharts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProgressPlotCurve=/*#__PURE__*/function(_React$PureComponent){_inherits(ProgressPlotCurve,_React$PureComponent);var _super=_createSuper(ProgressPlotCurve);function ProgressPlotCurve(){var _this;_classCallCheck(this,ProgressPlotCurve);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],pipesWeight:0,instsWeight:0,equisWeight:0,civilsWeight:0,elecsWeight:0,pipesPercentage:0,instsPercentage:0,equisPercentage:0,civilsPercentage:0,elecsPercentage:0};return _this;}_createClass(ProgressPlotCurve,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var _this2=this;var options;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};_context7.next=3;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/currentProgress\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this2.setState({pipesWeight:json.weight});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(error){console.log(error);});case 3:_context7.next=5;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/equipments/weight\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(json){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this2.setState({equisWeight:json.weight});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){console.log(error);});case 5:_context7.next=7;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/civils/weight\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(json){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this2.setState({civilsWeight:json.weight});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}()).catch(function(error){console.log(error);});case 7:_context7.next=9;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/instrumentation/weight\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(json){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this2.setState({instsWeight:json.weight});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}()).catch(function(error){console.log(error);});case 9:_context7.next=11;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/electrical/weight\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(json){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this2.setState({elecsWeight:json.weight});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref5.apply(this,arguments);};}()).catch(function(error){console.log(error);});case 11:_context7.next=13;return this.setState({pipesPercentage:this.state.pipesWeight/(this.state.pipesWeight+this.state.equisWeight+this.state.instsWeight+this.state.civilsWeight+this.state.elecsWeight)*100,equisPercentage:this.state.equisWeight/(this.state.pipesWeight+this.state.equisWeight+this.state.instsWeight+this.state.civilsWeight+this.state.elecsWeight)*100,instsPercentage:this.state.instsWeight/(this.state.pipesWeight+this.state.equisWeight+this.state.instsWeight+this.state.civilsWeight+this.state.elecsWeight)*100,civilsPercentage:this.state.civilsWeight/(this.state.pipesWeight+this.state.equisWeight+this.state.instsWeight+this.state.civilsWeight+this.state.elecsWeight)*100,elecsPercentage:this.state.elecsWeight/(this.state.pipesWeight+this.state.equisWeight+this.state.instsWeight+this.state.civilsWeight+this.state.elecsWeight)*100});case 13:_context7.next=15;return fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/gcurve\",options).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(json){var weeks,i,progress,estimated;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:weeks=[];for(i=0;i<json.rows.length;i++){progress=(json.rows[i].progress_pipes*(_this2.state.pipesPercentage/100)+json.rows[i].progress_equis*(_this2.state.equisPercentage/100)+json.rows[i].progress_insts*(_this2.state.instsPercentage/100)+json.rows[i].progress_civils*(_this2.state.civilsPercentage/100)+json.rows[i].progress_elecs*(_this2.state.elecsPercentage/100)).toFixed(2);estimated=(json.rows[i].estimated_pipes*(_this2.state.pipesPercentage/100)+json.rows[i].estimated_equis*(_this2.state.equisPercentage/100)+json.rows[i].estimated_insts*(_this2.state.instsPercentage/100)+json.rows[i].estimated_civils*(_this2.state.civilsPercentage/100)+json.rows[i].estimated_elecs*(_this2.state.elecsPercentage/100)).toFixed(2);if(progress<=0){progress=null;}weeks.push({name:\"W\"+json.rows[i].week,estimated:estimated,progress:progress});}_context6.next=4;return _this2.setState({data:weeks});case 4:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref6.apply(this,arguments);};}());case 15:case\"end\":return _context7.stop();}}},_callee7,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(LineChart,{width:500,height:300,data:this.state.data,margin:{top:35,right:30,left:20,bottom:-15},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{label:{value:\"Progress(%)\",position:\"insideLeft\",angle:-90,dy:30}}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"progress\",stroke:\"blue\",activeDot:{r:8}}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"estimated\",stroke:\"red\"})]})});}}]);return ProgressPlotCurve;}(React.PureComponent);ProgressPlotCurve.demoUrl='https://codesandbox.io/s/simple-line-chart-kec3v';export{ProgressPlotCurve as default};","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/src/components/progressPlotCurve/progressPlotCurve.js"],"names":["React","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","ProgressPlotCurve","state","data","pipesWeight","instsWeight","equisWeight","civilsWeight","elecsWeight","pipesPercentage","instsPercentage","equisPercentage","civilsPercentage","elecsPercentage","options","method","headers","fetch","process","env","REACT_APP_SERVER","REACT_APP_NODE_PORT","then","response","json","setState","weight","catch","error","console","log","weeks","i","rows","length","progress","progress_pipes","progress_equis","progress_insts","progress_civils","progress_elecs","toFixed","estimated","estimated_pipes","estimated_equis","estimated_insts","estimated_civils","estimated_elecs","push","name","week","top","right","left","bottom","value","position","angle","dy","r","PureComponent","demoUrl"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\n\r\n  export default class ProgressPlotCurve extends React.PureComponent {\r\n\tstatic demoUrl = 'https://codesandbox.io/s/simple-line-chart-kec3v';\r\n\t\r\n\tstate = {\r\n\t\tdata: [],\r\n        pipesWeight: 0,\r\n        instsWeight: 0,\r\n        equisWeight: 0,\r\n        civilsWeight: 0,\r\n        elecsWeight: 0,\r\n        pipesPercentage: 0,\r\n        instsPercentage: 0,\r\n        equisPercentage: 0,\r\n        civilsPercentage: 0,\r\n        elecsPercentage: 0\r\n\t  };\r\n\r\n\r\n\tasync componentDidMount (){\r\n\r\n\t\tconst options = {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n        }\r\n\r\n        await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/currentProgress\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n                await this.setState({pipesWeight: json.weight})\r\n            }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            })   \r\n\r\n        await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/equipments/weight\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n                await this.setState({equisWeight: json.weight})\r\n            }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            }) \r\n            \r\n        await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/civils/weight\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n                await this.setState({civilsWeight: json.weight})\r\n            }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            }) \r\n            \r\n        await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/instrumentation/weight\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n                await this.setState({instsWeight: json.weight})\r\n            }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            })   \r\n\r\n        await fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/electrical/weight\", options)\r\n            .then(response => response.json())\r\n            .then(async json => {\r\n                await this.setState({elecsWeight: json.weight})\r\n            }\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n            })    \r\n\r\n        await this.setState({\r\n            pipesPercentage: (this.state.pipesWeight/(this.state.pipesWeight + this.state.equisWeight + this.state.instsWeight + this.state.civilsWeight + this.state.elecsWeight)*100),\r\n            equisPercentage: (this.state.equisWeight/(this.state.pipesWeight + this.state.equisWeight + this.state.instsWeight + this.state.civilsWeight + this.state.elecsWeight)*100),\r\n            instsPercentage: (this.state.instsWeight/(this.state.pipesWeight + this.state.equisWeight + this.state.instsWeight + this.state.civilsWeight + this.state.elecsWeight)*100),\r\n            civilsPercentage: (this.state.civilsWeight/(this.state.pipesWeight + this.state.equisWeight + this.state.instsWeight + this.state.civilsWeight + this.state.elecsWeight)*100),\r\n            elecsPercentage: (this.state.elecsWeight/(this.state.pipesWeight + this.state.equisWeight + this.state.instsWeight + this.state.civilsWeight + this.state.elecsWeight)*100)\r\n        })\r\n\r\n\t\tawait fetch(\"http://\"+process.env.REACT_APP_SERVER+\":\"+process.env.REACT_APP_NODE_PORT+\"/gcurve\", options)\r\n\t\t.then(response => response.json())\r\n\t\t.then(async json=>{\r\n\t\t\tlet weeks = []\r\n\t\t\tfor(let i = 0; i < json.rows.length; i++){\r\n                \r\n\t\t\t\tlet progress = (json.rows[i].progress_pipes*(this.state.pipesPercentage/100) + json.rows[i].progress_equis*(this.state.equisPercentage/100) + json.rows[i].progress_insts*(this.state.instsPercentage/100) + json.rows[i].progress_civils*(this.state.civilsPercentage/100) + json.rows[i].progress_elecs*(this.state.elecsPercentage/100)).toFixed(2)\r\n\t\t\t\tlet estimated = (json.rows[i].estimated_pipes*(this.state.pipesPercentage/100) + json.rows[i].estimated_equis*(this.state.equisPercentage/100) + json.rows[i].estimated_insts*(this.state.instsPercentage/100) + json.rows[i].estimated_civils*(this.state.civilsPercentage/100) + json.rows[i].estimated_elecs*(this.state.elecsPercentage/100)).toFixed(2)\r\n                if(progress <= 0){\r\n                    progress= null\r\n                }\r\n\t\t\t\tweeks.push({name: \"W\"+json.rows[i].week, estimated: estimated, progress: progress})\r\n            }\r\n\r\n\t\t\tawait this.setState({data: weeks})\r\n\t\t})\r\n\t}\r\n\t\r\n\r\n\trender() {\r\n\t  return (\r\n\t\t<ResponsiveContainer width=\"100%\" height=\"100%\">\r\n\t\t  <LineChart\r\n\t\t\twidth={500}\r\n\t\t\theight={300}\r\n\t\t\tdata={this.state.data}\r\n\t\t\tmargin={{\r\n\t\t\t  top: 35,\r\n\t\t\t  right: 30,\r\n\t\t\t  left: 20,\r\n\t\t\t  bottom: -15,\r\n\t\t\t}}\r\n\t\t  >\r\n\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\r\n\t\t\t<XAxis dataKey=\"name\" />\r\n\t\t\t<YAxis label={{ value: \"Progress(%)\", position: \"insideLeft\", angle: -90,   dy: 30}} />\r\n\t\t\t<Tooltip />\r\n\t\t\t<Legend />\r\n\t\t\t<Line type=\"monotone\" dataKey=\"progress\" stroke=\"blue\" activeDot={{ r: 8 }} />\r\n\t\t\t<Line type=\"monotone\" dataKey=\"estimated\" stroke=\"red\" />\r\n\t\t  </LineChart>\r\n\t\t</ResponsiveContainer>\r\n\t  );\r\n\t}\r\n  }\r\n  "]},"metadata":{},"sourceType":"module"}