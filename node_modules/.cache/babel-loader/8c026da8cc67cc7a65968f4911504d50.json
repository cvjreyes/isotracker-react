{"ast":null,"code":"import AnimationHelper from '../helpers/animator';\nimport RenderHelper from '../helpers/render';\nimport CanvasJSObject from './canvasjs';\nimport { extend, isCanvasSupported, getObjectId, drawRect, drawSegment } from '../helpers/utils';\n\nfunction ToolTip(chart, options, theme) {\n  ToolTip.base.constructor.call(this, \"ToolTip\", options, theme);\n  this.chart = chart;\n  this.canvas = chart.canvas;\n  this.ctx = this.chart.ctx;\n  this.currentSeriesIndex = -1;\n  this.currentDataPointIndex = -1;\n  this._timerId = 0;\n  this._prevX = NaN;\n  this._prevY = NaN;\n\n  this._initialize();\n}\n\nextend(ToolTip, CanvasJSObject);\n\nToolTip.prototype._initialize = function () {\n  if (this.enabled) {\n    this.container = document.createElement(\"div\");\n    this.container.setAttribute(\"class\", \"canvasjs-chart-tooltip\");\n    this.container.style.position = \"absolute\";\n    this.container.style.height = \"auto\";\n    this.container.style.boxShadow = \"1px 1px 2px 2px rgba(0,0,0,0.1)\";\n    this.container.style.zIndex = \"1000\"; //this.container.style.pointerEvents = \"none\";\n\n    this.container.style.display = \"none\"; //this.container.style.whiteSpace = \"no-wrap\";\n\n    var toolTipHtml = \"<div style=\\\" width: auto;\";\n    toolTipHtml += \"height: auto;\";\n    toolTipHtml += \"min-width: 50px;\";\n    toolTipHtml += \"line-height: auto;\";\n    toolTipHtml += \"margin: 0px 0px 0px 0px;\";\n    toolTipHtml += \"padding: 5px;\";\n    toolTipHtml += \"font-family: Calibri, Arial, Georgia, serif;\";\n    toolTipHtml += \"font-weight: normal;\";\n    toolTipHtml += \"font-style: \" + (isCanvasSupported ? \"italic;\" : \"normal;\");\n    toolTipHtml += \"font-size: 14px;\";\n    toolTipHtml += \"color: #000000;\";\n    toolTipHtml += \"text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);\";\n    toolTipHtml += \"text-align: left;\";\n    toolTipHtml += \"border: 2px solid gray;\"; //Older browsers like IE8- don't support alpha values\n\n    toolTipHtml += isCanvasSupported ? \"background: rgba(255,255,255,.9);\" : \"background: rgb(255,255,255);\";\n    toolTipHtml += \"text-indent: 0px;\";\n    toolTipHtml += \"white-space: nowrap;\"; //toolTipHtml += \"pointer-events:none;\";\n\n    toolTipHtml += \"border-radius: 5px;\"; //Disable Text Selection\n\n    toolTipHtml += \"-moz-user-select:none;\";\n    toolTipHtml += \"-khtml-user-select: none;\";\n    toolTipHtml += \"-webkit-user-select: none;\";\n    toolTipHtml += \"-ms-user-select: none;\";\n    toolTipHtml += \"user-select: none;\"; //toolTipHtml += \"opacity: 0;\";\n    //toolTipHtml += \"filter: progid: DXImageTransform.Microsoft.gradient(GradientType = 0, startColorstr = '#4cffffff', endColorstr = '#4cffffff');\";\n\n    if (!isCanvasSupported) {\n      //toolTipHtml += \"-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=90)'\";\n      //-ms-filter: \"progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')\";\n\n      /* For IE 5.5 - 7 */\n      toolTipHtml += \"filter: alpha(opacity = 90);\";\n      toolTipHtml += \"filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');\";\n    }\n\n    toolTipHtml += \"} \\\"> Sample Tooltip</div>\";\n    this.container.innerHTML = toolTipHtml;\n    this.contentDiv = this.container.firstChild;\n    this.container.style.borderRadius = this.contentDiv.style.borderRadius;\n\n    this.chart._canvasJSContainer.appendChild(this.container);\n  }\n};\n\nToolTip.prototype.mouseMoveHandler = function (x, y) {\n  if (!(this._lastUpdated && new Date().getTime() - this._lastUpdated < 40)) {\n    this._lastUpdated = new Date().getTime();\n\n    this._updateToolTip(x, y);\n  }\n};\n\nToolTip.prototype._updateToolTip = function (mouseX, mouseY) {\n  //return;\n  if (this.chart.disableToolTip) // Disabled during animation, etc\n    return;\n\n  if (typeof mouseX === \"undefined\" || typeof mouseY === \"undefined\") {\n    if (isNaN(this._prevX) || isNaN(this._prevY)) return;else {\n      mouseX = this._prevX;\n      mouseY = this._prevY;\n    }\n  } else {\n    this._prevX = mouseX;\n    this._prevY = mouseY;\n  }\n\n  var dataPoint = null;\n  var dataSeries = null;\n  var toolTipContent = \"\";\n  var entries = [];\n  var toolTipRight;\n  var toolTipBottom;\n  var x = 0;\n\n  if (this.shared && this.enabled && this.chart.plotInfo.axisPlacement !== \"none\") {\n    // && this.chart.plotInfo.axisPlacement !== \"none\"\n    if (this.chart.plotInfo.axisPlacement === \"xySwapped\") {\n      x = (this.chart.axisX.viewportMaximum - this.chart.axisX.viewportMinimum) / this.chart.axisX.lineCoordinates.height * (this.chart.axisX.lineCoordinates.y2 - mouseY) + this.chart.axisX.viewportMinimum;\n    } else {\n      x = (this.chart.axisX.viewportMaximum - this.chart.axisX.viewportMinimum) / this.chart.axisX.lineCoordinates.width * (mouseX - this.chart.axisX.lineCoordinates.x1) + this.chart.axisX.viewportMinimum;\n    }\n\n    var nearbyEntries = [];\n\n    for (var i = 0; i < this.chart.data.length; i++) {\n      var entry = this.chart.data[i].getDataPointAtX(x, true);\n\n      if (entry && entry.index >= 0) {\n        entry.dataSeries = this.chart.data[i];\n        if (entry.dataPoint.y !== null) nearbyEntries.push(entry);\n      }\n    }\n\n    if (nearbyEntries.length === 0) return;\n    nearbyEntries.sort(function (entry1, entry2) {\n      return entry1.distance - entry2.distance;\n    });\n    var closest = nearbyEntries[0];\n\n    for (i = 0; i < nearbyEntries.length; i++) {\n      if (nearbyEntries[i].dataPoint.x.valueOf() === closest.dataPoint.x.valueOf()) entries.push(nearbyEntries[i]);\n    }\n\n    nearbyEntries = null;\n  } else {\n    var dataPointInfo = this.chart.getDataPointAtXY(mouseX, mouseY, true); //dataPointInfo = null;\n\n    if (dataPointInfo) {\n      this.currentDataPointIndex = dataPointInfo.dataPointIndex;\n      this.currentSeriesIndex = dataPointInfo.dataSeries.index;\n    } else if (isCanvasSupported) {\n      var id = getObjectId(mouseX, mouseY, this.chart._eventManager.ghostCtx);\n\n      if (id > 0 && typeof this.chart._eventManager.objectMap[id] !== \"undefined\") {\n        //DataPoint/DataSeries event\n        var eventObject = this.chart._eventManager.objectMap[id];\n        if (eventObject.objectType === \"legendItem\") return; //if (this.currentSeriesIndex === eventObject.dataSeriesIndex && this.currentDataPointIndex === eventObject.dataPointIndex)\n        //  return;\n        //else {\n\n        this.currentSeriesIndex = eventObject.dataSeriesIndex;\n        this.currentDataPointIndex = eventObject.dataPointIndex >= 0 ? eventObject.dataPointIndex : -1; //}\n        //window.console.log(\"id: \" + id + \"; hex: \" + intToHexColorString(id));\n      } else this.currentDataPointIndex = -1;\n    } else this.currentDataPointIndex = -1;\n\n    if (this.currentSeriesIndex >= 0) {\n      dataSeries = this.chart.data[this.currentSeriesIndex];\n      var entry = {};\n\n      if (this.currentDataPointIndex >= 0) {\n        dataPoint = dataSeries.dataPoints[this.currentDataPointIndex];\n        entry.dataSeries = dataSeries;\n        entry.dataPoint = dataPoint;\n        entry.index = this.currentDataPointIndex;\n        entry.distance = Math.abs(dataPoint.x - x);\n      } else if (this.enabled && (dataSeries.type === \"line\" || dataSeries.type === \"stepLine\" || dataSeries.type === \"spline\" || dataSeries.type === \"area\" || dataSeries.type === \"stepArea\" || dataSeries.type === \"splineArea\" || dataSeries.type === \"stackedArea\" || dataSeries.type === \"stackedArea100\" || dataSeries.type === \"rangeArea\" || dataSeries.type === \"rangeSplineArea\" || dataSeries.type === \"candlestick\" || dataSeries.type === \"ohlc\")) {\n        //var x = (this.chart.axisX.viewportMaximum - this.chart.axisX.viewportMinimum) / this.chart.axisX.lineCoordinates.width * (mouseX - this.chart.axisX.lineCoordinates.x1) + this.chart.axisX.viewportMinimum.valueOf();\n        var x = dataSeries.axisX.conversionParameters.minimum + (mouseX - dataSeries.axisX.conversionParameters.reference) / dataSeries.axisX.conversionParameters.pixelPerUnit;\n        entry = dataSeries.getDataPointAtX(x, true);\n        entry.dataSeries = dataSeries;\n        this.currentDataPointIndex = entry.index;\n        dataPoint = entry.dataPoint;\n      } else {\n        //this.hide();\n        return;\n      }\n\n      if (entry.dataPoint.y !== null) {\n        if (entry.dataSeries.axisY) {\n          if (entry.dataPoint.y.length > 0) {\n            var unboundToViewport = 0;\n\n            for (var i = 0; i < entry.dataPoint.y.length; i++) if (entry.dataPoint.y[i] < entry.dataSeries.axisY.viewportMinimum) unboundToViewport--;else if (entry.dataPoint.y[i] > entry.dataSeries.axisY.viewportMaximum) unboundToViewport++;\n\n            if (unboundToViewport < entry.dataPoint.y.length && unboundToViewport > -entry.dataPoint.y.length) entries.push(entry);\n          } else {\n            if (entry.dataPoint.y >= entry.dataSeries.axisY.viewportMinimum && entry.dataPoint.y <= entry.dataSeries.axisY.viewportMaximum) entries.push(entry);\n          }\n        } else entries.push(entry);\n      }\n    }\n  }\n\n  if (entries.length > 0) {\n    this.highlightObjects(entries);\n\n    if (this.enabled) {\n      var toolTipInnerHtml = \"\";\n      toolTipInnerHtml = this.getToolTipInnerHTML({\n        entries: entries\n      });\n\n      if (toolTipInnerHtml !== null) {\n        this.contentDiv.innerHTML = toolTipInnerHtml;\n        this.contentDiv.innerHTML = toolTipInnerHtml;\n        var previouslyHidden = false;\n\n        if (this.container.style.display === \"none\") {\n          previouslyHidden = true;\n          this.container.style.display = \"block\";\n        }\n\n        try {\n          this.contentDiv.style.background = this.backgroundColor ? this.backgroundColor : isCanvasSupported ? \"rgba(255,255,255,.9)\" : \"rgb(255,255,255)\";\n          this.contentDiv.style.borderRightColor = this.contentDiv.style.borderLeftColor = this.contentDiv.style.borderColor = this.borderColor ? this.borderColor : entries[0].dataPoint.color ? entries[0].dataPoint.color : entries[0].dataSeries.color ? entries[0].dataSeries.color : entries[0].dataSeries._colorSet[entries[0].index % entries[0].dataSeries._colorSet.length];\n          this.contentDiv.style.borderWidth = this.borderThickness || this.borderThickness === 0 ? this.borderThickness + \"px\" : 2 + \"px\";\n          this.contentDiv.style.borderRadius = this.cornerRadius || this.cornerRadius === 0 ? this.cornerRadius + \"px\" : 5 + \"px\";\n          this.container.style.borderRadius = this.contentDiv.style.borderRadius;\n          this.contentDiv.style.fontSize = this.fontSize || this.fontSize === 0 ? this.fontSize + \"px\" : 14 + \"px\";\n          this.contentDiv.style.color = this.fontColor ? this.fontColor : \"#000000\";\n          this.contentDiv.style.fontFamily = this.fontFamily ? this.fontFamily : \"Calibri, Arial, Georgia, serif;\";\n          this.contentDiv.style.fontWeight = this.fontWeight ? this.fontWeight : \"normal\";\n          this.contentDiv.style.fontStyle = this.fontStyle ? this.fontStyle : isCanvasSupported ? \"italic\" : \"normal\";\n        } catch (e) {}\n\n        var toolTipLeft;\n\n        if (entries[0].dataSeries.type === \"pie\" || entries[0].dataSeries.type === \"doughnut\" || entries[0].dataSeries.type === \"funnel\" || entries[0].dataSeries.type === \"bar\" || entries[0].dataSeries.type === \"rangeBar\" || entries[0].dataSeries.type === \"stackedBar\" || entries[0].dataSeries.type === \"stackedBar100\") {\n          toolTipLeft = mouseX - 10 - this.container.clientWidth;\n        } else {\n          //toolTipLeft = (((this.chart.axisX.lineCoordinates.width / Math.abs(this.chart.axisX.viewportMaximum - this.chart.axisX.viewportMinimum)) * Math.abs(entries[0].dataPoint.x - this.chart.axisX.viewportMinimum)) + this.chart.axisX.lineCoordinates.x1 + .5) - this.container.clientWidth << 0;\n          toolTipLeft = entries[0].dataSeries.axisX.conversionParameters.reference + entries[0].dataSeries.axisX.conversionParameters.pixelPerUnit * (entries[0].dataPoint.x - entries[0].dataSeries.axisX.conversionParameters.minimum) - this.container.clientWidth << 0;\n          toolTipLeft -= 10;\n        }\n\n        if (toolTipLeft < 0) {\n          toolTipLeft += this.container.clientWidth + 20;\n        }\n\n        if (toolTipLeft + this.container.clientWidth > this.chart._container.clientWidth) toolTipLeft = Math.max(0, this.chart._container.clientWidth - this.container.clientWidth);\n        toolTipLeft += \"px\";\n\n        if (entries.length === 1 && !this.shared && (entries[0].dataSeries.type === \"line\" || entries[0].dataSeries.type === \"stepLine\" || entries[0].dataSeries.type === \"spline\" || entries[0].dataSeries.type === \"area\" || entries[0].dataSeries.type === \"stepArea\" || entries[0].dataSeries.type === \"splineArea\" || entries[0].dataSeries.type === \"stackedArea\" || entries[0].dataSeries.type === \"stackedArea100\")) {\n          //toolTipBottom = (entries[0].dataSeries.axisY.lineCoordinates.y2 - entries[0].dataSeries.axisY.lineCoordinates.height / Math.abs(entries[0].dataSeries.axisY.maximum - entries[0].dataSeries.axisY.viewportMinimum) * Math.abs(entries[0].dataPoint.y - entries[0].dataSeries.axisY.viewportMinimum) + .5) << 0;\n          toolTipBottom = entries[0].dataSeries.axisY.conversionParameters.reference + entries[0].dataSeries.axisY.conversionParameters.pixelPerUnit * (entries[0].dataPoint.y - entries[0].dataSeries.axisY.viewportMinimum) + .5 << 0;\n        } else if (entries[0].dataSeries.type === \"bar\" || entries[0].dataSeries.type === \"rangeBar\" || entries[0].dataSeries.type === \"stackedBar\" || entries[0].dataSeries.type === \"stackedBar100\") {\n          //toolTipBottom = (entries[0].dataSeries.axisX.lineCoordinates.y2 - entries[0].dataSeries.axisX.lineCoordinates.height / Math.abs(entries[0].dataSeries.axisX.maximum - entries[0].dataSeries.axisX.viewportMinimum) * Math.abs(entries[0].dataPoint.x - entries[0].dataSeries.axisX.viewportMinimum) + .5) << 0;\n          toolTipBottom = entries[0].dataSeries.axisX.conversionParameters.reference + entries[0].dataSeries.axisX.conversionParameters.pixelPerUnit * (entries[0].dataPoint.x - entries[0].dataSeries.axisX.viewportMinimum) + .5 << 0;\n        } else {\n          toolTipBottom = mouseY;\n        }\n\n        toolTipBottom = -toolTipBottom + 10;\n\n        if (toolTipBottom + this.container.clientHeight + 5 > 0) {\n          toolTipBottom -= toolTipBottom + this.container.clientHeight + 5 - 0;\n        }\n\n        toolTipBottom += \"px\"; //this.container.style.right = toolTipRight;\n\n        this.container.style.left = toolTipLeft;\n        this.container.style.bottom = toolTipBottom;\n\n        if (!this.animationEnabled || previouslyHidden) {\n          this.disableAnimation();\n        } else this.enableAnimation();\n      } else {\n        this.hide(false);\n      }\n    } //if (isDebugMode)\n    //  console.log(\"searchX: \" + x + \" x: \" + searchResult.dataPoint.x + \"; y: \" + searchResult.dataPoint.y + \"; distance: \" + searchResult.distance + \"; steps: \" + steps);\n\n  }\n};\n\nToolTip.prototype.highlightObjects = function (entries) {\n  //if (!this.enabled)\n  //\treturn;\n  //this.chart.overlaidCanvasCtx.clearRect(0, 0, this.chart.overlaidCanvas.width, this.chart.overlaidCanvas.height);\n  var overlaidCanvasCtx = this.chart.overlaidCanvasCtx;\n  this.chart.resetOverlayedCanvas();\n  overlaidCanvasCtx.clearRect(0, 0, this.chart.width, this.chart.height);\n  overlaidCanvasCtx.save();\n  var plotArea = this.chart.plotArea;\n  var offset = 0;\n  overlaidCanvasCtx.rect(plotArea.x1, plotArea.y1, plotArea.x2 - plotArea.x1, plotArea.y2 - plotArea.y1);\n  overlaidCanvasCtx.clip();\n\n  for (var i = 0; i < entries.length; i++) {\n    var entry = entries[i];\n    var eventObject = this.chart._eventManager.objectMap[entry.dataSeries.dataPointIds[entry.index]];\n    if (!eventObject || !eventObject.objectType || eventObject.objectType !== \"dataPoint\") continue;\n    var dataSeries = this.chart.data[eventObject.dataSeriesIndex];\n    var dataPoint = dataSeries.dataPoints[eventObject.dataPointIndex];\n    var index = eventObject.dataPointIndex;\n\n    if (dataPoint.highlightEnabled !== false && (dataSeries.highlightEnabled === true || dataPoint.highlightEnabled === true)) {\n      if (dataSeries.type === \"line\" || dataSeries.type === \"stepLine\" || dataSeries.type === \"spline\" || dataSeries.type === \"scatter\" || dataSeries.type === \"area\" || dataSeries.type === \"stepArea\" || dataSeries.type === \"splineArea\" || dataSeries.type === \"stackedArea\" || dataSeries.type === \"stackedArea100\" || dataSeries.type === \"rangeArea\" || dataSeries.type === \"rangeSplineArea\") {\n        var markerProps = dataSeries.getMarkerProperties(index, eventObject.x1, eventObject.y1, this.chart.overlaidCanvasCtx);\n        markerProps.size = Math.max(markerProps.size * 1.5 << 0, 10);\n        markerProps.borderColor = markerProps.borderColor || \"#FFFFFF\";\n        markerProps.borderThickness = markerProps.borderThickness || Math.ceil(markerProps.size * .1); //overlaidCanvasCtx.globalAlpha = .8;\n\n        RenderHelper.drawMarkers([markerProps]); //overlaidCanvasCtx.globalAlpha = .8;\n\n        if (typeof eventObject.y2 !== \"undefined\") {\n          var markerProps = dataSeries.getMarkerProperties(index, eventObject.x1, eventObject.y2, this.chart.overlaidCanvasCtx);\n          markerProps.size = Math.max(markerProps.size * 1.5 << 0, 10);\n          markerProps.borderColor = markerProps.borderColor || \"#FFFFFF\";\n          markerProps.borderThickness = markerProps.borderThickness || Math.ceil(markerProps.size * .1); //overlaidCanvasCtx.globalAlpha = .8;\n\n          RenderHelper.drawMarkers([markerProps]); //overlaidCanvasCtx.globalAlpha = .8;\n        }\n      } else if (dataSeries.type === \"bubble\") {\n        var markerProps = dataSeries.getMarkerProperties(index, eventObject.x1, eventObject.y1, this.chart.overlaidCanvasCtx);\n        markerProps.size = eventObject.size;\n        markerProps.color = \"white\";\n        markerProps.borderColor = \"white\"; //markerProps.borderThickness = 2;\n\n        overlaidCanvasCtx.globalAlpha = .3;\n        RenderHelper.drawMarkers([markerProps]);\n        overlaidCanvasCtx.globalAlpha = 1;\n      } else if (dataSeries.type === \"column\" || dataSeries.type === \"stackedColumn\" || dataSeries.type === \"stackedColumn100\" || dataSeries.type === \"bar\" || dataSeries.type === \"rangeBar\" || dataSeries.type === \"stackedBar\" || dataSeries.type === \"stackedBar100\" || dataSeries.type === \"rangeColumn\") {\n        drawRect(overlaidCanvasCtx, eventObject.x1, eventObject.y1, eventObject.x2, eventObject.y2, \"white\", 0, null, false, false, false, false, .3);\n      } else if (dataSeries.type === \"pie\" || dataSeries.type === \"doughnut\") {\n        drawSegment(overlaidCanvasCtx, eventObject.center, eventObject.radius, \"white\", dataSeries.type, eventObject.startAngle, eventObject.endAngle, .3, eventObject.percentInnerRadius);\n      } else if (dataSeries.type === \"candlestick\") {\n        overlaidCanvasCtx.globalAlpha = 1;\n        overlaidCanvasCtx.strokeStyle = eventObject.color;\n        overlaidCanvasCtx.lineWidth = eventObject.borderThickness * 2;\n        offset = overlaidCanvasCtx.lineWidth % 2 === 0 ? 0 : .5;\n        overlaidCanvasCtx.beginPath();\n        overlaidCanvasCtx.moveTo(eventObject.x3 - offset, eventObject.y2);\n        overlaidCanvasCtx.lineTo(eventObject.x3 - offset, Math.min(eventObject.y1, eventObject.y4));\n        overlaidCanvasCtx.stroke();\n        overlaidCanvasCtx.beginPath();\n        overlaidCanvasCtx.moveTo(eventObject.x3 - offset, Math.max(eventObject.y1, eventObject.y4));\n        overlaidCanvasCtx.lineTo(eventObject.x3 - offset, eventObject.y3);\n        overlaidCanvasCtx.stroke();\n        drawRect(overlaidCanvasCtx, eventObject.x1, Math.min(eventObject.y1, eventObject.y4), eventObject.x2, Math.max(eventObject.y1, eventObject.y4), \"transparent\", eventObject.borderThickness * 2, eventObject.color, false, false, false, false);\n        overlaidCanvasCtx.globalAlpha = 1;\n      } else if (dataSeries.type === \"ohlc\") {\n        overlaidCanvasCtx.globalAlpha = 1;\n        overlaidCanvasCtx.strokeStyle = eventObject.color;\n        overlaidCanvasCtx.lineWidth = eventObject.borderThickness * 2;\n        offset = overlaidCanvasCtx.lineWidth % 2 === 0 ? 0 : .5;\n        overlaidCanvasCtx.beginPath();\n        overlaidCanvasCtx.moveTo(eventObject.x3 - offset, eventObject.y2);\n        overlaidCanvasCtx.lineTo(eventObject.x3 - offset, eventObject.y3);\n        overlaidCanvasCtx.stroke();\n        overlaidCanvasCtx.beginPath();\n        overlaidCanvasCtx.moveTo(eventObject.x3, eventObject.y1);\n        overlaidCanvasCtx.lineTo(eventObject.x1, eventObject.y1);\n        overlaidCanvasCtx.stroke();\n        overlaidCanvasCtx.beginPath();\n        overlaidCanvasCtx.moveTo(eventObject.x3, eventObject.y4);\n        overlaidCanvasCtx.lineTo(eventObject.x2, eventObject.y4);\n        overlaidCanvasCtx.stroke();\n        overlaidCanvasCtx.globalAlpha = 1;\n      }\n    }\n  }\n\n  overlaidCanvasCtx.restore();\n  overlaidCanvasCtx.globalAlpha = 1;\n  overlaidCanvasCtx.beginPath();\n  return;\n};\n\nToolTip.prototype.getToolTipInnerHTML = function (e) {\n  var entries = e.entries;\n  var toolTipInnerHtml = null;\n  var dataSeries = null;\n  var dataPoint = null;\n  var index = 0;\n  var color = null;\n  var toolTipContent = \"\";\n  var isToolTipDefinedInData = true;\n\n  for (var i = 0; i < entries.length; i++) {\n    if (entries[i].dataSeries.toolTipContent || entries[i].dataPoint.toolTipContent) {\n      isToolTipDefinedInData = false;\n      break;\n    }\n  }\n\n  if (isToolTipDefinedInData && (this.content && typeof this.content === \"function\" || this.contentFormatter)) {\n    var param = {\n      chart: this.chart,\n      toolTip: this._options,\n      entries: entries\n    };\n    toolTipInnerHtml = this.contentFormatter ? this.contentFormatter(param) : this.content(param);\n  } else {\n    if (this.shared && this.chart.plotInfo.axisPlacement !== \"none\") {\n      var toolTipInnerHtmlPrefix = \"\";\n\n      for (var i = 0; i < entries.length; i++) {\n        dataSeries = entries[i].dataSeries;\n        dataPoint = entries[i].dataPoint;\n        index = entries[i].index;\n        toolTipContent = \"\";\n\n        if (i === 0 && isToolTipDefinedInData && !this.content) {\n          toolTipInnerHtmlPrefix += typeof this.chart.axisX.labels[dataPoint.x] !== \"undefined\" ? this.chart.axisX.labels[dataPoint.x] : \"{x}\";\n          toolTipInnerHtmlPrefix += \"</br>\";\n          toolTipInnerHtmlPrefix = this.chart.replaceKeywordsWithValue(toolTipInnerHtmlPrefix, dataPoint, dataSeries, index);\n        } //Allows disabling of toolTip for individual dataPoints/dataSeries\n\n\n        if (dataPoint.toolTipContent === null || typeof dataPoint.toolTipContent === \"undefined\" && dataSeries._options.toolTipContent === null) continue;\n\n        if (dataSeries.type === \"line\" || dataSeries.type === \"stepLine\" || dataSeries.type === \"spline\" || dataSeries.type === \"area\" || dataSeries.type === \"stepArea\" || dataSeries.type === \"splineArea\" || dataSeries.type === \"column\" || dataSeries.type === \"bar\" || dataSeries.type === \"scatter\" || dataSeries.type === \"stackedColumn\" || dataSeries.type === \"stackedColumn100\" || dataSeries.type === \"stackedBar\" || dataSeries.type === \"stackedBar100\" || dataSeries.type === \"stackedArea\" || dataSeries.type === \"stackedArea100\") {\n          toolTipContent += dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof this.content !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>{name}:</span>&nbsp;&nbsp;{y}\";\n        } else if (dataSeries.type === \"bubble\") {\n          toolTipContent += dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof this.content !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}\";\n        } else if (dataSeries.type === \"pie\" || dataSeries.type === \"doughnut\" || dataSeries.type === \"funnel\") {\n          toolTipContent += dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof this.content !== \"function\" ? this.content : \"&nbsp;&nbsp;{y}\";\n        } else if (dataSeries.type === \"rangeColumn\" || dataSeries.type === \"rangeBar\" || dataSeries.type === \"rangeArea\" || dataSeries.type === \"rangeSplineArea\") {\n          toolTipContent += dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof this.content !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>{name}:</span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}\";\n        } else if (dataSeries.type === \"candlestick\" || dataSeries.type === \"ohlc\") {\n          toolTipContent += dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof this.content !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>{name}:</span>\" + \"<br/>Open: &nbsp;&nbsp;{y[0]}\" + \"<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}\" + \"<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}\" + \"<br/>Close: &nbsp;&nbsp;{y[3]}\";\n        }\n\n        if (toolTipInnerHtml === null) toolTipInnerHtml = \"\";\n\n        if (this.reversed === true) {\n          toolTipInnerHtml = this.chart.replaceKeywordsWithValue(toolTipContent, dataPoint, dataSeries, index) + toolTipInnerHtml;\n          if (i < entries.length - 1) toolTipInnerHtml = \"</br>\" + toolTipInnerHtml;\n        } else {\n          toolTipInnerHtml += this.chart.replaceKeywordsWithValue(toolTipContent, dataPoint, dataSeries, index);\n          if (i < entries.length - 1) toolTipInnerHtml += \"</br>\";\n        }\n      }\n\n      if (toolTipInnerHtml !== null) toolTipInnerHtml = toolTipInnerHtmlPrefix + toolTipInnerHtml;\n    } else {\n      dataSeries = entries[0].dataSeries;\n      dataPoint = entries[0].dataPoint;\n      index = entries[0].index; //Allows disabling of toolTip for individual dataPoints/dataSeries\n\n      if (dataPoint.toolTipContent === null || typeof dataPoint.toolTipContent === \"undefined\" && dataSeries._options.toolTipContent === null) return null;\n\n      if (dataSeries.type === \"line\" || dataSeries.type === \"stepLine\" || dataSeries.type === \"spline\" || dataSeries.type === \"area\" || dataSeries.type === \"stepArea\" || dataSeries.type === \"splineArea\" || dataSeries.type === \"column\" || dataSeries.type === \"bar\" || dataSeries.type === \"scatter\" || dataSeries.type === \"stackedColumn\" || dataSeries.type === \"stackedColumn100\" || dataSeries.type === \"stackedBar\" || dataSeries.type === \"stackedBar100\" || dataSeries.type === \"stackedArea\" || dataSeries.type === \"stackedArea100\") {\n        toolTipContent = dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof this.content !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>\" + (dataPoint.label ? \"{label}\" : \"{x}\") + \" :</span>&nbsp;&nbsp;{y}\";\n      } else if (dataSeries.type === \"bubble\") {\n        toolTipContent = dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof this.content !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>\" + (dataPoint.label ? \"{label}\" : \"{x}\") + \":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}\";\n      } else if (dataSeries.type === \"pie\" || dataSeries.type === \"doughnut\" || dataSeries.type === \"funnel\") {\n        toolTipContent = dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof this.content !== \"function\" ? this.content : (dataPoint.name ? \"{name}:&nbsp;&nbsp;\" : dataPoint.label ? \"{label}:&nbsp;&nbsp;\" : \"\") + \"{y}\";\n      } else if (dataSeries.type === \"rangeColumn\" || dataSeries.type === \"rangeBar\" || dataSeries.type === \"rangeArea\" || dataSeries.type === \"rangeSplineArea\") {\n        toolTipContent = dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof this.content !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>\" + (dataPoint.label ? \"{label}\" : \"{x}\") + \" :</span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}\";\n      } else if (dataSeries.type === \"candlestick\" || dataSeries.type === \"ohlc\") {\n        toolTipContent = dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof this.content !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>\" + (dataPoint.label ? \"{label}\" : \"{x}\") + \"</span>\" + \"<br/>Open: &nbsp;&nbsp;{y[0]}\" + \"<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}\" + \"<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}\" + \"<br/>Close: &nbsp;&nbsp;{y[3]}\";\n      }\n\n      if (toolTipInnerHtml === null) toolTipInnerHtml = \"\";\n      toolTipInnerHtml += this.chart.replaceKeywordsWithValue(toolTipContent, dataPoint, dataSeries, index);\n    }\n  }\n\n  return toolTipInnerHtml;\n};\n\nToolTip.prototype.enableAnimation = function () {\n  if (this.container.style.WebkitTransition) return;\n  this.container.style.WebkitTransition = \"left .2s ease-out, bottom .2s ease-out\";\n  this.container.style.MozTransition = \"left .2s ease-out, bottom .2s ease-out\";\n  this.container.style.MsTransition = \"left .2s ease-out, bottom .2s ease-out\";\n  this.container.style.transition = \"left .2s ease-out, bottom .2s ease-out\";\n};\n\nToolTip.prototype.disableAnimation = function () {\n  if (!this.container.style.WebkitTransition) return;\n  this.container.style.WebkitTransition = \"\";\n  this.container.style.MozTransition = \"\";\n  this.container.style.MsTransition = \"\";\n  this.container.style.transition = \"\";\n};\n\nToolTip.prototype.hide = function (resetOverlayedCanvas) {\n  if (!this.enabled) return;\n  resetOverlayedCanvas = typeof resetOverlayedCanvas === \"undefined\" ? true : resetOverlayedCanvas;\n  this.container.style.display = \"none\";\n  this.currentSeriesIndex = -1;\n  this._prevX = NaN;\n  this._prevY = NaN; //this.chart.overlaidCanvasCtx.clearRect(0, 0, this.chart.overlaidCanvas.width, this.chart.overlaidCanvas.height);\n\n  if (resetOverlayedCanvas) this.chart.resetOverlayedCanvas();\n};\n\nexport default ToolTip;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/canvasjs/src/core/tooltip.js"],"names":["AnimationHelper","RenderHelper","CanvasJSObject","extend","isCanvasSupported","getObjectId","drawRect","drawSegment","ToolTip","chart","options","theme","base","constructor","call","canvas","ctx","currentSeriesIndex","currentDataPointIndex","_timerId","_prevX","NaN","_prevY","_initialize","prototype","enabled","container","document","createElement","setAttribute","style","position","height","boxShadow","zIndex","display","toolTipHtml","innerHTML","contentDiv","firstChild","borderRadius","_canvasJSContainer","appendChild","mouseMoveHandler","x","y","_lastUpdated","Date","getTime","_updateToolTip","mouseX","mouseY","disableToolTip","isNaN","dataPoint","dataSeries","toolTipContent","entries","toolTipRight","toolTipBottom","shared","plotInfo","axisPlacement","axisX","viewportMaximum","viewportMinimum","lineCoordinates","y2","width","x1","nearbyEntries","i","data","length","entry","getDataPointAtX","index","push","sort","entry1","entry2","distance","closest","valueOf","dataPointInfo","getDataPointAtXY","dataPointIndex","id","_eventManager","ghostCtx","objectMap","eventObject","objectType","dataSeriesIndex","dataPoints","Math","abs","type","conversionParameters","minimum","reference","pixelPerUnit","axisY","unboundToViewport","highlightObjects","toolTipInnerHtml","getToolTipInnerHTML","previouslyHidden","background","backgroundColor","borderRightColor","borderLeftColor","borderColor","color","_colorSet","borderWidth","borderThickness","cornerRadius","fontSize","fontColor","fontFamily","fontWeight","fontStyle","e","toolTipLeft","clientWidth","_container","max","clientHeight","left","bottom","animationEnabled","disableAnimation","enableAnimation","hide","overlaidCanvasCtx","resetOverlayedCanvas","clearRect","save","plotArea","offset","rect","y1","x2","clip","dataPointIds","highlightEnabled","markerProps","getMarkerProperties","size","ceil","drawMarkers","globalAlpha","center","radius","startAngle","endAngle","percentInnerRadius","strokeStyle","lineWidth","beginPath","moveTo","x3","lineTo","min","y4","stroke","y3","restore","isToolTipDefinedInData","content","contentFormatter","param","toolTip","_options","toolTipInnerHtmlPrefix","labels","replaceKeywordsWithValue","reversed","label","name","WebkitTransition","MozTransition","MsTransition","transition"],"mappings":"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","sourcesContent":["\r\nimport AnimationHelper from '../helpers/animator';\r\nimport RenderHelper from '../helpers/render';\r\nimport CanvasJSObject from './canvasjs';\r\nimport {extend, isCanvasSupported, getObjectId, drawRect, drawSegment} from '../helpers/utils';\r\n\r\nfunction ToolTip(chart, options, theme) {\r\n\r\n  ToolTip.base.constructor.call(this, \"ToolTip\", options, theme);\r\n\r\n  this.chart = chart;\r\n  this.canvas = chart.canvas;\r\n  this.ctx = this.chart.ctx;\r\n  this.currentSeriesIndex = -1;\r\n  this.currentDataPointIndex = -1;\r\n  this._timerId = 0;\r\n  this._prevX = NaN;\r\n  this._prevY = NaN;\r\n\r\n  this._initialize();\r\n}\r\n\r\nextend(ToolTip, CanvasJSObject);\r\n\r\nToolTip.prototype._initialize = function () {\r\n\r\n  if (this.enabled) {\r\n    this.container = document.createElement(\"div\");\r\n    this.container.setAttribute(\"class\", \"canvasjs-chart-tooltip\");\r\n    this.container.style.position = \"absolute\";\r\n    this.container.style.height = \"auto\";\r\n    this.container.style.boxShadow = \"1px 1px 2px 2px rgba(0,0,0,0.1)\";\r\n    this.container.style.zIndex = \"1000\";\r\n    //this.container.style.pointerEvents = \"none\";\r\n    this.container.style.display = \"none\";\r\n    //this.container.style.whiteSpace = \"no-wrap\";\r\n\r\n    var toolTipHtml = \"<div style=\\\" width: auto;\";\r\n    toolTipHtml += \"height: auto;\";\r\n    toolTipHtml += \"min-width: 50px;\";\r\n    toolTipHtml += \"line-height: auto;\";\r\n    toolTipHtml += \"margin: 0px 0px 0px 0px;\";\r\n    toolTipHtml += \"padding: 5px;\";\r\n    toolTipHtml += \"font-family: Calibri, Arial, Georgia, serif;\";\r\n    toolTipHtml += \"font-weight: normal;\";\r\n    toolTipHtml += \"font-style: \" + (isCanvasSupported ? \"italic;\" : \"normal;\");\r\n    toolTipHtml += \"font-size: 14px;\";\r\n    toolTipHtml += \"color: #000000;\";\r\n    toolTipHtml += \"text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);\";\r\n    toolTipHtml += \"text-align: left;\";\r\n    toolTipHtml += \"border: 2px solid gray;\";\r\n\r\n    //Older browsers like IE8- don't support alpha values\r\n    toolTipHtml += isCanvasSupported ? \"background: rgba(255,255,255,.9);\" : \"background: rgb(255,255,255);\";\r\n\r\n    toolTipHtml += \"text-indent: 0px;\";\r\n    toolTipHtml += \"white-space: nowrap;\";\r\n    //toolTipHtml += \"pointer-events:none;\";\r\n    toolTipHtml += \"border-radius: 5px;\";\r\n\r\n    //Disable Text Selection\r\n    toolTipHtml += \"-moz-user-select:none;\";\r\n    toolTipHtml += \"-khtml-user-select: none;\";\r\n    toolTipHtml += \"-webkit-user-select: none;\";\r\n    toolTipHtml += \"-ms-user-select: none;\";\r\n    toolTipHtml += \"user-select: none;\";\r\n\r\n    //toolTipHtml += \"opacity: 0;\";\r\n    //toolTipHtml += \"filter: progid: DXImageTransform.Microsoft.gradient(GradientType = 0, startColorstr = '#4cffffff', endColorstr = '#4cffffff');\";\r\n\r\n    if (!isCanvasSupported) {\r\n      //toolTipHtml += \"-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=90)'\";\r\n      //-ms-filter: \"progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')\";\r\n      /* For IE 5.5 - 7 */\r\n      toolTipHtml += \"filter: alpha(opacity = 90);\";\r\n      toolTipHtml += \"filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');\";\r\n    }\r\n\r\n    toolTipHtml += \"} \\\"> Sample Tooltip</div>\";\r\n\r\n    this.container.innerHTML = toolTipHtml;\r\n    this.contentDiv = this.container.firstChild;\r\n\r\n\r\n    this.container.style.borderRadius = this.contentDiv.style.borderRadius;\r\n    this.chart._canvasJSContainer.appendChild(this.container);\r\n  }\r\n}\r\n\r\nToolTip.prototype.mouseMoveHandler = function (x, y) {\r\n\r\n  if (!(this._lastUpdated && (new Date().getTime() - this._lastUpdated) < 40)) {\r\n    this._lastUpdated = new Date().getTime();\r\n    this._updateToolTip(x, y);\r\n  }\r\n}\r\n\r\nToolTip.prototype._updateToolTip = function (mouseX, mouseY) {\r\n  //return;\r\n\r\n  if (this.chart.disableToolTip) // Disabled during animation, etc\r\n    return;\r\n\r\n  if (typeof (mouseX) === \"undefined\" || typeof (mouseY) === \"undefined\") {\r\n    if (isNaN(this._prevX) || isNaN(this._prevY))\r\n      return;\r\n    else {\r\n      mouseX = this._prevX;\r\n      mouseY = this._prevY;\r\n    }\r\n  } else {\r\n    this._prevX = mouseX;\r\n    this._prevY = mouseY;\r\n  }\r\n\r\n\r\n  var dataPoint = null;\r\n  var dataSeries = null;\r\n  var toolTipContent = \"\";\r\n  var entries = [];\r\n  var toolTipRight;\r\n  var toolTipBottom;\r\n  var x = 0;\r\n\r\n  if (this.shared && this.enabled && this.chart.plotInfo.axisPlacement !== \"none\") {\r\n    // && this.chart.plotInfo.axisPlacement !== \"none\"\r\n    if (this.chart.plotInfo.axisPlacement === \"xySwapped\") {\r\n      x = (this.chart.axisX.viewportMaximum - this.chart.axisX.viewportMinimum) / this.chart.axisX.lineCoordinates.height * ((this.chart.axisX.lineCoordinates.y2 - mouseY)) + this.chart.axisX.viewportMinimum;\r\n    }\r\n    else {\r\n      x = (this.chart.axisX.viewportMaximum - this.chart.axisX.viewportMinimum) / this.chart.axisX.lineCoordinates.width * (mouseX - this.chart.axisX.lineCoordinates.x1) + this.chart.axisX.viewportMinimum;\r\n    }\r\n\r\n    var nearbyEntries = [];\r\n\r\n    for (var i = 0; i < this.chart.data.length; i++) {\r\n      var entry = this.chart.data[i].getDataPointAtX(x, true);\r\n\r\n      if (entry && entry.index >= 0) {\r\n        entry.dataSeries = this.chart.data[i];\r\n\r\n        if (entry.dataPoint.y !== null)\r\n          nearbyEntries.push(entry);\r\n      }\r\n    }\r\n\r\n    if (nearbyEntries.length === 0)\r\n      return;\r\n\r\n    nearbyEntries.sort(function (entry1, entry2) {\r\n      return entry1.distance - entry2.distance;\r\n    });\r\n\r\n    var closest = nearbyEntries[0];\r\n\r\n    for (i = 0; i < nearbyEntries.length; i++) {\r\n\r\n      if (nearbyEntries[i].dataPoint.x.valueOf() === closest.dataPoint.x.valueOf())\r\n        entries.push(nearbyEntries[i]);\r\n    }\r\n\r\n    nearbyEntries = null;\r\n\r\n  } else {\r\n\r\n    var dataPointInfo = this.chart.getDataPointAtXY(mouseX, mouseY, true);\r\n    //dataPointInfo = null;\r\n\r\n    if (dataPointInfo) {\r\n      this.currentDataPointIndex = dataPointInfo.dataPointIndex;\r\n      this.currentSeriesIndex = dataPointInfo.dataSeries.index;\r\n    } else if (isCanvasSupported) {\r\n\r\n      var id = getObjectId(mouseX, mouseY, this.chart._eventManager.ghostCtx);\r\n      if (id > 0 && typeof this.chart._eventManager.objectMap[id] !== \"undefined\") {//DataPoint/DataSeries event\r\n        var eventObject = this.chart._eventManager.objectMap[id];\r\n\r\n        if (eventObject.objectType === \"legendItem\")\r\n          return;\r\n\r\n        //if (this.currentSeriesIndex === eventObject.dataSeriesIndex && this.currentDataPointIndex === eventObject.dataPointIndex)\r\n        //  return;\r\n        //else {\r\n        this.currentSeriesIndex = eventObject.dataSeriesIndex;\r\n        this.currentDataPointIndex = eventObject.dataPointIndex >= 0 ? eventObject.dataPointIndex : -1;\r\n        //}\r\n\r\n        //window.console.log(\"id: \" + id + \"; hex: \" + intToHexColorString(id));\r\n      } else\r\n        this.currentDataPointIndex = -1;\r\n\r\n    } else\r\n      this.currentDataPointIndex = -1;\r\n\r\n\r\n    if (this.currentSeriesIndex >= 0) {\r\n\r\n      dataSeries = this.chart.data[this.currentSeriesIndex];\r\n\r\n      var entry = {\r\n      };\r\n\r\n      if (this.currentDataPointIndex >= 0) {\r\n        dataPoint = dataSeries.dataPoints[this.currentDataPointIndex];\r\n\r\n        entry.dataSeries = dataSeries;\r\n        entry.dataPoint = dataPoint;\r\n        entry.index = this.currentDataPointIndex;\r\n        entry.distance = Math.abs(dataPoint.x - x);\r\n      } else if (this.enabled && (dataSeries.type === \"line\" || dataSeries.type === \"stepLine\" || dataSeries.type === \"spline\" || dataSeries.type === \"area\" || dataSeries.type === \"stepArea\"\r\n          || dataSeries.type === \"splineArea\" || dataSeries.type === \"stackedArea\" || dataSeries.type === \"stackedArea100\"\r\n          || dataSeries.type === \"rangeArea\" || dataSeries.type === \"rangeSplineArea\"\r\n          || dataSeries.type === \"candlestick\" || dataSeries.type === \"ohlc\")) {\r\n\r\n        //var x = (this.chart.axisX.viewportMaximum - this.chart.axisX.viewportMinimum) / this.chart.axisX.lineCoordinates.width * (mouseX - this.chart.axisX.lineCoordinates.x1) + this.chart.axisX.viewportMinimum.valueOf();\r\n        var x = dataSeries.axisX.conversionParameters.minimum + (mouseX - dataSeries.axisX.conversionParameters.reference) / dataSeries.axisX.conversionParameters.pixelPerUnit;\r\n\r\n\r\n        entry = dataSeries.getDataPointAtX(x, true);\r\n        entry.dataSeries = dataSeries;\r\n        this.currentDataPointIndex = entry.index;\r\n        dataPoint = entry.dataPoint;\r\n      } else {\r\n        //this.hide();\r\n        return;\r\n      }\r\n\r\n      if (entry.dataPoint.y !== null) {\r\n        if (entry.dataSeries.axisY) {\r\n          if (entry.dataPoint.y.length > 0) {\r\n            var unboundToViewport = 0;\r\n            for (var i = 0; i < entry.dataPoint.y.length; i++)\r\n              if (entry.dataPoint.y[i] < entry.dataSeries.axisY.viewportMinimum)\r\n                unboundToViewport--;\r\n              else if (entry.dataPoint.y[i] > entry.dataSeries.axisY.viewportMaximum)\r\n                unboundToViewport++;\r\n            if (unboundToViewport < entry.dataPoint.y.length && unboundToViewport > -entry.dataPoint.y.length)\r\n              entries.push(entry);\r\n          } else {\r\n            if (entry.dataPoint.y >= entry.dataSeries.axisY.viewportMinimum && entry.dataPoint.y <= entry.dataSeries.axisY.viewportMaximum)\r\n              entries.push(entry);\r\n          }\r\n        } else\r\n        entries.push(entry);\r\n    }\r\n\r\n    }\r\n  }\r\n\r\n\r\n  if (entries.length > 0) {\r\n\r\n    this.highlightObjects(entries);\r\n\r\n    if (this.enabled) {\r\n\r\n      var toolTipInnerHtml = \"\";\r\n\r\n      toolTipInnerHtml = this.getToolTipInnerHTML({ entries: entries });\r\n\r\n      if (toolTipInnerHtml !== null) {\r\n        this.contentDiv.innerHTML = toolTipInnerHtml;\r\n\r\n        this.contentDiv.innerHTML = toolTipInnerHtml;\r\n\r\n        var previouslyHidden = false;\r\n        if (this.container.style.display === \"none\") {\r\n          previouslyHidden = true;\r\n          this.container.style.display = \"block\";\r\n        }\r\n\r\n        try {\r\n          this.contentDiv.style.background = this.backgroundColor ? this.backgroundColor : isCanvasSupported ? \"rgba(255,255,255,.9)\" : \"rgb(255,255,255)\";\r\n\r\n          this.contentDiv.style.borderRightColor = this.contentDiv.style.borderLeftColor = this.contentDiv.style.borderColor = this.borderColor ? this.borderColor : entries[0].dataPoint.color ? entries[0].dataPoint.color : entries[0].dataSeries.color ? entries[0].dataSeries.color : entries[0].dataSeries._colorSet[entries[0].index % entries[0].dataSeries._colorSet.length];\r\n\r\n          this.contentDiv.style.borderWidth = (this.borderThickness || this.borderThickness === 0) ? this.borderThickness + \"px\" : 2 + \"px\";\r\n\r\n          this.contentDiv.style.borderRadius = (this.cornerRadius || this.cornerRadius === 0) ? this.cornerRadius + \"px\" : 5 + \"px\";\r\n          this.container.style.borderRadius = this.contentDiv.style.borderRadius;\r\n\r\n\r\n          this.contentDiv.style.fontSize = (this.fontSize || this.fontSize === 0) ? this.fontSize + \"px\" : 14 + \"px\";\r\n          this.contentDiv.style.color = this.fontColor ? this.fontColor : \"#000000\";\r\n          this.contentDiv.style.fontFamily = this.fontFamily ? this.fontFamily : \"Calibri, Arial, Georgia, serif;\";\r\n          this.contentDiv.style.fontWeight = this.fontWeight ? this.fontWeight : \"normal\";\r\n          this.contentDiv.style.fontStyle = this.fontStyle ? this.fontStyle : isCanvasSupported ? \"italic\" : \"normal\";\r\n\r\n        } catch (e) {\r\n        }\r\n\r\n        var toolTipLeft;\r\n\r\n        if (entries[0].dataSeries.type === \"pie\" || entries[0].dataSeries.type === \"doughnut\" || entries[0].dataSeries.type === \"funnel\" || entries[0].dataSeries.type === \"bar\" || entries[0].dataSeries.type === \"rangeBar\" || entries[0].dataSeries.type === \"stackedBar\" || entries[0].dataSeries.type === \"stackedBar100\") {\r\n          toolTipLeft = mouseX - 10 - this.container.clientWidth;\r\n        } else {\r\n          //toolTipLeft = (((this.chart.axisX.lineCoordinates.width / Math.abs(this.chart.axisX.viewportMaximum - this.chart.axisX.viewportMinimum)) * Math.abs(entries[0].dataPoint.x - this.chart.axisX.viewportMinimum)) + this.chart.axisX.lineCoordinates.x1 + .5) - this.container.clientWidth << 0;\r\n          toolTipLeft = entries[0].dataSeries.axisX.conversionParameters.reference + entries[0].dataSeries.axisX.conversionParameters.pixelPerUnit * (entries[0].dataPoint.x - entries[0].dataSeries.axisX.conversionParameters.minimum) - this.container.clientWidth << 0;\r\n          toolTipLeft -= 10;\r\n        }\r\n\r\n\r\n        if (toolTipLeft < 0) {\r\n          toolTipLeft += this.container.clientWidth + 20;\r\n        }\r\n\r\n        if (toolTipLeft + this.container.clientWidth > this.chart._container.clientWidth)\r\n          toolTipLeft = Math.max(0, this.chart._container.clientWidth - this.container.clientWidth);\r\n\r\n        toolTipLeft += \"px\";\r\n\r\n        if (entries.length === 1 && !this.shared && (entries[0].dataSeries.type === \"line\" || entries[0].dataSeries.type === \"stepLine\" || entries[0].dataSeries.type === \"spline\" || entries[0].dataSeries.type === \"area\" || entries[0].dataSeries.type === \"stepArea\" || entries[0].dataSeries.type === \"splineArea\" || entries[0].dataSeries.type === \"stackedArea\" || entries[0].dataSeries.type === \"stackedArea100\")) {\r\n          //toolTipBottom = (entries[0].dataSeries.axisY.lineCoordinates.y2 - entries[0].dataSeries.axisY.lineCoordinates.height / Math.abs(entries[0].dataSeries.axisY.maximum - entries[0].dataSeries.axisY.viewportMinimum) * Math.abs(entries[0].dataPoint.y - entries[0].dataSeries.axisY.viewportMinimum) + .5) << 0;\r\n          toolTipBottom = entries[0].dataSeries.axisY.conversionParameters.reference + entries[0].dataSeries.axisY.conversionParameters.pixelPerUnit * (entries[0].dataPoint.y - entries[0].dataSeries.axisY.viewportMinimum) + .5 << 0;\r\n        } else if (entries[0].dataSeries.type === \"bar\" || entries[0].dataSeries.type === \"rangeBar\" || entries[0].dataSeries.type === \"stackedBar\" || entries[0].dataSeries.type === \"stackedBar100\") {\r\n          //toolTipBottom = (entries[0].dataSeries.axisX.lineCoordinates.y2 - entries[0].dataSeries.axisX.lineCoordinates.height / Math.abs(entries[0].dataSeries.axisX.maximum - entries[0].dataSeries.axisX.viewportMinimum) * Math.abs(entries[0].dataPoint.x - entries[0].dataSeries.axisX.viewportMinimum) + .5) << 0;\r\n          toolTipBottom = entries[0].dataSeries.axisX.conversionParameters.reference + entries[0].dataSeries.axisX.conversionParameters.pixelPerUnit * (entries[0].dataPoint.x - entries[0].dataSeries.axisX.viewportMinimum) + .5 << 0;\r\n        }\r\n        else {\r\n          toolTipBottom = mouseY;\r\n        }\r\n\r\n        toolTipBottom = (-toolTipBottom + 10);\r\n\r\n        if (toolTipBottom + this.container.clientHeight + 5 > 0) {\r\n          toolTipBottom -= toolTipBottom + this.container.clientHeight + 5 - 0\r\n        }\r\n\r\n        toolTipBottom += \"px\";\r\n\r\n        //this.container.style.right = toolTipRight;\r\n        this.container.style.left = toolTipLeft;\r\n        this.container.style.bottom = toolTipBottom;\r\n\r\n        if (!this.animationEnabled || previouslyHidden) {\r\n          this.disableAnimation();\r\n        }\r\n        else\r\n          this.enableAnimation();\r\n      } else {\r\n        this.hide(false);\r\n      }\r\n\r\n    }\r\n\r\n    //if (isDebugMode)\r\n    //  console.log(\"searchX: \" + x + \" x: \" + searchResult.dataPoint.x + \"; y: \" + searchResult.dataPoint.y + \"; distance: \" + searchResult.distance + \"; steps: \" + steps);\r\n  }\r\n}\r\n\r\n\r\nToolTip.prototype.highlightObjects = function (entries) {\r\n  //if (!this.enabled)\r\n  //\treturn;\r\n\r\n  //this.chart.overlaidCanvasCtx.clearRect(0, 0, this.chart.overlaidCanvas.width, this.chart.overlaidCanvas.height);\r\n  var overlaidCanvasCtx = this.chart.overlaidCanvasCtx;\r\n  this.chart.resetOverlayedCanvas();\r\n\r\n  overlaidCanvasCtx.clearRect(0,0,this.chart.width, this.chart.height);\r\n  overlaidCanvasCtx.save();\r\n\r\n\r\n  var plotArea = this.chart.plotArea;\r\n  var offset = 0;\r\n\r\n  overlaidCanvasCtx.rect(plotArea.x1, plotArea.y1, plotArea.x2 - plotArea.x1, plotArea.y2 - plotArea.y1);\r\n  overlaidCanvasCtx.clip();\r\n\r\n\r\n  for (var i = 0; i < entries.length; i++) {\r\n\r\n    var entry = entries[i];\r\n\r\n    var eventObject = this.chart._eventManager.objectMap[entry.dataSeries.dataPointIds[entry.index]];\r\n\r\n    if (!eventObject || !eventObject.objectType || eventObject.objectType !== \"dataPoint\")\r\n      continue;\r\n\r\n    var dataSeries = this.chart.data[eventObject.dataSeriesIndex];\r\n    var dataPoint = dataSeries.dataPoints[eventObject.dataPointIndex];\r\n    var index = eventObject.dataPointIndex;\r\n\r\n    if (dataPoint.highlightEnabled !== false && (dataSeries.highlightEnabled === true || dataPoint.highlightEnabled === true)) {\r\n\r\n      if (dataSeries.type === \"line\" || dataSeries.type === \"stepLine\" || dataSeries.type === \"spline\" || dataSeries.type === \"scatter\"\r\n        || dataSeries.type === \"area\" || dataSeries.type === \"stepArea\" || dataSeries.type === \"splineArea\"\r\n        || dataSeries.type === \"stackedArea\" || dataSeries.type === \"stackedArea100\"\r\n        || dataSeries.type === \"rangeArea\" || dataSeries.type === \"rangeSplineArea\") {\r\n        var markerProps = dataSeries.getMarkerProperties(index, eventObject.x1, eventObject.y1, this.chart.overlaidCanvasCtx);\r\n        markerProps.size = Math.max(markerProps.size * 1.5 << 0, 10);\r\n\r\n        markerProps.borderColor = markerProps.borderColor || \"#FFFFFF\";\r\n        markerProps.borderThickness = markerProps.borderThickness || Math.ceil(markerProps.size * .1);\r\n\r\n        //overlaidCanvasCtx.globalAlpha = .8;\r\n        RenderHelper.drawMarkers([markerProps]);\r\n        //overlaidCanvasCtx.globalAlpha = .8;\r\n\r\n        if (typeof (eventObject.y2) !== \"undefined\") {\r\n\r\n          var markerProps = dataSeries.getMarkerProperties(index, eventObject.x1, eventObject.y2, this.chart.overlaidCanvasCtx);\r\n          markerProps.size = Math.max(markerProps.size * 1.5 << 0, 10);\r\n\r\n          markerProps.borderColor = markerProps.borderColor || \"#FFFFFF\";\r\n          markerProps.borderThickness = markerProps.borderThickness || Math.ceil(markerProps.size * .1);\r\n\r\n          //overlaidCanvasCtx.globalAlpha = .8;\r\n          RenderHelper.drawMarkers([markerProps]);\r\n          //overlaidCanvasCtx.globalAlpha = .8;\r\n        }\r\n      } else if (dataSeries.type === \"bubble\") {\r\n        var markerProps = dataSeries.getMarkerProperties(index, eventObject.x1, eventObject.y1, this.chart.overlaidCanvasCtx);\r\n        markerProps.size = eventObject.size;\r\n        markerProps.color = \"white\";\r\n        markerProps.borderColor = \"white\";\r\n        //markerProps.borderThickness = 2;\r\n        overlaidCanvasCtx.globalAlpha = .3;\r\n        RenderHelper.drawMarkers([markerProps]);\r\n        overlaidCanvasCtx.globalAlpha = 1;\r\n      } else if (dataSeries.type === \"column\" || dataSeries.type === \"stackedColumn\" || dataSeries.type === \"stackedColumn100\"\r\n        || dataSeries.type === \"bar\" || dataSeries.type === \"rangeBar\" || dataSeries.type === \"stackedBar\" || dataSeries.type === \"stackedBar100\"\r\n        || dataSeries.type === \"rangeColumn\") {\r\n        drawRect(overlaidCanvasCtx, eventObject.x1, eventObject.y1, eventObject.x2, eventObject.y2, \"white\", 0, null, false, false, false, false, .3);\r\n      }\r\n      else if (dataSeries.type === \"pie\" || dataSeries.type === \"doughnut\") {\r\n        drawSegment(overlaidCanvasCtx, eventObject.center, eventObject.radius, \"white\", dataSeries.type, eventObject.startAngle, eventObject.endAngle, .3, eventObject.percentInnerRadius);\r\n      } else if (dataSeries.type === \"candlestick\") {\r\n\r\n        overlaidCanvasCtx.globalAlpha = 1;\r\n        overlaidCanvasCtx.strokeStyle = eventObject.color;\r\n        overlaidCanvasCtx.lineWidth = eventObject.borderThickness * 2;\r\n        offset = (overlaidCanvasCtx.lineWidth) % 2 === 0 ? 0 : .5;\r\n\r\n        overlaidCanvasCtx.beginPath();\r\n        overlaidCanvasCtx.moveTo(eventObject.x3 - offset, eventObject.y2);\r\n        overlaidCanvasCtx.lineTo(eventObject.x3 - offset, Math.min(eventObject.y1, eventObject.y4));\r\n        overlaidCanvasCtx.stroke();\r\n\r\n        overlaidCanvasCtx.beginPath();\r\n        overlaidCanvasCtx.moveTo(eventObject.x3 - offset, Math.max(eventObject.y1, eventObject.y4));\r\n        overlaidCanvasCtx.lineTo(eventObject.x3 - offset, eventObject.y3);\r\n        overlaidCanvasCtx.stroke();\r\n\r\n        drawRect(overlaidCanvasCtx, eventObject.x1, Math.min(eventObject.y1, eventObject.y4), eventObject.x2, Math.max(eventObject.y1, eventObject.y4), \"transparent\", eventObject.borderThickness * 2, eventObject.color, false, false, false, false);\r\n        overlaidCanvasCtx.globalAlpha = 1;\r\n\r\n      } else if (dataSeries.type === \"ohlc\") {\r\n        overlaidCanvasCtx.globalAlpha = 1;\r\n\r\n        overlaidCanvasCtx.strokeStyle = eventObject.color;\r\n        overlaidCanvasCtx.lineWidth = eventObject.borderThickness * 2;\r\n\r\n        offset = (overlaidCanvasCtx.lineWidth) % 2 === 0 ? 0 : .5;\r\n\r\n        overlaidCanvasCtx.beginPath();\r\n        overlaidCanvasCtx.moveTo(eventObject.x3 - offset, eventObject.y2);\r\n        overlaidCanvasCtx.lineTo(eventObject.x3 - offset, eventObject.y3);\r\n        overlaidCanvasCtx.stroke();\r\n\r\n        overlaidCanvasCtx.beginPath();\r\n        overlaidCanvasCtx.moveTo(eventObject.x3, eventObject.y1);\r\n        overlaidCanvasCtx.lineTo(eventObject.x1, eventObject.y1);\r\n        overlaidCanvasCtx.stroke();\r\n\r\n        overlaidCanvasCtx.beginPath();\r\n        overlaidCanvasCtx.moveTo(eventObject.x3, eventObject.y4);\r\n        overlaidCanvasCtx.lineTo(eventObject.x2, eventObject.y4);\r\n        overlaidCanvasCtx.stroke();\r\n\r\n        overlaidCanvasCtx.globalAlpha = 1;\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  overlaidCanvasCtx.restore();\r\n  overlaidCanvasCtx.globalAlpha = 1;\r\n  overlaidCanvasCtx.beginPath();\r\n\r\n  return;\r\n}\r\n\r\nToolTip.prototype.getToolTipInnerHTML = function (e) {\r\n  var entries = e.entries;\r\n  var toolTipInnerHtml = null;\r\n  var dataSeries = null;\r\n  var dataPoint = null;\r\n  var index = 0;\r\n  var color = null;\r\n  var toolTipContent = \"\";\r\n\r\n  var isToolTipDefinedInData = true;\r\n  for (var i = 0; i < entries.length; i++) {\r\n    if (entries[i].dataSeries.toolTipContent || entries[i].dataPoint.toolTipContent) {\r\n      isToolTipDefinedInData = false;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (isToolTipDefinedInData && ((this.content && typeof (this.content) === \"function\") || this.contentFormatter)) {\r\n\r\n    var param = {\r\n      chart: this.chart, toolTip: this._options, entries: entries\r\n    };\r\n    toolTipInnerHtml = this.contentFormatter ? this.contentFormatter(param) : this.content(param);\r\n\r\n  } else {\r\n\r\n    if (this.shared && this.chart.plotInfo.axisPlacement !== \"none\") {\r\n\r\n      var toolTipInnerHtmlPrefix = \"\";\r\n\r\n      for (var i = 0; i < entries.length; i++) {\r\n        dataSeries = entries[i].dataSeries;\r\n        dataPoint = entries[i].dataPoint;\r\n        index = entries[i].index;\r\n\r\n        toolTipContent = \"\";\r\n\r\n        if (i === 0 && isToolTipDefinedInData && !this.content) {\r\n          toolTipInnerHtmlPrefix += typeof (this.chart.axisX.labels[dataPoint.x]) !== \"undefined\" ? this.chart.axisX.labels[dataPoint.x] : \"{x}\";\r\n          toolTipInnerHtmlPrefix += \"</br>\";\r\n          toolTipInnerHtmlPrefix = this.chart.replaceKeywordsWithValue(toolTipInnerHtmlPrefix, dataPoint, dataSeries, index);\r\n        }\r\n\r\n        //Allows disabling of toolTip for individual dataPoints/dataSeries\r\n        if (dataPoint.toolTipContent === null || (typeof (dataPoint.toolTipContent) === \"undefined\" && dataSeries._options.toolTipContent === null))\r\n          continue;\r\n\r\n\r\n        if (dataSeries.type === \"line\" || dataSeries.type === \"stepLine\" || dataSeries.type === \"spline\" || dataSeries.type === \"area\" || dataSeries.type === \"stepArea\" || dataSeries.type === \"splineArea\" || dataSeries.type === \"column\" || dataSeries.type === \"bar\" || dataSeries.type === \"scatter\"\r\n        || dataSeries.type === \"stackedColumn\" || dataSeries.type === \"stackedColumn100\" || dataSeries.type === \"stackedBar\" || dataSeries.type === \"stackedBar100\"\r\n        || dataSeries.type === \"stackedArea\" || dataSeries.type === \"stackedArea100\") {\r\n          toolTipContent += dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof (this.content) !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>{name}:</span>&nbsp;&nbsp;{y}\";\r\n        }\r\n        else if (dataSeries.type === \"bubble\") {\r\n          toolTipContent += dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof (this.content) !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}\";\r\n        } else if (dataSeries.type === \"pie\" || dataSeries.type === \"doughnut\" || dataSeries.type === \"funnel\") {\r\n          toolTipContent += dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof (this.content) !== \"function\" ? this.content : \"&nbsp;&nbsp;{y}\";\r\n        } else if (dataSeries.type === \"rangeColumn\" || dataSeries.type === \"rangeBar\" || dataSeries.type === \"rangeArea\" || dataSeries.type === \"rangeSplineArea\") {\r\n          toolTipContent += dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof (this.content) !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>{name}:</span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}\";\r\n        } else if (dataSeries.type === \"candlestick\" || dataSeries.type === \"ohlc\") {\r\n          toolTipContent += dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof (this.content) !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>{name}:</span>\"\r\n                  + \"<br/>Open: &nbsp;&nbsp;{y[0]}\"\r\n                  + \"<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}\"\r\n                  + \"<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}\"\r\n                  + \"<br/>Close: &nbsp;&nbsp;{y[3]}\";\r\n        }\r\n\r\n        if (toolTipInnerHtml === null)\r\n          toolTipInnerHtml = \"\";\r\n\r\n\r\n        if (this.reversed === true) {\r\n\r\n          toolTipInnerHtml = this.chart.replaceKeywordsWithValue(toolTipContent, dataPoint, dataSeries, index) + toolTipInnerHtml;\r\n\r\n          if (i < entries.length - 1)\r\n            toolTipInnerHtml = \"</br>\" + toolTipInnerHtml;\r\n\r\n        } else {\r\n\r\n          toolTipInnerHtml += this.chart.replaceKeywordsWithValue(toolTipContent, dataPoint, dataSeries, index);\r\n\r\n          if (i < entries.length - 1)\r\n            toolTipInnerHtml += \"</br>\";\r\n\r\n        }\r\n\r\n      }\r\n\r\n      if (toolTipInnerHtml !== null)\r\n        toolTipInnerHtml = toolTipInnerHtmlPrefix + toolTipInnerHtml;\r\n\r\n    } else {\r\n\r\n      dataSeries = entries[0].dataSeries;\r\n      dataPoint = entries[0].dataPoint;\r\n      index = entries[0].index;\r\n\r\n      //Allows disabling of toolTip for individual dataPoints/dataSeries\r\n      if (dataPoint.toolTipContent === null || (typeof (dataPoint.toolTipContent) === \"undefined\" && dataSeries._options.toolTipContent === null))\r\n        return null;\r\n\r\n\r\n      if (dataSeries.type === \"line\" || dataSeries.type === \"stepLine\" || dataSeries.type === \"spline\" || dataSeries.type === \"area\" || dataSeries.type === \"stepArea\" || dataSeries.type === \"splineArea\" || dataSeries.type === \"column\" || dataSeries.type === \"bar\" || dataSeries.type === \"scatter\"\r\n        || dataSeries.type === \"stackedColumn\" || dataSeries.type === \"stackedColumn100\" || dataSeries.type === \"stackedBar\" || dataSeries.type === \"stackedBar100\"\r\n        || dataSeries.type === \"stackedArea\" || dataSeries.type === \"stackedArea100\") {\r\n        toolTipContent = dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof (this.content) !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>\" + (dataPoint.label ? \"{label}\" : \"{x}\") + \" :</span>&nbsp;&nbsp;{y}\";\r\n      } else if (dataSeries.type === \"bubble\") {\r\n        toolTipContent = dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof (this.content) !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>\" + (dataPoint.label ? \"{label}\" : \"{x}\") + \":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}\";\r\n      } else if (dataSeries.type === \"pie\" || dataSeries.type === \"doughnut\" || dataSeries.type === \"funnel\") {\r\n        toolTipContent = dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof (this.content) !== \"function\" ? this.content : (dataPoint.name ? \"{name}:&nbsp;&nbsp;\" : dataPoint.label ? \"{label}:&nbsp;&nbsp;\" : \"\") + \"{y}\";\r\n      } else if (dataSeries.type === \"rangeColumn\" || dataSeries.type === \"rangeBar\" || dataSeries.type === \"rangeArea\" || dataSeries.type === \"rangeSplineArea\") {\r\n        toolTipContent = dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof (this.content) !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>\" + (dataPoint.label ? \"{label}\" : \"{x}\") + \" :</span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}\";\r\n      } else if (dataSeries.type === \"candlestick\" || dataSeries.type === \"ohlc\") {\r\n        toolTipContent = dataPoint.toolTipContent ? dataPoint.toolTipContent : dataSeries.toolTipContent ? dataSeries.toolTipContent : this.content && typeof (this.content) !== \"function\" ? this.content : \"<span style='\\\"'color:{color};'\\\"'>\" + (dataPoint.label ? \"{label}\" : \"{x}\") + \"</span>\"\r\n          + \"<br/>Open: &nbsp;&nbsp;{y[0]}\"\r\n          + \"<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}\"\r\n          + \"<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}\"\r\n          + \"<br/>Close: &nbsp;&nbsp;{y[3]}\";\r\n      }\r\n\r\n      if (toolTipInnerHtml === null)\r\n        toolTipInnerHtml = \"\";\r\n\r\n      toolTipInnerHtml += this.chart.replaceKeywordsWithValue(toolTipContent, dataPoint, dataSeries, index);\r\n    }\r\n  }\r\n\r\n  return toolTipInnerHtml;\r\n}\r\n\r\nToolTip.prototype.enableAnimation = function () {\r\n  if (this.container.style.WebkitTransition)\r\n    return;\r\n\r\n  this.container.style.WebkitTransition = \"left .2s ease-out, bottom .2s ease-out\";\r\n  this.container.style.MozTransition = \"left .2s ease-out, bottom .2s ease-out\";\r\n  this.container.style.MsTransition = \"left .2s ease-out, bottom .2s ease-out\";\r\n  this.container.style.transition = \"left .2s ease-out, bottom .2s ease-out\";\r\n}\r\n\r\nToolTip.prototype.disableAnimation = function () {\r\n  if (!this.container.style.WebkitTransition)\r\n    return;\r\n\r\n  this.container.style.WebkitTransition = \"\";\r\n  this.container.style.MozTransition = \"\";\r\n  this.container.style.MsTransition = \"\";\r\n  this.container.style.transition = \"\";\r\n}\r\n\r\nToolTip.prototype.hide = function (resetOverlayedCanvas) {\r\n  if (!this.enabled)\r\n    return;\r\n\r\n  resetOverlayedCanvas = typeof (resetOverlayedCanvas) === \"undefined\" ? true : resetOverlayedCanvas;\r\n\r\n  this.container.style.display = \"none\";\r\n  this.currentSeriesIndex = -1;\r\n  this._prevX = NaN;\r\n  this._prevY = NaN;\r\n  //this.chart.overlaidCanvasCtx.clearRect(0, 0, this.chart.overlaidCanvas.width, this.chart.overlaidCanvas.height);\r\n  if (resetOverlayedCanvas)\r\n    this.chart.resetOverlayedCanvas();\r\n}\r\n\r\nexport default ToolTip;\r\n"]},"metadata":{},"sourceType":"module"}