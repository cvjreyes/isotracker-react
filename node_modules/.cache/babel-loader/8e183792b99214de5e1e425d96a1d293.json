{"ast":null,"code":"import _slicedToArray from \"C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"children\", \"className\", \"defaultCollapseIcon\", \"defaultEndIcon\", \"defaultExpanded\", \"defaultExpandIcon\", \"defaultParentIcon\", \"defaultSelected\", \"disabledItemsFocusable\", \"disableSelection\", \"expanded\", \"id\", \"multiSelect\", \"onBlur\", \"onFocus\", \"onKeyDown\", \"onNodeFocus\", \"onNodeSelect\", \"onNodeToggle\", \"selected\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { styled, useTheme, useThemeProps } from '@mui/material/styles';\nimport { unstable_composeClasses as composeClasses } from '@mui/core';\nimport { useControlled, useForkRef, ownerDocument, unstable_useId as useId } from '@mui/material/utils';\nimport TreeViewContext from './TreeViewContext';\nimport { DescendantProvider } from './descendants';\nimport { getTreeViewUtilityClass } from './treeViewClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes;\n  var slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getTreeViewUtilityClass, classes);\n};\n\nvar TreeViewRoot = styled('ul', {\n  name: 'MuiTreeView',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    return styles.root;\n  }\n})({\n  padding: 0,\n  margin: 0,\n  listStyle: 'none',\n  outline: 0\n});\n\nfunction isPrintableCharacter(string) {\n  return string && string.length === 1 && string.match(/\\S/);\n}\n\nfunction findNextFirstChar(firstChars, startIndex, char) {\n  for (var i = startIndex; i < firstChars.length; i += 1) {\n    if (char === firstChars[i]) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nfunction noopSelection() {\n  return false;\n}\n\nvar defaultDefaultExpanded = [];\nvar defaultDefaultSelected = [];\nvar TreeView = /*#__PURE__*/React.forwardRef(function TreeView(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiTreeView'\n  });\n\n  var children = props.children,\n      className = props.className,\n      defaultCollapseIcon = props.defaultCollapseIcon,\n      defaultEndIcon = props.defaultEndIcon,\n      _props$defaultExpande = props.defaultExpanded,\n      defaultExpanded = _props$defaultExpande === void 0 ? defaultDefaultExpanded : _props$defaultExpande,\n      defaultExpandIcon = props.defaultExpandIcon,\n      defaultParentIcon = props.defaultParentIcon,\n      _props$defaultSelecte = props.defaultSelected,\n      defaultSelected = _props$defaultSelecte === void 0 ? defaultDefaultSelected : _props$defaultSelecte,\n      _props$disabledItemsF = props.disabledItemsFocusable,\n      disabledItemsFocusable = _props$disabledItemsF === void 0 ? false : _props$disabledItemsF,\n      _props$disableSelecti = props.disableSelection,\n      disableSelection = _props$disableSelecti === void 0 ? false : _props$disableSelecti,\n      expandedProp = props.expanded,\n      idProp = props.id,\n      _props$multiSelect = props.multiSelect,\n      multiSelect = _props$multiSelect === void 0 ? false : _props$multiSelect,\n      onBlur = props.onBlur,\n      onFocus = props.onFocus,\n      onKeyDown = props.onKeyDown,\n      onNodeFocus = props.onNodeFocus,\n      onNodeSelect = props.onNodeSelect,\n      onNodeToggle = props.onNodeToggle,\n      selectedProp = props.selected,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var theme = useTheme();\n  var isRtl = theme.direction === 'rtl';\n\n  var ownerState = _extends({}, props, {\n    defaultExpanded: defaultExpanded,\n    defaultSelected: defaultSelected,\n    disabledItemsFocusable: disabledItemsFocusable,\n    disableSelection: disableSelection,\n    multiSelect: multiSelect\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  var treeId = useId(idProp);\n  var treeRef = React.useRef(null);\n  var handleRef = useForkRef(treeRef, ref);\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      focusedNodeId = _React$useState2[0],\n      setFocusedNodeId = _React$useState2[1];\n\n  var nodeMap = React.useRef({});\n  var firstCharMap = React.useRef({});\n\n  var _useControlled = useControlled({\n    controlled: expandedProp,\n    default: defaultExpanded,\n    name: 'TreeView',\n    state: 'expanded'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      expanded = _useControlled2[0],\n      setExpandedState = _useControlled2[1];\n\n  var _useControlled3 = useControlled({\n    controlled: selectedProp,\n    default: defaultSelected,\n    name: 'TreeView',\n    state: 'selected'\n  }),\n      _useControlled4 = _slicedToArray(_useControlled3, 2),\n      selected = _useControlled4[0],\n      setSelectedState = _useControlled4[1];\n  /*\r\n   * Status Helpers\r\n   */\n\n\n  var isExpanded = React.useCallback(function (id) {\n    return Array.isArray(expanded) ? expanded.indexOf(id) !== -1 : false;\n  }, [expanded]);\n  var isExpandable = React.useCallback(function (id) {\n    return nodeMap.current[id] && nodeMap.current[id].expandable;\n  }, []);\n  var isSelected = React.useCallback(function (id) {\n    return Array.isArray(selected) ? selected.indexOf(id) !== -1 : selected === id;\n  }, [selected]);\n  var isDisabled = React.useCallback(function (id) {\n    var node = nodeMap.current[id]; // This can be called before the node has been added to the node map.\n\n    if (!node) {\n      return false;\n    }\n\n    if (node.disabled) {\n      return true;\n    }\n\n    while (node.parentId != null) {\n      node = nodeMap.current[node.parentId];\n\n      if (node.disabled) {\n        return true;\n      }\n    }\n\n    return false;\n  }, []);\n\n  var isFocused = function isFocused(id) {\n    return focusedNodeId === id;\n  };\n  /*\r\n   * Child Helpers\r\n   */\n  // Using Object.keys -> .map to mimic Object.values we should replace with Object.values() once we stop IE11 support.\n\n\n  var getChildrenIds = function getChildrenIds(id) {\n    return Object.keys(nodeMap.current).map(function (key) {\n      return nodeMap.current[key];\n    }).filter(function (node) {\n      return node.parentId === id;\n    }).sort(function (a, b) {\n      return a.index - b.index;\n    }).map(function (child) {\n      return child.id;\n    });\n  };\n\n  var getNavigableChildrenIds = function getNavigableChildrenIds(id) {\n    var childrenIds = getChildrenIds(id);\n\n    if (!disabledItemsFocusable) {\n      childrenIds = childrenIds.filter(function (node) {\n        return !isDisabled(node);\n      });\n    }\n\n    return childrenIds;\n  };\n  /*\r\n   * Node Helpers\r\n   */\n\n\n  var getNextNode = function getNextNode(id) {\n    // If expanded get first child\n    if (isExpanded(id) && getNavigableChildrenIds(id).length > 0) {\n      return getNavigableChildrenIds(id)[0];\n    }\n\n    var node = nodeMap.current[id];\n\n    while (node != null) {\n      // Try to get next sibling\n      var siblings = getNavigableChildrenIds(node.parentId);\n      var nextSibling = siblings[siblings.indexOf(node.id) + 1];\n\n      if (nextSibling) {\n        return nextSibling;\n      } // If the sibling does not exist, go up a level to the parent and try again.\n\n\n      node = nodeMap.current[node.parentId];\n    }\n\n    return null;\n  };\n\n  var getPreviousNode = function getPreviousNode(id) {\n    var node = nodeMap.current[id];\n    var siblings = getNavigableChildrenIds(node.parentId);\n    var nodeIndex = siblings.indexOf(id);\n\n    if (nodeIndex === 0) {\n      return node.parentId;\n    }\n\n    var currentNode = siblings[nodeIndex - 1];\n\n    while (isExpanded(currentNode) && getNavigableChildrenIds(currentNode).length > 0) {\n      currentNode = getNavigableChildrenIds(currentNode).pop();\n    }\n\n    return currentNode;\n  };\n\n  var getLastNode = function getLastNode() {\n    var lastNode = getNavigableChildrenIds(null).pop();\n\n    while (isExpanded(lastNode)) {\n      lastNode = getNavigableChildrenIds(lastNode).pop();\n    }\n\n    return lastNode;\n  };\n\n  var getFirstNode = function getFirstNode() {\n    return getNavigableChildrenIds(null)[0];\n  };\n\n  var getParent = function getParent(id) {\n    return nodeMap.current[id].parentId;\n  };\n  /**\r\n   * This is used to determine the start and end of a selection range so\r\n   * we can get the nodes between the two border nodes.\r\n   *\r\n   * It finds the nodes' common ancestor using\r\n   * a naive implementation of a lowest common ancestor algorithm\r\n   * (https://en.wikipedia.org/wiki/Lowest_common_ancestor).\r\n   * Then compares the ancestor's 2 children that are ancestors of nodeA and NodeB\r\n   * so we can compare their indexes to work out which node comes first in a depth first search.\r\n   * (https://en.wikipedia.org/wiki/Depth-first_search)\r\n   *\r\n   * Another way to put it is which node is shallower in a tr√©maux tree\r\n   * https://en.wikipedia.org/wiki/Tr%C3%A9maux_tree\r\n   */\n\n\n  var findOrderInTremauxTree = function findOrderInTremauxTree(nodeAId, nodeBId) {\n    if (nodeAId === nodeBId) {\n      return [nodeAId, nodeBId];\n    }\n\n    var nodeA = nodeMap.current[nodeAId];\n    var nodeB = nodeMap.current[nodeBId];\n\n    if (nodeA.parentId === nodeB.id || nodeB.parentId === nodeA.id) {\n      return nodeB.parentId === nodeA.id ? [nodeA.id, nodeB.id] : [nodeB.id, nodeA.id];\n    }\n\n    var aFamily = [nodeA.id];\n    var bFamily = [nodeB.id];\n    var aAncestor = nodeA.parentId;\n    var bAncestor = nodeB.parentId;\n    var aAncestorIsCommon = bFamily.indexOf(aAncestor) !== -1;\n    var bAncestorIsCommon = aFamily.indexOf(bAncestor) !== -1;\n    var continueA = true;\n    var continueB = true;\n\n    while (!bAncestorIsCommon && !aAncestorIsCommon) {\n      if (continueA) {\n        aFamily.push(aAncestor);\n        aAncestorIsCommon = bFamily.indexOf(aAncestor) !== -1;\n        continueA = aAncestor !== null;\n\n        if (!aAncestorIsCommon && continueA) {\n          aAncestor = nodeMap.current[aAncestor].parentId;\n        }\n      }\n\n      if (continueB && !aAncestorIsCommon) {\n        bFamily.push(bAncestor);\n        bAncestorIsCommon = aFamily.indexOf(bAncestor) !== -1;\n        continueB = bAncestor !== null;\n\n        if (!bAncestorIsCommon && continueB) {\n          bAncestor = nodeMap.current[bAncestor].parentId;\n        }\n      }\n    }\n\n    var commonAncestor = aAncestorIsCommon ? aAncestor : bAncestor;\n    var ancestorFamily = getChildrenIds(commonAncestor);\n    var aSide = aFamily[aFamily.indexOf(commonAncestor) - 1];\n    var bSide = bFamily[bFamily.indexOf(commonAncestor) - 1];\n    return ancestorFamily.indexOf(aSide) < ancestorFamily.indexOf(bSide) ? [nodeAId, nodeBId] : [nodeBId, nodeAId];\n  };\n\n  var getNodesInRange = function getNodesInRange(nodeA, nodeB) {\n    var _findOrderInTremauxTr = findOrderInTremauxTree(nodeA, nodeB),\n        _findOrderInTremauxTr2 = _slicedToArray(_findOrderInTremauxTr, 2),\n        first = _findOrderInTremauxTr2[0],\n        last = _findOrderInTremauxTr2[1];\n\n    var nodes = [first];\n    var current = first;\n\n    while (current !== last) {\n      current = getNextNode(current);\n      nodes.push(current);\n    }\n\n    return nodes;\n  };\n  /*\r\n   * Focus Helpers\r\n   */\n\n\n  var focus = function focus(event, id) {\n    if (id) {\n      setFocusedNodeId(id);\n\n      if (onNodeFocus) {\n        onNodeFocus(event, id);\n      }\n    }\n  };\n\n  var focusNextNode = function focusNextNode(event, id) {\n    return focus(event, getNextNode(id));\n  };\n\n  var focusPreviousNode = function focusPreviousNode(event, id) {\n    return focus(event, getPreviousNode(id));\n  };\n\n  var focusFirstNode = function focusFirstNode(event) {\n    return focus(event, getFirstNode());\n  };\n\n  var focusLastNode = function focusLastNode(event) {\n    return focus(event, getLastNode());\n  };\n\n  var focusByFirstCharacter = function focusByFirstCharacter(event, id, char) {\n    var start;\n    var index;\n    var lowercaseChar = char.toLowerCase();\n    var firstCharIds = [];\n    var firstChars = []; // This really only works since the ids are strings\n\n    Object.keys(firstCharMap.current).forEach(function (nodeId) {\n      var firstChar = firstCharMap.current[nodeId];\n      var map = nodeMap.current[nodeId];\n      var visible = map.parentId ? isExpanded(map.parentId) : true;\n      var shouldBeSkipped = disabledItemsFocusable ? false : isDisabled(nodeId);\n\n      if (visible && !shouldBeSkipped) {\n        firstCharIds.push(nodeId);\n        firstChars.push(firstChar);\n      }\n    }); // Get start index for search based on position of currentItem\n\n    start = firstCharIds.indexOf(id) + 1;\n\n    if (start >= firstCharIds.length) {\n      start = 0;\n    } // Check remaining slots in the menu\n\n\n    index = findNextFirstChar(firstChars, start, lowercaseChar); // If not found in remaining slots, check from beginning\n\n    if (index === -1) {\n      index = findNextFirstChar(firstChars, 0, lowercaseChar);\n    } // If match was found...\n\n\n    if (index > -1) {\n      focus(event, firstCharIds[index]);\n    }\n  };\n  /*\r\n   * Expansion Helpers\r\n   */\n\n\n  var toggleExpansion = function toggleExpansion(event) {\n    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : focusedNodeId;\n    var newExpanded;\n\n    if (expanded.indexOf(value) !== -1) {\n      newExpanded = expanded.filter(function (id) {\n        return id !== value;\n      });\n    } else {\n      newExpanded = [value].concat(expanded);\n    }\n\n    if (onNodeToggle) {\n      onNodeToggle(event, newExpanded);\n    }\n\n    setExpandedState(newExpanded);\n  };\n\n  var expandAllSiblings = function expandAllSiblings(event, id) {\n    var map = nodeMap.current[id];\n    var siblings = getChildrenIds(map.parentId);\n    var diff = siblings.filter(function (child) {\n      return isExpandable(child) && !isExpanded(child);\n    });\n    var newExpanded = expanded.concat(diff);\n\n    if (diff.length > 0) {\n      setExpandedState(newExpanded);\n\n      if (onNodeToggle) {\n        onNodeToggle(event, newExpanded);\n      }\n    }\n  };\n  /*\r\n   * Selection Helpers\r\n   */\n\n\n  var lastSelectedNode = React.useRef(null);\n  var lastSelectionWasRange = React.useRef(false);\n  var currentRangeSelection = React.useRef([]);\n\n  var handleRangeArrowSelect = function handleRangeArrowSelect(event, nodes) {\n    var base = selected.slice();\n    var start = nodes.start,\n        next = nodes.next,\n        current = nodes.current;\n\n    if (!next || !current) {\n      return;\n    }\n\n    if (currentRangeSelection.current.indexOf(current) === -1) {\n      currentRangeSelection.current = [];\n    }\n\n    if (lastSelectionWasRange.current) {\n      if (currentRangeSelection.current.indexOf(next) !== -1) {\n        base = base.filter(function (id) {\n          return id === start || id !== current;\n        });\n        currentRangeSelection.current = currentRangeSelection.current.filter(function (id) {\n          return id === start || id !== current;\n        });\n      } else {\n        base.push(next);\n        currentRangeSelection.current.push(next);\n      }\n    } else {\n      base.push(next);\n      currentRangeSelection.current.push(current, next);\n    }\n\n    if (onNodeSelect) {\n      onNodeSelect(event, base);\n    }\n\n    setSelectedState(base);\n  };\n\n  var handleRangeSelect = function handleRangeSelect(event, nodes) {\n    var base = selected.slice();\n    var start = nodes.start,\n        end = nodes.end; // If last selection was a range selection ignore nodes that were selected.\n\n    if (lastSelectionWasRange.current) {\n      base = base.filter(function (id) {\n        return currentRangeSelection.current.indexOf(id) === -1;\n      });\n    }\n\n    var range = getNodesInRange(start, end);\n    range = range.filter(function (node) {\n      return !isDisabled(node);\n    });\n    currentRangeSelection.current = range;\n    var newSelected = base.concat(range);\n    newSelected = newSelected.filter(function (id, i) {\n      return newSelected.indexOf(id) === i;\n    });\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var handleMultipleSelect = function handleMultipleSelect(event, value) {\n    var newSelected;\n\n    if (selected.indexOf(value) !== -1) {\n      newSelected = selected.filter(function (id) {\n        return id !== value;\n      });\n    } else {\n      newSelected = [value].concat(selected);\n    }\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var handleSingleSelect = function handleSingleSelect(event, value) {\n    var newSelected = multiSelect ? [value] : value;\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var selectNode = function selectNode(event, id) {\n    var multiple = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (id) {\n      if (multiple) {\n        handleMultipleSelect(event, id);\n      } else {\n        handleSingleSelect(event, id);\n      }\n\n      lastSelectedNode.current = id;\n      lastSelectionWasRange.current = false;\n      currentRangeSelection.current = [];\n      return true;\n    }\n\n    return false;\n  };\n\n  var selectRange = function selectRange(event, nodes) {\n    var stacked = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var _nodes$start = nodes.start,\n        start = _nodes$start === void 0 ? lastSelectedNode.current : _nodes$start,\n        end = nodes.end,\n        current = nodes.current;\n\n    if (stacked) {\n      handleRangeArrowSelect(event, {\n        start: start,\n        next: end,\n        current: current\n      });\n    } else if (start != null && end != null) {\n      handleRangeSelect(event, {\n        start: start,\n        end: end\n      });\n    }\n\n    lastSelectionWasRange.current = true;\n  };\n\n  var rangeSelectToFirst = function rangeSelectToFirst(event, id) {\n    if (!lastSelectedNode.current) {\n      lastSelectedNode.current = id;\n    }\n\n    var start = lastSelectionWasRange.current ? lastSelectedNode.current : id;\n    selectRange(event, {\n      start: start,\n      end: getFirstNode()\n    });\n  };\n\n  var rangeSelectToLast = function rangeSelectToLast(event, id) {\n    if (!lastSelectedNode.current) {\n      lastSelectedNode.current = id;\n    }\n\n    var start = lastSelectionWasRange.current ? lastSelectedNode.current : id;\n    selectRange(event, {\n      start: start,\n      end: getLastNode()\n    });\n  };\n\n  var selectNextNode = function selectNextNode(event, id) {\n    if (!isDisabled(getNextNode(id))) {\n      selectRange(event, {\n        end: getNextNode(id),\n        current: id\n      }, true);\n    }\n  };\n\n  var selectPreviousNode = function selectPreviousNode(event, id) {\n    if (!isDisabled(getPreviousNode(id))) {\n      selectRange(event, {\n        end: getPreviousNode(id),\n        current: id\n      }, true);\n    }\n  };\n\n  var selectAllNodes = function selectAllNodes(event) {\n    selectRange(event, {\n      start: getFirstNode(),\n      end: getLastNode()\n    });\n  };\n  /*\r\n   * Mapping Helpers\r\n   */\n\n\n  var registerNode = React.useCallback(function (node) {\n    var id = node.id,\n        index = node.index,\n        parentId = node.parentId,\n        expandable = node.expandable,\n        idAttribute = node.idAttribute,\n        disabled = node.disabled;\n    nodeMap.current[id] = {\n      id: id,\n      index: index,\n      parentId: parentId,\n      expandable: expandable,\n      idAttribute: idAttribute,\n      disabled: disabled\n    };\n  }, []);\n  var unregisterNode = React.useCallback(function (id) {\n    var newMap = _extends({}, nodeMap.current);\n\n    delete newMap[id];\n    nodeMap.current = newMap;\n    setFocusedNodeId(function (oldFocusedNodeId) {\n      if (oldFocusedNodeId === id && treeRef.current === ownerDocument(treeRef.current).activeElement) {\n        return getChildrenIds(null)[0];\n      }\n\n      return oldFocusedNodeId;\n    });\n  }, []);\n  var mapFirstChar = React.useCallback(function (id, firstChar) {\n    firstCharMap.current[id] = firstChar;\n  }, []);\n  var unMapFirstChar = React.useCallback(function (id) {\n    var newMap = _extends({}, firstCharMap.current);\n\n    delete newMap[id];\n    firstCharMap.current = newMap;\n  }, []);\n  /**\r\n   * Event handlers and Navigation\r\n   */\n\n  var handleNextArrow = function handleNextArrow(event) {\n    if (isExpandable(focusedNodeId)) {\n      if (isExpanded(focusedNodeId)) {\n        focusNextNode(event, focusedNodeId);\n      } else if (!isDisabled(focusedNodeId)) {\n        toggleExpansion(event);\n      }\n    }\n\n    return true;\n  };\n\n  var handlePreviousArrow = function handlePreviousArrow(event) {\n    if (isExpanded(focusedNodeId) && !isDisabled(focusedNodeId)) {\n      toggleExpansion(event, focusedNodeId);\n      return true;\n    }\n\n    var parent = getParent(focusedNodeId);\n\n    if (parent) {\n      focus(event, parent);\n      return true;\n    }\n\n    return false;\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    var flag = false;\n    var key = event.key; // If the tree is empty there will be no focused node\n\n    if (event.altKey || event.currentTarget !== event.target || !focusedNodeId) {\n      return;\n    }\n\n    var ctrlPressed = event.ctrlKey || event.metaKey;\n\n    switch (key) {\n      case ' ':\n        if (!disableSelection && !isDisabled(focusedNodeId)) {\n          if (multiSelect && event.shiftKey) {\n            selectRange(event, {\n              end: focusedNodeId\n            });\n            flag = true;\n          } else if (multiSelect) {\n            flag = selectNode(event, focusedNodeId, true);\n          } else {\n            flag = selectNode(event, focusedNodeId);\n          }\n        }\n\n        event.stopPropagation();\n        break;\n\n      case 'Enter':\n        if (!isDisabled(focusedNodeId)) {\n          if (isExpandable(focusedNodeId)) {\n            toggleExpansion(event);\n            flag = true;\n          }\n        }\n\n        event.stopPropagation();\n        break;\n\n      case 'ArrowDown':\n        if (multiSelect && event.shiftKey && !disableSelection) {\n          selectNextNode(event, focusedNodeId);\n        }\n\n        focusNextNode(event, focusedNodeId);\n        flag = true;\n        break;\n\n      case 'ArrowUp':\n        if (multiSelect && event.shiftKey && !disableSelection) {\n          selectPreviousNode(event, focusedNodeId);\n        }\n\n        focusPreviousNode(event, focusedNodeId);\n        flag = true;\n        break;\n\n      case 'ArrowRight':\n        if (isRtl) {\n          flag = handlePreviousArrow(event);\n        } else {\n          flag = handleNextArrow(event);\n        }\n\n        break;\n\n      case 'ArrowLeft':\n        if (isRtl) {\n          flag = handleNextArrow(event);\n        } else {\n          flag = handlePreviousArrow(event);\n        }\n\n        break;\n\n      case 'Home':\n        if (multiSelect && ctrlPressed && event.shiftKey && !disableSelection && !isDisabled(focusedNodeId)) {\n          rangeSelectToFirst(event, focusedNodeId);\n        }\n\n        focusFirstNode(event);\n        flag = true;\n        break;\n\n      case 'End':\n        if (multiSelect && ctrlPressed && event.shiftKey && !disableSelection && !isDisabled(focusedNodeId)) {\n          rangeSelectToLast(event, focusedNodeId);\n        }\n\n        focusLastNode(event);\n        flag = true;\n        break;\n\n      default:\n        if (key === '*') {\n          expandAllSiblings(event, focusedNodeId);\n          flag = true;\n        } else if (multiSelect && ctrlPressed && key.toLowerCase() === 'a' && !disableSelection) {\n          selectAllNodes(event);\n          flag = true;\n        } else if (!ctrlPressed && !event.shiftKey && isPrintableCharacter(key)) {\n          focusByFirstCharacter(event, focusedNodeId, key);\n          flag = true;\n        }\n\n    }\n\n    if (flag) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  };\n\n  var handleFocus = function handleFocus(event) {\n    // if the event bubbled (which is React specific) we don't want to steal focus\n    if (event.target === event.currentTarget) {\n      var firstSelected = Array.isArray(selected) ? selected[0] : selected;\n      focus(event, firstSelected || getNavigableChildrenIds(null)[0]);\n    }\n\n    if (onFocus) {\n      onFocus(event);\n    }\n  };\n\n  var handleBlur = function handleBlur(event) {\n    setFocusedNodeId(null);\n\n    if (onBlur) {\n      onBlur(event);\n    }\n  };\n\n  var activeDescendant = nodeMap.current[focusedNodeId] ? nodeMap.current[focusedNodeId].idAttribute : null;\n  return /*#__PURE__*/_jsx(TreeViewContext.Provider, {\n    value: {\n      icons: {\n        defaultCollapseIcon: defaultCollapseIcon,\n        defaultExpandIcon: defaultExpandIcon,\n        defaultParentIcon: defaultParentIcon,\n        defaultEndIcon: defaultEndIcon\n      },\n      focus: focus,\n      toggleExpansion: toggleExpansion,\n      isExpanded: isExpanded,\n      isExpandable: isExpandable,\n      isFocused: isFocused,\n      isSelected: isSelected,\n      isDisabled: isDisabled,\n      selectNode: disableSelection ? noopSelection : selectNode,\n      selectRange: disableSelection ? noopSelection : selectRange,\n      multiSelect: multiSelect,\n      disabledItemsFocusable: disabledItemsFocusable,\n      mapFirstChar: mapFirstChar,\n      unMapFirstChar: unMapFirstChar,\n      registerNode: registerNode,\n      unregisterNode: unregisterNode,\n      treeId: treeId\n    },\n    children: /*#__PURE__*/_jsx(DescendantProvider, {\n      children: /*#__PURE__*/_jsx(TreeViewRoot, _extends({\n        role: \"tree\",\n        id: treeId,\n        \"aria-activedescendant\": activeDescendant,\n        \"aria-multiselectable\": multiSelect,\n        className: clsx(classes.root, className),\n        ref: handleRef,\n        tabIndex: 0,\n        onKeyDown: handleKeyDown,\n        onFocus: handleFocus,\n        onBlur: handleBlur,\n        ownerState: ownerState\n      }, other, {\n        children: children\n      }))\n    })\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? TreeView.propTypes\n/* remove-proptypes */\n= {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\r\n   * The content of the component.\r\n   */\n  children: PropTypes.node,\n\n  /**\r\n   * Override or extend the styles applied to the component.\r\n   */\n  classes: PropTypes.object,\n\n  /**\r\n   * @ignore\r\n   */\n  className: PropTypes.string,\n\n  /**\r\n   * The default icon used to collapse the node.\r\n   */\n  defaultCollapseIcon: PropTypes.node,\n\n  /**\r\n   * The default icon displayed next to a end node. This is applied to all\r\n   * tree nodes and can be overridden by the TreeItem `icon` prop.\r\n   */\n  defaultEndIcon: PropTypes.node,\n\n  /**\r\n   * Expanded node ids. (Uncontrolled)\r\n   * @default []\r\n   */\n  defaultExpanded: PropTypes.arrayOf(PropTypes.string),\n\n  /**\r\n   * The default icon used to expand the node.\r\n   */\n  defaultExpandIcon: PropTypes.node,\n\n  /**\r\n   * The default icon displayed next to a parent node. This is applied to all\r\n   * parent nodes and can be overridden by the TreeItem `icon` prop.\r\n   */\n  defaultParentIcon: PropTypes.node,\n\n  /**\r\n   * Selected node ids. (Uncontrolled)\r\n   * When `multiSelect` is true this takes an array of strings; when false (default) a string.\r\n   * @default []\r\n   */\n  defaultSelected: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]),\n\n  /**\r\n   * If `true`, will allow focus on disabled items.\r\n   * @default false\r\n   */\n  disabledItemsFocusable: PropTypes.bool,\n\n  /**\r\n   * If `true` selection is disabled.\r\n   * @default false\r\n   */\n  disableSelection: PropTypes.bool,\n\n  /**\r\n   * Expanded node ids. (Controlled)\r\n   */\n  expanded: PropTypes.arrayOf(PropTypes.string),\n\n  /**\r\n   * This prop is used to help implement the accessibility logic.\r\n   * If you don't provide this prop. It falls back to a randomly generated id.\r\n   */\n  id: PropTypes.string,\n\n  /**\r\n   * If true `ctrl` and `shift` will trigger multiselect.\r\n   * @default false\r\n   */\n  multiSelect: PropTypes.bool,\n\n  /**\r\n   * @ignore\r\n   */\n  onBlur: PropTypes.func,\n\n  /**\r\n   * @ignore\r\n   */\n  onFocus: PropTypes.func,\n\n  /**\r\n   * @ignore\r\n   */\n  onKeyDown: PropTypes.func,\n\n  /**\r\n   * Callback fired when tree items are focused.\r\n   *\r\n   * @param {React.SyntheticEvent} event The event source of the callback **Warning**: This is a generic event not a focus event.\r\n   * @param {string} value of the focused node.\r\n   */\n  onNodeFocus: PropTypes.func,\n\n  /**\r\n   * Callback fired when tree items are selected/unselected.\r\n   *\r\n   * @param {React.SyntheticEvent} event The event source of the callback\r\n   * @param {string[] | string} nodeIds Ids of the selected nodes. When `multiSelect` is true\r\n   * this is an array of strings; when false (default) a string.\r\n   */\n  onNodeSelect: PropTypes.func,\n\n  /**\r\n   * Callback fired when tree items are expanded/collapsed.\r\n   *\r\n   * @param {React.SyntheticEvent} event The event source of the callback.\r\n   * @param {array} nodeIds The ids of the expanded nodes.\r\n   */\n  onNodeToggle: PropTypes.func,\n\n  /**\r\n   * Selected node ids. (Controlled)\r\n   * When `multiSelect` is true this takes an array of strings; when false (default) a string.\r\n   */\n  selected: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]),\n\n  /**\r\n   * The system prop that allows defining system overrides as well as additional CSS styles.\r\n   */\n  sx: PropTypes.object\n} : void 0;\nexport default TreeView;","map":{"version":3,"sources":["C:/xampp/htdocs/isotracker-dev/isotracker-react/node_modules/@mui/lab/TreeView/TreeView.js"],"names":["_extends","_objectWithoutPropertiesLoose","_excluded","React","clsx","PropTypes","styled","useTheme","useThemeProps","unstable_composeClasses","composeClasses","useControlled","useForkRef","ownerDocument","unstable_useId","useId","TreeViewContext","DescendantProvider","getTreeViewUtilityClass","jsx","_jsx","useUtilityClasses","ownerState","classes","slots","root","TreeViewRoot","name","slot","overridesResolver","props","styles","padding","margin","listStyle","outline","isPrintableCharacter","string","length","match","findNextFirstChar","firstChars","startIndex","char","i","noopSelection","defaultDefaultExpanded","defaultDefaultSelected","TreeView","forwardRef","inProps","ref","children","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disabledItemsFocusable","disableSelection","expandedProp","expanded","idProp","id","multiSelect","onBlur","onFocus","onKeyDown","onNodeFocus","onNodeSelect","onNodeToggle","selectedProp","selected","other","theme","isRtl","direction","treeId","treeRef","useRef","handleRef","useState","focusedNodeId","setFocusedNodeId","nodeMap","firstCharMap","controlled","default","state","setExpandedState","setSelectedState","isExpanded","useCallback","Array","isArray","indexOf","isExpandable","current","expandable","isSelected","isDisabled","node","disabled","parentId","isFocused","getChildrenIds","Object","keys","map","key","filter","sort","a","b","index","child","getNavigableChildrenIds","childrenIds","getNextNode","siblings","nextSibling","getPreviousNode","nodeIndex","currentNode","pop","getLastNode","lastNode","getFirstNode","getParent","findOrderInTremauxTree","nodeAId","nodeBId","nodeA","nodeB","aFamily","bFamily","aAncestor","bAncestor","aAncestorIsCommon","bAncestorIsCommon","continueA","continueB","push","commonAncestor","ancestorFamily","aSide","bSide","getNodesInRange","first","last","nodes","focus","event","focusNextNode","focusPreviousNode","focusFirstNode","focusLastNode","focusByFirstCharacter","start","lowercaseChar","toLowerCase","firstCharIds","forEach","nodeId","firstChar","visible","shouldBeSkipped","toggleExpansion","value","newExpanded","concat","expandAllSiblings","diff","lastSelectedNode","lastSelectionWasRange","currentRangeSelection","handleRangeArrowSelect","base","slice","next","handleRangeSelect","end","range","newSelected","handleMultipleSelect","handleSingleSelect","selectNode","multiple","selectRange","stacked","rangeSelectToFirst","rangeSelectToLast","selectNextNode","selectPreviousNode","selectAllNodes","registerNode","idAttribute","unregisterNode","newMap","oldFocusedNodeId","activeElement","mapFirstChar","unMapFirstChar","handleNextArrow","handlePreviousArrow","parent","handleKeyDown","flag","altKey","currentTarget","target","ctrlPressed","ctrlKey","metaKey","shiftKey","stopPropagation","preventDefault","handleFocus","firstSelected","handleBlur","activeDescendant","Provider","icons","role","tabIndex","process","env","NODE_ENV","propTypes","object","arrayOf","oneOfType","bool","func","sx"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\r\nconst _excluded = [\"children\", \"className\", \"defaultCollapseIcon\", \"defaultEndIcon\", \"defaultExpanded\", \"defaultExpandIcon\", \"defaultParentIcon\", \"defaultSelected\", \"disabledItemsFocusable\", \"disableSelection\", \"expanded\", \"id\", \"multiSelect\", \"onBlur\", \"onFocus\", \"onKeyDown\", \"onNodeFocus\", \"onNodeSelect\", \"onNodeToggle\", \"selected\"];\r\nimport * as React from 'react';\r\nimport clsx from 'clsx';\r\nimport PropTypes from 'prop-types';\r\nimport { styled, useTheme, useThemeProps } from '@mui/material/styles';\r\nimport { unstable_composeClasses as composeClasses } from '@mui/core';\r\nimport { useControlled, useForkRef, ownerDocument, unstable_useId as useId } from '@mui/material/utils';\r\nimport TreeViewContext from './TreeViewContext';\r\nimport { DescendantProvider } from './descendants';\r\nimport { getTreeViewUtilityClass } from './treeViewClasses';\r\nimport { jsx as _jsx } from \"react/jsx-runtime\";\r\n\r\nconst useUtilityClasses = ownerState => {\r\n  const {\r\n    classes\r\n  } = ownerState;\r\n  const slots = {\r\n    root: ['root']\r\n  };\r\n  return composeClasses(slots, getTreeViewUtilityClass, classes);\r\n};\r\n\r\nconst TreeViewRoot = styled('ul', {\r\n  name: 'MuiTreeView',\r\n  slot: 'Root',\r\n  overridesResolver: (props, styles) => styles.root\r\n})({\r\n  padding: 0,\r\n  margin: 0,\r\n  listStyle: 'none',\r\n  outline: 0\r\n});\r\n\r\nfunction isPrintableCharacter(string) {\r\n  return string && string.length === 1 && string.match(/\\S/);\r\n}\r\n\r\nfunction findNextFirstChar(firstChars, startIndex, char) {\r\n  for (let i = startIndex; i < firstChars.length; i += 1) {\r\n    if (char === firstChars[i]) {\r\n      return i;\r\n    }\r\n  }\r\n\r\n  return -1;\r\n}\r\n\r\nfunction noopSelection() {\r\n  return false;\r\n}\r\n\r\nconst defaultDefaultExpanded = [];\r\nconst defaultDefaultSelected = [];\r\nconst TreeView = /*#__PURE__*/React.forwardRef(function TreeView(inProps, ref) {\r\n  const props = useThemeProps({\r\n    props: inProps,\r\n    name: 'MuiTreeView'\r\n  });\r\n\r\n  const {\r\n    children,\r\n    className,\r\n    defaultCollapseIcon,\r\n    defaultEndIcon,\r\n    defaultExpanded = defaultDefaultExpanded,\r\n    defaultExpandIcon,\r\n    defaultParentIcon,\r\n    defaultSelected = defaultDefaultSelected,\r\n    disabledItemsFocusable = false,\r\n    disableSelection = false,\r\n    expanded: expandedProp,\r\n    id: idProp,\r\n    multiSelect = false,\r\n    onBlur,\r\n    onFocus,\r\n    onKeyDown,\r\n    onNodeFocus,\r\n    onNodeSelect,\r\n    onNodeToggle,\r\n    selected: selectedProp\r\n  } = props,\r\n        other = _objectWithoutPropertiesLoose(props, _excluded);\r\n\r\n  const theme = useTheme();\r\n  const isRtl = theme.direction === 'rtl';\r\n\r\n  const ownerState = _extends({}, props, {\r\n    defaultExpanded,\r\n    defaultSelected,\r\n    disabledItemsFocusable,\r\n    disableSelection,\r\n    multiSelect\r\n  });\r\n\r\n  const classes = useUtilityClasses(ownerState);\r\n  const treeId = useId(idProp);\r\n  const treeRef = React.useRef(null);\r\n  const handleRef = useForkRef(treeRef, ref);\r\n  const [focusedNodeId, setFocusedNodeId] = React.useState(null);\r\n  const nodeMap = React.useRef({});\r\n  const firstCharMap = React.useRef({});\r\n  const [expanded, setExpandedState] = useControlled({\r\n    controlled: expandedProp,\r\n    default: defaultExpanded,\r\n    name: 'TreeView',\r\n    state: 'expanded'\r\n  });\r\n  const [selected, setSelectedState] = useControlled({\r\n    controlled: selectedProp,\r\n    default: defaultSelected,\r\n    name: 'TreeView',\r\n    state: 'selected'\r\n  });\r\n  /*\r\n   * Status Helpers\r\n   */\r\n\r\n  const isExpanded = React.useCallback(id => Array.isArray(expanded) ? expanded.indexOf(id) !== -1 : false, [expanded]);\r\n  const isExpandable = React.useCallback(id => nodeMap.current[id] && nodeMap.current[id].expandable, []);\r\n  const isSelected = React.useCallback(id => Array.isArray(selected) ? selected.indexOf(id) !== -1 : selected === id, [selected]);\r\n  const isDisabled = React.useCallback(id => {\r\n    let node = nodeMap.current[id]; // This can be called before the node has been added to the node map.\r\n\r\n    if (!node) {\r\n      return false;\r\n    }\r\n\r\n    if (node.disabled) {\r\n      return true;\r\n    }\r\n\r\n    while (node.parentId != null) {\r\n      node = nodeMap.current[node.parentId];\r\n\r\n      if (node.disabled) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  const isFocused = id => focusedNodeId === id;\r\n  /*\r\n   * Child Helpers\r\n   */\r\n  // Using Object.keys -> .map to mimic Object.values we should replace with Object.values() once we stop IE11 support.\r\n\r\n\r\n  const getChildrenIds = id => Object.keys(nodeMap.current).map(key => {\r\n    return nodeMap.current[key];\r\n  }).filter(node => node.parentId === id).sort((a, b) => a.index - b.index).map(child => child.id);\r\n\r\n  const getNavigableChildrenIds = id => {\r\n    let childrenIds = getChildrenIds(id);\r\n\r\n    if (!disabledItemsFocusable) {\r\n      childrenIds = childrenIds.filter(node => !isDisabled(node));\r\n    }\r\n\r\n    return childrenIds;\r\n  };\r\n  /*\r\n   * Node Helpers\r\n   */\r\n\r\n\r\n  const getNextNode = id => {\r\n    // If expanded get first child\r\n    if (isExpanded(id) && getNavigableChildrenIds(id).length > 0) {\r\n      return getNavigableChildrenIds(id)[0];\r\n    }\r\n\r\n    let node = nodeMap.current[id];\r\n\r\n    while (node != null) {\r\n      // Try to get next sibling\r\n      const siblings = getNavigableChildrenIds(node.parentId);\r\n      const nextSibling = siblings[siblings.indexOf(node.id) + 1];\r\n\r\n      if (nextSibling) {\r\n        return nextSibling;\r\n      } // If the sibling does not exist, go up a level to the parent and try again.\r\n\r\n\r\n      node = nodeMap.current[node.parentId];\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  const getPreviousNode = id => {\r\n    const node = nodeMap.current[id];\r\n    const siblings = getNavigableChildrenIds(node.parentId);\r\n    const nodeIndex = siblings.indexOf(id);\r\n\r\n    if (nodeIndex === 0) {\r\n      return node.parentId;\r\n    }\r\n\r\n    let currentNode = siblings[nodeIndex - 1];\r\n\r\n    while (isExpanded(currentNode) && getNavigableChildrenIds(currentNode).length > 0) {\r\n      currentNode = getNavigableChildrenIds(currentNode).pop();\r\n    }\r\n\r\n    return currentNode;\r\n  };\r\n\r\n  const getLastNode = () => {\r\n    let lastNode = getNavigableChildrenIds(null).pop();\r\n\r\n    while (isExpanded(lastNode)) {\r\n      lastNode = getNavigableChildrenIds(lastNode).pop();\r\n    }\r\n\r\n    return lastNode;\r\n  };\r\n\r\n  const getFirstNode = () => getNavigableChildrenIds(null)[0];\r\n\r\n  const getParent = id => nodeMap.current[id].parentId;\r\n  /**\r\n   * This is used to determine the start and end of a selection range so\r\n   * we can get the nodes between the two border nodes.\r\n   *\r\n   * It finds the nodes' common ancestor using\r\n   * a naive implementation of a lowest common ancestor algorithm\r\n   * (https://en.wikipedia.org/wiki/Lowest_common_ancestor).\r\n   * Then compares the ancestor's 2 children that are ancestors of nodeA and NodeB\r\n   * so we can compare their indexes to work out which node comes first in a depth first search.\r\n   * (https://en.wikipedia.org/wiki/Depth-first_search)\r\n   *\r\n   * Another way to put it is which node is shallower in a tr√©maux tree\r\n   * https://en.wikipedia.org/wiki/Tr%C3%A9maux_tree\r\n   */\r\n\r\n\r\n  const findOrderInTremauxTree = (nodeAId, nodeBId) => {\r\n    if (nodeAId === nodeBId) {\r\n      return [nodeAId, nodeBId];\r\n    }\r\n\r\n    const nodeA = nodeMap.current[nodeAId];\r\n    const nodeB = nodeMap.current[nodeBId];\r\n\r\n    if (nodeA.parentId === nodeB.id || nodeB.parentId === nodeA.id) {\r\n      return nodeB.parentId === nodeA.id ? [nodeA.id, nodeB.id] : [nodeB.id, nodeA.id];\r\n    }\r\n\r\n    const aFamily = [nodeA.id];\r\n    const bFamily = [nodeB.id];\r\n    let aAncestor = nodeA.parentId;\r\n    let bAncestor = nodeB.parentId;\r\n    let aAncestorIsCommon = bFamily.indexOf(aAncestor) !== -1;\r\n    let bAncestorIsCommon = aFamily.indexOf(bAncestor) !== -1;\r\n    let continueA = true;\r\n    let continueB = true;\r\n\r\n    while (!bAncestorIsCommon && !aAncestorIsCommon) {\r\n      if (continueA) {\r\n        aFamily.push(aAncestor);\r\n        aAncestorIsCommon = bFamily.indexOf(aAncestor) !== -1;\r\n        continueA = aAncestor !== null;\r\n\r\n        if (!aAncestorIsCommon && continueA) {\r\n          aAncestor = nodeMap.current[aAncestor].parentId;\r\n        }\r\n      }\r\n\r\n      if (continueB && !aAncestorIsCommon) {\r\n        bFamily.push(bAncestor);\r\n        bAncestorIsCommon = aFamily.indexOf(bAncestor) !== -1;\r\n        continueB = bAncestor !== null;\r\n\r\n        if (!bAncestorIsCommon && continueB) {\r\n          bAncestor = nodeMap.current[bAncestor].parentId;\r\n        }\r\n      }\r\n    }\r\n\r\n    const commonAncestor = aAncestorIsCommon ? aAncestor : bAncestor;\r\n    const ancestorFamily = getChildrenIds(commonAncestor);\r\n    const aSide = aFamily[aFamily.indexOf(commonAncestor) - 1];\r\n    const bSide = bFamily[bFamily.indexOf(commonAncestor) - 1];\r\n    return ancestorFamily.indexOf(aSide) < ancestorFamily.indexOf(bSide) ? [nodeAId, nodeBId] : [nodeBId, nodeAId];\r\n  };\r\n\r\n  const getNodesInRange = (nodeA, nodeB) => {\r\n    const [first, last] = findOrderInTremauxTree(nodeA, nodeB);\r\n    const nodes = [first];\r\n    let current = first;\r\n\r\n    while (current !== last) {\r\n      current = getNextNode(current);\r\n      nodes.push(current);\r\n    }\r\n\r\n    return nodes;\r\n  };\r\n  /*\r\n   * Focus Helpers\r\n   */\r\n\r\n\r\n  const focus = (event, id) => {\r\n    if (id) {\r\n      setFocusedNodeId(id);\r\n\r\n      if (onNodeFocus) {\r\n        onNodeFocus(event, id);\r\n      }\r\n    }\r\n  };\r\n\r\n  const focusNextNode = (event, id) => focus(event, getNextNode(id));\r\n\r\n  const focusPreviousNode = (event, id) => focus(event, getPreviousNode(id));\r\n\r\n  const focusFirstNode = event => focus(event, getFirstNode());\r\n\r\n  const focusLastNode = event => focus(event, getLastNode());\r\n\r\n  const focusByFirstCharacter = (event, id, char) => {\r\n    let start;\r\n    let index;\r\n    const lowercaseChar = char.toLowerCase();\r\n    const firstCharIds = [];\r\n    const firstChars = []; // This really only works since the ids are strings\r\n\r\n    Object.keys(firstCharMap.current).forEach(nodeId => {\r\n      const firstChar = firstCharMap.current[nodeId];\r\n      const map = nodeMap.current[nodeId];\r\n      const visible = map.parentId ? isExpanded(map.parentId) : true;\r\n      const shouldBeSkipped = disabledItemsFocusable ? false : isDisabled(nodeId);\r\n\r\n      if (visible && !shouldBeSkipped) {\r\n        firstCharIds.push(nodeId);\r\n        firstChars.push(firstChar);\r\n      }\r\n    }); // Get start index for search based on position of currentItem\r\n\r\n    start = firstCharIds.indexOf(id) + 1;\r\n\r\n    if (start >= firstCharIds.length) {\r\n      start = 0;\r\n    } // Check remaining slots in the menu\r\n\r\n\r\n    index = findNextFirstChar(firstChars, start, lowercaseChar); // If not found in remaining slots, check from beginning\r\n\r\n    if (index === -1) {\r\n      index = findNextFirstChar(firstChars, 0, lowercaseChar);\r\n    } // If match was found...\r\n\r\n\r\n    if (index > -1) {\r\n      focus(event, firstCharIds[index]);\r\n    }\r\n  };\r\n  /*\r\n   * Expansion Helpers\r\n   */\r\n\r\n\r\n  const toggleExpansion = (event, value = focusedNodeId) => {\r\n    let newExpanded;\r\n\r\n    if (expanded.indexOf(value) !== -1) {\r\n      newExpanded = expanded.filter(id => id !== value);\r\n    } else {\r\n      newExpanded = [value].concat(expanded);\r\n    }\r\n\r\n    if (onNodeToggle) {\r\n      onNodeToggle(event, newExpanded);\r\n    }\r\n\r\n    setExpandedState(newExpanded);\r\n  };\r\n\r\n  const expandAllSiblings = (event, id) => {\r\n    const map = nodeMap.current[id];\r\n    const siblings = getChildrenIds(map.parentId);\r\n    const diff = siblings.filter(child => isExpandable(child) && !isExpanded(child));\r\n    const newExpanded = expanded.concat(diff);\r\n\r\n    if (diff.length > 0) {\r\n      setExpandedState(newExpanded);\r\n\r\n      if (onNodeToggle) {\r\n        onNodeToggle(event, newExpanded);\r\n      }\r\n    }\r\n  };\r\n  /*\r\n   * Selection Helpers\r\n   */\r\n\r\n\r\n  const lastSelectedNode = React.useRef(null);\r\n  const lastSelectionWasRange = React.useRef(false);\r\n  const currentRangeSelection = React.useRef([]);\r\n\r\n  const handleRangeArrowSelect = (event, nodes) => {\r\n    let base = selected.slice();\r\n    const {\r\n      start,\r\n      next,\r\n      current\r\n    } = nodes;\r\n\r\n    if (!next || !current) {\r\n      return;\r\n    }\r\n\r\n    if (currentRangeSelection.current.indexOf(current) === -1) {\r\n      currentRangeSelection.current = [];\r\n    }\r\n\r\n    if (lastSelectionWasRange.current) {\r\n      if (currentRangeSelection.current.indexOf(next) !== -1) {\r\n        base = base.filter(id => id === start || id !== current);\r\n        currentRangeSelection.current = currentRangeSelection.current.filter(id => id === start || id !== current);\r\n      } else {\r\n        base.push(next);\r\n        currentRangeSelection.current.push(next);\r\n      }\r\n    } else {\r\n      base.push(next);\r\n      currentRangeSelection.current.push(current, next);\r\n    }\r\n\r\n    if (onNodeSelect) {\r\n      onNodeSelect(event, base);\r\n    }\r\n\r\n    setSelectedState(base);\r\n  };\r\n\r\n  const handleRangeSelect = (event, nodes) => {\r\n    let base = selected.slice();\r\n    const {\r\n      start,\r\n      end\r\n    } = nodes; // If last selection was a range selection ignore nodes that were selected.\r\n\r\n    if (lastSelectionWasRange.current) {\r\n      base = base.filter(id => currentRangeSelection.current.indexOf(id) === -1);\r\n    }\r\n\r\n    let range = getNodesInRange(start, end);\r\n    range = range.filter(node => !isDisabled(node));\r\n    currentRangeSelection.current = range;\r\n    let newSelected = base.concat(range);\r\n    newSelected = newSelected.filter((id, i) => newSelected.indexOf(id) === i);\r\n\r\n    if (onNodeSelect) {\r\n      onNodeSelect(event, newSelected);\r\n    }\r\n\r\n    setSelectedState(newSelected);\r\n  };\r\n\r\n  const handleMultipleSelect = (event, value) => {\r\n    let newSelected;\r\n\r\n    if (selected.indexOf(value) !== -1) {\r\n      newSelected = selected.filter(id => id !== value);\r\n    } else {\r\n      newSelected = [value].concat(selected);\r\n    }\r\n\r\n    if (onNodeSelect) {\r\n      onNodeSelect(event, newSelected);\r\n    }\r\n\r\n    setSelectedState(newSelected);\r\n  };\r\n\r\n  const handleSingleSelect = (event, value) => {\r\n    const newSelected = multiSelect ? [value] : value;\r\n\r\n    if (onNodeSelect) {\r\n      onNodeSelect(event, newSelected);\r\n    }\r\n\r\n    setSelectedState(newSelected);\r\n  };\r\n\r\n  const selectNode = (event, id, multiple = false) => {\r\n    if (id) {\r\n      if (multiple) {\r\n        handleMultipleSelect(event, id);\r\n      } else {\r\n        handleSingleSelect(event, id);\r\n      }\r\n\r\n      lastSelectedNode.current = id;\r\n      lastSelectionWasRange.current = false;\r\n      currentRangeSelection.current = [];\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  const selectRange = (event, nodes, stacked = false) => {\r\n    const {\r\n      start = lastSelectedNode.current,\r\n      end,\r\n      current\r\n    } = nodes;\r\n\r\n    if (stacked) {\r\n      handleRangeArrowSelect(event, {\r\n        start,\r\n        next: end,\r\n        current\r\n      });\r\n    } else if (start != null && end != null) {\r\n      handleRangeSelect(event, {\r\n        start,\r\n        end\r\n      });\r\n    }\r\n\r\n    lastSelectionWasRange.current = true;\r\n  };\r\n\r\n  const rangeSelectToFirst = (event, id) => {\r\n    if (!lastSelectedNode.current) {\r\n      lastSelectedNode.current = id;\r\n    }\r\n\r\n    const start = lastSelectionWasRange.current ? lastSelectedNode.current : id;\r\n    selectRange(event, {\r\n      start,\r\n      end: getFirstNode()\r\n    });\r\n  };\r\n\r\n  const rangeSelectToLast = (event, id) => {\r\n    if (!lastSelectedNode.current) {\r\n      lastSelectedNode.current = id;\r\n    }\r\n\r\n    const start = lastSelectionWasRange.current ? lastSelectedNode.current : id;\r\n    selectRange(event, {\r\n      start,\r\n      end: getLastNode()\r\n    });\r\n  };\r\n\r\n  const selectNextNode = (event, id) => {\r\n    if (!isDisabled(getNextNode(id))) {\r\n      selectRange(event, {\r\n        end: getNextNode(id),\r\n        current: id\r\n      }, true);\r\n    }\r\n  };\r\n\r\n  const selectPreviousNode = (event, id) => {\r\n    if (!isDisabled(getPreviousNode(id))) {\r\n      selectRange(event, {\r\n        end: getPreviousNode(id),\r\n        current: id\r\n      }, true);\r\n    }\r\n  };\r\n\r\n  const selectAllNodes = event => {\r\n    selectRange(event, {\r\n      start: getFirstNode(),\r\n      end: getLastNode()\r\n    });\r\n  };\r\n  /*\r\n   * Mapping Helpers\r\n   */\r\n\r\n\r\n  const registerNode = React.useCallback(node => {\r\n    const {\r\n      id,\r\n      index,\r\n      parentId,\r\n      expandable,\r\n      idAttribute,\r\n      disabled\r\n    } = node;\r\n    nodeMap.current[id] = {\r\n      id,\r\n      index,\r\n      parentId,\r\n      expandable,\r\n      idAttribute,\r\n      disabled\r\n    };\r\n  }, []);\r\n  const unregisterNode = React.useCallback(id => {\r\n    const newMap = _extends({}, nodeMap.current);\r\n\r\n    delete newMap[id];\r\n    nodeMap.current = newMap;\r\n    setFocusedNodeId(oldFocusedNodeId => {\r\n      if (oldFocusedNodeId === id && treeRef.current === ownerDocument(treeRef.current).activeElement) {\r\n        return getChildrenIds(null)[0];\r\n      }\r\n\r\n      return oldFocusedNodeId;\r\n    });\r\n  }, []);\r\n  const mapFirstChar = React.useCallback((id, firstChar) => {\r\n    firstCharMap.current[id] = firstChar;\r\n  }, []);\r\n  const unMapFirstChar = React.useCallback(id => {\r\n    const newMap = _extends({}, firstCharMap.current);\r\n\r\n    delete newMap[id];\r\n    firstCharMap.current = newMap;\r\n  }, []);\r\n  /**\r\n   * Event handlers and Navigation\r\n   */\r\n\r\n  const handleNextArrow = event => {\r\n    if (isExpandable(focusedNodeId)) {\r\n      if (isExpanded(focusedNodeId)) {\r\n        focusNextNode(event, focusedNodeId);\r\n      } else if (!isDisabled(focusedNodeId)) {\r\n        toggleExpansion(event);\r\n      }\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handlePreviousArrow = event => {\r\n    if (isExpanded(focusedNodeId) && !isDisabled(focusedNodeId)) {\r\n      toggleExpansion(event, focusedNodeId);\r\n      return true;\r\n    }\r\n\r\n    const parent = getParent(focusedNodeId);\r\n\r\n    if (parent) {\r\n      focus(event, parent);\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  const handleKeyDown = event => {\r\n    let flag = false;\r\n    const key = event.key; // If the tree is empty there will be no focused node\r\n\r\n    if (event.altKey || event.currentTarget !== event.target || !focusedNodeId) {\r\n      return;\r\n    }\r\n\r\n    const ctrlPressed = event.ctrlKey || event.metaKey;\r\n\r\n    switch (key) {\r\n      case ' ':\r\n        if (!disableSelection && !isDisabled(focusedNodeId)) {\r\n          if (multiSelect && event.shiftKey) {\r\n            selectRange(event, {\r\n              end: focusedNodeId\r\n            });\r\n            flag = true;\r\n          } else if (multiSelect) {\r\n            flag = selectNode(event, focusedNodeId, true);\r\n          } else {\r\n            flag = selectNode(event, focusedNodeId);\r\n          }\r\n        }\r\n\r\n        event.stopPropagation();\r\n        break;\r\n\r\n      case 'Enter':\r\n        if (!isDisabled(focusedNodeId)) {\r\n          if (isExpandable(focusedNodeId)) {\r\n            toggleExpansion(event);\r\n            flag = true;\r\n          }\r\n        }\r\n\r\n        event.stopPropagation();\r\n        break;\r\n\r\n      case 'ArrowDown':\r\n        if (multiSelect && event.shiftKey && !disableSelection) {\r\n          selectNextNode(event, focusedNodeId);\r\n        }\r\n\r\n        focusNextNode(event, focusedNodeId);\r\n        flag = true;\r\n        break;\r\n\r\n      case 'ArrowUp':\r\n        if (multiSelect && event.shiftKey && !disableSelection) {\r\n          selectPreviousNode(event, focusedNodeId);\r\n        }\r\n\r\n        focusPreviousNode(event, focusedNodeId);\r\n        flag = true;\r\n        break;\r\n\r\n      case 'ArrowRight':\r\n        if (isRtl) {\r\n          flag = handlePreviousArrow(event);\r\n        } else {\r\n          flag = handleNextArrow(event);\r\n        }\r\n\r\n        break;\r\n\r\n      case 'ArrowLeft':\r\n        if (isRtl) {\r\n          flag = handleNextArrow(event);\r\n        } else {\r\n          flag = handlePreviousArrow(event);\r\n        }\r\n\r\n        break;\r\n\r\n      case 'Home':\r\n        if (multiSelect && ctrlPressed && event.shiftKey && !disableSelection && !isDisabled(focusedNodeId)) {\r\n          rangeSelectToFirst(event, focusedNodeId);\r\n        }\r\n\r\n        focusFirstNode(event);\r\n        flag = true;\r\n        break;\r\n\r\n      case 'End':\r\n        if (multiSelect && ctrlPressed && event.shiftKey && !disableSelection && !isDisabled(focusedNodeId)) {\r\n          rangeSelectToLast(event, focusedNodeId);\r\n        }\r\n\r\n        focusLastNode(event);\r\n        flag = true;\r\n        break;\r\n\r\n      default:\r\n        if (key === '*') {\r\n          expandAllSiblings(event, focusedNodeId);\r\n          flag = true;\r\n        } else if (multiSelect && ctrlPressed && key.toLowerCase() === 'a' && !disableSelection) {\r\n          selectAllNodes(event);\r\n          flag = true;\r\n        } else if (!ctrlPressed && !event.shiftKey && isPrintableCharacter(key)) {\r\n          focusByFirstCharacter(event, focusedNodeId, key);\r\n          flag = true;\r\n        }\r\n\r\n    }\r\n\r\n    if (flag) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n\r\n    if (onKeyDown) {\r\n      onKeyDown(event);\r\n    }\r\n  };\r\n\r\n  const handleFocus = event => {\r\n    // if the event bubbled (which is React specific) we don't want to steal focus\r\n    if (event.target === event.currentTarget) {\r\n      const firstSelected = Array.isArray(selected) ? selected[0] : selected;\r\n      focus(event, firstSelected || getNavigableChildrenIds(null)[0]);\r\n    }\r\n\r\n    if (onFocus) {\r\n      onFocus(event);\r\n    }\r\n  };\r\n\r\n  const handleBlur = event => {\r\n    setFocusedNodeId(null);\r\n\r\n    if (onBlur) {\r\n      onBlur(event);\r\n    }\r\n  };\r\n\r\n  const activeDescendant = nodeMap.current[focusedNodeId] ? nodeMap.current[focusedNodeId].idAttribute : null;\r\n  return /*#__PURE__*/_jsx(TreeViewContext.Provider, {\r\n    value: {\r\n      icons: {\r\n        defaultCollapseIcon,\r\n        defaultExpandIcon,\r\n        defaultParentIcon,\r\n        defaultEndIcon\r\n      },\r\n      focus,\r\n      toggleExpansion,\r\n      isExpanded,\r\n      isExpandable,\r\n      isFocused,\r\n      isSelected,\r\n      isDisabled,\r\n      selectNode: disableSelection ? noopSelection : selectNode,\r\n      selectRange: disableSelection ? noopSelection : selectRange,\r\n      multiSelect,\r\n      disabledItemsFocusable,\r\n      mapFirstChar,\r\n      unMapFirstChar,\r\n      registerNode,\r\n      unregisterNode,\r\n      treeId\r\n    },\r\n    children: /*#__PURE__*/_jsx(DescendantProvider, {\r\n      children: /*#__PURE__*/_jsx(TreeViewRoot, _extends({\r\n        role: \"tree\",\r\n        id: treeId,\r\n        \"aria-activedescendant\": activeDescendant,\r\n        \"aria-multiselectable\": multiSelect,\r\n        className: clsx(classes.root, className),\r\n        ref: handleRef,\r\n        tabIndex: 0,\r\n        onKeyDown: handleKeyDown,\r\n        onFocus: handleFocus,\r\n        onBlur: handleBlur,\r\n        ownerState: ownerState\r\n      }, other, {\r\n        children: children\r\n      }))\r\n    })\r\n  });\r\n});\r\nprocess.env.NODE_ENV !== \"production\" ? TreeView.propTypes\r\n/* remove-proptypes */\r\n= {\r\n  // ----------------------------- Warning --------------------------------\r\n  // | These PropTypes are generated from the TypeScript type definitions |\r\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\r\n  // ----------------------------------------------------------------------\r\n\r\n  /**\r\n   * The content of the component.\r\n   */\r\n  children: PropTypes.node,\r\n\r\n  /**\r\n   * Override or extend the styles applied to the component.\r\n   */\r\n  classes: PropTypes.object,\r\n\r\n  /**\r\n   * @ignore\r\n   */\r\n  className: PropTypes.string,\r\n\r\n  /**\r\n   * The default icon used to collapse the node.\r\n   */\r\n  defaultCollapseIcon: PropTypes.node,\r\n\r\n  /**\r\n   * The default icon displayed next to a end node. This is applied to all\r\n   * tree nodes and can be overridden by the TreeItem `icon` prop.\r\n   */\r\n  defaultEndIcon: PropTypes.node,\r\n\r\n  /**\r\n   * Expanded node ids. (Uncontrolled)\r\n   * @default []\r\n   */\r\n  defaultExpanded: PropTypes.arrayOf(PropTypes.string),\r\n\r\n  /**\r\n   * The default icon used to expand the node.\r\n   */\r\n  defaultExpandIcon: PropTypes.node,\r\n\r\n  /**\r\n   * The default icon displayed next to a parent node. This is applied to all\r\n   * parent nodes and can be overridden by the TreeItem `icon` prop.\r\n   */\r\n  defaultParentIcon: PropTypes.node,\r\n\r\n  /**\r\n   * Selected node ids. (Uncontrolled)\r\n   * When `multiSelect` is true this takes an array of strings; when false (default) a string.\r\n   * @default []\r\n   */\r\n  defaultSelected: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]),\r\n\r\n  /**\r\n   * If `true`, will allow focus on disabled items.\r\n   * @default false\r\n   */\r\n  disabledItemsFocusable: PropTypes.bool,\r\n\r\n  /**\r\n   * If `true` selection is disabled.\r\n   * @default false\r\n   */\r\n  disableSelection: PropTypes.bool,\r\n\r\n  /**\r\n   * Expanded node ids. (Controlled)\r\n   */\r\n  expanded: PropTypes.arrayOf(PropTypes.string),\r\n\r\n  /**\r\n   * This prop is used to help implement the accessibility logic.\r\n   * If you don't provide this prop. It falls back to a randomly generated id.\r\n   */\r\n  id: PropTypes.string,\r\n\r\n  /**\r\n   * If true `ctrl` and `shift` will trigger multiselect.\r\n   * @default false\r\n   */\r\n  multiSelect: PropTypes.bool,\r\n\r\n  /**\r\n   * @ignore\r\n   */\r\n  onBlur: PropTypes.func,\r\n\r\n  /**\r\n   * @ignore\r\n   */\r\n  onFocus: PropTypes.func,\r\n\r\n  /**\r\n   * @ignore\r\n   */\r\n  onKeyDown: PropTypes.func,\r\n\r\n  /**\r\n   * Callback fired when tree items are focused.\r\n   *\r\n   * @param {React.SyntheticEvent} event The event source of the callback **Warning**: This is a generic event not a focus event.\r\n   * @param {string} value of the focused node.\r\n   */\r\n  onNodeFocus: PropTypes.func,\r\n\r\n  /**\r\n   * Callback fired when tree items are selected/unselected.\r\n   *\r\n   * @param {React.SyntheticEvent} event The event source of the callback\r\n   * @param {string[] | string} nodeIds Ids of the selected nodes. When `multiSelect` is true\r\n   * this is an array of strings; when false (default) a string.\r\n   */\r\n  onNodeSelect: PropTypes.func,\r\n\r\n  /**\r\n   * Callback fired when tree items are expanded/collapsed.\r\n   *\r\n   * @param {React.SyntheticEvent} event The event source of the callback.\r\n   * @param {array} nodeIds The ids of the expanded nodes.\r\n   */\r\n  onNodeToggle: PropTypes.func,\r\n\r\n  /**\r\n   * Selected node ids. (Controlled)\r\n   * When `multiSelect` is true this takes an array of strings; when false (default) a string.\r\n   */\r\n  selected: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]),\r\n\r\n  /**\r\n   * The system prop that allows defining system overrides as well as additional CSS styles.\r\n   */\r\n  sx: PropTypes.object\r\n} : void 0;\r\nexport default TreeView;"]},"metadata":{},"sourceType":"module"}